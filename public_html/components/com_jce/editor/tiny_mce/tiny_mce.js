/**
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 * License: http://tinymce.moxiecode.com/license
 * Contributing: http://tinymce.moxiecode.com/contributing
**/
!function(a){var b,c=/^\s*|\s*$/g,d="$1"==="B".replace(/A(.)|B/,"$1"),e={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){function b(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(i.suffix="_src"),(g=a.src.indexOf("?"))!=-1&&(i.query=a.src.substring(g+1)),i.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),f&&i.baseURL.indexOf("://")==-1&&0!==i.baseURL.indexOf("/")&&(i.baseURL=f+i.baseURL),i.baseURL):null}var c,d,e,f,g,h,i=this,j=document,k=navigator,l=k.userAgent;i.isIE11=l.indexOf("Trident/")!=-1&&(l.indexOf("rv:")!=-1||k.appName.indexOf("Netscape")!=-1),i.isOpera=a.opera&&opera.buildNumber,i.isWebKit=/WebKit/.test(l);var m=!i.isWebKit&&!i.isOpera&&/MSIE/gi.test(l)&&/Explorer/gi.test(k.appName);if(m=m&&/MSIE (\w+)\./.exec(l)[1],i.isIE11=l.indexOf("Trident/")!=-1&&(l.indexOf("rv:")!=-1||k.appName.indexOf("Netscape")!=-1)&&11,i.isIE=m||i.isIE11,i.isIE12=l.indexOf("Edge/")!=-1&&!i.isIE&&12,i.isIE12&&(i.isWebKit=!1),i.isIE6=i.isIE&&/MSIE [56]/.test(l),i.isIE7=i.isIE&&/MSIE [7]/.test(l),i.isIE8=i.isIE&&/MSIE [8]/.test(l),i.isIE9=i.isIE&&/MSIE [9]/.test(l),i.isIE10=i.isIE&&/MSIE [10]/.test(l),i.isGecko=!i.isWebKit&&!i.isIE11&&/Gecko/.test(l),i.isMac=l.indexOf("Mac")!=-1,i.isAir=/adobeair/i.test(l),i.isIDevice=/(iPad|iPhone)/.test(l),i.isIOS5=i.isIDevice&&l.match(/AppleWebKit\/(\d*)/)[1]>=534,a.tinyMCEPreInit)return i.suffix=tinyMCEPreInit.suffix,i.baseURL=tinyMCEPreInit.base,void(i.query=tinyMCEPreInit.query);for(i.suffix="",d=j.getElementsByTagName("base"),c=0;c<d.length;c++)h=d[c].href,h&&(/^https?:\/\/[^\/]+$/.test(h)&&(h+="/"),f=h?h.match(/.*\//)[0]:"");for(d=j.getElementsByTagName("script"),c=0;c<d.length;c++)if(b(d[c]))return;if(e=j.getElementsByTagName("head")[0])for(d=e.getElementsByTagName("script"),c=0;c<d.length;c++)if(b(d[c]))return},is:function(a,c){return c?!("array"!=c||!e.isArray(a))||typeof a==c:a!==b},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},makeMap:function(a,b,c){var d;for(a=a||[],b=b||",","string"==typeof a&&(a=a.split(b)),c=c||{},d=a.length;d--;)c[a[d]]={};return c},each:function(a,c,d){var e,f;if(!a)return 0;if(d=d||a,a.length!==b){for(e=0,f=a.length;e<f;e++)if(c.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return 0;return 1},map:function(a,b){var c=[];return e.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return e.each(a,function(a){b&&!b(a)||c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},extend:function(a,c){var d,e,f,g,h=arguments;for(d=1,e=h.length;d<e;d++){c=h[d];for(f in c)c.hasOwnProperty(f)&&(g=c[f],g!==b&&(a[f]=g))}return a},trim:function(a){return(a?""+a:"").replace(c,"")},create:function(a,b,c){var d,e,f,g,h,i=this,j=0;if(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),f=a[3].match(/(^|\.)(\w+)$/i)[2],e=i.createNS(a[3].replace(/\.\w+$/,""),c),!e[f]){if("static"==a[2])return e[f]=b,void(this.onCreate&&this.onCreate(a[2],a[3],e[f]));b[f]||(b[f]=function(){},j=1),e[f]=b[f],i.extend(e[f].prototype,b),a[5]&&(d=i.resolve(a[5]).prototype,g=a[5].match(/\.(\w+)$/i)[1],h=e[f],j?e[f]=function(){return d[g].apply(this,arguments)}:e[f]=function(){return this.parent=d[g],h.apply(this,arguments)},e[f].prototype[f]=e[f],i.each(d,function(a,b){e[f].prototype[b]=d[b]}),i.each(b,function(a,b){d[b]?e[f].prototype[b]=function(){return this.parent=d[b],a.apply(this,arguments)}:b!=f&&(e[f].prototype[b]=a)})),i.each(b.static,function(a,b){e[f][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],e[f].prototype)}},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,f){return b.call(d,a,f,c)!==!1&&void e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;for(c=c||a,b=b.split("."),d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;for(c=c||a,b=b.split("."),d=0,e=b.length;d<e&&(c=c[b[d]],c);d++);return c},addUnload:function(b,c){function d(){function b(){c.detachEvent("onstop",b),e&&e(),c=0}var c=document;"interactive"==c.readyState&&(c&&c.attachEvent("onstop",b),a.setTimeout(function(){c&&c.detachEvent("onstop",b)},0))}var e,f=this;return e=function(){var b,c,g=f.unloads;if(g){for(c in g)b=g[c],b&&b.func&&b.func.call(b.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",d),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),f.unloads=b=g=w=e=0,a.CollectGarbage&&CollectGarbage()}},b={func:b,scope:c||this},f.unloads?f.unloads.push(b):(a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",d)):a.addEventListener&&a.addEventListener("unload",e,!1),f.unloads=[b]),b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return!a||e.is(a,"array")?a:e.map(a.split(b||","),e.trim)},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,c,e){return d?e.replace(a,function(){var a,d=c,e=arguments;for(a=0;a<e.length-2;a++)d=e[a]===b?d.replace(new RegExp("\\$"+a,"g"),""):d.replace(new RegExp("\\$"+a,"g"),e[a]);return d}):e.replace(a,c)}};e._init(),a.tinymce=a.tinyMCE=e}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){var c=this,d={cb:a,scope:b||c.scope};return c.inDispatch?c.listeners=[d].concat(c.listeners):c.listeners.unshift(d),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=d,b.splice(e,1),!1}),c},dispatch:function(){var a,b,c,d=this,e=arguments,f=d.listeners;for(d.inDispatch=!0,b=0;b<f.length&&(c=f[b],a=c.cb.apply(c.scope,e.length>0?e:[c.scope]),a!==!1);b++);return d.inDispatch=!1,a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d,e,f=this;return b=tinymce.trim(b),c=f.settings=c||{},/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)?void(f.source=b):(0===b.indexOf("/")&&0!==b.indexOf("//")&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w\-]*:?\/\//.test(b)||(e=c.base_uri?c.base_uri.path:new tinymce.util.URI(location.href).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(e,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var d=b[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),f[a]=d}),d=c.base_uri,void(d&&(f.protocol||(f.protocol=d.protocol),f.userInfo||(f.userInfo=d.userInfo),f.port||"mce_host"!==f.host||(f.port=d.port),f.host&&"mce_host"!==f.host||(f.host=d.host),f.source="")))},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b,c=this;if("./"===a)return a;if(a=new tinymce.util.URI(a,{base_uri:c}),"mce_host"!=a.host&&c.host!=a.host&&a.host||c.port!=a.port||c.protocol!=a.protocol)return a.getURI();var d=c.getURI(),e=a.getURI();return d==e||"/"==d.charAt(d.length-1)&&d.substr(0,d.length-1)==e?d:(b=c.toRelPath(c.path,a.path),a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b)},toAbsolute:function(a,b){return a=new tinymce.util.URI(a,{base_uri:this}),a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d,e,f=0,g="";if(a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/"),a.length>=c.length)for(d=0,e=a.length;d<e;d++)if(d>=c.length||a[d]!=c[d]){f=d+1;break}if(a.length<c.length)for(d=0,e=c.length;d<e;d++)if(d>=a.length||a[d]!=c[d]){f=d+1;break}if(1===f)return b;for(d=0,e=a.length-(f-1);d<e;d++)g+="../";for(d=f-1,e=c.length;d<e;d++)g+=d!=f-1?"/"+c[d]:c[d];return g},toAbsPath:function(b,c){var d,e,f,g=0,h=[];for(e=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&h.push(a)}),b=h,d=c.length-1,h=[];d>=0;d--)0!==c[d].length&&"."!==c[d]&&(".."!==c[d]?g>0?g--:h.push(c[d]):g++);return d=b.length-g,f=d<=0?h.reverse().join("/"):b.slice(0,d).join("/")+"/"+h.reverse().join("/"),0!==f.indexOf("/")&&(f="/"+f),e&&f.lastIndexOf("/")!==f.length-1&&(f+=e),f},getURI:function(a){var b,c=this;return c.source&&!a||(b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b),c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c,d=this.get(b);return d&&a(d.split("&"),function(a){a=a.split("="),c=c||{},c[unescape(a[0])]=unescape(a[1])}),c},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b,c,d=document.cookie,e=a+"=";if(d){if(c=d.indexOf("; "+e),c==-1){if(c=d.indexOf(e),0!==c)return null}else c+=2;return b=d.indexOf(";",c),b==-1&&(b=d.length),unescape(d.substring(c+e.length,b))}},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1e3),this.set(a,"",d,b,c)}})}(),function(){function serialize(a,b){var c,d,e,f;if(b=b||'"',null==a)return"null";if(e=typeof a,"string"==e)return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return'"'===b&&"'"===a?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if("object"==e){if(a.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(a)){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(f in a)a.hasOwnProperty(f)&&(d+="function"!=typeof a[f]?(d.length>1?","+b:b)+f+b+":"+serialize(a[f],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(a){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function b(){!a.async||4==d.readyState||g++>1e4?(a.success&&g<1e4&&200==d.status?a.success.call(a.success_scope,""+d.responseText,d,a):a.error&&a.error.call(a.error_scope,g>1e4?"TIMED_OUT":"GENERAL",d,a),d=null):f.setTimeout(b,10)}function c(a){d=0;try{d=new ActiveXObject(a)}catch(a){}return d}var d,e,f=window,g=0;if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async!==!1,a.data=a.data||"",d=f.XMLHttpRequest?new XMLHttpRequest:c("Microsoft.XMLHTTP")||c("Msxml2.XMLHTTP")){if(d.overrideMimeType&&d.overrideMimeType(a.content_type),d.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&d.setRequestHeader("Content-Type",a.content_type),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(a.data),!a.async)return b();e=f.setTimeout(b,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),"undefined"==typeof a&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},static:{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey},metaKeyPressed:function(b){return a.isMac?b.metaKey:b.ctrlKey&&!b.altKey}}}(tinymce),tinymce.util.Quirks=function(a){function b(b,c){try{a.getDoc().execCommand(b,!1,c)}catch(a){}}function c(){var b=a.getDoc().documentMode;return b?b:6}function d(a){return a.isDefaultPrevented()}function e(){function b(b){function c(){if(3==h.nodeType){if(b&&i==h.length)return!0;if(!b&&0===i)return!0}}var d,e,f,g,h,i,j;d=H.getRng();var k=[d.startContainer,d.startOffset,d.endContainer,d.endOffset];if(d.collapsed||(b=!0),h=d[(b?"start":"end")+"Container"],i=d[(b?"start":"end")+"Offset"],3==h.nodeType&&(e=G.getParent(d.startContainer,G.isBlock),b&&(e=G.getNext(e,G.isBlock)),!e||!c()&&d.collapsed||(f=G.create("em",{id:"__mceDel"}),L(tinymce.grep(e.childNodes),function(a){f.appendChild(a)}),e.appendChild(f))),d=G.createRng(),d.setStart(k[0],k[1]),d.setEnd(k[2],k[3]),H.setRng(d),a.getDoc().execCommand(b?"ForwardDelete":"Delete",!1,null),f){for(g=H.getBookmark();j=G.get("__mceDel");)G.remove(j,!0);H.moveToBookmark(g)}}a.onKeyDown.add(function(a,c){var e;e=c.keyCode==F,d(c)||!e&&c.keyCode!=E||D.modifierPressed(c)||(c.preventDefault(),b(e))}),a.addCommand("Delete",function(){b()})}function f(){function b(a){var b=G.create("body"),c=a.cloneContents();return b.appendChild(c),H.serializer.serialize(b,{format:"html"})}function c(c){var d=b(c),e=G.createRng();e.selectNode(a.getBody());var f=b(e);return d===f}a.onKeyDown.add(function(a,b){var e,f=b.keyCode;if(!d(b)&&(f==F||f==E)){if(e=a.selection.isCollapsed(),e&&!G.isEmpty(a.getBody()))return;if(tinymce.isIE&&!e)return;if(!e&&!c(a.selection.getRng()))return;a.setContent(""),a.selection.setCursorLocation(a.getBody(),0),a.nodeChanged()}})}function g(){a.onKeyDown.add(function(a,b){!d(b)&&65==b.keyCode&&D.metaKeyPressed(b)&&(b.preventDefault(),a.execCommand("SelectAll"))})}function h(){a.settings.content_editable||(G.bind(a.getDoc(),"focusin",function(a){H.setRng(H.getRng())}),G.bind(a.getDoc(),"mousedown",function(b){b.target==a.getDoc().documentElement&&(a.getWin().focus(),H.setRng(H.getRng()))}))}function i(){a.onKeyDown.add(function(a,b){if(!d(b)&&b.keyCode===E&&H.isCollapsed()&&0===H.getRng(!0).startOffset){var c=H.getNode(),e=c.previousSibling;e&&e.nodeName&&"hr"===e.nodeName.toLowerCase()&&(G.remove(e),tinymce.dom.Event.cancel(b))}})}function j(){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(!d(b)&&"HTML"===b.target.nodeName){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function k(){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&H.getSel().setBaseAndExtent(b,0,b,1),"A"==b.nodeName&&G.hasClass(b,"mceItemAnchor")&&H.select(b),a.nodeChanged()})}function l(){function b(){var b=G.getAttribs(H.getStart().cloneNode(!1));return function(){var c=H.getStart();c!==a.getBody()&&(G.setAttrib(c,"style",null),L(b,function(a){c.setAttributeNode(a.cloneNode(!0))}))}}function c(){return!H.isCollapsed()&&G.getParent(H.getStart(),G.isBlock)!=G.getParent(H.getEnd(),G.isBlock)}function e(a,b){return b.preventDefault(),!1}a.onKeyPress.add(function(a,e){var f;if(!d(e)&&(8==e.keyCode||46==e.keyCode)&&c())return f=b(),a.getDoc().execCommand("delete",!1,null),f(),e.preventDefault(),!1}),G.bind(a.getDoc(),"cut",function(f){var g;!d(f)&&c()&&(g=b(),a.onKeyUp.addToTop(e),setTimeout(function(){g(),a.onKeyUp.remove(e)},0))})}function m(){var b,c;G.bind(a.getDoc(),"selectionchange",function(){c&&(clearTimeout(c),c=0),c=window.setTimeout(function(){var c=H.getRng();b&&tinymce.dom.RangeUtils.compareRanges(c,b)||(a.nodeChanged(),b=c)},50)})}function n(){document.body.setAttribute("role","application")}function o(){a.onKeyDown.add(function(a,b){if(!d(b)&&b.keyCode===E&&H.isCollapsed()&&0===H.getRng(!0).startOffset){var c=H.getNode().previousSibling;if(c&&c.nodeName&&"table"===c.nodeName.toLowerCase())return tinymce.dom.Event.cancel(b)}})}function p(){c()>7||(b("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),G.addClass(a.getBody(),"mceHideBrInPre"),J.addNodeFilter("pre",function(a,b){for(var c,d,e,f,g=a.length;g--;)for(c=a[g].getAll("br"),d=c.length;d--;)e=c[d],f=e.prev,f&&3===f.type&&"\n"!=f.value.charAt(f.value-1)?f.value+="\n":e.parent.insert(new tinymce.html.Node("#text",3),e,!0).value="\n"}),K.addNodeFilter("pre",function(a,b){for(var c,d,e,f,g=a.length;g--;)for(c=a[g].getAll("br"),d=c.length;d--;)e=c[d],f=e.prev,f&&3==f.type&&(f.value=f.value.replace(/\r?\n$/,""))}))}function q(){G.bind(a.getBody(),"mouseup",function(a){var b,c=H.getNode();"IMG"==c.nodeName&&((b=G.getStyle(c,"width"))&&(G.setAttrib(c,"width",b.replace(/[^0-9%]+/g,"")),G.setStyle(c,"width","")),(b=G.getStyle(c,"height"))&&(G.setAttrib(c,"height",b.replace(/[^0-9%]+/g,"")),G.setStyle(c,"height","")))})}function r(){a.onKeyDown.add(function(a,b){var c,e,f,g,h,i,j;if(c=b.keyCode==F,!d(b)&&(c||b.keyCode==E)&&!D.modifierPressed(b)&&(e=H.getRng(),f=e.startContainer,g=e.startOffset,j=e.collapsed,3==f.nodeType&&f.nodeValue.length>0&&(0===g&&!j||j&&g===(c?0:1)))){if(i=f.previousSibling,i&&"IMG"==i.nodeName)return;nonEmptyElements=a.schema.getNonEmptyElements(),b.preventDefault(),h=G.create("br",{id:"__tmp"}),f.parentNode.insertBefore(h,f),a.getDoc().execCommand(c?"ForwardDelete":"Delete",!1,null),f=H.getRng().startContainer,i=f.previousSibling,i&&1==i.nodeType&&!G.isBlock(i)&&G.isEmpty(i)&&!nonEmptyElements[i.nodeName.toLowerCase()]&&G.remove(i),G.remove("__tmp")}})}function s(){a.onKeyDown.add(function(a,b){var c,e,f,g,h;if(!d(b)&&b.keyCode==D.BACKSPACE&&(c=H.getRng(),e=c.startContainer,f=c.startOffset,g=G.getRoot(),h=e,c.collapsed&&0===f)){for(;h&&h.parentNode&&h.parentNode.firstChild==h&&h.parentNode!=g;)h=h.parentNode;"BLOCKQUOTE"===h.tagName&&(a.formatter.toggle("blockquote",null,h),c=G.createRng(),c.setStart(e,0),c.setEnd(e,0),H.setRng(c))}})}function t(){function c(){a._refreshContentEditable(),b("StyleWithCSS",!1),b("enableInlineTableEditing",!1),I.object_resizing||b("enableObjectResizing",!1)}I.readonly||(a.onBeforeExecCommand.add(c),a.onMouseDown.add(c))}function u(){function b(a,b){L(G.select("a"),function(a){var b=a.parentNode,c=G.getRoot();if(b.lastChild===a){for(;b&&!G.isBlock(b);){if(b.parentNode.lastChild!==b||b===c)return;b=b.parentNode}G.add(b,"br",{"data-mce-bogus":1})}})}a.onExecCommand.add(function(a,c){"CreateLink"===c&&b(a)}),a.onSetContent.add(H.onSetContent.add(b))}function v(){I.forced_root_block&&a.onInit.add(function(){b("DefaultParagraphSeparator",I.forced_root_block)})}function w(){function b(b,c){b&&c.initial||a.execCommand("mceRepaint")}a.onUndo.add(b),a.onRedo.add(b),a.onSetContent.add(b)}function x(){a.onKeyDown.add(function(a,b){var c;d(b)||b.keyCode!=E||(c=a.getDoc().selection.createRange(),c&&c.item&&(b.preventDefault(),a.undoManager.beforeChange(),G.remove(c.item(0)),a.undoManager.add()))})}function y(){var b;c()>=10&&(b="",L("p div h1 h2 h3 h4 h5 h6".split(" "),function(a,c){b+=(c>0?",":"")+a+":empty"}),a.contentStyles.push(b+"{padding-right: 1px !important}"))}function z(){function c(a){var b,c;b=a.screenX-m,c=a.screenY-n,s=b*l[2]+o,t=c*l[3]+p,s=s<5?5:s,t=t<5?5:t,(D.modifierPressed(a)||"IMG"==j.nodeName&&l[2]*l[3]!==0)&&(s=Math.round(t/q),t=Math.round(s*q)),G.setStyles(k,{width:s,height:t}),l[2]<0&&k.clientWidth<=s&&G.setStyle(k,"left",h+(o-s)),l[3]<0&&k.clientHeight<=t&&G.setStyle(k,"top",i+(p-t))}function d(){function b(b,c){c&&(j.style[b]||!a.schema.isValid(j.nodeName.toLowerCase(),b)?G.setStyle(j,b,c):G.setAttrib(j,b,c))}b("width",s),b("height",t),G.unbind(v,"mousemove",c),G.unbind(v,"mouseup",d),u!=v&&(G.unbind(u,"mousemove",c),G.unbind(u,"mouseup",d)),G.remove(k),e(j)}function e(a){var b,e,g;f(),b=G.getPos(a),h=b.x,i=b.y,e=a.offsetWidth,g=a.offsetHeight,j!=a&&(j=a,s=t=0),L(r,function(a,b){var f;f=G.get("mceResizeHandle"+b),f?G.show(f):(f=G.add(v.documentElement,"div",{id:"mceResizeHandle"+b,class:"mceResizeHandle",style:"cursor:"+b+"-resize; margin:0; padding:0"}),G.bind(f,"mousedown",function(b){b.preventDefault(),d(),m=b.screenX,n=b.screenY,o=j.clientWidth,p=j.clientHeight,q=p/o,l=a,k=j.cloneNode(!0),G.addClass(k,"mceClonedResizable"),G.setStyles(k,{left:h,top:i,margin:0}),v.documentElement.appendChild(k),G.bind(v,"mousemove",c),G.bind(v,"mouseup",d),u!=v&&(G.bind(u,"mousemove",c),G.bind(u,"mouseup",d))})),G.setStyles(f,{left:e*a[0]+h-f.offsetWidth/2,top:g*a[1]+i-f.offsetHeight/2})}),tinymce.isOpera||"IMG"!=j.nodeName||j.setAttribute("data-mce-selected","1")}function f(){j&&j.removeAttribute("data-mce-selected");for(var a in r)G.hide("mceResizeHandle"+a)}function g(){var a=G.getParent(H.getNode(),"table,img");L(G.select("img[data-mce-selected]"),function(a){a.removeAttribute("data-mce-selected")}),a?e(a):f()}var h,i,j,k,l,m,n,o,p,q,r,s,t,u=document,v=a.getDoc();I.object_resizing&&I.webkit_fake_resize!==!1&&(b("enableObjectResizing",!1),r={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},a.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),a.onNodeChange.add(g),G.bind(v,"selectionchange",g),a.serializer.addAttributeFilter("data-mce-selected",function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}))}function A(){c()<9&&(J.addNodeFilter("noscript",function(a){for(var b,c,d=a.length;d--;)b=a[d],c=b.firstChild,c&&b.attr("data-mce-innertext",c.value)}),K.addNodeFilter("noscript",function(a){for(var b,c,d,e=a.length;e--;)b=a[e],c=a[e].firstChild,c?c.value=tinymce.html.Entities.decode(c.value):(d=b.attributes.map["data-mce-innertext"],d&&(b.attr("data-mce-innertext",null),c=new tinymce.html.Node("#text",3),c.value=d,c.raw=!0,b.append(c)))}))}function B(){a.contentStyles.push("body {min-height: 100px}"),a.onClick.add(function(b,c){"HTML"==c.target.nodeName&&(a.execCommand("SelectAll"),a.selection.collapse(!0),a.nodeChanged())})}function C(){a.onInit.add(function(){var b;a.getBody().addEventListener("mscontrolselect",function(c){setTimeout(function(){a.selection.getNode()!=c.target&&(b=a.selection.getRng(),H.fakeRng=a.dom.createRng(),H.fakeRng.setStartBefore(c.target),H.fakeRng.setEndAfter(c.target))},0),"IMG"==c.target.tagName&&(c.preventDefault(),window.setTimeout(function(){a.selection.select(c.target)},0))},!1),a.getDoc().addEventListener("selectionchange",function(c){b&&!tinymce.dom.RangeUtils.compareRanges(a.selection.getRng(),b)&&(H.fakeRng=b=null)},!1)}),tinymce.isIE12&&a.onClick.add(function(a,b){b=b.target,/^(IMG|HR|TABLE)$/.test(b.nodeName)&&H.select(b),"A"==b.nodeName&&G.hasClass(b,"mceItemAnchor")&&H.select(b),a.nodeChanged()})}var D=tinymce.VK,E=D.BACKSPACE,F=D.DELETE,G=a.dom,H=a.selection,I=a.settings,J=a.parser,K=a.serializer,L=tinymce.each;o(),s(),f(),tinymce.isWebKit&&(r(),e(),h(),k(),v(),tinymce.isIDevice?m():(z(),g())),tinymce.isIE&&!tinymce.isIE11&&(i(),n(),p(),q(),x(),y(),A()),tinymce.isIE11&&(B(),C()),tinymce.isIE12&&(C(),z()),tinymce.isGecko&&!tinymce.isIE11&&(i(),j(),l(),t(),u(),w()),tinymce.isOpera&&z()},function(a){function b(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function c(a,b){var c,d,f,g={};if(a){for(a=a.split(","),b=b||10,c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),e[d]||(f="&"+a[c+1]+";",g[d]=f,g[f]=d);return g}}var d,e,f,g=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[<>&\"\']/g,j=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,k={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};e={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},f={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},d=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?g:h,function(a){return e[a]||a})},encodeAllRaw:function(a){return(""+a).replace(i,function(a){return e[a]||a})},encodeNumeric:function(a,b){return a.replace(b?g:h,function(a){return a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":e[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,b,c){return c=c||d,a.replace(b?g:h,function(a){return e[a]||c[a]||a})},getEncodeFunc:function(b,f){function i(a,b){return a.replace(b?g:h,function(a){return e[a]||f[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return k.encodeNamed(a,b,f)}var k=a.html.Entities;return f=c(f)||d,b=a.makeMap(b.replace(/\+/g,",")),b.named&&b.numeric?i:b.named?f?j:k.encodeNamed:b.numeric?k.encodeNumeric:k.encodeRaw},decode:function(a){return a.replace(j,function(a,c){return c?(c="x"===c.charAt(0).toLowerCase()?parseInt(c.substr(1),16):parseInt(c,10),c>65535?(c-=65536,String.fromCharCode(55296+(c>>10),56320+(1023&c))):k[c]||String.fromCharCode(c)):f[a]||d[a]||b(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function c(a,b,c,d){function e(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var d,e,f,g,h,i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,j=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,k=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,m={},n="\ufeff";for(a=a||{},b&&(g=b.getValidStyles(),h=b.getInvalidStyles()),f=("\\\" \\' \\; \\: ; : "+n).split(" "),e=0;e<f.length;e++)m[f[e]]=n+e,m[n+e]=f[e];return{toHex:function(a){return a.replace(i,c)},parse:function(b){function d(a,b,c){var d,f,g,h;if(d=t[a+"-top"+b],d&&(f=t[a+"-right"+b],f&&(g=t[a+"-bottom"+b],g&&(h=t[a+"-left"+b])))){var i=[d,f,g,h];for(e=i.length-1;e--&&i[e]===i[e+1];);e>-1&&c||(t[a+b]=e==-1?i[0]:i.join(" "),delete t[a+"-top"+b],delete t[a+"-right"+b],delete t[a+"-bottom"+b],delete t[a+"-left"+b])}}function f(a){var b,c=t[a];if(c){for(c=c.split(" "),b=c.length;b--;)if(c[b]!==c[0])return!1;return t[a]=c[0],!0}}function g(a,b,c,d){f(b)&&f(c)&&f(d)&&(t[a]=t[b]+" "+t[c]+" "+t[d],delete t[b],delete t[c],delete t[d])}function h(a){return s=!0,m[a]}function n(a,b){return s&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return m[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}function o(b,c,d,e,f,g){if(f=f||g)return f=n(f),"'"+f.replace(/\'/g,"\\'")+"'";if(c=n(c||d||e),!a.allow_script_urls){var h=c.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(h))return"";if(!a.allow_svg_data_urls&&/^data:image\/svg/i.test(h))return""}return u&&(c=u.call(v,c,"style")),"url('"+c.replace(/\'/g,"\\'")+"')"}var p,q,r,s,t={},u=a.url_converter,v=a.url_converter_scope||this;if(b){for(b=b.replace(/[\u0000-\u001F]/g,""),b=b.replace(/\\[\"\';:\uFEFF]/g,h).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,h)});p=k.exec(b);){if(q=p[1].replace(l,"").toLowerCase(),r=p[2].replace(l,""),r=r.replace(/\\[0-9a-f]+/g,function(a){return String.fromCharCode(parseInt(a.substr(1),16))}),q&&r.length>0){if(!a.allow_script_urls&&("behavior"==q||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===q&&"700"===r?r="bold":"color"!==q&&"background-color"!==q||(r=r.toLowerCase()),r=r.replace(i,c),r=r.replace(j,o),t[q]=s?n(r,!0):r}k.lastIndex=p.index+p[0].length}d("border","",!0),d("border","-width"),d("border","-color"),d("border","-style"),d("padding",""),d("margin",""),g("border","border-width","border-style","border-color"),"medium none"===t.border&&delete t.border,"none"===t["border-image"]&&delete t["border-image"]}return t},serialize:function(a,b){function c(b){var c,e,f,h;if(c=g[b])for(e=0,f=c.length;e<f;e++)b=c[e],h=a[b],h!==d&&h.length>0&&(j+=(j.length>0?" ":"")+b+": "+h+";")}function e(a,b){var c;return c=h["*"],(!c||!c[a])&&(c=h[b],!c||!c[a])}var f,i,j="";if(b&&g)c("*"),c(b);else for(f in a)i=a[f],i!==d&&i.length>0&&(h&&!e(f,b)||(j+=(j.length>0?" ":"")+f+": "+i+";"));return j}}},function(a){function b(a,b){return a?a.split(b||" "):[]}function c(a){function c(a,c,d){function e(a,b){var c,d,e={};for(c=0,d=a.length;c<d;c++)e[a[c]]=b||{};return e}var h,i,j,k=arguments;for(d=d||[],c=c||"","string"==typeof d&&(d=b(d)),i=3;i<k.length;i++)"string"==typeof k[i]&&(k[i]=b(k[i])),d.push.apply(d,k[i]);for(a=b(a),h=a.length;h--;)j=[].concat(b(c),g),n[a[h]]={attributes:e(j),attributesOrder:j,children:e(d,f)}}function d(a,c){var d,e,f,g;for(a=b(a),d=a.length,c=b(c);d--;)for(e=n[a[d]],f=0,g=c.length;f<g;f++)e.attributes[c[f]]={},e.attributesOrder.push(c[f])}var g,i,j,k,l,m,n={};return e[a]?e[a]:(g=b("id accesskey class dir lang style tabindex title"),g.push.apply(g,b("onclick ondblclick onmousedown onmouseup onmouseover onmousemove onmouseout onkeypress onkeydown onkeyup")),"html4"!=a&&g.push.apply(g,b("ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop onmousewheel onscroll")),g.push.apply(g,b("itemscope itemtype itemid itemprop itemref")),i=b("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),j=b("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=a&&(g.push.apply(g,b("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),i.push.apply(i,b("article aside details dialog figure header footer hgroup section nav")),j.push.apply(j,b("audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"))),
"html5-strict"!=a&&(g.push("xml:lang"),m=b("acronym applet basefont big font strike tt"),j.push.apply(j,m),h(m,function(a){c(a,"",j)}),l=b("center dir isindex noframes"),i.push.apply(i,l),k=[].concat(i,j),h(l,function(a){c(a,"",k)})),k=k||[].concat(i,j),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",k),c("address dt dd div caption","",k),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",j),c("blockquote","cite",k),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",k),c("dl","","dt dd"),c("a","href target rel media hreflang type",j),c("q","cite",j),c("ins del","cite datetime",k),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",k),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",k,"param"),c("param","name value"),c("map","name",k,"area"),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+("html4"==a?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",k),c("th","colspan rowspan headers scope abbr",k),c("form","accept-charset action autocomplete enctype method name novalidate target",k),c("fieldset","disabled form name",k,"legend"),c("label","form for",j),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==a?k:j),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",k,"li"),c("noscript","",k),"html4"!=a&&(c("wbr"),c("ruby","",j,"rt rp"),c("figcaption","",k),c("mark rt rp summary bdi","",j),c("canvas","width height",k),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",k,"track source"),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",k,"track source"),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",j,"option"),c("article section nav aside header footer","",k),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",k,"figcaption"),c("time","datetime",j),c("dialog","open",k),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",j),c("progress","value max",j),c("meter","value min max low high optimum",j),c("details","open",k,"summary"),c("keygen","autofocus challenge disabled form keytype name")),d("form","onblur onchange onfocus onselect onsubmit"),"html5-strict"!=a&&(d("script","language xml:space"),d("style","xml:space"),d("object","declare classid code codebase codetype archive standby align border hspace vspace"),d("embed","align name hspace vspace"),d("param","valuetype type"),d("a","charset name rev shape coords"),d("br","clear"),d("applet","codebase archive code object alt name width height align hspace vspace"),d("img","name longdesc align border hspace vspace"),d("iframe","longdesc frameborder marginwidth marginheight scrolling align"),d("font basefont","size color face"),d("input","usemap align"),d("select","onchange"),d("textarea"),d("h1 h2 h3 h4 h5 h6 div p legend caption","align"),d("ul","type compact"),d("li","type"),d("ol dl menu dir","compact"),d("pre","width xml:space"),d("hr","align noshade size width"),d("isindex","prompt"),d("table","summary width frame rules cellspacing cellpadding align bgcolor"),d("col","width align char charoff valign"),d("colgroup","width align char charoff valign"),d("thead","align char charoff valign"),d("tr","align char charoff valign bgcolor"),d("th","axis align char charoff valign nowrap bgcolor width height"),d("form","accept"),d("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),d("tfoot","align char charoff valign"),d("tbody","align char charoff valign"),d("area","nohref"),d("body","background bgcolor text link vlink alink"),d("form","onreset")),"html4"!=a&&(d("input button select textarea","autofocus"),d("input textarea","placeholder"),d("a","download"),d("link script img","crossorigin"),d("iframe","sandbox seamless allowfullscreen"),d("form","oncontextmenu onformchange onforminput oninput oninvalid"),d("video audio","onabort oncanplay oncanplaythrough ondurationchange onemptied onended onerror onloadeddata onloadedmetadata onloadstart onpause onplay onplaying onprogress onratechange onreadystatechange onseeked onseeking onstalled onsuspend ontimeupdate onvolumechange onwaiting")),h(b("a form meter progress dfn"),function(a){n[a]&&delete n[a].children[a]}),delete n.caption.children.table,e[a]=n,n)}function d(a,b){var c;return a&&(c={},"string"==typeof a&&(a={"*":a}),h(a,function(a,d){c[d]=c[d.toUpperCase()]="map"==b?g(a,/[, ]/):j(a,/[, ]/)})),c}var e={},f={},g=a.makeMap,h=a.each,i=a.extend,j=a.explode,k=a.inArray;a.html.Schema=function(a){function f(b,c,d){var f=a[b];return f?f=g(f,/[, ]/,g(f.toUpperCase(),/[, ]/)):(f=e[b],f||(f=g(c," ",g(c.toUpperCase()," ")),f=i(f,d),e[b]=f)),f}function l(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function m(a){var c,d,e,f,h,i,j,m,n,o,p,q,r,s,t,u,v,w,x,y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,z=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,A=/[*?+]/;if(a)for(a=b(a,","),F["@"]&&(u=F["@"].attributes,v=F["@"].attributesOrder),c=0,d=a.length;c<d;c++)if(h=y.exec(a[c])){if(s=h[1],n=h[2],t=h[3],m=h[5],q={},r=[],i={attributes:q,attributesOrder:r},"#"===s&&(i.paddEmpty=!0),"-"===s&&(i.removeEmpty=!0),"!"===h[4]&&(i.removeEmptyAttrs=!0),u){for(w in u)q[w]=u[w];r.push.apply(r,v)}if(m)for(m=b(m,"|"),e=0,f=m.length;e<f;e++)if(h=z.exec(m[e])){if(j={},p=h[1],o=h[2].replace(/::/g,":"),s=h[3],x=h[4],"!"===p&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(o),j.required=!0),"-"===p){delete q[o],r.splice(k(r,o),1);continue}s&&("="===s&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:o,value:x}),j.defaultValue=x),":"===s&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:o,value:x}),j.forcedValue=x),"<"===s&&(j.validValues=g(x,"?"))),A.test(o)?(i.attributePatterns=i.attributePatterns||[],j.pattern=l(o),i.attributePatterns.push(j)):(q[o]||r.push(o),q[o]=j)}u||"@"!=n||(u=q,v=r),t&&(i.outputName=n,F[t]=i),A.test(n)?(i.pattern=l(n),H.push(i)):F[n]=i}}function n(a){F={},H=[],m(a),h(t,function(a,b){G[b]=a.children})}function o(a){var c=/^(~)?(.+)$/;a&&(e.text_block_elements=e.block_elements=null,h(b(a,","),function(a){var b=c.exec(a),d="~"===b[1],e=d?"span":"div",f=b[2];if(G[f]=G[e],I[f]=e,d||(z[f.toUpperCase()]={},z[f]={}),!F[f]){var g=F[e];g=i({},g),delete g.removeEmptyAttrs,delete g.removeEmpty,F[f]=g}h(G,function(a,b){a[e]&&(G[b]=a=i({},G[b]),a[f]=a[e])})}))}function p(a){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&h(b(a,","),function(a){var d,e,f=c.exec(a);f&&(e=f[1],d=e?G[f[2]]:G[f[2]]={"#comment":{}},d=G[f[2]],h(b(f[3],"|"),function(a){"-"===e?(G[f[2]]=d=i({},G[f[2]]),delete d[a]):d[a]={}}))})}function q(a){var b,c=F[a];if(c)return c;for(b=H.length;b--;)if(c=H[b],c.pattern.test(a))return c}var r,s,t,u,v,w,x,y,z,A,B,C,D,E=this,F={},G={},H=[],I={},J={};a=a||{},t=c(a.schema),a.verify_html===!1&&(a.valid_elements="*[*]"),r=d(a.valid_styles),s=d(a.invalid_styles,"map"),y=d(a.valid_classes,"map"),u=f("whitespace_elements","pre script noscript style textarea video audio iframe object"),v=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),w=f("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls itemscope"),A=f("non_empty_elements","td th iframe video audio object script",w),B=f("move_caret_before_on_enter_elements","table",A),C=f("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),z=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",C),D=f("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),h((a.special||"script noscript style textarea").split(" "),function(a){J[a]=new RegExp("</"+a+"[^>]*>","gi")}),a.valid_elements?n(a.valid_elements):(h(t,function(a,b){F[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},G[b]=a.children}),"html4"===a.schema&&h(b("strong/b em/i"),function(a){a=b(a,"/"),F[a[1]].outputName=a[0]}),F.img.attributesDefault=[{name:"alt",value:""}],h(b("ol ul sub sup blockquote font table tbody tr strong b"),function(a){F[a]&&(F[a].removeEmpty=!0)}),h(b("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(a){F[a].paddEmpty=!0})),o(a.custom_elements),p(a.valid_children),m(a.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),a.invalid_elements&&h(j(a.invalid_elements),function(a){F[a]&&delete F[a]}),q("span")||m("span[!data-mce-type|*]"),E.children=G,E.getValidStyles=function(){return r},E.getInvalidStyles=function(){return s},E.getValidClasses=function(){return y},E.getBoolAttrs=function(){return x},E.getBlockElements=function(){return z},E.getTextBlockElements=function(){return C},E.getTextInlineElements=function(){return D},E.getShortEndedElements=function(){return w},E.getSelfClosingElements=function(){return v},E.getNonEmptyElements=function(){return A},E.getMoveCaretBeforeOnEnterElements=function(){return B},E.getWhiteSpaceElements=function(){return u},E.getSpecialElements=function(){return J},E.isValidChild=function(a,b){var c=G[a];return!(!c||!c[b])},E.isValid=function(a,b){var c,d,e=q(a);if(e){if(!b)return!0;if(e.attributes[b])return!0;if(c=e.attributePatterns)for(d=c.length;d--;)if(c[d].pattern.test(a))return!0}return!1},E.getElementRule=q,E.getCustomElements=function(){return I},E.addValidElements=m,E.setValidElements=n,E.addCustomElements=o,E.addValidChildren=p,E.elements=F}}(tinymce),function(a){var b=a.each,c=a.html.Entities;a.html.SaxParser=function(d,e){function f(){}var g=this;d=d||{},g.schema=e=e||new a.html.Schema,d.fix_self_closing!==!1&&(d.fix_self_closing=!0),b("comment cdata text start end pi doctype".split(" "),function(a){a&&(g[a]=d[a]||f)}),g.findEndTag=function(a,b,c){var d,e,f,g,h=1;for(g=a.getShortEndedElements(),f=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,f.lastIndex=d=c;e=f.exec(b);){if(d=f.lastIndex,"/"===e[1])h--;else if(!e[1]){if(e[2]in g)continue;h++}if(0===h)break}return d},g.parse=function(b){function f(a){var b,c;for(b=M.length;b--&&M[b].name!==a;);if(b>=0){for(c=M.length-1;c>=b;c--)a=M[c],a.valid&&K.end(a.name);M.length=b}}function g(a,b,c,e,f){var g,h,i=/[\s\u0000-\u001F]+/g;if(b=b.toLowerCase(),c=b in r?b:O(c||e||f||""),t&&!o&&0!==b.indexOf("data-")){if(g=y[b],!g&&z){for(h=z.length;h--&&(g=z[h],!g.pattern.test(b)););h===-1&&(g=null)}if(!g)return;if(g.validValues&&!(c in g.validValues))return}if(P[b]&&!d.allow_script_urls){var j=c.replace(i,"");try{j=decodeURIComponent(j)}catch(a){j=unescape(j)}if(Q.test(j))return;if(!d.allow_html_data_urls&&R.test(j)&&!/^data:image\//i.test(j))return}k.map[b]=c,k.push({name:b,value:c})}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this,L=0,M=[],N=0,O=c.decode,P=a.makeMap("src,href,data,background,formaction,poster"),Q=/((java|vb)script|mhtml):/i,R=/^data:/i;for(F=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,q=e.getShortEndedElements(),E=d.self_closing_elements||e.getSelfClosingElements(),r=e.getBoolAttrs(),t=d.validate,p=d.remove_internals,J=d.fix_self_closing,H=e.getSpecialElements();h=F.exec(b);){if(L<h.index&&K.text(O(b.substr(L,h.index-L))),i=h[6])i=i.toLowerCase(),":"===i.charAt(0)&&(i=i.substr(1)),f(i);else if(i=h[7]){if(i=i.toLowerCase(),":"===i.charAt(0)&&(i=i.substr(1)),s=i in q,J&&E[i]&&M.length>0&&M[M.length-1].name===i&&f(i),!t||(u=e.getElementRule(i))){if(v=!0,t&&(y=u.attributes,z=u.attributePatterns),(x=h[8])?(o=x.indexOf("data-mce-type")!==-1,o&&p&&(v=!1),k=[],k.map={},x.replace(G,g)):(k=[],k.map={}),t&&!o){if(A=u.attributesRequired,B=u.attributesDefault,C=u.attributesForced,D=u.removeEmptyAttrs,D&&!k.length&&(v=!1),C)for(l=C.length;l--;)w=C[l],n=w.name,I=w.value,"{$uid}"===I&&(I="mce_"+N++),k.map[n]=I,k.push({name:n,value:I});if(B)for(l=B.length;l--;)w=B[l],n=w.name,n in k.map||(I=w.value,"{$uid}"===I&&(I="mce_"+N++),k.map[n]=I,k.push({name:n,value:I}));if(A){for(l=A.length;l--&&!(A[l]in k.map););l===-1&&(v=!1)}if(w=k.map["data-mce-bogus"]){if("all"===w){L=K.findEndTag(e,b,F.lastIndex),F.lastIndex=L;continue}v=!1}}v&&K.start(i,k,s)}else v=!1;if(j=H[i]){j.lastIndex=L=h.index+h[0].length,(h=j.exec(b))?(v&&(m=b.substr(L,h.index-L)),L=h.index+h[0].length):(m=b.substr(L),L=b.length),v&&(m.length>0&&K.text(m,!0),K.end(i)),F.lastIndex=L;continue}s||(x&&x.indexOf("/")==x.length-1?v&&K.end(i):M.push({name:i,valid:v}))}else(i=h[1])?(">"===i.charAt(0)&&(i=" "+i),d.allow_conditional_comments||"[if"!==i.substr(0,3)||(i=" "+i),K.comment(i)):(i=h[2])?K.cdata(i):(i=h[3])?K.doctype(i):(i=h[4])&&K.pi(i,h[5]);L=h.index+h[0].length}for(L<b.length&&K.text(O(b.substr(L))),l=M.length-1;l>=0;l--)i=M[l],i.valid&&K.end(i.name)}}}(tinymce),function(a){function b(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){if(d=a[g])return d;for(e=a.parent;e&&e!==b;e=e.parent)if(d=e[g])return d}}function c(a,b){this.name=a,this.type=b,1===b&&(this.attributes=[],this.attributes.map={})}var d=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(c.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c,d,e,f=this;if("string"!=typeof a){for(d in a)f.attr(d,a[d]);return f}if(c=f.attributes){if(b!==e){if(null===b){if(a in c.map)for(delete c.map[a],d=c.length;d--;)if(c[d].name===a)return c=c.splice(d,1),f;return f}if(a in c.map){for(d=c.length;d--;)if(c[d].name===a){c[d].value=b;break}}else c.push({name:a,value:b});return c.map[a]=b,f}return c.map[a]}},clone:function(){var a,b,d,e,f,g=this,h=new c(g.name,g.type);if(d=g.attributes){for(f=[],f.map={},a=0,b=d.length;a<b;a++)e=d[a],"id"!==e.name&&(f[f.length]={name:e.name,value:e.value},f.map[e.name]=e.value);h.attributes=f}return h.value=g.value,h.shortEnded=g.shortEnded,h},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a,b,c=this;for(a=c.firstChild;a;)b=a.next,c.insert(a,c,!0),a=b;c.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b,c=this;return a.parent&&a.remove(),b=c.lastChild,b?(b.next=a,a.prev=b,c.lastChild=a):c.lastChild=c.firstChild=a,a.parent=c,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var c,d=this,e=[];for(c=d.firstChild;c;c=b(c,d))c.name===a&&e.push(c);return e},empty:function(){var a,c,d,e=this;if(e.firstChild){for(a=[],d=e.firstChild;d;d=b(d,e))a.push(d);for(c=a.length;c--;)d=a[c],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(a){var c,e,f=this,g=f.firstChild;if(g)do{if(1===g.type){if(g.attributes.map["data-mce-bogus"])continue;if(a[g.name])return!1;for(c=g.attributes.length;c--;)if(e=g.attributes[c].name,"name"===e||0===e.indexOf("data-mce-bookmark"))return!1}if(8===g.type)return!1;if(3===g.type&&!d.test(g.value))return!1}while(g=b(g,f));return!0},walk:function(a){return b(this,null,a)}}),a.extend(c,{create:function(a,b){var d,f;if(d=new c(a,e[a]||1),b){for(f in b)d.attr(f,b[f]);return d}}}),a.html.Node=c}(tinymce),function(a){var b=a.html.Node,c=a.each,d=a.explode,e=a.extend,f=a.makeMap;a.html.DomParser=function(g,h){function i(a){var c,d,e,g,i,k,l,m,n,o,p,q,r,s,t;for(p=f("tr,td,th,tbody,thead,tfoot,table"),o=h.getNonEmptyElements(),q=h.getTextBlockElements(),r=h.getSpecialElements(),c=0;c<a.length;c++)if(d=a[c],d.parent&&!d.fixed)if(q[d.name]&&"li"==d.parent.name){for(s=d.next;s&&q[s.name];)s.name="li",s.fixed=!0,d.parent.insert(s,d.parent),s=s.next;d.unwrap(d)}else{for(g=[d],e=d.parent;e&&!h.isValidChild(e.name,d.name)&&!p[e.name];e=e.parent)g.push(e);if(e&&g.length>1){for(g.reverse(),i=k=j.filterNode(g[0].clone()),n=0;n<g.length-1;n++){for(h.isValidChild(k.name,g[n].name)?(l=j.filterNode(g[n].clone()),k.append(l)):l=k,m=g[n].firstChild;m&&m!=g[n+1];)t=m.next,l.append(m),m=t;k=l}i.isEmpty(o)?e.insert(d,g[0],!0):(e.insert(i,g[0],!0),e.insert(d,i)),e=g[0],(e.isEmpty(o)||e.firstChild===e.lastChild&&"br"===e.firstChild.name)&&e.empty().remove()}else if(d.parent){if("li"===d.name){if(s=d.prev,s&&("ul"===s.name||"ul"===s.name)){s.append(d);continue}if(s=d.next,s&&("ul"===s.name||"ul"===s.name)){s.insert(d,s.firstChild,!0);continue}d.wrap(j.filterNode(new b("ul",1)));continue}h.isValidChild(d.parent.name,"div")&&h.isValidChild("div",d.name)?d.wrap(j.filterNode(new b("div",1))):r[d.name]?d.empty().remove():d.unwrap()}}}var j=this,k={},l=[],m={},n={};g=g||{},g.validate=!("validate"in g)||g.validate,g.root_name=g.root_name||"body",j.schema=h=h||new a.html.Schema,j.filterNode=function(a){var b,c,d;c in k&&(d=m[c],d?d.push(a):m[c]=[a]),b=l.length;for(;b--;)c=l[b].name,c in a.attributes.map&&(d=n[c],d?d.push(a):n[c]=[a]);return a},j.addNodeFilter=function(a,b){c(d(a),function(a){var c=k[a];c||(k[a]=c=[]),c.push(b)})},j.addAttributeFilter=function(a,b){c(d(a),function(a){var c;for(c=0;c<l.length;c++)if(l[c].name===a)return void l[c].callbacks.push(b);l.push({name:a,callbacks:[b]})})},j.parse=function(c,d){function j(){function a(a){a&&(d=a.firstChild,d&&3==d.type&&(d.value=d.value.replace(D,"")),d=a.lastChild,d&&3==d.type&&(d.value=d.value.replace(F,"")))}var b,c,d=s.firstChild;if(h.isValidChild(s.name,L.toLowerCase())){for(;d;)b=d.next,3==d.type||1==d.type&&"p"!==d.name&&!C[d.name]&&!d.attr("data-mce-type")?c?c.append(d):(c=o(L,1),c.attr(g.forced_root_block_attrs),s.insert(c,d),c.append(d)):(a(c),c=null),d=b;a(c)}}function o(a,c){var d,e=new b(a,c);return a in k&&(d=m[a],d?d.push(e):m[a]=[e]),e}function p(a){var b,c,d,e,f=h.getBlockElements();for(b=a.prev;b&&3===b.type;){if(d=b.value.replace(F,""),d.length>0)return void(b.value=d);if(c=b.next){if(3==c.type&&c.value.length){b=b.prev;continue}if(!f[c.name]&&"script"!=c.name&&"style"!=c.name){b=b.prev;continue}}e=b.prev,b.remove(),b=e}}function q(a){var b,c={};for(b in a)"li"!==b&&"p"!=b&&(c[b]=a[b]);return c}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=[];if(d=d||{},m={},n={},C=e(f("script,style,head,html,body,title,meta,param"),h.getBlockElements()),K=h.getNonEmptyElements(),J=h.children,B=g.validate,L="forced_root_block"in d?d.forced_root_block:g.forced_root_block,I=h.getWhiteSpaceElements(),D=/^[ \t\r\n]+/,F=/[ \t\r\n]+$/,G=/[ \t\r\n]+/g,H=/^[ \t\r\n]+$/,r=new a.html.SaxParser({validate:B,allow_script_urls:g.allow_script_urls,allow_conditional_comments:g.allow_conditional_comments,self_closing_elements:q(h.getSelfClosingElements()),cdata:function(a){t.append(o("#cdata",4)).value=a},text:function(a,b){var c;E||(a=a.replace(G," "),t.lastChild&&C[t.lastChild.name]&&(a=a.replace(D,""))),0!==a.length&&(c=o("#text",3),c.raw=!!b,t.append(c).value=a)},comment:function(a){t.append(o("#comment",8)).value=a},pi:function(a,b){t.append(o(a,7)).value=b,p(t)},doctype:function(a){var b;b=t.append(o("#doctype",10)),b.value=a,p(t)},start:function(a,b,c){var d,e,f,g,i;if(f=B?h.getElementRule(a):{}){for(d=o(f.outputName||a,1),d.attributes=b,d.shortEnded=c,t.append(d),i=J[t.name],i&&J[d.name]&&!i[d.name]&&M.push(d),e=l.length;e--;)g=l[e].name,g in b.map&&(z=n[g],z?z.push(d):n[g]=[d]);C[a]&&p(d),c||(t=d),!E&&I[a]&&(E=!0)}},end:function(a){var c,d,e,f,g;if(d=B?h.getElementRule(a):{}){if(C[a]&&!E){if(c=t.firstChild,c&&3===c.type)if(e=c.value.replace(D,""),e.length>0)c.value=e,c=c.next;else for(f=c.next,c.remove(),c=f;c&&3===c.type;)e=c.value,f=c.next,(0===e.length||H.test(e))&&(c.remove(),c=f),c=f;if(c=t.lastChild,c&&3===c.type)if(e=c.value.replace(F,""),e.length>0)c.value=e,c=c.prev;else for(f=c.prev,c.remove(),c=f;c&&3===c.type;)e=c.value,f=c.prev,(0===e.length||H.test(e))&&(c.remove(),c=f),c=f}if(E&&I[a]&&(E=!1),(d.removeEmpty||d.paddEmpty)&&t.isEmpty(K))if(d.paddEmpty)t.empty().append(new b("#text","3")).value=" ";else if(!t.attributes.map.name&&!t.attributes.map.id)return g=t.parent,C[t.name]?t.empty().remove():t.unwrap(),void(t=g);t=t.parent}}},h),s=t=new b(d.context||g.root_name,11),r.parse(c),B&&M.length&&(d.context?d.invalid=!0:i(M)),L&&("body"==s.name||d.isRootContent)&&j(),!d.invalid){for(A in m){for(z=k[A],u=m[A],x=u.length;x--;)u[x].parent||u.splice(x,1);for(v=0,w=z.length;v<w;v++)z[v](u,A,d)}for(v=0,w=l.length;v<w;v++)if(z=l[v],z.name in n){for(u=n[z.name],x=u.length;x--;)u[x].parent||u.splice(x,1);for(x=0,y=z.callbacks.length;x<y;x++)z.callbacks[x](u,z.name,d)}}return s},g.remove_trailing_brs&&j.addNodeFilter("br",function(a){var c,d,f,g,i,j,k,l,m=a.length,n=e({},h.getBlockElements()),o=h.getNonEmptyElements();for(n.body=1,c=0;c<m;c++)if(d=a[c],f=d.parent,n[d.parent.name]&&d===f.lastChild){for(i=d.prev;i;){if(j=i.name,"span"!==j||"bookmark"!==i.attr("data-mce-type")){if("br"!==j)break;if("br"===j){d=null;break}}i=i.prev}d&&(d.remove(),f.isEmpty(o)&&(k=h.getElementRule(f.name),k&&(k.removeEmpty?f.remove():k.paddEmpty&&(f.empty().append(new b("#text",3)).value=" "))))}else{for(g=d;f&&f.firstChild===g&&f.lastChild===g&&(g=f,!n[f.name]);)f=f.parent;g===f&&(l=new b("#text",3),l.value=" ",d.replace(l))}}),g.allow_html_in_named_anchor||j.addAttributeFilter("id,name",function(a){for(var b,c,d,e,f=a.length;f--;)if(e=a[f],"a"===e.name&&e.firstChild&&!e.attr("href")){d=e.parent,b=e.lastChild;do c=b.prev,d.insert(b,e),b=c;while(b)}}),g.validate&&h.getValidClasses()&&j.addAttributeFilter("class",function(a){for(var b,c,d,e,f,g,i,j=a.length,k=h.getValidClasses();j--;){for(b=a[j],c=b.attr("class").split(" "),f="",d=0;d<c.length;d++)e=c[d],i=!1,g=k["*"],g&&g[e]&&(i=!0),g=k[b.name],!i&&g&&g[e]&&(i=!0),i&&(f&&(f+=" "),f+=e);f.length||(f=null),b.attr("class",f)}})}}(tinymce),tinymce.html.Writer=function(a){var b,c,d,e,f,g=[],h=tinymce.makeMap,i=tinymce.html.Entities;return a=a||{},b=a.indent,c=h(a.indent_before||""),d=h(a.indent_after||""),e=i.getEncodeFunc(a.entity_encoding||"raw",a.entities),f="html"==a.element_format,{start:function(a,h,i){var j,k,l,m;if(b&&c[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n")),g.push("<",a),h)for(j=0,k=h.length;j<k;j++)l=h[j],g.push(" ",l.name,'="',e(l.value,!0),'"');!i||f?g[g.length]=">":g[g.length]=" />",i&&b&&d[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n"))},end:function(a){var c;g.push("</",a,">"),b&&d[a]&&g.length>0&&(c=g[g.length-1],c.length>0&&"\n"!==c&&g.push("\n"))},text:function(a,b){a.length>0&&(g[g.length]=b?a:e(a))},cdata:function(a){g.push("<![CDATA[",a,"]]>")},comment:function(a){g.push("<!--",a,"-->")},pi:function(a,c){c?g.push("<?",a," ",c,"?>"):g.push("<?",a,"?>"),b&&g.push("\n")},doctype:function(a){g.push("<!DOCTYPE",a,">",b?"\n":"")},reset:function(){g.length=0},getContent:function(){return g.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate=!("validate"in b)||b.validate,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function d(a){var b,h,i,j,k,l,m,n,o,p=f[a.type];if(p)p(a);else{if(b=a.name,h=a.shortEnded,i=a.attributes,g&&i&&i.length>1){for(l=[],l.map={},o=c.getElementRule(a.name),m=0,n=o.attributesOrder.length;m<n;m++)j=o.attributesOrder[m],j in i.map&&(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));for(m=0,n=i.length;m<n;m++)j=i[m].name,j in l.map||(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));i=l}if(e.start(a.name,i,h),!h){if(a=a.firstChild)do d(a);while(a=a.next);e.end(b)}}}var f,g;return g=b.validate,f={3:function(a){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do d(a);while(a=a.next)}},e.reset(),1!=a.type||b.inner?f[11](a):d(a),e.getContent()}}}(tinymce),tinymce.dom={},function(a,b){function c(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)}function d(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)}function e(a,b){function c(){return!1}function d(){return!0}var e,f=b||{};for(e in a)"layerX"!==e&&"layerY"!==e&&(f[e]=a[e]);return f.target||(f.target=f.srcElement||document),f.preventDefault=function(){f.isDefaultPrevented=d,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},f.stopPropagation=function(){f.isPropagationStopped=d,a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},f.stopImmediatePropagation=function(){f.isImmediatePropagationStopped=d,f.stopPropagation()},f.isDefaultPrevented||(f.isDefaultPrevented=c,f.isPropagationStopped=c,f.isImmediatePropagationStopped=c),f}function f(a,b,e){function f(){e.domLoaded||(e.domLoaded=!0,b(i))}var g=a.document,i={type:"ready"};return"complete"==g.readyState?void f():(h?c(a,"DOMContentLoaded",f):(c(g,"readystatechange",function(){"complete"===g.readyState&&(d(g,"readystatechange",arguments.callee),f())}),g.documentElement.doScroll&&a===a.top&&!function(){try{g.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}f()}()),void c(a,"load",f))}function g(a){function g(a,b){var c,d,e,f;if(c=n[b][a.type])for(d=0,e=c.length;d<e;d++)if(f=c[d],f&&f.func.call(f.scope,a)===!1&&a.preventDefault(),a.isImmediatePropagationStopped())return}var i,j,k,l,m=this,n={};k="onmouseenter"in document.documentElement,j="onfocusin"in document.documentElement,l={mouseenter:"mouseover",mouseleave:"mouseout"},i=1,m.domLoaded=!1,m.events=n,m.bind=function(d,o,p,q){function r(a){g(e(a||z.event),s)}var s,t,u,v,w,x,y,z=window;if(d&&3!==d.nodeType&&8!==d.nodeType){for(d[b]?(s=d[b],n[s]||(n[s]={})):(s=i++,d[b]=s,n[s]={}),q=q||d,o=o.split(" "),u=o.length;u--;)v=o[u],x=r,w=y=!1,"DOMContentLoaded"===v&&(v="ready"),!m.domLoaded&&"complete"!=d.readyState||"ready"!==v?(k||(w=l[v],w&&(x=function(a){var b,c;if(b=a.currentTarget,c=a.relatedTarget,c&&b.contains)c=b.contains(c);else for(;c&&c!==b;)c=c.parentNode;c||(a=e(a||z.event),a.type="mouseout"===a.type?"mouseleave":"mouseenter",a.target=b,g(a,s))})),j||"focusin"!==v&&"focusout"!==v||(y=!0,w="focusin"===v?"focus":"blur",x=function(a){a=e(a||z.event),a.type="focus"===a.type?"focusin":"focusout",g(a,s)}),t=n[s][v],t?t.push({func:p,scope:q}):(n[s][v]=t=[{func:p,scope:q}],t.fakeName=w,t.capture=y,t.nativeHandler=x,h||(t.proxyHandler=a(s)),"ready"===v?f(d,x,m):c(d,w||v,h?x:t.proxyHandler,y))):(m.domLoaded=!0,p.call(q,e({type:v})));return d=t=0,p}},m.unbind=function(a,c,e){var f,g,i,j,k,l;if(!a||3===a.nodeType||8===a.nodeType)return m;if(f=a[b]){if(l=n[f],c){for(c=c.split(" "),i=c.length;i--;)if(k=c[i],g=l[k]){if(e)for(j=g.length;j--;)g[j].func===e&&g.splice(j,1);e&&0!==g.length||(delete l[k],d(a,g.fakeName||k,h?g.nativeHandler:g.proxyHandler,g.capture))}}else{for(k in l)g=l[k],d(a,g.fakeName||k,h?g.nativeHandler:g.proxyHandler,g.capture);l={}}for(k in l)return m;delete n[f];try{delete a[b]}catch(c){a[b]=null}}return m},m.fire=function(a,c,d){var f,h;if(!a||3===a.nodeType||8===a.nodeType)return m;h=e(null,d),h.type=c;do f=a[b],f&&g(h,f),a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow;while(a&&!h.isPropagationStopped());return m},m.clean=function(a){var c,d,e=m.unbind;if(!a||3===a.nodeType||8===a.nodeType)return m;if(a[b]&&e(a),a.getElementsByTagName||(a=a.document),a&&a.getElementsByTagName)for(e(a),d=a.getElementsByTagName("*"),c=d.length;c--;)a=d[c],a[b]&&e(a);return m},m.callNativeHandler=function(a,b){n&&n[a][b.type].nativeHandler(b)},m.destory=function(){n={}},m.add=function(a,b,c,d){"string"==typeof a&&(a=document.getElementById(a));{if(!(a&&a instanceof Array))return"init"===b&&(b="ready"),m.bind(a,b instanceof Array?b.join(" "):b,c,d);for(var e=a.length;e--;)m.add(a[e],b,c,d)}},m.remove=function(a,b,c,d){if(!a)return m;if("string"==typeof a&&(a=document.getElementById(a)),a instanceof Array){for(var e=a.length;e--;)m.remove(a[e],b,c,d);return m}return m.unbind(a,b instanceof Array?b.join(" "):b,c)},m.clear=function(a){return"string"==typeof a&&(a=document.getElementById(a)),m.clean(a)},m.cancel=function(a){return a&&(m.prevent(a),m.stop(a)),!1},m.prevent=function(a){return a.preventDefault||(a=e(a)),a.preventDefault(),!1},m.stop=function(a){return a.stopPropagation||(a=e(a)),a.stopPropagation(),!1}}var h=!!document.addEventListener;a.EventUtils=g,a.Event=new g(function(a){return function(b){tinymce.dom.Event.callNativeHandler(a,b)}}),a.Event.bind(window,"ready",function(){}),a=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(a,b){function c(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){if(f=a[d])return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode)if(f=g[d])return f}}}function d(a,c,d,e){var f,g,h;if(a){if(f=a[d],b&&f===b)return;if(f){if(!e)for(h=f[c];h;h=h[c])if(!h[c])return h;return f}if(g=a.parentNode,g&&g!==b)return g}}var e=a;this.current=function(){return e},this.next=function(a){return e=c(e,"firstChild","nextSibling",a)},this.prev=function(a){return e=c(e,"lastChild","previousSibling",a)},this.prev2=function(a){return e=d(e,"lastChild","previousSibling",a)}},function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{for:"htmlFor",class:"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d,e=this;if(e.doc=b,e.win=window,e.files={},e.cssFlicker=!1,e.counter=0,e.stdMode=!a.isIE||b.documentMode>=8,e.boxModel=!a.isIE||"CSS1Compat"==b.compatMode||e.stdMode,e.hasOuterHTML="outerHTML"in b.createElement("a"),e.settings=c=a.extend({keep_values:!1,hex_colors:1},c),e.schema=c.schema,e.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema),a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(a){e.cssFlicker=!0}e.fixDoc(b),e.events=c.ownEvents?new a.dom.EventUtils(c.proxy):a.dom.Event,
a.addUnload(e.destroy,e),d=c.schema?c.schema.getBlockElements():{},e.isBlock=function(a){if(!a)return!1;var b=a.nodeType;return b?!(1!==b||!d[a.nodeName]):!!d[a]}},fixDoc:function(b){var c,d=this.settings;if(e&&!a.isIE11&&!a.isIE12&&d.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(c in d.schema.getCustomElements())b.createElement(c)}},clone:function(c,d){var f,g,h=this;return!e||a.isIE11||1!==c.nodeType||d?c.cloneNode(d):(g=h.doc,d?f.firstChild:(f=g.createElement(c.nodeName),b(h.getAttribs(c),function(a){h.setAttrib(f,a.nodeName,h.getAttrib(c,a.nodeName))}),f))},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c,d=this;return a=d.get(a),b=d.getPos(a),c=d.getSize(a),{x:b.x,y:b.y,w:c.w,h:c.h}},getSize:function(a){var b,c,d=this;return a=d.get(a),b=d.getStyle(a,"width"),c=d.getStyle(a,"height"),b.indexOf("px")===-1&&(b=0),c.indexOf("px")===-1&&(c=0),{w:parseInt(b,10)||a.offsetWidth||a.clientWidth,h:parseInt(c,10)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f,g=this,h=g.settings,i=[];for(a=g.get(a),e=void 0===e,h.strict_root&&(d=d||g.getRoot()),c(b,"string")&&(f=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return g.is(a,f)});a&&a!=d&&a.nodeType&&9!==a.nodeType;){if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;return a&&this.doc&&"string"==typeof a&&(b=a,a=this.doc.getElementById(a),a&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,c){var d=this;return a.dom.Sizzle(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){var d;if(void 0===b.length){if("*"===c)return 1==b.nodeType;if(g.test(c)){for(c=c.toLowerCase().split(/,/),b=b.nodeName.toLowerCase(),d=c.length-1;d>=0;d--)if(c[d]==b)return!0;return!1}}return a.dom.Sizzle.matches(c,b.nodeType?[b]:b).length>0},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d,e="",f=this;e+="<"+a;for(d in b)b.hasOwnProperty(d)&&(e+=" "+d+'="'+f.encode(b[d])+'"');return"undefined"!=typeof c?e+">"+c+"</"+a+">":e+" />"},createFragment:function(a){var b,c,d,e=this.doc;for(d=e.createElement("div"),b=e.createDocumentFragment(),a&&(d.innerHTML=a);c=d.firstChild;)b.appendChild(c);return b},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)for(;d=b.firstChild;)!a.isIE||3!==d.nodeType||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},empty:function(a){return this.run(a,function(a){for(var b,c=a.length;c--;)for(b=a[c];b.firstChild;)b.removeChild(b.firstChild);return!0})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h;switch(h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px"),c){case"opacity":!e||a.isIE11||a.isIE12||(h.filter=""===d?"":"alpha(opacity="+100*d+")",b.currentStyle&&b.currentStyle.hasLayout||(h.display="inline-block")),h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":!e||a.isIE11||a.isIE12?h.cssFloat=d:h.styleFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&(d=f.serializeStyle(f.parseStyle(g.style.cssText),g.nodeName),f.setAttrib(g,"data-mce-style",d))})},getStyle:function(a,b,c){if(a=this.get(a)){if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(a){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"==b&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:void 0}},setStyles:function(a,c){var d,e=this,f=e.settings;d=f.update_styles,f.update_styles=0,b(c,function(b,c){e.setStyle(a,c,b)})},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(a&&d)return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings,h=a.getAttribute(d);if(null!==e)switch(d){case"style":if(!c(e,"string"))return void b(e,function(b,c){f.setStyle(a,c,b)});g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}if(c(e)&&null!==e&&0!==e.length?a.setAttribute(d,""+e,2):a.removeAttribute(d,2),tinyMCE.activeEditor&&h!=e){var i=tinyMCE.activeEditor;i.onSetAttrib.dispatch(i,a,d,e)}})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i,j=this;if(b=j.get(b),!b||1!==b.nodeType)return g!==i&&g;if(c(g)||(g=""),/^(src|href|style|coords|shape)$/.test(f)&&(h=b.getAttribute("data-mce-"+f)))return h;if(e&&j.props[f]&&(h=b[j.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[j.props[f]]===!0&&""===h?f:h?f:"";if("FORM"===b.nodeName&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;if("style"===f&&(h=h||b.style.cssText,h&&(h=j.serializeStyle(j.parseStyle(h),b.nodeName),j.settings.keep_values&&!j._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&"class"===f&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),e)switch(f){case"rowspan":case"colspan":1===h&&(h="");break;case"size":"+0"!==h&&20!==h&&0!==h||(h="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===h&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":32768!==h&&2147483647!==h&&"32768"!==h||(h="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===h?f:g;case"shape":h=h.toLowerCase();break;default:0===f.indexOf("on")&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==i&&null!==h&&""!==h?""+h:g},getPos:function(a,b){var c,d,e=this,f=0,g=0,h=e.doc;if(a=e.get(a),b=b||h.body,a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),c=e.boxModel?h.documentElement:h.body,f=a.left+(h.documentElement.scrollLeft||h.body.scrollLeft)-c.clientTop,g=a.top+(h.documentElement.scrollTop||h.body.scrollTop)-c.clientLeft,{x:f,y:g};for(d=a;d&&d!=b&&d.nodeType;)f+=d.offsetLeft||0,g+=d.offsetTop||0,d=d.offsetParent;for(d=a.parentNode;d&&d!=b&&d.nodeType;)f-=d.scrollLeft||0,g-=d.scrollTop||0,d=d.parentNode}return{x:f,y:g}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},addStyle:function(a){var b,c=this.doc;styleElm=c.getElementById("mceDefaultStyles"),styleElm||(styleElm=c.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",b=c.getElementsByTagName("head")[0],b.firstChild?b.insertBefore(styleElm,b.firstChild):b.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=a:styleElm.appendChild(c.createTextNode(a))},loadCSS:function(c){var d,f=this,g=f.doc;c||(c=""),d=g.getElementsByTagName("head")[0],b(c.split(","),function(b){var c;f.files[b]||(f.files[b]=!0,c=f.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&!a.isIE11&&g.documentMode&&g.recalc&&(c.onload=function(){g.recalc&&g.recalc(),c.onload=null}),d.appendChild(c))})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(""!=c?c+" ":"")+b):0})},removeClass:function(b,c){var d,e=this;return e.run(b,function(b){var f;return e.hasClass(b,c)?(d||(d=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(d," "),f=a.trim(" "!=f?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!(!a||!b)&&(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(c,d){var f=this;return f.run(c,function(c){if(e){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br />"+d,c.removeChild(c.firstChild)}catch(e){var g=f.create("div");g.innerHTML="<br />"+d,b(a.grep(g.childNodes),function(a,b){b&&c.canHaveHTML&&c.appendChild(a)})}}else c.innerHTML=d;return d})},getOuterHTML:function(a){var b,c=this;return(a=c.get(a))?1===a.nodeType&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function d(a,b,c){var d,e;for(e=c.createElement("body"),e.innerHTML=b,d=e.lastChild;d;)f.insertAfter(d.cloneNode(!0),a),d=d.previousSibling;f.remove(a)}var f=this;return this.run(a,function(a){if(a=f.get(a),1==a.nodeType)if(c=c||a.ownerDocument||f.doc,e)try{e&&1==a.nodeType?a.outerHTML=b:d(a,b,c)}catch(e){d(a,b,c)}else d(a,b,c)})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d,e=this;return a.nodeName!=c.toUpperCase()&&(d=e.create(c),b(e.getAttribs(a),function(b){e.setAttrib(d,b.nodeName,e.getAttrib(a,b.nodeName))}),e.replace(d,a,1)),d||a},findCommonAncestor:function(a,b){for(var c,d=a;d;){for(c=b;c&&d!=c;)c=c.parentNode;if(d==c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:d},toHex:function(a){function b(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return c?a="#"+b(c[1])+b(c[2])+b(c[3]):a},getClasses:function(){function c(e){b(e.imports,function(a){c(a)}),b(e.cssRules||e.rules,function(e){switch(e.type||1){case 1:e.selectorText&&b(e.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(b)&&/\.[\w\-]+$/.test(b)&&(d=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b),h&&!(b=h(b,d))||g[b]||(f.push({class:b}),g[b]=1))});break;case 3:try{c(e.styleSheet)}catch(a){}}})}var d,e=this,f=[],g={},h=e.settings.class_filter;if(e.classes)return e.classes;try{b(e.doc.styleSheets,c)}catch(a){}return f.length>0&&(e.classes=f),f},run:function(a,c,d){var e,f=this;return f.doc&&"string"==typeof a&&(a=f.get(a)),!!a&&(d=d||this,a.nodeType||!a.length&&0!==a.length?c.call(d,a):(e=[],b(a,function(a,b){a&&("string"==typeof a&&(a=f.doc.getElementById(a)),e.push(c.call(d,a,b)))}),e))},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],"OBJECT"==a.nodeName?a.attributes:("OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d,e,f,g,i,j=this,k=0;if(b=b.firstChild){g=new a.dom.TreeWalker(b,b.parentNode),c=c||j.schema?j.schema.getNonEmptyElements():null;do{if(f=b.nodeType,1===f){if(b.getAttribute("data-mce-bogus"))continue;if(i=b.nodeName.toLowerCase(),c&&c[i]){if("br"===i){k++;continue}return!1}for(e=j.getAttribs(b),d=b.attributes.length;d--;)if(i=b.attributes[d].nodeName,"name"===i||"data-mce-bookmark"===i)return!1}if(8==f)return!1;if(3===f&&!h.test(b.nodeValue))return!1}while(b=g.next())}return k<=1},destroy:function(b){var c=this;c.win=c.doc=c.root=c.events=c.frag=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c,d,e,f=0;if(a)for(c=a.nodeType,a=a.previousSibling,d=a;a;a=a.previousSibling)e=a.nodeType,(!b||3!=e||e!=c&&a.nodeValue.length)&&(f++,c=e);return f},split:function(b,c,d){function e(b){function c(a){var b=a.previousSibling&&"SPAN"==a.previousSibling.nodeName,c=a.nextSibling&&"SPAN"==a.nextSibling.nodeName;return b&&c}var d,f=b.childNodes,g=b.nodeType;if(1!=g||"bookmark"!=b.getAttribute("data-mce-type")){for(d=f.length-1;d>=0;d--)e(f[d]);if(9!=g){if(3==g&&b.nodeValue.length>0){var h=a.trim(b.nodeValue).length;if(!i.isBlock(b.parentNode)||h>0||0===h&&c(b))return}else if(1==g&&(f=b.childNodes,1==f.length&&f[0]&&1==f[0].nodeType&&"bookmark"==f[0].getAttribute("data-mce-type")&&b.parentNode.insertBefore(f[0],b),f.length||/^(br|hr|input|img)$/i.test(b.nodeName)))return;i.remove(b)}return b}}var f,g,h,i=this,j=i.createRng();if(b&&c)return j.setStart(b.parentNode,i.nodeIndex(b)),j.setEnd(c.parentNode,i.nodeIndex(c)),f=j.extractContents(),j=i.createRng(),j.setStart(c.parentNode,i.nodeIndex(c)+1),j.setEnd(b.parentNode,i.nodeIndex(b)+1),g=j.extractContents(),h=b.parentNode,h.insertBefore(e(f),b),d?h.replaceChild(d,c):h.insertBefore(c,b),h.insertBefore(e(g),b),i.remove(b),d||c},bind:function(a,b,c,d){return this.events.add(a,b,c,d||this)},unbind:function(a,b,c){return this.events.remove(a,b,c)},fire:function(a,b,c){return this.events.fire(a,b,c)},getContentEditable:function(a){var b;return 1!=a.nodeType?null:(b=a.getAttribute("data-mce-contenteditable"),b&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null)},isChildOf:function(a,b){for(;a;){if(b===a)return!0;a=a.parentNode}return!1},dumpRng:function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},_findSib:function(a,b,d){var e=this,f=b;if(a)for(c(f,"string")&&(f=function(a){return e.is(a,b)}),a=a[d];a;a=a[d])if(f(a))return a;return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function c(){return I.createDocumentFragment()}function d(a,b){w(M,a,b)}function e(a,b){w(N,a,b)}function f(a){d(a.parentNode,T(a))}function g(a){d(a.parentNode,T(a)+1)}function h(a){e(a.parentNode,T(a))}function i(a){e(a.parentNode,T(a)+1)}function j(a){a?(H[Q]=H[P],H[R]=H[O]):(H[P]=H[Q],H[O]=H[R]),H.collapsed=M}function k(a){f(a),i(a)}function l(a){d(a,0),e(a,1===a.nodeType?a.childNodes.length:a.nodeValue.length)}function m(a,b){var c=H[P],d=H[O],e=H[Q],f=H[R],g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset;return 0===a?v(c,d,g,h):1===a?v(e,f,g,h):2===a?v(e,f,i,j):3===a?v(c,d,i,j):void 0}function n(){x(L)}function o(){return x(J)}function p(){return x(K)}function q(b){var c,d,e=this[P],f=this[O];3!==e.nodeType&&4!==e.nodeType||!e.nodeValue?(e.childNodes.length>0&&(d=e.childNodes[f]),d?e.insertBefore(b,d):3==e.nodeType?a.insertAfter(b,e):e.appendChild(b)):f?f>=e.nodeValue.length?a.insertAfter(b,e):(c=e.splitText(f),e.parentNode.insertBefore(b,c)):e.parentNode.insertBefore(b,e)}function r(a){var b=H.extractContents();H.insertNode(a),a.appendChild(b),H.selectNode(a)}function s(){return S(new b(a),{startContainer:H[P],startOffset:H[O],endContainer:H[Q],endOffset:H[R],collapsed:H.collapsed,commonAncestorContainer:H.commonAncestorContainer})}function t(a,b){var c;if(3==a.nodeType)return a;if(b<0)return a;for(c=a.firstChild;c&&b>0;)--b,c=c.nextSibling;return c?c:a}function u(){return H[P]==H[Q]&&H[O]==H[R]}function v(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;for(f=d;f&&f.parentNode!=b;)f=f.parentNode;if(f){for(g=0,h=b.firstChild;h!=f&&g<c;)g++,h=h.nextSibling;return c<=g?-1:1}for(f=b;f&&f.parentNode!=d;)f=f.parentNode;if(f){for(g=0,h=d.firstChild;h!=f&&g<e;)g++,h=h.nextSibling;return g<e?-1:1}for(i=a.findCommonAncestor(b,d),j=b;j&&j.parentNode!=i;)j=j.parentNode;for(j||(j=i),k=d;k&&k.parentNode!=i;)k=k.parentNode;if(k||(k=i),j==k)return 0;for(h=i.firstChild;h;){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function w(b,c,d){var e,f;for(b?(H[P]=c,H[O]=d):(H[Q]=c,H[R]=d),e=H[Q];e.parentNode;)e=e.parentNode;for(f=H[P];f.parentNode;)f=f.parentNode;f==e?v(H[P],H[O],H[Q],H[R])>0&&H.collapse(b):H.collapse(b),H.collapsed=u(),H.commonAncestorContainer=a.findCommonAncestor(H[P],H[Q])}function x(a){var b,c,d,e,f,g,h,i=0,j=0;if(H[P]==H[Q])return y(a);for(b=H[Q],c=b.parentNode;c;b=c,c=c.parentNode){if(c==H[P])return z(b,a);++i}for(b=H[P],c=b.parentNode;c;b=c,c=c.parentNode){if(c==H[Q])return A(b,a);++j}for(d=j-i,e=H[P];d>0;)e=e.parentNode,d--;for(f=H[Q];d<0;)f=f.parentNode,d++;for(g=e.parentNode,h=f.parentNode;g!=h;g=g.parentNode,h=h.parentNode)e=g,f=h;return B(e,f,a)}function y(a){var b,d,e,f,g,h,i,j,k;if(a!=L&&(b=c()),H[O]==H[R])return b;if(3==H[P].nodeType){if(d=H[P].nodeValue,e=d.substring(H[O],H[R]),a!=K&&(f=H[P],j=H[O],k=H[R]-H[O],0===j&&k>=f.nodeValue.length-1?f.parentNode.removeChild(f):f.deleteData(j,k),H.collapse(M)),a==L)return;return e.length>0&&b.appendChild(I.createTextNode(e)),b}for(f=t(H[P],H[O]),g=H[R]-H[O];f&&g>0;)h=f.nextSibling,i=F(f,a),b&&b.appendChild(i),--g,f=h;return a!=K&&H.collapse(M),b}function z(a,b){var d,e,f,g,h,i;if(b!=L&&(d=c()),e=C(a,b),d&&d.appendChild(e),f=T(a),g=f-H[O],g<=0)return b!=K&&(H.setEndBefore(a),H.collapse(N)),d;for(e=a.previousSibling;g>0;)h=e.previousSibling,i=F(e,b),d&&d.insertBefore(i,d.firstChild),--g,e=h;return b!=K&&(H.setEndBefore(a),H.collapse(N)),d}function A(a,b){var d,e,f,g,h,i;for(b!=L&&(d=c()),f=D(a,b),d&&d.appendChild(f),e=T(a),++e,g=H[R]-e,f=a.nextSibling;f&&g>0;)h=f.nextSibling,i=F(f,b),d&&d.appendChild(i),--g,f=h;return b!=K&&(H.setStartAfter(a),H.collapse(M)),d}function B(a,b,d){var e,f,g,h,i,j,k;for(d!=L&&(f=c()),e=D(a,d),f&&f.appendChild(e),g=T(a),h=T(b),++g,i=h-g,j=a.nextSibling;i>0;)k=j.nextSibling,e=F(j,d),f&&f.appendChild(e),j=k,--i;return e=C(b,d),f&&f.appendChild(e),d!=K&&(H.setStartAfter(a),H.collapse(M)),f}function C(a,b){var c,d,e,f,g,h=t(H[Q],H[R]-1),i=h!=H[Q];if(h==a)return E(h,i,N,b);for(c=h.parentNode,d=E(c,N,N,b);c;){for(;h;)e=h.previousSibling,f=E(h,i,N,b),b!=L&&d.insertBefore(f,d.firstChild),i=M,h=e;if(c==a)return d;h=c.previousSibling,c=c.parentNode,g=E(c,N,N,b),b!=L&&g.appendChild(d),d=g}}function D(a,b){var c,d,e,f,g,h=t(H[P],H[O]),i=h!=H[P];if(h==a)return E(h,i,M,b);for(c=h.parentNode,d=E(c,N,M,b);c;){for(;h;)e=h.nextSibling,f=E(h,i,M,b),b!=L&&d.appendChild(f),i=M,h=e;if(c==a)return d;h=c.nextSibling,c=c.parentNode,g=E(c,N,M,b),b!=L&&g.appendChild(d),d=g}}function E(b,c,d,e){var f,g,h,i,j;if(c)return F(b,e);if(3==b.nodeType){if(f=b.nodeValue,d?(i=H[O],g=f.substring(i),h=f.substring(0,i)):(i=H[R],g=f.substring(0,i),h=f.substring(i)),e!=K&&(b.nodeValue=h),e==L)return;return j=a.clone(b,N),j.nodeValue=g,j}if(e!=L)return a.clone(b,N)}function F(b,c){return c!=L?c==K?a.clone(b,M):b:void b.parentNode.removeChild(b)}function G(){return a.create("body",null,p()).outerText}var H=this,I=a.doc,J=0,K=1,L=2,M=!0,N=!1,O="startOffset",P="startContainer",Q="endContainer",R="endOffset",S=tinymce.extend,T=a.nodeIndex;return S(H,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:M,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:d,setEnd:e,setStartBefore:f,setStartAfter:g,setEndBefore:h,setEndAfter:i,collapse:j,selectNode:k,selectNodeContents:l,compareBoundaryPoints:m,deleteContents:n,extractContents:o,cloneContents:p,insertNode:q,surroundContents:r,cloneRange:s,toStringIE:G}),H}a.Range=b,b.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function a(a){function b(b,c){var d,e,f,g,h,i,j,k,l=0,m=-1;if(d=b.duplicate(),d.collapse(c),k=d.parentElement(),k.ownerDocument===a.dom.doc){for(;"false"===k.contentEditable;)k=k.parentNode;if(!k.hasChildNodes())return{node:k,inside:1};for(g=k.children,e=g.length-1;l<=e;)if(j=Math.floor((l+e)/2),h=g[j],d.moveToElementText(h),m=d.compareEndPoints(c?"StartToStart":"EndToEnd",b),m>0)e=j-1;else{if(!(m<0))return{node:h};l=j+1}if(m<0)for(h?d.collapse(!1):(d.moveToElementText(k),d.collapse(!0),h=k,f=!0),i=0;0!==d.compareEndPoints(c?"StartToStart":"StartToEnd",b)&&0!==d.move("character",1)&&k==d.parentElement();)i++;else for(d.collapse(!0),i=0;0!==d.compareEndPoints(c?"StartToStart":"StartToEnd",b)&&0!==d.move("character",-1)&&k==d.parentElement();)i++;return{node:h,position:m,offset:i,inside:f}}}function c(){function c(a){var c,d,e,f,g,h=b(k,a),i=0;if(c=h.node,d=h.offset,h.inside&&!c.hasChildNodes())return void l[a?"setStart":"setEnd"](c,0);if(d===f)return void l[a?"setStartBefore":"setEndAfter"](c);if(h.position<0){if(e=h.inside?c.firstChild:c.nextSibling,!e)return void l[a?"setStartAfter":"setEndAfter"](c);if(!d)return void(3==e.nodeType?l[a?"setStart":"setEnd"](e,0):l[a?"setStartBefore":"setEndBefore"](e));for(;e;){if(3==e.nodeType&&(g=e.nodeValue,i+=g.length,i>=d)){c=e,i-=d,i=g.length-i;break}e=e.nextSibling}}else{if(e=c.previousSibling,!e)return l[a?"setStartBefore":"setEndBefore"](c);if(!d)return void(3==c.nodeType?l[a?"setStart":"setEnd"](e,c.nodeValue.length):l[a?"setStartAfter":"setEndAfter"](e));for(;e;){if(3==e.nodeType&&(i+=e.nodeValue.length,i>=d)){c=e,i-=d;break}e=e.previousSibling}}l[a?"setStart":"setEnd"](c,i)}var f,g,h,i,j,k=a.getRng(),l=e.createRng();if(f=k.item?k.item(0):k.parentElement(),f.ownerDocument!=e.doc)return l;if(g=a.isCollapsed(),k.item)return l.setStart(f.parentNode,e.nodeIndex(f)),l.setEnd(l.startContainer,l.startOffset+1),l;try{c(!0),g||c()}catch(b){if(b.number!=-2147024809)throw b;j=d.getBookmark(2),h=k.duplicate(),h.collapse(!0),f=h.parentElement(),g||(h=k.duplicate(),h.collapse(!1),i=h.parentElement(),i.innerHTML=i.innerHTML),f.innerHTML=f.innerHTML,d.moveToBookmark(j),k=a.getRng(),c(!0),g||c()}return l}var d=this,e=a.dom,f=!1;this.getBookmark=function(c){function d(a){var b,c,d,f,g=[];for(b=a.parentNode,c=e.getRoot().parentNode;b!=c&&9!==b.nodeType;){for(d=b.children,f=d.length;f--;)if(a===d[f]){g.push(f);break}a=b,b=b.parentNode}return g}function f(a){var c;if(c=b(g,a))return{position:c.position,offset:c.offset,indexes:d(c.node),inside:c.inside}}var g=a.getRng(),h={};return 2===c&&(g.item?h.start={ctrl:!0,indexes:d(g.item(0))}:(h.start=f(!0),a.isCollapsed()||(h.end=f()))),h},this.moveToBookmark=function(a){function b(a){var b,c,d,f;for(b=e.getRoot(),c=a.length-1;c>=0;c--)f=b.children,d=a[c],d<=f.length-1&&(b=f[d]);return b}function c(c){var e,g,h,i,j=a[c?"start":"end"];j&&(e=j.position>0,g=f.createTextRange(),g.moveToElementText(b(j.indexes)),i=j.offset,i!==h?(g.collapse(j.inside||e),g.moveStart("character",e?-i:i)):g.collapse(c),d.setEndPoint(c?"StartToStart":"EndToStart",g),c&&d.collapse(!0))}var d,f=e.doc.body;a.start&&(a.start.ctrl?(d=f.createControlRange(),d.addElement(b(a.start.indexes)),d.select()):(d=f.createTextRange(),c(!0),c(),d.select()))},this.addRange=function(b){function c(a){var b,c,g,l,m;g=e.create("a"),b=a?h:j,c=a?i:k,l=d.duplicate(),b!=o&&b!=o.documentElement||(b=p,c=0),3==b.nodeType?(b.parentNode.insertBefore(g,b),l.moveToElementText(g),l.moveStart("character",c),e.remove(g),d.setEndPoint(a?"StartToStart":"EndToEnd",l)):(m=b.childNodes,m.length?(c>=m.length?e.insertAfter(g,m[m.length-1]):b.insertBefore(g,m[c]),l.moveToElementText(g)):b.canHaveHTML&&(b.innerHTML="<span>&#xFEFF;</span>",g=b.firstChild,l.moveToElementText(g),l.collapse(f)),d.setEndPoint(a?"StartToStart":"EndToEnd",l),e.remove(g))}var d,g,h,i,j,k,l,m,n,o=a.dom.doc,p=o.body;if(h=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,d=p.createTextRange(),h==j&&1==h.nodeType){if(i==k&&!h.hasChildNodes()){if(h.canHaveHTML)return l=h.previousSibling,l&&!l.hasChildNodes()&&e.isBlock(l)?l.innerHTML="&#xFEFF;":l=null,h.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",d.moveToElementText(h.lastChild),d.select(),e.doc.selection.clear(),h.innerHTML="",void(l&&(l.innerHTML=""));i=e.nodeIndex(h),h=h.parentNode}if(i==k-1)try{if(n=h.childNodes[i],g=p.createControlRange(),g.addElement(n),g.select(),m=a.getRng(),m.item&&n===m.item(0))return}catch(a){}}c(!0),c(),d.select()},this.getRangeAt=c}tinymce.dom.TridentSelection=a}(),function(){function a(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;for(j=j[a];j;){if(j[d]===c){k=e[j.sizset];break}if(1!==j.nodeType||g||(j[d]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}function b(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;for(j=j[a];j;){if(j[d]===c){k=e[j.sizset];break}if(1===j.nodeType)if(g||(j[d]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(l.filter(b,[j]).length>0){k=j;break}j=j[a]}e[h]=k}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache",e=0,f=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\r\n/g,k=/\W/;[0,0].sort(function(){return h=!1,0});var l=function(a,b,d,e){d=d||[],b=b||document;var g=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return d;var h,i,j,k,m,p,q,s,t=!0,v=l.isXML(b),w=[],x=a;do if(c.exec(""),h=c.exec(x),h&&(x=h[3],w.push(h[1]),h[2])){k=h[3];break}while(h);if(w.length>1&&o.exec(a))if(2===w.length&&n.relative[w[0]])i=u(w[0]+w[1],b,e);else for(i=n.relative[w[0]]?[b]:l(w.shift(),b);w.length;)a=w.shift(),n.relative[a]&&(a+=w.shift()),i=u(a,i,e);else if(!e&&w.length>1&&9===b.nodeType&&!v&&n.match.ID.test(w[0])&&!n.match.ID.test(w[w.length-1])&&(m=l.find(w.shift(),b,v),b=m.expr?l.filter(m.expr,m.set)[0]:m.set[0]),b)for(m=e?{expr:w.pop(),set:r(e)}:l.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!b.parentNode?b:b.parentNode,v),i=m.expr?l.filter(m.expr,m.set):m.set,w.length>0?j=r(i):t=!1;w.length;)p=w.pop(),q=p,n.relative[p]?q=w.pop():p="",null==q&&(q=b),n.relative[p](j,q,v);else j=w=[];if(j||(j=i),j||l.error(p||a),"[object Array]"===f.call(j))if(t)if(b&&1===b.nodeType)for(s=0;null!=j[s];s++)j[s]&&(j[s]===!0||1===j[s].nodeType&&l.contains(b,j[s]))&&d.push(i[s]);else for(s=0;null!=j[s];s++)j[s]&&1===j[s].nodeType&&d.push(i[s]);else d.push.apply(d,j);else r(j,d);return k&&(l(k,g,d,e),l.uniqueSort(d)),d};l.uniqueSort=function(a){if(s&&(g=h,a.sort(s),g))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},l.matches=function(a,b){return l(a,null,null,b)},l.matchesSelector=function(a,b){return l(b,null,null,[a]).length>0},l.find=function(a,b,c){var d,e,f,g,h,j;if(!a)return[];for(e=0,f=n.order.length;e<f;e++)if(h=n.order[e],(g=n.leftMatch[h].exec(a))&&(j=g[1],g.splice(1,1),"\\"!==j.substr(j.length-1)&&(g[1]=(g[1]||"").replace(i,""),d=n.find[h](g,b,c),null!=d))){a=a.replace(n.match[h],"");break}return d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},l.filter=function(a,b,c,d){for(var e,f,g,h,i,j,k,m,o,p=a,q=[],r=b,s=b&&b[0]&&l.isXML(b[0]);a&&b.length;){for(g in n.filter)if(null!=(e=n.leftMatch[g].exec(a))&&e[2]){if(j=n.filter[g],k=e[1],f=!1,e.splice(1,1),"\\"===k.substr(k.length-1))continue;if(r===q&&(q=[]),n.preFilter[g])if(e=n.preFilter[g](e,r,c,q,d,s)){if(e===!0)continue}else f=h=!0;if(e)for(m=0;null!=(i=r[m]);m++)i&&(h=j(i,e,m,r),o=d^h,c&&null!=h?o?f=!0:r[m]=!1:o&&(q.push(i),f=!0));if(void 0!==h){if(c||(r=q),a=a.replace(n.match[g],""),!f)return[];break}}if(a===p){if(null!=f)break;l.error(a)}p=a}return r},l.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var m=l.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d||11===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(j,"");for(a=a.firstChild;a;a=a.nextSibling)e+=m(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=m(c));return e},n=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!k.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,h=a.length;g<h;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&l.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!k.test(b)){for(b=b.toLowerCase();e<f;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b&&g}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&l.filter(b,a,!0)}},"":function(c,d,f){var g,h=e++,i=b;"string"!=typeof d||k.test(d)||(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,c,g,f)},"~":function(c,d,f){var g,h=e++,i=b;"string"!=typeof d||k.test(d)||(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,c,g,f)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!=typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(i,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||l.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&l.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&n.attrMap[g]&&(a[1]=n.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if("not"===a[1]){if(!((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=l.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}a[3]=l(a[3],null,null,b)}else if(n.match.POS.test(a[0])||n.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,
a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!l(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=n.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||m([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}l.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j=b[1],k=a;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===j)return!0;k=a;case"last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case"nth":if(c=b[2],e=b[3],1===c&&0===e)return!0;if(f=b[0],g=a.parentNode,g&&(g[d]!==f||!a.nodeIndex)){for(h=0,k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);g[d]=f}return i=a.nodeIndex-e,0===c?0===i:i%c===0&&i/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attr?l.attr(a,c):n.attrHandle[c]?n.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&l.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f&&(e===g||e.substr(0,g.length+1)===g+"-"):e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=n.setFilters[e];if(f)return f(a,c,b,d)}}},o=n.match.POS,p=function(a,b){return"\\"+(b-0+1)};for(var q in n.match)n.match[q]=new RegExp(n.match[q].source+/(?![^\[]*\])(?![^\(]*\))/.source),n.leftMatch[q]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[q].source.replace(/\\(\d+)/g,p));n.match.globalPOS=o;var r=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(a){r=function(a,b){var c=0,d=b||[];if("[object Array]"===f.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var s,t;document.documentElement.compareDocumentPosition?s=function(a,b){return a===b?(g=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(s=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return t(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return t(e[k],f[k]);return k===c?t(a,f[k],-1):t(e[k],b,1)},t=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>",c.insertBefore(a,c.firstChild),document.getElementById(b)&&(n.find.ID=function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||"undefined"!=typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===a[1]?[d]:void 0:[]}},n.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(n.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(n.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&!function(){var a=l,b=document.createElement("div"),c="__sizzle__";if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){l=function(b,d,e,f){if(d=d||document,!f&&!l.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(1===d.nodeType||9===d.nodeType)){if(g[1])return r(d.getElementsByTagName(b),e);if(g[2]&&n.find.CLASS&&d.getElementsByClassName)return r(d.getElementsByClassName(g[2]),e)}if(9===d.nodeType){if("body"===b&&d.body)return r([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return r([],e);if(h.id===g[3])return r([h],e)}try{return r(d.querySelectorAll(b),e)}catch(a){}}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var i=d,j=d.getAttribute("id"),k=j||c,m=d.parentNode,o=/^\s*[+~]/.test(b);j?k=k.replace(/'/g,"\\$&"):d.setAttribute("id",k),o&&m&&(d=d.parentNode);try{if(!o||m)return r(d.querySelectorAll("[id='"+k+"'] "+b),e)}catch(a){}finally{j||i.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)l[d]=a[d];b=null}}(),function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(document.createElement("div"),"div"),d=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(a){d=!0}l.matchesSelector=function(a,e){if(e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!l.isXML(a))try{if(d||!n.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(a){}return l(e,null,null,[a]).length>0}}}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(n.order.splice(1,0,"CLASS"),n.find.CLASS=function(a,b,c){if("undefined"!=typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))}(),document.documentElement.contains?l.contains=function(a,b){return a!==b&&(!a.contains||a.contains(b))}:document.documentElement.compareDocumentPosition?l.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))}:l.contains=function(){return!1},l.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return!!b&&"HTML"!==b.nodeName};var u=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=n.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(n.match.PSEUDO,"");a=n.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)l(a,g[h],e,c);return l.filter(f,e)};window.tinymce.dom.Sizzle=l}(),function(a){a.dom.Element=function(b,c){var d,e,f=this;f.settings=c=c||{},f.id=b,f.dom=d=c.dom||a.DOM,a.isIE||(e=d.get(f.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){f[a]=function(){var c,e=[b];for(c=0;c<arguments.length;c++)e.push(arguments[c]);return e=d[a].apply(d,e),f.update(a),e}}),a.extend(f,{on:function(b,c,d){return a.dom.Event.add(f.id,b,c,d)},getXY:function(){return{x:parseInt(f.getStyle("left")),y:parseInt(f.getStyle("top"))}},getSize:function(){var a=d.get(f.id);return{w:parseInt(f.getStyle("width")||a.clientWidth),h:parseInt(f.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){f.setStyles({left:a,top:b})},moveBy:function(a,b){var c=f.getXY();f.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){f.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=f.getSize();f.resizeTo(c.w+a,c.h+b)},update:function(b){var e;if(a.isIE6&&c.blocker){if(b=b||"",0===b.indexOf("get")||0===b.indexOf("has")||0===b.indexOf("is"))return;if("remove"==b)return void d.remove(f.blocker);f.blocker?e=d.get(f.blocker):(f.blocker=d.uniqueId(),e=d.add(c.container||d.getRoot(),"iframe",{id:f.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),d.setStyle(e,"opacity",0)),d.setStyles(e,{left:f.getStyle("left",1),top:f.getStyle("top",1),width:f.getStyle("width",1),height:f.getStyle("height",1),display:f.getStyle("display",1),zIndex:parseInt(f.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){var b=a.is,c=a.isIE,d=a.each,e=a.dom.TreeWalker;a.create("tinymce.dom.Selection",{Selection:function(b,c,e,f){var g=this;g.dom=b,g.win=c,g.serializer=e,g.editor=f,d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){g[b]=new a.util.Dispatcher(g)}),g.win.getSelection||(g.tridentSel=new a.dom.TridentSelection(g)),a.isIE&&!a.isIE11&&b.boxModel&&this._fixIESelection(),a.addUnload(g.destroy,g)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var c,d,e,f=this,g=f.getRng(),h=f.dom.create("body"),i=f.getSel();return a=a||{},c=d="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",f.onBeforeGetContent.dispatch(f,a),"text"==a.format?f.isCollapsed()?"":g.text||(i.toString?i.toString():""):(g.cloneContents?(e=g.cloneContents(),e&&h.appendChild(e)):b(g.item)||b(g.htmlText)?(h.innerHTML="<br>"+(g.item?g.item(0).outerHTML:g.htmlText),h.removeChild(h.firstChild)):h.innerHTML=g.toString(),/^\s/.test(h.innerHTML)&&(c=" "),/\s+$/.test(h.innerHTML)&&(d=" "),a.getInner=!0,a.content=f.isCollapsed()?"":c+f.serializer.serialize(h,a)+d,f.onGetContent.dispatch(f,a),a.content)},setContent:function(a,b){var c,d,e,f=this,g=f.getRng(),h=f.win.document;if(b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||f.onBeforeSetContent.dispatch(f,b),a=b.content,g.insertNode){a+='<span id="__caret">_</span>',g.startContainer==h&&g.endContainer==h?h.body.innerHTML=a:(g.deleteContents(),0===h.body.childNodes.length?h.body.innerHTML=a:g.createContextualFragment?g.insertNode(g.createContextualFragment(a)):(d=h.createDocumentFragment(),e=h.createElement("div"),d.appendChild(e),e.outerHTML=a,g.insertNode(d))),c=f.dom.get("__caret"),g=h.createRange(),g.setStartBefore(c),g.setEndBefore(c),f.setRng(g),f.dom.remove("__caret");try{f.setRng(g)}catch(a){}}else g.item&&(h.execCommand("Delete",!1,null),g=f.getRng()),/^\s+/.test(a)?(g.pasteHTML('<span id="__mce_tmp">_</span>'+a),f.dom.remove("__mce_tmp")):g.pasteHTML(a);b.no_events||f.onSetContent.dispatch(f,b)},getStart:function(){var a,b,c,d,e=this,f=e.getRng();if(f.duplicate||f.item){if(f.item)return f.item(0);for(c=f.duplicate(),c.collapse(1),a=c.parentElement(),a.ownerDocument!==e.dom.doc&&(a=e.dom.getRoot()),b=d=f.parentElement();d=d.parentNode;)if(d==a){a=b;break}return a}return a=f.startContainer,1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,f.startOffset)]),a&&3==a.nodeType?a.parentNode:a},getEnd:function(){var a,b,c=this,d=c.getRng();return d.duplicate||d.item?d.item?d.item(0):(d=d.duplicate(),d.collapse(0),a=d.parentElement(),a.ownerDocument!==c.dom.doc&&(a=c.dom.getRoot()),a&&"BODY"==a.nodeName?a.lastChild||a:a):(a=d.endContainer,b=d.endOffset,1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[b>0?b-1:b]),a&&3==a.nodeType?a.parentNode:a)},getBookmark:function(a,b){function c(a,b){var c=0;return d(o.select(a),function(a,d){a==b&&(c=d)}),c}function e(a){function b(b){var c,d,e,f=b?"start":"end";c=a[f+"Container"],d=a[f+"Offset"],1==c.nodeType&&"TR"==c.nodeName&&(e=c.childNodes,c=e[Math.min(b?d:d-1,e.length-1)],c&&(d=b?0:c.childNodes.length,a["set"+(b?"Start":"End")](c,d)))}return b(!0),b(),a}function f(){function a(a,c){var e,f,g=a[c?"startContainer":"endContainer"],h=a[c?"startOffset":"endOffset"],i=[],j=0;if(3==g.nodeType){if(b)for(e=g.previousSibling;e&&3==e.nodeType;e=e.previousSibling)h+=e.nodeValue.length;i.push(h)}else f=g.childNodes,h>=f.length&&f.length&&(j=1,h=Math.max(0,f.length-1)),i.push(n.dom.nodeIndex(f[h],b)+j);for(;g&&g!=d;g=g.parentNode)i.push(n.dom.nodeIndex(g,b));return i}var c=n.getRng(!0),d=o.getRoot(),e={};return e.start=a(c,!0),n.isCollapsed()||(e.end=a(c)),e}var g,h,i,j,k,l,m,n=this,o=n.dom,p="\ufeff";if(2==a)return n.tridentSel?n.tridentSel.getBookmark(a):f();if(a)return g=n.getRng(),g.setStart&&(g={startContainer:g.startContainer,startOffset:g.startOffset,endContainer:g.endContainer,endOffset:g.endOffset}),{rng:g};if(g=n.getRng(),i=o.uniqueId(),j=tinyMCE.activeEditor.selection.isCollapsed(),m="overflow:hidden;line-height:0px",g.duplicate||g.item){if(g.item)return l=g.item(0),k=l.nodeName,{name:k,index:c(k,l)};h=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+m+'">'+p+"</span>"),j||(h.collapse(!1),g.moveToElementText(h.parentElement()),0===g.compareEndPoints("StartToEnd",h)&&h.move("character",-1),h.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+m+'">'+p+"</span>"))}catch(a){return null}}else{if(l=n.getNode(),k=l.nodeName,"IMG"==k)return{name:k,index:c(k,l)};h=e(g.cloneRange()),j||(h.collapse(!1),h.insertNode(o.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:m},p))),g=e(g),g.collapse(!0),g.insertNode(o.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:m},p))}return n.moveToBookmark({id:i,keep:1}),{id:i}},moveToBookmark:function(b){function e(a){var c,d,e,f,g=b[a?"start":"end"];if(g){for(e=g[0],d=j,c=g.length-1;c>=1;c--){if(f=d.childNodes,g[c]>f.length-1)return;d=f[g[c]]}3===d.nodeType&&(e=Math.min(g[0],d.nodeValue.length)),1===d.nodeType&&(e=Math.min(g[0],d.childNodes.length)),a?h.setStart(d,e):h.setEnd(d,e)}return!0}function f(c){var e,f,g,h,i=p.get(b.id+"_"+c),j=b.keep;if(i&&(e=i.parentNode,"start"==c?(j?(e=i.firstChild,f=1):f=p.nodeIndex(i),k=l=e,m=n=f):(j?(e=i.firstChild,f=1):f=p.nodeIndex(i),l=e,n=f),!j)){for(h=i.previousSibling,g=i.nextSibling,d(a.grep(i.childNodes),function(a){3==a.nodeType&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});i=p.get(b.id+"_"+c);)p.remove(i,1);h&&g&&h.nodeType==g.nodeType&&3==h.nodeType&&!a.isOpera&&(f=h.nodeValue.length,h.appendData(g.nodeValue),p.remove(g),"start"==c?(k=l=h,m=n=f):(l=h,n=f))}}function g(a){return!p.isBlock(a)||a.innerHTML||c||(a.innerHTML='<br data-mce-bogus="1" />'),a}var h,i,j,k,l,m,n,o=this,p=o.dom;if(b)if(b.start){if(h=p.createRng(),j=p.getRoot(),o.tridentSel)return o.tridentSel.moveToBookmark(b);e(!0)&&e()&&o.setRng(h)}else if(b.id)f("start"),f("end"),k&&(h=p.createRng(),h.setStart(g(k),m),h.setEnd(g(l),n),o.setRng(h));else if(b.name)o.select(p.select(b.name)[b.index]);else if(b.rng){if(h=b.rng,h.startContainer){i=o.dom.createRng();try{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)}catch(a){}h=i}o.setRng(h)}},select:function(b,c){function d(b,c){var d=new e(b,b);do{if(3==b.nodeType&&0!==a.trim(b.nodeValue).length)return void(c?i.setStart(b,0):i.setEnd(b,b.nodeValue.length));if("BR"==b.nodeName)return void(c?i.setStartBefore(b):i.setEndBefore(b))}while(b=c?d.next():d.prev())}var f,g=this,h=g.dom,i=h.createRng();return b&&(f=h.nodeIndex(b),i.setStart(b.parentNode,f),i.setEnd(b.parentNode,f+1),c&&(d(b,1),d(b)),g.setRng(i)),b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!(!b||b.item)&&(b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!c||b.collapsed)},collapse:function(a){var b,c=this,d=c.getRng();d.item&&(b=d.item(0),d=c.win.document.body.createTextRange(),d.moveToElementText(b)),d.collapse(!!a),c.setRng(d)},getSel:function(){var a=this.win;return a.getSelection?a.getSelection():a.document.selection},getRng:function(b){var c,d,e,f=this,g=f.win.document;if(f.fakeRng)return f.fakeRng;if(b&&f.tridentSel)return f.tridentSel.getRangeAt(0);try{(c=f.getSel())&&(d=c.rangeCount>0?c.getRangeAt(0):c.createRange?c.createRange():g.createRange())}catch(a){}return a.isIE&&!a.isIE11&&d&&d.setStart&&g.selection.createRange().item&&(e=g.selection.createRange().item(0),d=g.createRange(),d.setStartBefore(e),d.setEndAfter(e)),d||(d=g.createRange?g.createRange():g.body.createTextRange()),d.setStart&&9===d.startContainer.nodeType&&d.collapsed&&(e=f.dom.getRoot(),d.setStart(e,0),d.setEnd(e,0)),f.selectedRange&&f.explicitRange&&(0===d.compareBoundaryPoints(d.START_TO_START,f.selectedRange)&&0===d.compareBoundaryPoints(d.END_TO_END,f.selectedRange)?d=f.explicitRange:(f.selectedRange=null,f.explicitRange=null)),d},setRng:function(a,b){var c,d=this;if(a)if(a.select)try{a.select()}catch(a){}else if(d.tridentSel){if(a.cloneRange)try{return void d.tridentSel.addRange(a)}catch(a){}}else if(c=d.getSel()){d.explicitRange=a;try{c.removeAllRanges(),c.addRange(a)}catch(a){}b===!1&&c.extend&&(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset)),d.selectedRange=c.rangeCount>0?c.getRangeAt(0):null}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){function a(a,b){for(var c=a;a&&3===a.nodeType&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||c}var b,c=this,d=c.getRng(),e=(c.getSel(),d.startContainer),f=d.endContainer;return d?d.setStart?(b=d.commonAncestorContainer,!d.collapsed&&(d.startContainer==d.endContainer&&d.endOffset-d.startOffset<2&&d.startContainer.hasChildNodes()&&(b=d.startContainer.childNodes[d.startOffset]),3===e.nodeType&&3===f.nodeType&&(e=e.length===d.startOffset?a(e.nextSibling,!0):e.parentNode,f=0===d.endOffset?a(f.previousSibling,!1):f.parentNode,e&&e===f))?e:b&&3==b.nodeType?b.parentNode:b):d.item?d.item(0):d.parentElement():c.dom.getRoot()},getSelectedBlocks:function(a,b){var c,d,f,g=this,h=g.dom,i=[];if(c=h.getParent(a||g.getStart(),h.isBlock),d=h.getParent(b||g.getEnd(),h.isBlock),c&&i.push(c),c&&d&&c!=d){f=c;for(var j=new e(c,h.getRoot());(f=j.next())&&f!=d;)h.isBlock(f)&&i.push(f)}return d&&c!=d&&i.push(d),i},isForward:function(){var a,b,c=this.dom,d=this.getSel();return!d||null==d.anchorNode||null==d.focusNode||(a=c.createRng(),a.setStart(d.anchorNode,d.anchorOffset),a.collapse(!0),b=c.createRng(),b.setStart(d.focusNode,d.focusOffset),b.collapse(!0),a.compareBoundaryPoints(a.START_TO_START,b)<=0)},normalize:function(){function b(a){function b(a,b){for(var c=new e(a,o.getParent(a.parentNode,o.isBlock)||p);a=c[b?"prev":"next"]();)if("BR"===a.nodeName)return!0}function h(a,b){var c,g;for(b=b||i,c=new e(b,o.getParent(b.parentNode,o.isBlock)||p);l=c[a?"prev":"next"]();){if(3===l.nodeType&&l.nodeValue.length>0)return i=l,j=a?l.nodeValue.length:0,void(d=!0);if(o.isBlock(l)||m[l.nodeName.toLowerCase()])return;g=l}f&&g&&(i=g,d=!0,j=0)}var i,j,k,l,m,n,o=g.dom,p=o.getRoot();if(i=c[(a?"start":"end")+"Container"],j=c[(a?"start":"end")+"Offset"],m=o.schema.getNonEmptyElements(),9===i.nodeType&&(i=o.getRoot(),j=0),i===p){if(a&&(l=i.childNodes[j>0?j-1:0],l&&(n=l.nodeName.toLowerCase(),m[l.nodeName]||"TABLE"==l.nodeName)))return;if(i.hasChildNodes()&&(i=i.childNodes[Math.min(!a&&j>0?j-1:j,i.childNodes.length-1)],j=0,i.hasChildNodes()&&!/TABLE/.test(i.nodeName))){l=i,k=new e(i,p);do{if(3===l.nodeType&&l.nodeValue.length>0){j=a?0:l.nodeValue.length,i=l,d=!0;break}if(m[l.nodeName.toLowerCase()]){j=o.nodeIndex(l),i=l.parentNode,"IMG"!=l.nodeName||a||j++,d=!0;break}}while(l=a?k.next():k.prev())}}f&&(3===i.nodeType&&0===j&&h(!0),1===i.nodeType&&(l=i.childNodes[j],!l||"BR"!==l.nodeName||b(l)||b(l,!0)||h(!0,i.childNodes[j]))),a&&!f&&3===i.nodeType&&j===i.nodeValue.length&&h(!1),d&&c["set"+(a?"Start":"End")](i,j)}var c,d,f,g=this;a.isIE||(c=g.getRng(),f=c.collapsed,b(!0),f||b(),d&&(f&&c.collapse(!0),g.setRng(c,g.isForward())))},selectorChanged:function(a,b){var c,e=this;return e.selectorChangedData||(e.selectorChangedData={},c={},e.editor.onNodeChange.addToTop(function(a,b,f){var g=e.dom,h=g.getParents(f,null,g.getRoot()),i={};d(e.selectorChangedData,function(a,b){d(h,function(e){if(g.is(e,b))return c[b]||(d(a,function(a){a(!0,{node:e,selector:b,parents:h})}),c[b]=a),i[b]=a,!1})}),d(c,function(a,b){i[b]||(delete c[b],d(a,function(a){a(!1,{node:f,selector:b,parents:h})}))})})),e.selectorChangedData[a]||(e.selectorChangedData[a]=[]),e.selectorChangedData[a].push(b),e},scrollIntoView:function(a){var b,c,d=this,e=d.dom;c=e.getViewPort(d.editor.getWin()),b=e.getPos(a).y,(b<c.y||b+25>c.y+c.h)&&d.editor.getWin().scrollTo(0,b<c.y?b:b-c.h+25)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function a(a,b){var c=i.createTextRange();try{c.moveToPoint(a,b)}catch(a){c=null}return c}function b(b){var d;b.button?(d=a(b.x,b.y),d&&(d.compareEndPoints("StartToStart",e)>0?d.setEndPoint("StartToStart",e):d.setEndPoint("EndToEnd",e),d.select())):c()}function c(){var a=h.selection.createRange();e&&!a.item&&0===a.compareEndPoints("StartToEnd",a)&&e.select(),g.unbind(h,"mouseup",c),g.unbind(h,"mousemove",b),e=d=0}var d,e,f,g=this.dom,h=g.doc,i=h.body;h.documentElement.unselectable=!0,g.bind(h,["mousedown","contextmenu"],function(i){if("HTML"===i.target.nodeName){if(d&&c(),f=h.documentElement,f.scrollHeight>f.clientHeight)return;d=1,e=a(i.x,i.y),e&&(g.bind(h,"mouseup",c),g.bind(h,"mousemove",b),g.win.focus(),e.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){function e(a){function b(a){return a&&"br"===a.name}var c,d;c=a.lastChild,b(c)&&(d=c.prev,b(d)&&(c.remove(),d.remove()))}var f,g,h,i=this,j=a.isIE,k=a.each;return b.apply_source_formatting||(b.indent=!1),c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",b.remove_trailing_brs=!("remove_trailing_brs"in b)||b.remove_trailing_brs,f=new a.util.Dispatcher(i),g=new a.util.Dispatcher(i),h=new a.html.DomParser(b,d),h.addAttributeFilter("data-mce-tabindex",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.attr("tabindex",c.attributes.map["data-mce-tabindex"]),c.attr(b,null)}),h.addAttributeFilter("src,href,style",function(a,d){for(var e,f,g,h=a.length,i="data-mce-"+d,j=b.url_converter,k=b.url_converter_scope;h--;)e=a[h],f=e.attributes.map[i],f!==g?(e.attr(d,f.length>0?f:null),e.attr(i,null)):(f=e.attributes.map[d],"style"===d?f=c.serializeStyle(c.parseStyle(f),e.name):j&&(f=j.call(k,f,d,e.name)),e.attr(d,f.length>0?f:null))}),h.addAttributeFilter("class",function(a,b){for(var c,d,e=a.length;e--;)c=a[e],d=c.attr("class"),d&&(d=c.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),c.attr("class",d.length>0?d:null))}),h.addAttributeFilter("data-mce-type",function(a,b,c){for(var d,e=a.length;e--;)d=a[e],"bookmark"!==d.attributes.map["data-mce-type"]||c.cleanup||d.remove()}),h.addNodeFilter("noscript",function(b){for(var c,d=b.length;d--;)c=b[d].firstChild,c&&(c.value=a.html.Entities.decode(c.value))}),h.addNodeFilter("script,style",function(a,b){function c(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var d,e,f=a.length;f--;)d=a[f],e=d.firstChild?d.firstChild.value:"","script"===b?(type=d.attr("type"),type&&d.attr("type","mce-no/type"==type?null:type.replace(/^mce\-/,"")),e.length>0&&(d.firstChild.value="// <![CDATA[\n"+c(e)+"\n// ]]>")):e.length>0&&(d.firstChild.value="<!--\n"+c(e)+"\n-->")}),h.addNodeFilter("#comment",function(a,b){for(var c,d=a.length;d--;)c=a[d],0===c.value.indexOf("[CDATA[")?(c.name="#cdata",c.type=4,c.value=c.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===c.value.indexOf("mce:protected ")&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(c.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(a,b){for(var c,d=a.length;d--;)c=a[d],7===c.type?c.remove():1===c.type&&("input"!==b||"type"in c.attributes.map||c.attr("type","text"))}),b.fix_list_elements&&h.addNodeFilter("ul,ol",function(a,b){for(var c,d,e=a.length;e--;)c=a[e],d=c.parent,"ul"!==d.name&&"ol"!==d.name||c.prev&&"li"===c.prev.name&&c.prev.append(c)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-new",function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}),{schema:d,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,onPreProcess:f,onPostProcess:g,serialize:function(l,m){var n,o,p,q,r;return j&&c.select("script,style,select,map").length>0?(r=l.innerHTML,l=l.cloneNode(!1),c.setHTML(l,r)):l=l.cloneNode(!0),n=l.ownerDocument.implementation,n.createHTMLDocument&&(o=n.createHTMLDocument(""),k("BODY"==l.nodeName?l.childNodes:[l],function(a){o.body.appendChild(o.importNode(a,!0))}),l="BODY"!=l.nodeName?o.body.firstChild:o.body,p=c.doc,c.doc=o),m=m||{},m.format=m.format||"html",m.selection&&(m.forced_root_block=""),m.no_events||(m.node=l,f.dispatch(i,m)),rootNode=h.parse(a.trim(m.getInner?l.innerHTML:c.getOuterHTML(l)),m),e(rootNode),q=new a.html.Serializer(b,d),m.content=q.serialize(rootNode),m.cleanup||(m.content=m.content.replace(/\uFEFF/g,"")),m.no_events||g.dispatch(i,m),p&&(c.doc=p),m.node=null,m.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function c(b,c){function d(){j.remove(i),f&&(f.onreadystatechange=f.onload=f=null),c()}function e(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+b)}var f,g,h,i,j=a.DOM;return i=j.uniqueId(),a.isIE6&&(g=new a.util.URI(b),h=location,g.host==h.hostname&&g.port==h.port&&g.protocol+":"==h.protocol&&"file"!=g.protocol.toLowerCase())?void a.util.XHR.send({url:a._addVer(g.getURI()),success:function(a){var b=j.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),j.remove(b),d()},error:e}):(f=document.createElement("script"),f.setAttribute("data-cfasync",!1),f.id=i,f.type="text/javascript",f.src=a._addVer(b),a.isIE&&!a.isIE11||(f.onload=d),f.onerror=e,a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;"complete"!=a&&"loaded"!=a||d()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(f))}var d,e=0,f=1,g=2,h={},i=[],j={},k=[],l=0;this.isDone=function(a){return h[a]==g},this.markDone=function(a){h[a]=g},this.add=this.load=function(a,b,c){var f=h[a];f==d&&(i.push(a),h[a]=e),b&&(j[a]||(j[a]=[]),j[a].push({func:b,scope:c||this}))},this.loadQueue=function(a,b){this.loadScripts(i,a,b)},this.loadScripts=function(b,e,i){function m(b){a.each(j[b],function(a){a.func.call(a.scope)}),j[b]=d}var n;k.push({func:e,scope:i||this}),(n=function(){var d=a.grep(b);b.length=0,a.each(d,function(a){return h[a]==g?void m(a):void(h[a]!=f&&(h[a]=f,l++,c(a,function(){h[a]=g,l--,m(a),n()})))}),l||(a.each(k,function(a){a.func.call(a.scope)}),k.length=0)})()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),function(a){function b(a,b){var c=a.childNodes;return b--,b>c.length-1?b=c.length-1:b<0&&(b=0),c[b]||a}var c=a.each,d=a.dom.TreeWalker;a.dom.RangeUtils=function(a){this.walk=function(d,e){function f(a){var b;return b=a[0],3===b.nodeType&&b===q&&r>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],0===t&&a.length>0&&b===s&&3===b.nodeType&&a.splice(a.length-1,1),a}function g(a,b,c){for(var d=[];a&&a!=c;a=a[b])d.push(a);return d}function h(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function i(a,b,c){var d=c?"nextSibling":"previousSibling";for(m=a,n=m.parentNode;m&&m!=b;m=n)n=m.parentNode,o=g(m==a?m:m[d],d),o.length&&(c||o.reverse(),e(f(o)))}var j,k,l,m,n,o,p,q=d.startContainer,r=d.startOffset,s=d.endContainer,t=d.endOffset;if(p=a.select("td.mceSelected,th.mceSelected"),p.length>0)return void c(p,function(a){e([a])});if(1==q.nodeType&&q.hasChildNodes()&&(q=q.childNodes[r]),1==s.nodeType&&s.hasChildNodes()&&(s=b(s,t)),q==s)return e(f([q]));for(j=a.findCommonAncestor(q,s),m=q;m;m=m.parentNode){if(m===s)return i(q,j,!0);if(m===j)break}for(m=s;m;m=m.parentNode){if(m===q)return i(s,j);if(m===j)break}k=h(q,j)||q,l=h(s,j)||s,i(q,k,!0),o=g(k==q?k:k.nextSibling,"nextSibling",l==s?l.nextSibling:l),o.length&&e(f(o)),i(s,l)},this.split=function(a){function b(a,b){return a.splitText(b)}var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset;return c==e&&3==c.nodeType?d>0&&d<c.nodeValue.length&&(e=b(c,d),c=e.previousSibling,f>d?(f-=d,c=e=b(e,f).previousSibling,f=e.nodeValue.length,d=0):f=0):(3==c.nodeType&&d>0&&d<c.nodeValue.length&&(c=b(c,d),d=0),3==e.nodeType&&f>0&&f<e.nodeValue.length&&(e=b(e,f).previousSibling,f=e.nodeValue.length)),{startContainer:c,startOffset:d,endContainer:e,endOffset:f}},this.normalize=function(b){function c(c){function g(b,c){for(var e=new d(b,a.getParent(b.parentNode,a.isBlock)||q);b=e[c?"prev":"next"]();)if("BR"===b.nodeName)return!0}function h(a,b){return a.previousSibling&&a.previousSibling.nodeName==b}function i(b,c){var g,h,i;if(c=c||j,i=a.getParent(c.parentNode,a.isBlock)||q,b&&"BR"==c.nodeName&&p&&a.isEmpty(i))return j=c.parentNode,k=a.nodeIndex(c),void(e=!0);for(g=new d(c,i);m=g[b?"prev":"next"]();){if("false"===a.getContentEditableParent(m))return;if(3===m.nodeType&&m.nodeValue.length>0)return j=m,k=b?m.nodeValue.length:0,void(e=!0);if(a.isBlock(m)||n[m.nodeName.toLowerCase()])return;h=m}f&&h&&(j=h,e=!0,k=0)}var j,k,l,m,n,o,p,q=a.getRoot();if(j=b[(c?"start":"end")+"Container"],k=b[(c?"start":"end")+"Offset"],p=1==j.nodeType&&k===j.childNodes.length,n=a.schema.getNonEmptyElements(),o=c,1==j.nodeType&&k>j.childNodes.length-1&&(o=!1),9===j.nodeType&&(j=a.getRoot(),k=0),j===q){if(o&&(m=j.childNodes[k>0?k-1:0],m&&(n[m.nodeName]||"TABLE"==m.nodeName)))return;if(j.hasChildNodes()&&(k=Math.min(!o&&k>0?k-1:k,j.childNodes.length-1),j=j.childNodes[k],k=0,j.hasChildNodes()&&!/TABLE/.test(j.nodeName))){m=j,l=new d(j,q);do{if(3===m.nodeType&&m.nodeValue.length>0){k=o?0:m.nodeValue.length,j=m,e=!0;break}if(n[m.nodeName.toLowerCase()]){k=a.nodeIndex(m),j=m.parentNode,"IMG"!=m.nodeName||o||k++,e=!0;break}}while(m=o?l.next():l.prev())}}f&&(3===j.nodeType&&0===k&&i(!0),1===j.nodeType&&(m=j.childNodes[k],m||(m=j.childNodes[k-1]),!m||"BR"!==m.nodeName||h(m,"A")||g(m)||g(m,!0)||i(!0,m))),o&&!f&&3===j.nodeType&&k===j.nodeValue.length&&i(!1),e&&b["set"+(c?"Start":"End")](j,k)}var e,f;return f=b.collapsed,c(!0),f||c(),e&&f&&b.collapse(!0),e}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1},a.dom.RangeUtils.getCaretRangeFromPoint=function(a,b,c){var d,e;if(c.caretPositionFromPoint)e=c.caretPositionFromPoint(a,b),d=c.createRange(),d.setStart(e.offsetNode,e.offset),d.collapse(!0);else if(c.caretRangeFromPoint)d=c.caretRangeFromPoint(a,b);else if(c.body.createTextRange){d=c.body.createTextRange();try{d.moveToPoint(a,b),d.collapse(!0)}catch(a){d.collapse(b<c.body.clientHeight);
}}return d},a.dom.RangeUtils.getNode=function(a,b){return 1==a.nodeType&&a.hasChildNodes()&&(b>=a.childNodes.length&&(b=a.childNodes.length-1),a=a.childNodes[b]),a}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f,g,h,i,j,k=this,l=d.root,m=d.items,n=d.enableUpDown,o=d.enableLeftRight||!d.enableUpDown,p=d.excludeFromTabOrder;e=e||a.DOM,f=function(a){j=a.target.id},g=function(a){e.setAttrib(a.target.id,"tabindex","-1")},i=function(a){var b=e.get(j);e.setAttrib(b,"tabindex","0"),b.focus()},k.focus=function(){e.get(j).focus()},k.destroy=function(){c(m,function(a){var b=e.get(a.id);e.unbind(b,"focus",f),e.unbind(b,"blur",g)});var a=e.get(l);e.unbind(a,"focus",i),e.unbind(a,"keydown",h),m=e=l=k.focus=f=g=h=i=null,k.destroy=function(){}},k.moveFocus=function(a,f){var g,h=-1;k.controls;j&&(c(m,function(a,b){if(a.id===j)return h=b,!1}),h+=a,h<0?h=m.length-1:h>=m.length&&(h=0),g=m[h],e.setAttrib(j,"tabindex","-1"),e.setAttrib(g.id,"tabindex","0"),e.get(g.id).focus(),d.actOnFocus&&d.onAction(g.id),f&&b.cancel(f))},h=function(a){var c=37,e=39,f=38,g=40,h=27,i=14,l=13,m=32;switch(a.keyCode){case c:o&&k.moveFocus(-1),b.cancel(a);break;case e:o&&k.moveFocus(1),b.cancel(a);break;case f:n&&k.moveFocus(-1),b.cancel(a);break;case g:n&&k.moveFocus(1),b.cancel(a);break;case h:d.onCancel&&(d.onCancel(),b.cancel(a));break;case i:case l:case m:d.onAction&&(d.onAction(j),b.cancel(a))}},c(m,function(a,b){var c,d;a.id||(a.id=e.uniqueId("_mce_item_")),d=e.get(a.id),p?(e.bind(d,"blur",g),c="-1"):c=0===b?"0":"-1",d.setAttribute("tabindex",c),e.bind(d,"focus",f)}),m[0]&&(j=m[0].id),e.setAttrib(l,"tabindex","-1");var q=e.get(l);e.bind(q,"focus",i),e.bind(q,"keydown",h)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a,b=this;c(b.disabled)&&(a=b.disabled,b.disabled=-1,b.setDisabled(a)),c(b.active)&&(a=b.active,b.active=-1,b.setActive(a))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{class:this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"},"")}}),function(a){var b=a.is;a.DOM,a.each,a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=(a.is,a.DOM),c=(a.each,a.walk);a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&c(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&c(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(c){return c.settings||(c=new a.ui.MenuItem(c.id||b.uniqueId(),c)),this.onAddItem.dispatch(this,c),this.items[c.id]=c},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return 0!==this.menuCount},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;c(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(c){var d=new a.ui.Menu(c.id||b.uniqueId(),c);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var c,d=a.is,e=a.DOM,f=a.each,g=a.dom.Event,h=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(b,c){c=c||{},c.container=c.container||e.doc.body,c.offset_x=c.offset_x||0,c.offset_y=c.offset_y||0,c.vp_offset_x=c.vp_offset_x||0,c.vp_offset_y=c.vp_offset_y||0,d(c.icons)&&!c.icons&&(c.class+=" mceNoIcons"),this.parent(b,c),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var c,d=this,f=d.settings;return b.container=b.container||f.container,b.parent=d,b.constrain=b.constrain||f.constrain,b.class=b.class||f.class,b.vp_offset_x=b.vp_offset_x||f.vp_offset_x,b.vp_offset_y=b.vp_offset_y||f.vp_offset_y,b.keyboard_focus=f.keyboard_focus,c=new a.ui.DropMenu(b.id||e.uniqueId(),b),c.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),c},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a,b,c=this,d=c.settings,f=e.get("menu_"+c.id+"_tbl"),g=e.get("menu_"+c.id+"_co");a=d.max_width?Math.min(g.offsetWidth,d.max_width):g.offsetWidth,b=d.max_height?Math.min(g.offsetHeight,d.max_height):g.offsetHeight,e.boxModel?c.element.setStyles({width:a,height:b}):c.element.setStyles({width:a+2,height:b+2}),d.max_width&&e.setStyle(g,"width",a),d.max_height&&(e.setStyle(g,"height",b),f.clientHeight<d.max_height&&e.setStyle(g,"overflow","hidden"))},showMenu:function(b,c,d){var i,j,k,l,m,n,o=this,p=o.settings,q=e.getViewPort(),r=2,s=o.classPrefix;o.collapse(1),o.isMenuVisible||(o.rendered?i=e.get("menu_"+o.id):(i=e.add(o.settings.container,o.renderNode()),f(o.items,function(a){a.postRender()}),o.element=new h("menu_"+o.id,{blocker:1,container:p.container})),a.isOpera||e.setStyles(i,{left:-65535,top:-65535}),e.show(i),o.update(),b+=p.offset_x||0,c+=p.offset_y||0,q.w-=4,q.h-=4,p.constrain&&(j=i.clientWidth-r,k=i.clientHeight-r,l=q.x+q.w,m=q.y+q.h,b+p.vp_offset_x+j>l&&(b=d?d-j:Math.max(0,l-p.vp_offset_x-j)),c+p.vp_offset_y+k>m&&(c=Math.max(0,m-p.vp_offset_y-k))),e.setStyles(i,{left:b,top:c}),o.element.update(),o.isMenuVisible=1,o.mouseClickFunc=g.add(i,"click",function(a){var b,c;if(c=a.target,"INPUT"!==c.nodeName&&c&&(c=e.getParent(c,"div.mceMenuItem"))&&!e.hasClass(c,s+"ItemSub")){if(b=o.items[c.id],b.isDisabled())return;for(n=o;n;)n.hideMenu&&n.hideMenu(),n=n.settings.parent;return b.settings.onclick&&b.settings.onclick(a),!1}}),o.mouseOverFunc=g.add(i,"mouseover",function(a){var b,c,d;if(d=a.target,d&&(d=e.getParent(d,"div.mceMenuItem"))){if(b=o.items[d.id],o.hasMenus()){if(o.lastMenu&&o.lastMenu.collapse(1),b.isDisabled())return;d&&e.hasClass(d,s+"ItemSub")&&(c=e.getRect(d),b.showMenu(c.x+c.w-r,c.y-r,c.x),o.lastMenu=b,e.addClass(e.get(b.id).firstChild,s+"ItemActive"))}b.settings.onmouseover&&b.settings.onmouseover(a)}}),g.add(i,"keydown",o._keyHandler,o),o.onShowMenu.dispatch(o),p.keyboard_focus&&o._setupKeyboardNav())},hideMenu:function(a){var b,c=this,d=e.get("menu_"+c.id);c.isMenuVisible&&(c.keyboardNav&&c.keyboardNav.destroy(),g.remove(d,"mouseover",c.mouseOverFunc),g.remove(d,"click",c.mouseClickFunc),g.remove(d,"keydown",c._keyHandler),e.hide(d),c.isMenuVisible=0,a||c.collapse(1),c.element&&c.element.hide(),(b=e.get(c.id))&&e.removeClass(b.firstChild,c.classPrefix+"ItemActive"),c.onHideMenu.dispatch(c))},add:function(a){var b,c=this;return a=c.parent(a),c.isRendered&&(b=e.get("menu_"+c.id))&&c._add(b,a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return e.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=e.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),g.remove(b,"mouseover",a.mouseOverFunc),g.remove(e.select("a",b),"focus",a.mouseOverFunc),g.remove(b,"click",a.mouseClickFunc),g.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),e.remove(b)},renderNode:function(){var a,b,c,d=this,g=d.settings;if(g.class.indexOf("defaultSkin")===-1&&(g.class="defaultSkin "+g.class),c=e.create("div",{role:"listbox",id:"menu_"+d.id,class:g.class,style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),d.settings.parent&&e.setAttrib(c,"aria-parent","menu_"+d.settings.parent.id),b=e.add(c,"div",{role:"presentation",id:"menu_"+d.id+"_co",class:d.classPrefix+(g.class?" "+g.class:"")}),d.element=new h("menu_"+d.id,{blocker:1,container:g.container}),g.menu_line&&e.add(b,"div",{class:d.classPrefix+"Line"}),g.filter){var i=e.add(b,"div",{class:d.classPrefix+"Filter"},'<input type="text" />');d.onHideMenu.add(function(){i.firstChild.value="",f(d.items,function(a,b){e.removeClass(b,"mceMenuItemHidden")})})}return a=e.add(b,"div",{role:"presentation",id:"menu_"+d.id+"_tbl",class:d.classPrefix+"Items"}),f(d.items,function(b){d._add(a,b)}),d.rendered=!0,c},_setupKeyboardNav:function(){var b,c,d=this;b=e.get("menu_"+d.id),c=e.select("a[role=option]","menu_"+d.id),c.splice(0,0,b),d.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+d.id,items:c,onCancel:function(){d.hideMenu()},enableUpDown:!0}),b.focus()},_filter:function(a){var d=this,g=a.target,h=new RegExp("^"+b(g.value),"i");f(d.items,function(a,b){var d,f=a.settings;d=!g.value||f.value===c||h.test(f.title),d?e.removeClass(b,"mceMenuItemHidden"):e.addClass(b,"mceMenuItemHidden")})},_keyHandler:function(a){var b=this,c={9:"tab",17:"ctrl",18:"alt",27:"esc",32:"space",37:"left",39:"right",13:"enter",91:"cmd"};switch(a.target&&"INPUT"===a.target.nodeName&&setTimeout(function(){c[a.keyCode]||b._filter(a),13===a.keyCode&&a.target.value&&b.settings.onselect&&b.settings.onselect(a.target.value)},0),a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),g.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var c,d,f,h,i,j=b.settings,k=this.classPrefix;return j.separator?(f=e.add(a,"div",{class:k+"ItemSeparator"}),void((c=f.previousSibling)&&e.addClass(c,"mceLast"))):(c=h=e.add(a,"div",{id:b.id,class:k+"Item "+k+"ItemEnabled"}),j.html?c=e.add(c,"div",{class:"mceMenuHtml"},j.html):(c=d=e.add(c,"a",{id:b.id+"_aria",role:j.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),i=e.add(c,"span",{class:"mceIcon"+(j.icon?" mce_"+j.icon:"")}),j.icon_src&&e.add(i,"img",{src:j.icon_src}),c=e.add(c,j.element||"span",{class:"mceText",title:b.settings.title},b.settings.title),j.parent&&(e.setAttrib(d,"aria-haspopup","true"),e.setAttrib(d,"aria-owns","menu_"+b.id))),e.addClass(h,j.class),b.settings.style&&("function"==typeof b.settings.style&&(b.settings.style=b.settings.style()),e.setAttrib(c,"style",b.settings.style)),b.onmouseover&&g.add(c,"mouseover",b.onmouseover),1==a.childNodes.length&&e.addClass(h,"mceFirst"),(c=h.previousSibling)&&e.hasClass(c,k+"ItemSeparator")&&e.addClass(f,"mceFirst"),b.collapse&&e.addClass(h,k+"ItemSub"),(c=h.previousSibling)&&e.removeClass(c,"mceLast"),void e.addClass(h,"mceLast"))}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a,c,d=this.classPrefix,e=this.settings;return c=b.encode(e.label||""),a='<button type="button" role="presentation" id="'+this.id+'" class="'+d+" "+d+"Enabled "+e.class+(c?" "+d+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+b.encode(e.title)+'">',a+=!e.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+e.class+'"></span>'+(c?'<span class="'+d+'Label">'+c+"</span>":""):'<span class="mceIcon '+e.class+'"><img class="mceIcon" src="'+e.image+'" alt="'+b.encode(e.title)+'" /></span>'+(c?'<span class="'+d+'Label">'+c+"</span>":""),a+="</button>"},postRender:function(){var b,c=this,d=c.settings;a.isIE&&c.editor&&a.dom.Event.add(c.id,"mousedown",function(a){var d=c.editor.selection.getNode().nodeName;b="IMG"===d?c.editor.selection.getBookmark():null}),a.dom.Event.add(c.id,"click",function(e){if(!c.isDisabled())return a.isIE&&c.editor&&null!==b&&c.editor.selection.moveToBookmark(b),d.onclick.call(d.scope,e)}),a.dom.Event.add(c.id,"keydown",function(b){if(!c.isDisabled()&&b.keyCode==a.VK.SPACEBAR)return a.dom.Event.cancel(b),d.onclick.call(d.scope,b)})}})}(tinymce),function(a){var b,c=a.DOM,d=a.dom.Event,e=a.each,f=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var e=this;e.parent(b,c,d),e.items=[],e.onChange=new f(e),e.onPostRender=new f(e),e.onAdd=new f(e),e.onRenderMenu=new a.util.Dispatcher(this),e.classPrefix="mceListBox",e.marked={}},select:function(a){var c,d,f=this;return f.marked={},a==b?f.selectByIndex(-1):(d=a&&"function"==typeof a?a:function(b){return b==a},void(a!=f.selectedValue&&(e(f.items,function(a,b){if(d(a.value))return c=1,f.selectByIndex(b),!1}),c||f.selectByIndex(-1))))},selectByIndex:function(a){var b,d,e,f=this;f.marked={},a!=f.selectedIndex&&(b=c.get(f.id+"_text"),e=c.get(f.id+"_voiceDesc"),d=f.items[a],d?(f.selectedValue=d.value,f.selectedIndex=a,c.setHTML(b,c.encode(d.title)),c.setHTML(e,f.settings.title+" - "+d.title),c.removeClass(b,"mceTitle"),c.setAttrib(f.id,"aria-valuenow",d.title)):(c.setHTML(b,c.encode(f.settings.title)),c.setHTML(e,c.encode(f.settings.title)),c.addClass(b,"mceTitle"),f.selectedValue=f.selectedIndex=null,c.setAttrib(f.id,"aria-valuenow",f.settings.title)),b=0)},mark:function(a){this.marked[a]=!0},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",b=this,d=b.settings,e=b.classPrefix;return a='<div role="listbox" aria-haspopup="true" aria-labelledby="'+b.id+'_voiceDesc" aria-describedby="'+b.id+'_voiceDesc"><div role="presentation" tabindex="0" id="'+b.id+'" class="'+e+" "+e+"Enabled"+(d.class?" "+d.class:"")+'">',a+='<div class="mceText">'+c.createHTML("span",{id:b.id+"_voiceDesc",class:"voiceLabel",style:"display:none;"},b.settings.title),a+=c.createHTML("a",{id:b.id+"_text",tabindex:-1,href:"javascript:;",class:"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(b.settings.title))+"</div>",a+='<div class="mceOpen">'+c.createHTML("a",{id:b.id+"_open",tabindex:-1,href:"javascript:;",class:"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</div>",a+="</div></div>"},showMenu:function(){var b,f,g=this,h=c.get(this.id);if(!g.isDisabled()&&0!==g.items.length){if(g.menu&&g.menu.isMenuVisible)return g.hideMenu();g.isMenuRendered||(g.renderMenu(),g.isMenuRendered=!0),b=c.getPos(h),f=g.menu,f.settings.offset_x=b.x,f.settings.offset_y=b.y,f.settings.keyboard_focus=!a.isOpera,e(g.items,function(a){f.items[a.id]&&f.items[a.id].setSelected(0)}),e(g.items,function(a){f.items[a.id]&&g.marked[a.value]&&f.items[a.id].setSelected(1),a.value===g.selectedValue&&f.items[a.id].setSelected(1)}),f.showMenu(0,h.clientHeight),d.add(c.doc,"mousedown",g.hideMenu,g),c.addClass(g.id,g.classPrefix+"Selected")}},hideMenu:function(a){var b=this;if(b.menu&&b.menu.isMenuVisible){if(c.removeClass(b.id,b.classPrefix+"Selected"),a&&"mousedown"==a.type&&(a.target.id==b.id+"_text"||a.target.id==b.id+"_open"))return;a&&c.getParent(a.target,".mceMenu")||(c.removeClass(b.id,b.classPrefix+"Selected"),d.remove(c.doc,"mousedown",b.hideMenu,b),b.menu.hideMenu())}},renderMenu:function(){var a,d=this;a=d.settings.control_manager.createDropMenu(d.id+"_menu",{menu_line:1,class:d.classPrefix+"Menu mceNoIcons",max_width:250,max_height:d.settings.max_height||150,filter:!!d.settings.filter,onselect:function(a){d.settings.onselect(a)!==!1&&d.select(a)}}),a.onHideMenu.add(function(){d.hideMenu(),d.focus()}),a.add({title:d.settings.title,class:"mceMenuItemTitle",onclick:function(){d.settings.onselect("")!==!1&&d.select("")}}),e(d.items,function(e){e.value===b?a.add({title:e.title,role:"option",onclick:function(){d.settings.onselect("")!==!1&&d.select("")}}):(e.id=c.uniqueId(),e.role="option",e.onclick=function(){d.settings.onselect(e.value)!==!1&&d.select(e.value)},a.add(e))}),d.onRenderMenu.dispatch(d,a),d.menu=a},postRender:function(){var a=this;a.classPrefix;d.add(a.id,"click",a.showMenu,a),d.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),d.cancel(b))}),d.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=d.add(a.id,"keydown",function(b){40==b.keyCode&&(a.showMenu(),d.cancel(b))}),a.keyPressHandler=d.add(a.id,"keypress",function(b){var c;13==b.keyCode&&(c=a.selectedValue,a.selectedValue=null,d.cancel(b),a.settings.onselect(c))})),a._focused=1}),d.add(a.id,"blur",function(){d.remove(a.id,"keydown",a.keyDownHandler),d.remove(a.id,"keypress",a.keyPressHandler),a._focused=0}),a.onPostRender.dispatch(a,c.get(a.id))},destroy:function(){this.parent(),d.clear(this.id+"_text"),d.clear(this.id+"_open")}})}(tinymce),function(a){var b,c=a.DOM,d=a.dom.Event,e=a.each;a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){c.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return c.get(this.id).disabled},select:function(a){var c,d,f=this;return a==b?f.selectByIndex(-1):(d=a&&"function"==typeof a?a:function(b){return b==a},void(a!=f.selectedValue&&(e(f.items,function(a,b){if(d(a.value))return c=1,f.selectByIndex(b),!1}),c||f.selectByIndex(-1))))},selectByIndex:function(a){c.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,b,d){var e,f=this;d=d||{},d.value=b,f.isRendered()&&c.add(c.get(this.id),"option",d,a),e={title:a,value:b,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,b=this;return a=c.createHTML("option",{value:""},"-- "+b.settings.title+" --"),e(b.items,function(b){a+=c.createHTML("option",{value:b.value},b.title)}),a=c.createHTML("select",{id:b.id,class:"mceNativeListBox","aria-labelledby":b.id+"_aria"},a),a+=c.createHTML("span",{id:b.id+"_aria",style:"display: none"},b.settings.title)},postRender:function(){function a(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var b,e=this,f=!0;e.rendered=!0,d.add(e.id,"change",a),d.add(e.id,"keydown",function(c){var g,h=38,i=40,j=13,k=32;return d.remove(e.id,"change",b),f=!1,g=d.add(e.id,"blur",function(){f||(f=!0,d.add(e.id,"change",a),d.remove(e.id,"blur",g))}),c.keyCode==j||c.keyCode==k?(a(c),d.cancel(c)):void(c.keyCode!=i&&c.keyCode!=h||c.stopImmediatePropagation())}),e.onPostRender.dispatch(e,c.get(e.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event;a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a,d,e,f=this,g=b.get(f.id);if(!f.isDisabled()){if(f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0),f.isMenuVisible)return f.hideMenu();a=b.getPos(f.settings.menu_container),d=b.getPos(g),e=f.menu,e.settings.offset_x=d.x,e.settings.offset_y=d.y,e.settings.vp_offset_x=d.x,e.settings.vp_offset_y=d.y,e.settings.keyboard_focus=f._focused,e.showMenu(0,g.firstChild.clientHeight),c.add(b.doc,"mousedown",f.hideMenu,f),f.setState("Selected",1),f.isMenuVisible=1}},renderMenu:function(){var a,b=this;a=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,class:this.classPrefix+"Menu",icons:b.settings.icons}),a.onHideMenu.add(function(){b.hideMenu(),b.focus()}),b.onRenderMenu.dispatch(b,a),b.menu=a},hideMenu:function(a){var d=this;a&&"mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"})||(a&&b.getParent(a.target,".mceMenu")||(d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu()),d.isMenuVisible=0)},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event;a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c="",d=this,e=d.settings;return a=e.image?b.createHTML("img ",{src:e.image,role:"presentation",class:"mceAction "+e.class}):b.createHTML("span",{class:"mceAction "+e.class},""),a+=b.createHTML("span",{class:"mceVoiceLabel mceIconOnly",id:d.id+"_voice",style:"display:none;"},e.title),c+='<div class="mceText">'+b.createHTML("a",{role:"button",id:d.id+"_action",tabindex:"-1",href:"javascript:;",class:e.class,onclick:"return false;",onmousedown:"return false;",title:e.title},a)+"</div>",a=b.createHTML("span",{class:"mceOpen "+e.class},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),c+='<div class="mceOpen">'+b.createHTML("a",{role:"button",id:d.id+"_open",tabindex:"-1",href:"javascript:;",class:e.class,onclick:"return false;",onmousedown:"return false;",title:e.title},a)+"</div>",c=b.createHTML("div",{role:"presentation",class:"mceSplitButton mceSplitButtonEnabled "+e.class,title:e.title},c),b.createHTML("div",{id:d.id,role:"button",tabindex:"0","aria-labelledby":d.id+"_voice","aria-haspopup":"true"},c)},postRender:function(){var d,e=this,f=e.settings;f.onclick&&(d=function(a){e.isDisabled()||(f.onclick(e.value),c.cancel(a))},c.add(e.id+"_action","click",d),c.add(e.id,["click","keydown"],function(a){var b=40;32!==a.keyCode&&13!==a.keyCode&&14!==a.keyCode||a.altKey||a.ctrlKey||a.metaKey?"click"!==a.type&&a.keyCode!==b||(e.showMenu(),c.cancel(a)):(d(),c.cancel(a))})),c.add(e.id+"_open","click",function(a){e.showMenu(),c.cancel(a)}),c.add([e.id,e.id+"_open"],"focus",function(){e._focused=1}),c.add([e.id,e.id+"_open"],"blur",function(){e._focused=0}),!a.isIE6&&b.boxModel||(c.add(e.id,"mouseover",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.addClass(e.id,"mceSplitButtonHover")}),c.add(e.id,"mouseout",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.removeClass(e.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var d,e,f=this;if(!f.isDisabled()){if(f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0),f.isMenuVisible)return f.hideMenu();d=b.get(f.id),b.show(f.id+"_menu"),b.addClass(d,"mceSplitButtonSelected"),e=b.getPos(d),b.setStyles(f.id+"_menu",{left:e.x,top:e.y+d.firstChild.clientHeight,zIndex:2e5}),d=0,c.add(b.doc,"mousedown",f.hideMenu,f),f.onShowMenu.dispatch(f),f._focused&&(f._keyHandler=c.add(f.id+"_menu","keydown",function(a){27==a.keyCode&&f.hideMenu()}),b.select("a",f.id+"_menu")[0].focus()),f.keyboardNav=new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),f.keyboardNav.focus(),f.isMenuVisible=1}},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&"mousedown"==a.type&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;a&&b.getParent(a.target,".mceSplitButtonMenu")||(b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu")),d.isMenuVisible=0,d.onHideMenu.dispatch(),d.keyboardNav.destroy()}},renderMenu:function(){var f,g,h,i,j,k,l=this,m=0,n=l.settings;return n.menu_class.indexOf("defaultSkin")===-1&&(n.menu_class="defaultSkin "+n.menu_class),j=b.add(n.menu_container,"div",{role:"listbox",id:l.id+"_menu",class:n.menu_class+" "+n.class,style:"position:absolute;left:0;top:-1000px;"}),f=b.add(j,"div",{class:n.class+" mceSplitButtonMenu"}),b.add(f,"span",{class:"mceMenuLine"}),g=b.add(f,"table",{role:"presentation",class:"mceColorSplitMenu"}),h=b.add(g,"tbody"),m=0,e(d(n.colors,"array")?n.colors:n.colors.split(","),function(c){c=c.replace(/^#/,""),m--||(i=b.add(h,"tr"),m=n.grid_width-1),g=b.add(i,"td");var d={href:"javascript:;",style:{backgroundColor:"#"+c},title:l.editor.getLang("colors."+c,c),"data-mce-color":"#"+c};a.isIE||(d.role="option"),g=b.add(g,"a",d),l.editor.forcedHighContrastMode&&(g=b.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"}),g.getContext&&(k=g.getContext("2d"))?(k.fillStyle="#"+c,k.fillRect(0,0,16,16)):b.remove(g))}),n.more_colors_func&&(g=b.add(h,"tr"),g=b.add(g,"td",{colspan:n.grid_width,class:"mceMoreColors"}),g=b.add(g,"a",{role:"option",id:l.id+"_more",href:"javascript:;",onclick:"return false;",class:"mceMoreColors"},n.more_colors_title),c.add(g,"click",function(a){return n.more_colors_func.call(n.more_colors_scope||this),c.cancel(a)})),b.addClass(f,"mceColorSplitMenu"),c.add(l.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(l.id+"_menu","click",function(a){var c;return a=b.getParent(a.target,"a",h),a&&"a"==a.nodeName.toLowerCase()&&(c=a.getAttribute("data-mce-color"))&&l.setColor(c),!1}),j},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview",class:"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){var a=this;a.parent(),c.clear(a.id+"_menu"),c.clear(a.id+"_more"),b.remove(a.id+"_menu"),a.keyboardNav&&a.keyboardNav.destroy()}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var b=this,c=[],d=b.controls,e=a.each;b.settings;return c.push('<div id="'+b.id+'" role="group">'),e(d,function(a){c.push(a.renderHTML())}),c.push("</div>"),c.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM;a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a,c,d,e,f,g,h=this,i="",j=h.settings;for(g=h.controls,d=0;d<g.length;d++)c=g[d],e=g[d-1],f=g[d+1],a=" mceToolBarItem",c.Button?a+="Button":c.SplitButton?a+="SplitButton":c.ListBox&&(a+="ListBox"),f&&f.ListBox&&(c.Button||c.SplitButton)&&(a+=" mceToolBarItemEnd"),e&&e.ListBox&&(c.Button||c.SplitButton)&&(a+=" mceToolBarItemStart"),i+='<div class="mceToolBarItem'+a+'">'+c.renderHTML()+"</div>",a="";return b.createHTML("div",{id:h.id,class:"mceToolbarRow"+(j.class?" "+j.class:""),role:"toolbar",tabindex:"-1"},i)}})}(tinymce),function(a){var b=a.util.Dispatcher;a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:void 0},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return"object"==typeof b?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function f(){var f=g.dependencies(b);a.each(f,function(a){var b=g.createUrl(c,a);g.load(b.resource,b,void 0,void 0)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var g=this,h=c;g.urls[b]||("object"==typeof c&&(h=c.prefix+c.resource+c.suffix),0!==h.indexOf("/")&&h.indexOf("://")==-1&&(h=a.baseURL+"/"+h),g.urls[b]=h.substring(0,h.lastIndexOf("/")),g.lookup[b]?f():a.ScriptLoader.add(h,f,e))}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b,c=a.each,d=a.extend,e=a.DOM,f=a.dom.Event,g=(a.ThemeManager,a.PluginManager,a.explode),h=a.util.Dispatcher,i=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=new a.util.URI(a.documentBaseURL).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new h(a),f.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new h(a),a.onRemoveEditor=new h(a),a.EditorManager=d(a,{editors:[],i18n:{},activeEditor:null,init:function(b){function d(a){var b=a.id;return b||(b=a.name,b=b&&!e.get(b)?a.name:e.uniqueId(),a.setAttribute("id",b)),b}function h(b,c,d){var e=b[c];if(e)return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}function j(a,b){return b.constructor===RegExp?b.test(a.className):e.hasClass(a,b)}var k,l=this,m=(a.ScriptLoader,[]);l.settings=b,f.bind(window,"ready",function(){var f,l;switch(h(b,"onpageload"),b.mode){case"exact":f=b.elements||"",f.length>0&&c(g(f),function(d){e.get(d)?(k=new a.Editor(d,b),m.push(k),k.render(1)):c(document.forms,function(f){c(f.elements,function(c){c.name===d&&(d="mce_editor_"+i++,e.setAttrib(c,"id",d),k=new a.Editor(d,b),m.push(k),k.render(1))})})});break;case"textareas":case"specific_textareas":c(e.select("textarea"),function(c){b.editor_deselector&&j(c,b.editor_deselector)||b.editor_selector&&!j(c,b.editor_selector)||(k=new a.Editor(d(c),b),m.push(k),k.render(1))});break;default:b.types?c(b.types,function(f){c(e.select(f.selector),function(c){var e=new a.Editor(d(c),a.extend({},b,f));m.push(e),e.render(1)})}):b.selector&&c(e.select(b.selector),function(c){var e=new a.Editor(d(c),b);m.push(e),e.render(1)})}b.oninit&&(f=l=0,c(m,function(a){l++,a.initialized?f++:a.onInit.add(function(){f++,f==l&&h(b,"oninit")}),f==l&&h(b,"oninit")}))})},get:function(a){return a===b?this.editors:this.editors.hasOwnProperty(a)?this.editors[a]:b},getInstanceById:function(a){
return this.get(a)},add:function(b){var c=this,d=c.editors;return d[b.id]=b,d.push(b),c._setActive(b),c.onAddEditor.dispatch(c,b),a.adapter&&a.adapter.patchEditor(b),b},remove:function(a){var b,c=this,d=c.editors;if(!d[a.id])return null;for(delete d[a.id],b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}return c.activeEditor==a&&c._setActive(d[0]),a.destroy(),c.onRemoveEditor.dispatch(c,a),a},execCommand:function(b,c,d){function e(){h.destroy(),f.detachEvent("onunload",e),f=f.tinyMCE=f.tinymce=null}var f,g=this,h=g.get(d);switch(b){case"mceFocus":return h.focus(),!0;case"mceAddEditor":case"mceAddControl":return g.get(d)||new a.Editor(d,g.settings).render(),!0;case"mceAddFrameControl":return f=d.window,f.tinyMCE=tinyMCE,f.tinymce=a,a.DOM.doc=f.document,a.DOM.win=f,h=new a.Editor(d.element_id,d),h.render(),a.isIE&&!a.isIE11&&f.attachEvent("onunload",e),d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return h&&h.remove(),!0;case"mceToggleEditor":return h?(h.isHidden()?h.show():h.hide(),!0):(g.execCommand("mceAddControl",0,d),!0)}return!!g.activeEditor&&g.activeEditor.execCommand(b,c,d)},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return!!e&&e.execCommand(b,c,d)},triggerSave:function(){c(this.editors,function(a){a.save()})},addI18n:function(b,d){var e=this.i18n;a.is(b,"string")?c(d,function(a,c){e[b+"."+c]=a}):c(b,function(a,b){c(a,function(a,d){c(a,function(a,c){"common"===d?e[b+"."+c]=a:e[b+"."+d+"."+c]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.each,f=a.isGecko,g=a.isIE,h=(a.isWebKit,a.is),i=a.ThemeManager,j=a.PluginManager,k=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var e=this,f=!0;e.settings=c=d({id:b,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:f,submit_patch:f,add_unload_trigger:f,convert_urls:f,relative_urls:f,remove_script_host:f,table_inline_editing:!1,object_resizing:f,accessibility_focus:f,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:f,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:f,directionality:"ltr",forced_root_block:"p",hidden_input:f,padd_empty_editor:f,render_ui:f,indentation:"30px",fix_table_elements:f,inline_styles:f,convert_fonts_to_spans:f,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:f,entity_encoding:"named",url_converter:e.convertURL,url_converter_scope:e,ie7_compat:f},c),e.id=e.editorId=b,e.isNotDirty=!1,e.plugins={},e.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),e.baseURI=a.baseURI,e.contentCSS=[],e.contentStyles=[],e.setupEvents(),e.execCommands={},e.queryStateCommands={},e.queryValueCommands={},e.execCallback("setup",e)},render:function(d){function f(){h.language&&h.language_load!==!1&&m.add(a.baseURL+"/langs/"+h.language+".js"),h.theme&&"function"!=typeof h.theme&&"-"!=h.theme.charAt(0)&&!i.urls[h.theme]&&i.load(h.theme,"themes/"+h.theme+"/editor_template"+a.suffix+".js"),e(k(h.plugins),function(b){if(b&&!j.urls[b])if("-"==b.charAt(0)){b=b.substr(1,b.length);var c=j.dependencies(b);e(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"};b=j.createUrl(c,b),j.load(b.resource,b)})}else j.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}),e(h.external_plugins,function(a,b){j.load(b,a),h.plugins+=","+b}),m.loadQueue(function(){g.removed||g.init()})}var g=this,h=g.settings,l=g.id,m=a.ScriptLoader;return c.domLoaded?(tinyMCE.settings=h,void(g.getElement()&&(a.isIDevice&&!a.isIOS5||(!/TEXTAREA|INPUT/i.test(g.getElement().nodeName)&&h.hidden_input&&b.getParent(l,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:l}),l),h.content_editable||(g.orgVisibility=g.getElement().style.visibility,g.getElement().style.visibility="hidden"),a.WindowManager&&(g.windowManager=new a.WindowManager(g)),"xml"==h.encoding&&g.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),h.add_form_submit_trigger&&g.onSubmit.addToTop(function(){g.initialized&&(g.save(),g.isNotDirty=1)}),h.add_unload_trigger&&(g._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!g.initialized||g.destroyed||g.isHidden()||g.save({format:"raw",no_events:!0})})),a.addUnload(g.destroy,g),h.submit_patch&&g.onBeforeRenderUI.add(function(){var b=g.getElement().form;b&&(b._mceOldSubmit||(b.submit.nodeType||b.submit.length||(g.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),g.isNotDirty=1,g.formElement._mceOldSubmit(g.formElement)}),b=null))}),f())))):void c.add(window,"ready",function(){g.render()})},init:function(){function c(b){var d,f=j.get(b),g=j.urls[b]||a.documentBaseURL.replace(/\/$/,"");f&&a.inArray(v,b)===-1&&(e(j.dependencies(b),function(a){c(a)}),d=new f(s,g),s.plugins[b]=d,d.init&&(d.init(s,g),v.push(b)))}var d,f,h,l,m,n,o,p,q,r,s=this,t=s.settings,u=s.getElement(),v=[];if(a.add(s),t.aria_label=t.aria_label||b.getAttrib(u,"aria-label",s.getLang("aria.rich_text_area")),t.theme&&("function"!=typeof t.theme?(t.theme=t.theme.replace(/-/,""),m=i.get(t.theme),s.theme=new m,s.theme.init&&s.theme.init(s,i.urls[t.theme]||a.documentBaseURL.replace(/\/$/,""))):s.theme=t.theme),e(k(t.plugins.replace(/\-/g,"")),c),t.popup_css!==!1&&(t.popup_css?t.popup_css=s.documentBaseURI.toAbsolute(t.popup_css):t.popup_css=s.baseURI.toAbsolute("themes/"+t.theme+"/skins/"+t.skin+"/dialog.css")),t.popup_css_add&&(t.popup_css+=","+s.documentBaseURI.toAbsolute(t.popup_css_add)),s.controlManager=new a.ControlManager(s),s.onBeforeRenderUI.dispatch(s,s.controlManager),t.render_ui&&s.theme&&(s.orgDisplay=u.style.display,"function"!=typeof t.theme?(f=t.width,h=t.height||u.style.height||u.offsetHeight,l=t.min_height||100,q=/^[0-9\.]+(|px)$/i,q.test(""+f)&&(f=Math.max(parseInt(f,10)+(m.deltaWidth||0),100)),q.test(""+h)&&(h=Math.max(parseInt(h,10)+(m.deltaHeight||0),l)),m=s.theme.renderUI({targetNode:u,width:f,height:h,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),f&&b.setStyles(m.sizeContainer||m.editorContainer,{width:f}),h=(m.iframeHeight||h)+("number"==typeof h?m.deltaHeight||0:""),h<l&&(h=l)):(m=t.theme(s,u),m.editorContainer.nodeType&&(m.editorContainer=m.editorContainer.id=m.editorContainer.id||s.id+"_parent"),m.iframeContainer.nodeType&&(m.iframeContainer=m.iframeContainer.id=m.iframeContainer.id||s.id+"_iframecontainer"),h=m.iframeHeight||u.offsetHeight,g&&(s.onInit.add(function(a){a.dom.bind(a.getBody(),"beforedeactivate keydown keyup",function(){a.bookmark=a.selection.getBookmark(1)})}),s.onNodeChange.add(function(a){document.activeElement.id==a.id+"_ifr"&&(a.bookmark=a.selection.getBookmark(1))}))),s.editorContainer=m.editorContainer),t.content_css&&e(k(t.content_css),function(a){s.contentCSS.push(s.documentBaseURI.toAbsolute(a))}),t.content_style&&s.contentStyles.push(t.content_style),t.content_editable)return u=d=m=null,s.initContentBody();for(document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),s.iframeHTML=t.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',t.document_base_url!=a.documentBaseURL&&(s.iframeHTML+='<base href="'+s.documentBaseURI.getURI()+'" />'),a.isIE8&&(t.ie7_compat?s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),s.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',r=0;r<s.contentCSS.length;r++)s.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+s.contentCSS[r]+'" />';s.contentCSS=[],o=t.body_id||"tinymce",o.indexOf("=")!=-1&&(o=s.getParam("body_id","","hash"),o=o[s.id]||o),p=t.body_class||"",p.indexOf("=")!=-1&&(p=s.getParam("body_class","","hash"),p=p[s.id]||""),s.iframeHTML+='</head><body id="'+o+'" class="mceContentBody '+p+'" onload="window.parent.tinyMCE.get(\''+s.id+"').onLoad.dispatch();\"><br></body></html>",a.relaxedDomain&&(g||a.isOpera&&parseFloat(opera.version())<11)&&(n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+s.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),d=b.add(m.iframeContainer,"iframe",{id:s.id+"_ifr",src:n||'javascript:""',frameBorder:"0",allowTransparency:"true",title:t.aria_label,style:{height:h}}),s.contentAreaContainer=m.iframeContainer,m.editorContainer&&(b.get(m.editorContainer).style.display=s.orgDisplay),u.style.visibility=s.orgVisibility,b.get(s.id).style.display="none",b.setAttrib(s.id,"aria-hidden",!0),a.relaxedDomain&&n||s.initContentBody(),u=d=m=null},initContentBody:function(){var c,d,f=this,h=f.settings,i=b.get(f.id),j=f.getDoc();g&&a.relaxedDomain||h.content_editable||(j.open(),j.write(f.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain)),h.content_editable&&(b.addClass(i,"mceContentBody"),f.contentDocument=j=h.content_document||document,f.contentWindow=h.content_window||window,f.bodyElement=i,h.content_document=h.content_window=null),c=f.getBody(),c.disabled=!0,h.readonly||(c.contentEditable=f.getParam("content_editable_state",!0)),c.disabled=!1,f.schema=new a.html.Schema(h),f.dom=new a.dom.DOMUtils(j,{keep_values:!0,url_converter:f.convertURL,url_converter_scope:f,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:!0,root_element:h.content_editable?f.id:null,schema:f.schema}),f.parser=new a.html.DomParser(h,f.schema),f.parser.addAttributeFilter("src,href,style",function(a,b){for(var c,d,e,g=a.length,h=f.dom;g--;)c=a[g],d=c.attr(b),e="data-mce-"+b,c.attributes.map[e]||("style"===b?c.attr(e,h.serializeStyle(h.parseStyle(d),c.name)):c.attr(e,f.convertURL(d,b,c.name)))}),f.parser.addNodeFilter("script",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.attr("type","mce-"+(c.attr("type")||"text/javascript"))}),f.parser.addNodeFilter("#cdata",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.type=8,c.name="#comment",c.value="[CDATA["+c.value+"]]"}),f.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){for(var d,e=b.length,g=f.schema.getNonEmptyElements();e--;)d=b[e],d.isEmpty(g)&&(d.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),f.serializer=new a.dom.Serializer(h,f.dom,f.schema),f.selection=new a.dom.Selection(f.dom,f.getWin(),f.serializer,f),f.formatter=new a.Formatter(f),f.undoManager=new a.UndoManager(f),f.forceBlocks=new a.ForceBlocks(f),f.enterKey=new a.EnterKey(f),f.editorCommands=new a.EditorCommands(f),f.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||f.nodeChanged()}),f.serializer.onPreProcess.add(function(a,b){return f.onPreProcess.dispatch(f,b,a)}),f.serializer.onPostProcess.add(function(a,b){return f.onPostProcess.dispatch(f,b,a)}),f.onPreInit.dispatch(f),h.browser_spellcheck||h.gecko_spellcheck||(j.body.spellcheck=!1),h.readonly||f.bindNativeEvents(),f.controlManager.onPostRender.dispatch(f,f.controlManager),f.onPostRender.dispatch(f),f.quirks=a.util.Quirks(f),h.directionality&&(c.dir=h.directionality),h.nowrap&&(c.style.whiteSpace="nowrap"),h.protect&&f.onBeforeSetContent.add(function(a,b){e(h.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),f.onSetContent.add(function(){f.addVisual(f.getBody())}),h.padd_empty_editor&&f.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),f.load({initial:!0,format:"html"}),f.startContent=f.getContent({format:"raw"}),f.initialized=!0,f.onInit.dispatch(f),f.execCallback("setupcontent_callback",f.id,c,j),f.execCallback("init_instance_callback",f),f.focus(!0),f.nodeChanged({initial:!0}),f.contentStyles.length>0&&(d="",e(f.contentStyles,function(a){d+=a+"\r\n"}),f.dom.addStyle(d)),e(f.contentCSS,function(a){f.dom.loadCSS(a)}),h.auto_focus&&setTimeout(function(){var b=a.get(h.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=j=c=null},focus:function(b){var c,d,e,f,g=this,h=g.selection,i=g.settings.content_editable,j=g.getDoc();b||(g.bookmark&&(h.moveToBookmark(g.bookmark),g.bookmark=null),d=h.getRng(),d.item&&(e=d.item(0)),g._refreshContentEditable(),i||g.getWin().focus(),(a.isGecko||i)&&(f=g.getBody(),f.setActive&&!a.isIE11?f.setActive():f.focus(),i&&h.normalize()),e&&e.ownerDocument==j&&(d=j.body.createControlRange(),d.addElement(e),d.select())),a.activeEditor!=g&&(null!=(c=a.activeEditor)&&c.onDeactivate.dispatch(c,g),g.onActivate.dispatch(g,c)),a._setActive(g)},execCallback:function(b){var c,d=this,e=d.settings[b];if(e)return d.callbackLookup&&(c=d.callbackLookup[b])&&(e=c.func,c=c.scope),h(e,"string")&&(c=e.replace(/\.\w+$/,""),c=c?a.resolve(c):0,e=a.resolve(e),d.callbackLookup=d.callbackLookup||{},d.callbackLookup[b]={func:e,scope:c}),e.apply(c||d,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/\{\#([^\}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(h(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var f,g=a.trim,i=h(this.settings[b])?this.settings[b]:c;return"hash"===d?(f={},h(i,"string")?e(i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(a){a=a.split("="),a.length>1?f[g(a[0])]=g(a[1]):f[g(a[0])]=g(a)}):f=i,f):i},nodeChanged:function(a){var b,c=this,d=c.selection;c.initialized&&(a=a||{},b=d.getStart()||c.getBody(),b=g&&b.ownerDocument!=c.getDoc()?c.getBody():b,a.parents=[],c.dom.getParent(b,function(b){return"BODY"==b.nodeName||void a.parents.push(b)}),c.onNodeChange.dispatch(c,a?a.controlManager||c.controlManager:c.controlManager,b,d.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var f,g=this;return g.settings.custom_shortcuts!==!1&&(g.shortcuts=g.shortcuts||{},h(c,"string")&&(f=c,c=function(){g.execCommand(f,!1,null)}),h(c,"object")&&(f=c,c=function(){g.execCommand(f[0],f[1],f[2])}),e(k(a),function(a){var f={func:c,scope:d||this,desc:g.translate(b),alt:!1,ctrl:!1,shift:!1};e(k(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":f[a]=!0;break;default:f.charCode=a.charCodeAt(0),f.keyCode=a.toUpperCase().charCodeAt(0)}}),g.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f}),!0)},execCommand:function(a,b,c,f){var g,h,i=this,j=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)||f&&f.skip_focus||i.focus(),f=d({},f),i.onBeforeExecCommand.dispatch(i,a,b,c,f),!f.terminate&&(i.execCallback("execcommand_callback",i.id,i.selection.getNode(),a,b,c)?(i.onExecCommand.dispatch(i,a,b,c,f),!0):(g=i.execCommands[a])&&(h=g.func.call(g.scope,b,c),h!==!0)?(i.onExecCommand.dispatch(i,a,b,c,f),h):(e(i.plugins,function(d){if(d.execCommand&&d.execCommand(a,b,c))return i.onExecCommand.dispatch(i,a,b,c,f),j=1,!1}),!!j||(i.theme&&i.theme.execCommand&&i.theme.execCommand(a,b,c)?(i.onExecCommand.dispatch(i,a,b,c,f),!0):i.editorCommands.execCommand(a,b,c)?(i.onExecCommand.dispatch(i,a,b,c,f),!0):(i.getDoc().execCommand(a,b,c),void i.onExecCommand.dispatch(i,a,b,c,f)))))},queryCommandState:function(a){var b,c,d=this;if(!d._isHidden()){if((b=d.queryStateCommands[a])&&(c=b.func.call(b.scope),c!==!0))return c;if(b=d.editorCommands.queryCommandState(a),b!==-1)return b;try{return this.getDoc().queryCommandState(a)}catch(a){}}},queryCommandValue:function(a){var b,c,d=this;if(!d._isHidden()){if((b=d.queryValueCommands[a])&&(c=b.func.call(b.scope),c!==!0))return c;if(b=d.editorCommands.queryCommandValue(a),h(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(a){}}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();g&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b,c=this,d=c.getElement();if(d)return a=a||{},a.load=!0,b=c.setContent(h(d.value)?d.value:d.innerHTML,a),a.element=d,a.no_events||c.onLoadContent.dispatch(c,a),a.element=d=null,b},save:function(a){var c,d,f=this,g=f.getElement();if(g&&f.initialized)return a=a||{},a.save=!0,a.element=g,c=a.content=f.getContent(a),a.no_events||f.onSaveContent.dispatch(f,a),c=a.content,/TEXTAREA|INPUT/i.test(g.nodeName)?g.value=c:(g.innerHTML=c,(d=b.getParent(f.id,"form"))&&e(d.elements,function(a){if(a.name==f.id)return a.value=c,!1})),a.element=g=null,c},setContent:function(b,c){var d,e=this,f=e.getBody();return c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||e.onBeforeSetContent.dispatch(e,c),b=c.content,0===b.length||/^\s+$/.test(b)?(d=e.settings.forced_root_block,d&&e.schema.isValidChild(f.nodeName.toLowerCase(),d.toLowerCase())?b=g?"<"+d+"></"+d+">":"<"+d+'><br data-mce-bogus="1"></'+d+">":g||(b='<br data-mce-bogus="1">'),e.dom.setHTML(f,b),e.onSetContent.dispatch(e,c)):("raw"!==c.format&&(b=new a.html.Serializer({},e.schema).serialize(e.parser.parse(b))),c.content=a.trim(b),e.dom.setHTML(f,c.content),c.no_events||e.onSetContent.dispatch(e,c)),c.content},getContent:function(b){var c,d=this,e=d.getBody();return b=b||{},b.format=b.format||"html",b.get=!0,b.getInner=!0,b.no_events||d.onBeforeGetContent.dispatch(d,b),c="raw"==b.format?e.innerHTML:"text"==b.format?e.innerText||e.textContent:d.serializer.serialize(e,b),"text"!=b.format?b.content=a.trim(c):b.content=c,b.no_events||d.onGetContent.dispatch(d,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!==a.trim(b.getContent({format:"raw"}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a,c=this;return c.contentWindow||(a=b.get(c.id+"_ifr"),a&&(c.contentWindow=a.contentWindow)),c.contentWindow},getDoc:function(){var a,b=this;return b.contentDocument||(a=b.getWin(),a&&(b.contentDocument=a.document)),b.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")?a:e.relative_urls?d.documentBaseURI.toRelative(a):a=d.documentBaseURI.toAbsolute(a,e.remove_script_host)},addVisual:function(a){var b,c=this,d=c.settings,f=c.dom;a=a||c.getBody(),h(c.hasVisual)||(c.hasVisual=d.visual),e(f.select("table,a",a),function(a){var e;switch(a.nodeName){case"TABLE":return b=d.visual_table_class||"mceItemTable",e=f.getAttrib(a,"border"),void(e&&"0"!=e||(c.hasVisual?f.addClass(a,b):f.removeClass(a,b)));case"A":return void(f.getAttrib(a,"href",!1)||(e=f.getAttrib(a,"name")||a.id,b="mceItemAnchor",e&&(c.hasVisual?f.addClass(a,b):f.removeClass(a,b))))}}),c.onVisualAid.dispatch(c,a,c.hasVisual)},remove:function(){var d=this,e=d.getContainer(),f=d.getDoc();d.removed||(d.removed=1,g&&f&&f.execCommand("SelectAll"),d.save(),b.setStyle(d.id,"display",d.orgDisplay),d.settings.content_editable||(c.unbind(d.getWin()),c.unbind(d.getDoc())),c.unbind(d.getBody()),c.clear(e),d.execCallback("remove_instance_callback",d),d.onRemove.dispatch(d),d.onExecCommand.listeners=[],a.remove(d),b.remove(e))},destroy:function(b){var d=this;d.destroyed||(f&&(c.unbind(d.getDoc()),c.unbind(d.getWin()),c.unbind(d.getBody())),b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy()),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1)},_refreshContentEditable:function(){var a,b,c=this;c._isHidden()&&(a=c.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;return f?(a=this.selection.getSel(),!a||!a.rangeCount||0===a.rangeCount):0}})}(tinymce),function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,d=c.settings;b(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(b){c[b]=new a.util.Dispatcher(c)}),d.cleanup_callback&&(c.onBeforeSetContent.add(function(a,b){b.content=a.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),c.onPreProcess.add(function(a,b){b.set&&a.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&a.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),c.onPostProcess.add(function(a,b){b.set&&(b.content=a.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=a.execCallback("cleanup_callback","get_from_editor",b.content,b))})),d.save_callback&&c.onGetContent.add(function(a,b){b.save&&(b.content=a.execCallback("save_callback",a.id,b.content,a.getBody()))}),d.handle_event_callback&&c.onEvent.add(function(a,b,d){c.execCallback("handle_event_callback",b,a,d)===!1&&(b.preventDefault(),b.stopPropagation())}),d.handle_node_change_callback&&c.onNodeChange.add(function(a,b,c){a.execCallback("handle_node_change_callback",a.id,c,-1,-1,!0,a.selection.isCollapsed())}),d.save_callback&&c.onSaveContent.add(function(a,b){var c=a.execCallback("save_callback",a.id,b.content,a.getBody());c&&(b.content=c)}),d.onchange_callback&&c.onChange.add(function(a,b){a.execCallback("onchange_callback",a,b)})},a.Editor.prototype.bindNativeEvents=function(){function c(a,b){a.type;h.removed||h.onEvent.dispatch(h,a,b)!==!1&&h[g[a.fakeType||a.type]].dispatch(h,a,b)}function d(a){h.focus(!0)}function e(b,c){65==c.keyCode&&a.VK.metaKeyPressed(c)||h.selection.normalize(),h.nodeChanged()}function f(c,d){(c.altKey||c.ctrlKey||c.metaKey)&&b(h.shortcuts,function(b){var e=a.isMac?c.metaKey:c.ctrlKey;if(b.ctrl==e&&b.alt==c.altKey&&b.shift==c.shiftKey)return c.keyCode==b.keyCode||c.charCode&&c.charCode==b.charCode?(c.preventDefault(),d&&b.func.call(b.scope),!0):void 0})}var g,h=this,i=h.settings,j=h.dom;g={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},b(g,function(b,d){var e=i.content_editable?h.getBody():h.getDoc();switch(d){case"contextmenu":j.bind(e,d,c);break;case"paste":j.bind(h.getBody(),d,c);break;case"submit":case"reset":j.bind(h.getElement().form||a.DOM.getParent(h.id,"form"),d,c);break;default:j.bind(e,d,c)}}),j.bind(i.content_editable?h.getBody():a.isGecko?h.getDoc():h.getWin(),"focus",function(a){h.focus(!0)}),i.content_editable&&a.isOpera&&(j.bind(h.getBody(),"click",d),j.bind(h.getBody(),"keydown",d)),h.onMouseUp.add(e),h.onKeyUp.add(function(b,c){var d=c.keyCode;(d>=33&&d<=36||d>=37&&d<=40||13==d||45==d||46==d||8==d||a.isMac&&(91==d||93==d)||c.ctrlKey)&&e(b,c)}),h.onReset.add(function(){h.setContent(h.startContent,{format:"raw"})}),h.onKeyUp.add(function(a,b){f(b)}),h.onKeyPress.add(function(a,b){f(b)}),h.onKeyDown.add(function(a,b){f(b,!0)}),a.isOpera&&h.onClick.add(function(a,b){b.preventDefault()})}}(tinymce),function(a){var b,c=a.each,d=!0,e=!1,f=a.isIE&&!a.isIE11,g=a.dom.TreeWalker;a.EditorCommands=function(h){function i(a,b,c){var f;return a=a.toLowerCase(),(f=u.exec[a])?(f(a,b,c),d):e}function j(a){var b;return a=a.toLowerCase(),(b=u.state[a])?b(a):-1}function k(a){var b;return a=a.toLowerCase(),(b=u.value[a])?b(a):e}function l(a,b){b=b||"exec",c(a,function(a,d){c(d.toLowerCase().split(","),function(c){u[b][c]=a})})}function m(a,c,d){return c===b&&(c=e),d===b&&(d=null),h.getDoc().execCommand(a,c,d)}function n(a){return w.match(a)}function o(a,c){w.toggle(a,c?{value:c}:b)}function p(a){r=t.getBookmark(a)}function q(){t.moveToBookmark(r)}var r,s=h.dom,t=h.selection,u={state:{},exec:{},value:{}},v=h.settings,w=h.formatter;a.extend(this,{execCommand:i,queryCommandState:j,queryCommandValue:k,addCommands:l}),l({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){h.undoManager.add()},"Cut,Copy,Paste":function(b){var c,e=h.getDoc();try{m(b)}catch(a){c=d}!c&&e.queryCommandSupported(b)||(a.isGecko?h.windowManager.confirm(h.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):h.windowManager.alert(h.getLang("clipboard_no_support")))},unlink:function(){if(t.isCollapsed()){var a=t.getNode();return void("A"==a.tagName&&h.dom.remove(a,!0))}w.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b=a.substring(7);c("left,center,right,full".split(","),function(a){b!=a&&w.remove("align"+a)}),o("align"+b),i("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;m(a),b=s.getParent(t.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(p(),s.split(c,b),q()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){o(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){o(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(v.font_size_style_values),e=a.explode(v.font_size_classes),d=e?e[d-1]||d:f[d-1]||d),o(b,d)},RemoveFormat:function(a){w.remove(a)},mceBlockQuote:function(a){o("blockquote")},FormatBlock:function(a,b,c){return o(c||"p")},mceCleanup:function(){var a=t.getBookmark();h.setContent(h.getContent({cleanup:d}),{cleanup:d}),t.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||t.getNode();e!=h.getBody()&&(p(),h.dom.remove(e,d),q())},mceSelectNodeDepth:function(a,b,c){var d=0;s.getParent(t.getNode(),function(a){if(1==a.nodeType&&d++==c)return t.select(a),e},h.getBody())},mceSelectNode:function(a,b,c){t.select(c)},mceInsertContent:function(b,c,d){function e(a){function b(a){return d[a]&&3==d[a].nodeType}var c,d,e;return c=t.getRng(!0),d=c.startContainer,e=c.startOffset,3==d.nodeType&&(e>0?a=a.replace(/^&nbsp;/," "):b("previousSibling")||(a=a.replace(/^ /,"&nbsp;")),e<d.length?a=a.replace(/&nbsp;(<br>|)$/," "):b("nextSibling")||(a=a.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),a}function f(){var a,b,c;a=t.getRng(!0),b=a.startContainer,c=a.startOffset,3==b.nodeType&&a.collapsed&&(" "===b.data[c]?(b.deleteData(c,1),/[\u00a0| ]$/.test(d)||(d+=" ")):" "===b.data[c-1]&&(b.deleteData(c-1,1),/[\u00a0| ]$/.test(d)||(d=" "+d)))}function g(a){if(v)for(q=a.firstChild;q;q=q.walk(!0))w[q.name]&&q.attr("data-mce-new","true")}var i,j,k,l,m,n,o,p,q,r,u,v,w=h.schema.getTextInlineElements();"string"!=typeof d&&(v=d.merge,d=d.content),/^ | $/.test(d)&&(d=e(d)),i=h.parser,j=new a.html.Serializer({},h.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',n={content:d,format:"html"},t.onBeforeSetContent.dispatch(t,n),d=n.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,u),p=t.getRng();var x=p.startContainer||(p.parentElement?p.parentElement():null),y=h.getBody();x===y&&t.isCollapsed()&&s.isBlock(y.firstChild)&&s.isEmpty(y.firstChild)&&(p=s.createRng(),p.setStart(y.firstChild,0),p.setEnd(y.firstChild,0),t.setRng(p)),t.isCollapsed()||(h.getDoc().execCommand("Delete",!1,null),f()),k=t.getNode();var z={context:k.nodeName.toLowerCase()};if(m=i.parse(d,z),g(m),q=m.lastChild,"mce_marker"==q.attr("id"))for(o=q,q=q.prev;q;q=q.walk(!0))if(3==q.type||!s.isBlock(q.name)){h.schema.isValidChild(q.parent.name,"span")&&q.parent.insert(o,q,"br"===q.name);break}if(z.invalid){for(t.setContent(u),k=t.getNode(),l=h.getBody(),9==k.nodeType?k=q=l:q=k;q!==l;)k=q,q=q.parentNode;d=k==l?l.innerHTML:s.getOuterHTML(k),d=j.serialize(i.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return j.serialize(m)}))),k==l?s.setHTML(l,d):s.setOuterHTML(k,d)}else d=j.serialize(m),q=k.firstChild,r=k.lastChild,!q||q===r&&"BR"===q.nodeName?s.setHTML(k,d):t.setContent(d);o=s.get("mce_marker"),t.scrollIntoView(o),p=s.createRng(),q=o.previousSibling,q&&3==q.nodeType?(p.setStart(q,q.nodeValue.length),a.isIE||(r=o.nextSibling,r&&3==r.nodeType&&(q.appendData(r.data),r.parentNode.removeChild(r)))):(p.setStartBefore(o),p.setEndBefore(o)),s.remove(o),t.setRng(p),t.onSetContent.dispatch(t,n),h.addVisual()},mceInsertRawHTML:function(a,b,c){t.setContent("tiny_mce_marker"),h.setContent(h.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceToggleFormat:function(a,b,c){o(c)},mceSetContent:function(a,b,c){h.setContent(c)},"Indent,Outdent":function(a){var b,d,e;b=v.indentation,d=/[a-z%]+$/i.exec(b),b=parseInt(b,10),j("InsertUnorderedList")||j("InsertOrderedList")?m(a):(v.forced_root_block||s.getParent(t.getNode(),s.isBlock)||w.apply("div"),c(t.getSelectedBlocks(),function(c){if("LI"!=c.nodeName){var f=h.getParam("indent_use_margin",!1)?"margin":"padding";f+="rtl"==s.getStyle(c,"direction",!0)?"Right":"Left","outdent"==a?(e=Math.max(0,parseInt(c.style[f]||0,10)-b),s.setStyle(c,f,e?e+d:"")):(e=parseInt(c.style[f]||0,10)+b+d,s.setStyle(c,f,e))}}))},mceRepaint:function(){if(a.isGecko)try{p(d),t.getSel()&&t.getSel().selectAllChildren(h.getBody()),t.collapse(d),q()}catch(a){}},mceToggleFormat:function(a,b,c){w.toggle(c)},InsertHorizontalRule:function(){h.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){h.hasVisual=!h.hasVisual,h.addVisual()},mceReplaceContent:function(a,b,c){h.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,t.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;"string"==typeof c&&(c={href:c}),d=s.getParent(t.getNode(),"a"),c.href=c.href.replace(" ","%20"),d&&c.href||w.remove("link"),c.href&&w.apply("link",c,d)},selectAll:function(){var a=s.getRoot(),b=s.createRng();t.getRng().setStart?(b=s.createRng(),b.setStart(a,0),b.setEnd(a,a.childNodes.length),t.setRng(b)):(b=t.getRng(),b.item||(b.moveToElementText(a),b.select()))},delete:function(){m("Delete");var a=h.getBody();s.isEmpty(a)&&(h.setContent(""),a.firstChild&&s.isBlock(a.firstChild)?h.selection.setCursorLocation(a.firstChild,0):h.selection.setCursorLocation(a,0))},mceNewDocument:function(){h.setContent("")},InsertLineBreak:function(b,c,e){function i(){for(var a,b=new g(p,r),c=h.schema.getNonEmptyElements();a=b.next();)if(c[a.nodeName.toLowerCase()]||a.length>0)return!0}var j,k,l,m=e,n=t.getRng(!0);new a.dom.RangeUtils(s).normalize(n);var o=n.startOffset,p=n.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var q=o>p.childNodes.length-1;
p=p.childNodes[Math.min(o,p.childNodes.length-1)]||p,o=q&&3==p.nodeType?p.nodeValue.length:0}var r=s.getParent(p,s.isBlock),u=r?r.nodeName.toUpperCase():"",v=r?s.getParent(r.parentNode,s.isBlock):null,w=v?v.nodeName.toUpperCase():"",x=m&&m.ctrlKey;"LI"!=w||x||(r=v,u=w),p&&3==p.nodeType&&o>=p.nodeValue.length&&(f||i()||(j=s.create("br"),n.insertNode(j),n.setStartAfter(j),n.setEndAfter(j),k=!0)),j=s.create("br"),n.insertNode(j);var y=s.doc.documentMode;return f&&"PRE"==u&&(!y||y<8)&&j.parentNode.insertBefore(s.doc.createTextNode("\r"),j),l=s.create("span",{},"&nbsp;"),j.parentNode.insertBefore(l,j),t.scrollIntoView(l),s.remove(l),k?(n.setStartBefore(j),n.setEndBefore(j)):(n.setStartAfter(j),n.setEndAfter(j)),t.setRng(n),h.undoManager.add(),d}}),l({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var c="align"+b.substring(7),e=t.isCollapsed()?[s.getParent(t.getNode(),s.isBlock)]:t.getSelectedBlocks(),f=a.map(e,function(a){return!!w.matchNode(a,c)});return a.inArray(f,d)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return n(a)},mceBlockQuote:function(){return n("blockquote")},Outdent:function(){var a;if(v.inline_styles){if((a=s.getParent(t.getStart(),s.isBlock))&&parseInt(a.style.paddingLeft,10)>0)return d;if((a=s.getParent(t.getEnd(),s.isBlock))&&parseInt(a.style.paddingLeft,10)>0)return d}return j("InsertUnorderedList")||j("InsertOrderedList")||!v.inline_styles&&!!s.getParent(t.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){var b=s.getParent(t.getNode(),"ul,ol,dl");return b&&("insertunorderedlist"===a&&"UL"===b.tagName||"insertorderedlist"===a&&"OL"===b.tagName)}},"state"),l({"FontSize,FontName":function(a){var b,c=0;return(b=s.getParent(t.getNode(),"span"))&&(c="fontsize"==a?b.style.fontSize:b.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),c}},"value"),l({Undo:function(){h.undoManager.undo()},Redo:function(){h.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function d(){return a.trim(c.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function e(){f.typing=!1,f.add()}var f,g,h,i,j,k=0,l=[];return onBeforeAdd=new b(f),h=new b(f),i=new b(f),j=new b(f),h.add(function(a,b){if(a.hasUndo())return c.onChange.dispatch(c,b,a)}),i.add(function(a,b){return c.onUndo.dispatch(c,b,a)}),j.add(function(a,b){return c.onRedo.dispatch(c,b,a)}),c.onInit.add(function(){f.add()}),c.onBeforeExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||f.beforeChange()}),c.onExecCommand.add(function(a,b,c,d,e){"Undo"==b||"Redo"==b||"mceRepaint"==b||e&&e.skip_undo||f.add()}),c.onSaveContent.add(e),c.dom.bind(c.dom.getRoot(),"dragend",e),c.dom.bind(c.getBody(),"focusout",function(a){!c.removed&&f.typing&&e()}),c.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||45==c||13==c||b.ctrlKey)&&e()}),c.onKeyDown.add(function(a,b){var c=b.keyCode;return c>=33&&c<=36||c>=37&&c<=40||45==c?void(f.typing&&e()):void((c<16||c>20)&&224!=c&&91!=c&&!f.typing&&(f.beforeChange(),f.typing=!0,f.add()))}),c.onMouseDown.add(function(a,b){f.typing&&e()}),c.addShortcut("ctrl+z","undo_desc","Undo"),c.addShortcut("ctrl+y","redo_desc","Redo"),f={data:l,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:h,onUndo:i,onRedo:j,beforeChange:function(){g=c.selection.getBookmark(2,!0)},add:function(a){var b,e,h=c.settings;if(a=a||{},a.content=d(),f.onBeforeAdd.dispatch(f,a),e=l[k],e&&e.content==a.content)return null;if(l[k]&&(l[k].beforeBookmark=g),h.custom_undo_redo_levels&&l.length>h.custom_undo_redo_levels){for(b=0;b<l.length-1;b++)l[b]=l[b+1];l.length--,k=l.length}return a.bookmark=c.selection.getBookmark(2,!0),k<l.length-1&&(l.length=k+1),l.push(a),k=l.length-1,f.onAdd.dispatch(f,a),c.isNotDirty=0,a},undo:function(){var a;return f.typing&&(f.add(),f.typing=!1),k>0&&(a=l[--k],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),f.onUndo.dispatch(f,a)),a},redo:function(){var a;return k<l.length-1&&(a=l[++k],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),f.onRedo.dispatch(f,a)),a},clear:function(){l=[],k=0,f.typing=!1},hasUndo:function(){return k>0||this.typing},hasRedo:function(){return k<l.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(a){function b(){var b,g,h,i,j,k,l,m,n=e.getStart(),o=a.getBody(),p=-16777215;if(forcedRootBlock=c.forced_root_block,n&&1===n.nodeType&&forcedRootBlock){for(;n&&n!=o;){if(f[n.nodeName])return;n=n.parentNode}if(b=e.getRng(),b.setStart){g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset;try{restoreSelection=a.getDoc().activeElement===o}catch(a){}}else b.item&&(n=b.item(0),b=a.getDoc().body.createTextRange(),b.moveToElementText(n)),restoreSelection=b.parentElement().ownerDocument===a.getDoc(),tmpRng=b.duplicate(),tmpRng.collapse(!0),h=tmpRng.move("character",p)*-1,tmpRng.collapsed||(tmpRng=b.duplicate(),tmpRng.collapse(!1),j=tmpRng.move("character",p)*-1-h);for(n=o.firstChild,rootNodeName=o.nodeName.toLowerCase();n;)if(3===n.nodeType||1==n.nodeType&&!f[n.nodeName]&&!n.getAttribute("data-mce-type")&&a.schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())){if(3===n.nodeType&&0==n.nodeValue.length){l=n,n=n.nextSibling,d.remove(l);continue}k||(k=d.create(c.forced_root_block,a.settings.forced_root_block_attrs),n.parentNode.insertBefore(k,n),m=!0),l=n,n=n.nextSibling,k.appendChild(l)}else k=null,n=n.nextSibling;if(m&&restoreSelection){if(b.setStart)b.setStart(g,h),b.setEnd(i,j),e.setRng(b);else try{b=a.getDoc().body.createTextRange(),b.moveToElementText(o),b.collapse(!0),b.moveStart("character",h),j>0&&b.moveEnd("character",j),b.select()}catch(a){}a.nodeChanged()}}}var c=a.settings,d=a.dom,e=a.selection,f=a.schema.getBlockElements();c.forced_root_block&&(a.onKeyUp.add(b),a.onNodeChange.add(b))},function(a){var b=(a.DOM,a.dom.Event),c=a.each,d=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,d){var e=this;d=d||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=d.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){c(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,d,e,f,g=this,h=g.editor;for(g.controlFactories||(g.controlFactories=[],c(h.plugins,function(a){a.createControl&&g.controlFactories.push(a)})),f=g.controlFactories,d=0,e=f.length;d<e;d++)if(b=f[d].createControl(a,g))return g.add(b);return"|"===a||"separator"===a?g.createSeparator():h.buttons&&(b=h.buttons[a])?g.createButton(a,b):g.add(b)},createDropMenu:function(b,c,e){var f,g,h,i,j=this,k=j.editor;return c=d({class:"mceDropDown",constrain:k.settings.constrain_menus},c),c.class=c.class+" "+k.getParam("skin")+"Skin",(h=k.getParam("skin_variant"))&&(c.class+=" "+k.getParam("skin")+"Skin"+h.substring(0,1).toUpperCase()+h.substring(1)),c.class+="rtl"==k.settings.directionality?" mceRtl":"",b=j.prefix+b,i=e||j._cls.dropmenu||a.ui.DropMenu,f=j.controls[b]=new i(b,c),f.onAddItem.add(function(a,b){var c=b.settings;c.title=k.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&k.execCommand(c.cmd,c.ui||!1,c.value)})}),k.onRemove.add(function(){f.destroy()}),a.isIE&&(f.onShowMenu.add(function(){k.focus(),g=k.selection.getBookmark(1)}),f.onHideMenu.add(function(){g&&(k.selection.moveToBookmark(g),g=0)})),j.add(f)},createListBox:function(c,e,f){function g(b){return b.settings.use_accessible_selects&&!a.isGecko}var h,i,j=this,k=j.editor;return j.get(c)?null:(e.title=k.translate(e.title),e.scope=e.scope||k,e.onselect||(e.onselect=function(a){k.execCommand(e.cmd,e.ui||!1,a||e.value)}),e=d({title:e.title,class:"mce_"+c,scope:e.scope,control_manager:j},e),c=j.prefix+c,k.settings.use_native_selects||g(k)?h=new a.ui.NativeListBox(c,e):(i=f||j._cls.listbox||a.ui.ListBox,h=new i(c,e,k)),j.controls[c]=h,a.isWebKit&&h.onPostRender.add(function(a,c){b.add(c,"mousedown",function(){k.bookmark=k.selection.getBookmark(1)}),b.add(c,"focus",function(){k.selection.moveToBookmark(k.bookmark),k.bookmark=null})}),h.hideMenu&&k.onMouseDown.add(h.hideMenu,h),j.add(h))},createButton:function(b,c,e){var f,g,h=this,i=h.editor;return h.get(b)?null:(c.title=i.translate(c.title),c.label=i.translate(c.label),c.scope=c.scope||i,c.onclick||c.menu_button||(c.onclick=function(){i.execCommand(c.cmd,c.ui||!1,c.value)}),c=d({title:c.title,class:"mce_"+b,unavailable_prefix:i.getLang("unavailable",""),scope:c.scope,control_manager:h},c),b=h.prefix+b,c.menu_button?(g=e||h._cls.menubutton||a.ui.MenuButton,f=new g(b,c,i),i.onMouseDown.add(f.hideMenu,f)):(g=h._cls.button||a.ui.Button,f=new g(b,c,i)),h.add(f))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,e){var f,g,h=this,i=h.editor;return h.get(b)?null:(c.title=i.translate(c.title),c.scope=c.scope||i,c.onclick||(c.onclick=function(a){i.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){i.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=d({title:c.title,class:"mce_"+b,scope:c.scope,control_manager:h},c),b=h.prefix+b,g=e||h._cls.splitbutton||a.ui.SplitButton,f=h.add(new g(b,c,i)),i.onMouseDown.add(f.hideMenu,f),f)},createColorSplitButton:function(b,c,e){var f,g,h,i=this,j=i.editor;return i.get(b)?null:(c.title=j.translate(c.title),c.scope=c.scope||j,c.onclick||(c.onclick=function(b){a.isIE&&(h=j.selection.getBookmark(1)),j.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){j.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=d({title:c.title,class:"mce_"+b,menu_class:j.getParam("skin")+"Skin",scope:c.scope,more_colors_title:j.getLang("more_colors")},c),b=i.prefix+b,g=e||i._cls.colorsplitbutton||a.ui.ColorSplitButton,f=new g(b,c,j),j.onMouseDown.add(f.hideMenu,f),j.onRemove.add(function(){f.destroy()}),a.isIE&&(f.onShowMenu.add(function(){j.focus(),h=j.selection.getBookmark(1)}),f.onHideMenu.add(function(){h&&(j.selection.moveToBookmark(h),h=0)})),i.add(f))},createToolbar:function(b,c,d){var e,f,g=this;return b=g.prefix+b,f=d||g._cls.toolbar||a.ui.Toolbar,e=new f(b,c,g.editor),g.get(b)?null:g.add(e)},createToolbarGroup:function(b,c,d){var e,f,g=this;return b=g.prefix+b,f=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new f(b,c,g.editor),g.get(b)?null:g.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){c(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g,h,i,j,k=this,l="",m="modal"==k.editor.settings.dialog_type,n=a.DOM.getViewPort();b=b||{},f=f||{},h=e?n.w:screen.width,i=e?n.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(h/2)-b.width/2,b.top=b.top||parseInt(i/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,m&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(l+=d&&m?(l?";":"")+c+":"+b:(l?",":"")+c+"="+b)}),k.features=b,k.params=f,k.onOpen.dispatch(k,b,f),j=b.url||b.file,j=a._addVer(j);try{d&&m?(g=1,window.showModalDialog(j,window,l)):g=window.open(j,b.name,l)}catch(a){}g||alert(k.editor.getLang("popup_blocked"))},close:function(a){a&&(a.close(),this.onClose.dispatch(this))},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function c(a){return a.nodeType&&(a=a.nodeName),!!b.schema.getTextBlockElements()[a.toLowerCase()]}function d(a){return/^(TH|TD)$/.test(a.nodeName)}function e(a){return a&&/^(IMG)$/.test(a.nodeName)}function f(a,b){return P.getParents(a,b,P.getRoot())}function g(a){return 1===a.nodeType&&"_mce_caret"===a.id}function h(){k({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(a,b,c){O(c,function(b,c){P.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),O("p h1 h2 h3 h4 h5 h6 div address pre div code samp dt dd dl".split(/\s/),function(a){k(a,{block:a,remove:"all"})}),k(b.settings.formats)}function i(){b.addShortcut("ctrl+b","bold_desc","Bold"),b.addShortcut("ctrl+i","italic_desc","Italic"),b.addShortcut("ctrl+u","underline_desc","Underline");for(var a=1;a<=6;a++)b.addShortcut("ctrl+"+a,"",["FormatBlock",!1,"h"+a]);b.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),b.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),b.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function j(a){return a?N[a]:N}function k(a,b){a&&("string"!=typeof a?O(a,function(a,b){k(b,a)}):(b=b.length?b:[b],O(b,function(a){a.deep===M&&(a.deep=!a.selector),a.split===M&&(a.split=!a.selector||a.inline),a.remove===M&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),"string"==typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),N[a]=b))}function l(a,b){var c=j(b);if(c)for(var d=0;d<c.length;d++)if(c[d].inherit===!1&&P.is(a,c[d].selector))return!0;return!1}function m(d,e,f){function h(a,b){if(b=b||r,a){if(b.onformat&&b.onformat(a,b,e,f),O(b.styles,function(b,c){P.setStyle(a,c,y(b,e))}),b.styles){var c=P.serializeStyle(P.parseStyle(a.style.cssText),a.nodeName);c&&a.setAttribute("data-mce-style",c)}O(b.attributes,function(b,c){P.setAttrib(a,c,y(b,e))}),O(b.classes,function(b){b=y(b,e),P.hasClass(a,b)||P.addClass(a,b)})}}function i(a,b){var c=!1;return!!r.selector&&(O(a,function(a){if(!("collapsed"in a&&a.collapsed!==s))return P.is(b,a.selector)&&!g(b)?(h(b,a),c=!0,!1):void 0}),c)}function k(){function a(a,b){var c=new R(b);for(f=c.prev2();f;f=c.prev2()){if(3==f.nodeType&&f.data.length>0)return f;if(f.childNodes.length>1||f==a||"BR"==f.tagName)return f}}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&0===c.endOffset){var g=a(d,e),h=3==g.nodeType?g.data.length:g.childNodes.length;c.setEnd(g,h)}return c}function l(b,f,j){var k,l,m=[],n=!0;k=r.inline||r.block,l=P.create(k),h(l),S.walk(b,function(b){function f(b){var s,t,u,w,x;if(x=n,s=b.nodeName.toLowerCase(),t=b.parentNode.nodeName.toLowerCase(),1===b.nodeType&&_(b)&&(x=n,n="true"===_(b),w=!0),v(s,"br"))return o=0,void(r.block&&P.remove(b));if(r.wrapper&&p(b,d,e))return void(o=0);if(n&&!w&&r.block&&!r.wrapper&&c(s)&&T(t,k))return b=P.rename(b,k),h(b),m.push(b),void(o=0);if(r.selector){var u=i(q,b);if(!r.inline||u)return void(o=0)}!n||w||!T(k,s)||!T(t,k)||!j&&3===b.nodeType&&1===b.nodeValue.length&&65279===b.nodeValue.charCodeAt(0)||g(b)||r.inline&&U(b)?(o=0,O(a.grep(b.childNodes),f),w&&(n=x),o=0):(o||(o=P.clone(l,Z),b.parentNode.insertBefore(o,b),m.push(o)),o.appendChild(b))}var o;O(b,f)}),r.links!==!0&&r.wrap_links!==!1||O(m,function(b){function c(b){"A"===b.nodeName&&h(b,r),O(a.grep(b.childNodes),c)}c(b)}),O(m,function(a){function b(a){var b=0;return O(a.childNodes,function(a){z(a)||G(a)||b++}),b}function c(a){var b,c;return O(a.childNodes,function(a){if(1==a.nodeType&&!G(a)&&!g(a))return b=a,Z}),b&&!G(b)&&u(b,r)&&(c=P.clone(b,Z),h(c),P.replace(c,a,$),P.remove(b,1)),c||a}var f;if(f=b(a),(m.length>1||!U(a))&&0===f)return void P.remove(a,1);if(r.inline||r.wrapper){if(r.exact||1!==f||(a=c(a)),O(q,function(b){O(P.select(b.inline,a),function(a){G(a)||D(b,e,a,b.exact?a:null)})}),p(a.parentNode,d,e))return P.remove(a,1),a=0,$;r.merge_with_parents&&P.getParent(a.parentNode,function(b){if(p(b,d,e))return P.remove(a,1),a=0,$}),a&&r.merge_siblings!==!1&&(a=H(F(a),a),a=H(a,F(a,$)))}})}var n,o,q=j(d),r=q[0],s=!f&&Q.isCollapsed();if(r)if(f)f.nodeType?i(q,f)||(o=P.createRng(),o.setStartBefore(f),o.setEndAfter(f),l(B(o,q),null,!0)):l(f,null,!0);else if(s&&r.inline&&!P.select("td.mceSelected,th.mceSelected").length)J("apply",d,e);else{var t=b.selection.getNode();V||!q[0].defaultBlock||P.getParent(t,P.isBlock)||m(q[0].defaultBlock),b.selection.setRng(k()),n=Q.getBookmark(),l(B(Q.getRng($),q),n),r.styles&&(r.styles.color||r.styles.textDecoration)&&(a.walk(t,ba,"childNodes"),ba(t)),Q.moveToBookmark(n),K(Q.getRng($)),b.nodeChanged()}}function n(c,e,g,h){function i(b){var c,d,f,g,h;if(1===b.nodeType&&_(b)&&(g=v,v="true"===_(b),h=!0),c=a.grep(b.childNodes),v&&!h)for(d=0,f=t.length;d<f&&!D(t[d],e,b,b);d++);if(u.deep&&c.length){for(d=0,f=c.length;d<f;d++)i(c[d]);h&&(v=g)}}function k(a){var b;return O(f(a.parentNode).reverse(),function(a){var d;b||"_start"==a.id||"_end"==a.id||(d=p(a,c,e,h),d&&d.split!==!1&&(b=a))}),b}function l(a,b,c,d){var f,g,h,i,j,k;if(a){for(k=a.parentNode,f=b.parentNode;f&&f!=k;f=f.parentNode){for(g=P.clone(f,Z),j=0;j<t.length;j++)if(D(t[j],e,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}!d||u.mixed&&U(a)||(b=P.split(a,b)),h&&(c.parentNode.insertBefore(h,c),i.appendChild(c))}return b}function m(a){return l(k(a),a,a,!0)}function n(a){var b=P.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return G(c)&&(c=c[a?"firstChild":"lastChild"]),3==c.nodeType&&0===c.data.length&&(c=a?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling),P.remove(b,!0),c}function o(a){var c,e,f=a.commonAncestorContainer;if(a=B(a,t,$),u.split){if(c=I(a,$),e=I(a),c!=e){if(f&&/^T(HEAD|BODY|FOOT|R)$/.test(f.nodeName)&&/^(TH|TD)$/.test(e.nodeName)&&e.firstChild&&(e=e.firstChild||e),P.isChildOf(c,e)&&!U(e)&&!d(c)&&!d(e))return c=A(c,"span",{id:"_start","data-mce-type":"bookmark"}),m(c),void(c=n($));c=A(c,"span",{id:"_start","data-mce-type":"bookmark"}),e=A(e,"span",{id:"_end","data-mce-type":"bookmark"}),m(c),m(e),c=n($),e=n()}else c=e=m(c);a.startContainer=c.parentNode?c.parentNode:c,a.startOffset=W(c),a.endContainer=e.parentNode?e.parentNode:e,a.endOffset=W(e)+1}S.walk(a,function(a){O(a,function(a){i(a),1===a.nodeType&&"underline"===b.dom.getStyle(a,"text-decoration")&&a.parentNode&&"underline"===aa(a.parentNode)&&D({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var r,s,t=j(c),u=t[0],v=!0;return g?void(g.nodeType?(s=P.createRng(),s.setStartBefore(g),s.setEndAfter(g),o(s)):o(g)):void(Q.isCollapsed()&&u.inline&&!P.select("td.mceSelected,th.mceSelected").length?J("remove",c,e,h):(r=Q.getBookmark(),o(Q.getRng($)),Q.moveToBookmark(r),u.inline&&q(c,e,Q.getStart())&&K(Q.getRng(!0)),b.nodeChanged()))}function o(a,b,c){var d=j(a);!q(a,b,c)||"toggle"in d[0]&&!d[0].toggle?m(a,b,c):n(a,b,c)}function p(a,b,c,d){function e(a,b,e){var f,g,h,i=b[e];if(b.onmatch)return b.onmatch(a,b,e);if(i)if(i.length===M){for(f in i)if(i.hasOwnProperty(f)){if(g="attributes"===e?P.getAttrib(a,f):w(a,f),d&&!g&&!b.exact)return;if((!d||b.exact)&&!v(g,x(y(i[f],c),f)))return}}else for(h=0;h<i.length;h++)if("attributes"===e?P.getAttrib(a,i[h]):w(a,i[h]))return b;return b}var f,g,h,i=j(b);if(i&&a)for(g=0;g<i.length;g++)if(f=i[g],u(a,f)&&e(a,f,"attributes")&&e(a,f,"styles")){if(h=f.classes)for(g=0;g<h.length;g++)if(!P.hasClass(a,h[g]))return;return f}}function q(a,b,c){function d(c){var d=P.getRoot();return c!==d&&(c=P.getParent(c,function(c){return!!l(c,a)||(c.parentNode===d||!!p(c,a,b,!0))}),p(c,a,b))}var e;return c?d(c):(c=Q.getNode(),d(c)?$:(e=Q.getStart(),e!=c&&d(e)?$:Z))}function r(a,b){var c,d=[],e={};return c=Q.getStart(),P.getParent(c,function(c){var f,g;for(f=0;f<a.length;f++)g=a[f],!e[g]&&p(c,g,b)&&(e[g]=!0,d.push(g))},P.getRoot()),d}function s(a){var b,c,d,e,g,h=j(a);if(h)for(b=Q.getStart(),c=f(b),e=h.length-1;e>=0;e--){if(g=h[e].selector,!g||h[e].defaultBlock)return $;for(d=c.length-1;d>=0;d--)if(P.is(c[d],g))return $}return Z}function t(c,d,e){var g;return L||(L={},g={},b.onNodeChange.addToTop(function(b,c,d){var e=f(d),h={};e=a.grep(e,function(a){return 1==a.nodeType&&!a.getAttribute("data-mce-bogus")}),O(L,function(a,b){O(e,function(c){return p(c,b,{},a.similar)?(g[b]||(O(a,function(a){a(!0,{node:c,format:b,parents:e})}),g[b]=a),h[b]=a,!1):!l(c,b)&&void 0})}),O(g,function(a,b){h[b]||(delete g[b],O(a,function(a){a(!1,{node:d,format:b,parents:e})}))})})),O(c.split(","),function(a){L[a]||(L[a]=[],L[a].similar=e),L[a].push(d)}),this}function u(a,b){return v(a,b.inline)?$:v(a,b.block)?$:b.selector?1==a.nodeType&&P.is(a,b.selector):void 0}function v(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function w(a,b){return x(P.getStyle(a,b),b)}function x(a,b){return"color"!=b&&"backgroundColor"!=b||(a=P.toHex(a)),"fontWeight"==b&&700==a&&(a="bold"),"fontFamily"==b&&(a=a.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+a}function y(a,b){return"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function z(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function A(a,b,c){var d=P.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function B(a,d,e){function g(a){function b(a){return"BR"==a.nodeName&&a.getAttribute("data-mce-bogus")&&!a.nextSibling}var c,e,f,g,h;if(c=e=a?p:r,g=a?"previousSibling":"nextSibling",h=P.getRoot(),3==c.nodeType&&!z(c)&&(a?q>0:s<c.nodeValue.length))return c;for(;;){if(!d[0].block_expand&&U(e))return e;for(f=e[g];f;f=f[g])if(!G(f)&&!z(f)&&!b(f))return e;if(e.parentNode==h){c=e;break}e=e.parentNode}return c}function h(a,b){for(b===M&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)a=a.childNodes[b],a&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}function i(a){for(var b=a;b;){if(1===b.nodeType&&_(b))return"false"===_(b)?b:a;b=b.parentNode}return a}function j(a,c,d){function f(a,b){var c,f,g=a.nodeValue;return"undefined"==typeof b&&(b=d?g.length:0),d?(c=g.lastIndexOf(" ",b),f=g.lastIndexOf(" ",b),c=c>f?c:f,c===-1||e||c++):(c=g.indexOf(" ",b),f=g.indexOf(" ",b),c=c!==-1&&(f===-1||c<f)?c:f),c}var g,h,i,j;if(3===a.nodeType){if(i=f(a,c),i!==-1)return{container:a,offset:i};j=a}for(g=new R(a,P.getParent(a,U)||b.getBody());h=g[d?"prev":"next"]();)if(3===h.nodeType){if(j=h,i=f(h),i!==-1)return{container:h,offset:i}}else if(U(h))break;if(j)return c=d?0:j.length,{container:j,offset:c}}function k(b,c){var e,g,h,i;for(3==b.nodeType&&0===b.nodeValue.length&&b[c]&&(b=b[c]),e=f(b),g=0;g<e.length;g++)for(h=0;h<d.length;h++)if(i=d[h],!("collapsed"in i&&i.collapsed!==a.collapsed)&&P.is(e[g],i.selector))return e[g];return b}function l(a,b){var e,g=P.getRoot();if(d[0].wrapper||(e=P.getParent(a,d[0].block,g)),e||(e=P.getParent(3==a.nodeType?a.parentNode:a,function(a){return a!=g&&c(a)})),e&&d[0].wrapper&&(e=f(e,"ul,ol,dl").reverse()[0]||e),!e)for(e=a;e[b]&&!U(e[b])&&(e=e[b],!v(e,"br")););return e||a}var m,n,o,p=a.startContainer,q=a.startOffset,r=a.endContainer,s=a.endOffset;if(1==p.nodeType&&p.hasChildNodes()&&(m=p.childNodes.length-1,p=p.childNodes[q>m?m:q],p&&3==p.nodeType&&(q=0)),1==r.nodeType&&r.hasChildNodes()&&(m=r.childNodes.length-1,r=r.childNodes[s>m?m:s-1],r&&3==r.nodeType&&(s=r.nodeValue.length)),p=i(p),r=i(r),(G(p.parentNode)||G(p))&&(p=G(p)?p:p.parentNode,p=p.nextSibling||p,3==p.nodeType&&(q=0)),(G(r.parentNode)||G(r))&&(r=G(r)?r:r.parentNode,r=r.previousSibling||r,3==r.nodeType&&(s=r.length)),d[0].inline&&(a.collapsed&&(o=j(p,q,!0),o&&(p=o.container,q=o.offset),o=j(r,s),o&&(r=o.container,s=o.offset)),n=h(r,s),n.node)){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=h(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(r=n.node,r.splitText(n.offset-1))}return(d[0].inline||d[0].block_expand)&&(d[0].inline&&3==p.nodeType&&0!==q||(p=g(!0)),d[0].inline&&3==r.nodeType&&s!==r.nodeValue.length||(r=g())),d[0].selector&&d[0].expand!==Z&&!d[0].inline&&(p=k(p,"previousSibling"),r=k(r,"nextSibling")),(d[0].block||d[0].selector)&&(p=l(p,"previousSibling"),r=l(r,"nextSibling"),d[0].block&&(U(p)||(p=g(!0)),U(r)||(r=g()))),1==p.nodeType&&(q=W(p),p=p.parentNode),1==r.nodeType&&(s=W(r)+1,r=r.parentNode),{startContainer:p,startOffset:q,endContainer:r,endOffset:s}}function C(a,b){return b.links&&"A"==a.tagName}function D(a,b,c,d){var e,f,g;if(!u(c,a)&&!C(c,a))return Z;if("all"!=a.remove)for(O(a.styles,function(e,f){e=x(y(e,b),f),"number"==typeof f&&(f=e,d=0),(a.remove_similar||!d||v(w(d,f),e))&&P.setStyle(c,f,""),g=1}),g&&""===P.getAttrib(c,"style")&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),O(a.attributes,function(a,e){var f;if(a=y(a,b),"number"==typeof e&&(e=a,d=0),!d||v(P.getAttrib(d,e),a)){if("class"==e&&(a=P.getAttrib(c,e),a&&(f="",O(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)}),f)))return void P.setAttrib(c,e,f);"class"==e&&c.removeAttribute("className"),Y.test(e)&&c.removeAttribute("data-mce-"+e),c.removeAttribute(e)}}),O(a.classes,function(a){a=y(a,b),d&&!P.hasClass(d,a)||P.removeClass(c,a)}),f=P.getAttribs(c),e=0;e<f.length;e++)if(0!==f[e].nodeName.indexOf("_"))return Z;return"none"!=a.remove?(E(c,a),$):void 0}function E(c,d){function e(a,b,c){return a=F(a,b,c),!a||"BR"==a.nodeName||U(a)}var f,g=c.parentNode;d.block&&(V?g==P.getRoot()&&(d.list_block&&v(c,d.list_block)||O(a.grep(c.childNodes),function(a){T(V,a.nodeName.toLowerCase())?f?f.appendChild(a):(f=A(a,V),P.setAttribs(f,b.settings.forced_root_block_attrs)):f=0})):U(c)&&!U(g)&&(e(c,Z)||e(c.firstChild,$,1)||c.insertBefore(P.create("br"),c.firstChild),e(c,$)||e(c.lastChild,Z,1)||c.appendChild(P.create("br")))),d.selector&&d.inline&&!v(d.inline,c)||P.remove(c,1)}function F(a,b,c){if(a)for(b=b?"nextSibling":"previousSibling",a=c?a:a[b];a;a=a[b])if(1==a.nodeType||!z(a))return a}function G(a){return a&&1==a.nodeType&&"bookmark"==a.getAttribute("data-mce-type")}function H(b,c){function d(a,b){function c(a){var b={};return O(P.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();0!==d.indexOf("_")&&"style"!==d&&(b[d]=P.getAttrib(a,d))}),b}function d(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){if(c=b[d],c===M)return Z;if(a[d]!=c)return Z;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return Z;return $}return a.nodeName!=b.nodeName?Z:d(c(a),c(b))&&d(P.parseStyle(P.getAttrib(a,"style")),P.parseStyle(P.getAttrib(b,"style")))?$:Z}function e(a,b){for(f=a;f;f=f[b]){if(3==f.nodeType&&0!==f.nodeValue.length)return a;if(1==f.nodeType&&!G(f))return f}return a}var f,g;if(b&&c&&(b=e(b,"previousSibling"),c=e(c,"nextSibling"),d(b,c))){for(f=b.nextSibling;f&&f!=c;)g=f,f=f.nextSibling,b.appendChild(g);return P.remove(c),O(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}return c}function I(a,c){var d,e,f;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],1==d.nodeType&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),3===d.nodeType&&c&&e>=d.nodeValue.length&&(d=new R(d,b.getBody()).next()||d),3!==d.nodeType||c||0!==e||(d=new R(d,b.getBody()).prev()||d),d}function J(d,e,f,g){function h(a){var c=P.create("span",{id:t,"data-mce-bogus":!0,style:u?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(X)),c}function i(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==X||a.childNodes.length>1)return!1;b&&1===a.nodeType&&b.push(a),a=a.firstChild}return!0}function k(a){for(;a;){if(a.id===t)return a;a=a.parentNode}}function l(a){var b;if(a)for(b=new R(a,a),a=b.current();a;a=b.next())if(3===a.nodeType)return a}function o(a,b){var c,d;if(a)d=Q.getRng(!0),i(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),P.remove(a)):(c=l(a),c.nodeValue.charAt(0)===X&&(c.deleteData(0,1),d.startContainer==c&&d.startOffset>0&&d.setStart(c,d.startOffset-1),d.endContainer==c&&d.endOffset>0&&d.setEnd(c,d.endOffset-1)),P.remove(a,1)),Q.setRng(d);else if(a=k(Q.getStart()),!a)for(;a=P.get(t);)o(a,!1)}function q(){var a,b,c,d,g,i,n;a=Q.getRng(!0),d=a.startOffset,i=a.startContainer,n=i.nodeValue,b=k(Q.getStart()),b&&(c=l(b)),n&&d>0&&d<n.length&&/\w/.test(n.charAt(d))&&/\w/.test(n.charAt(d-1))?(g=Q.getBookmark(),a.collapse(!0),a=B(a,j(e)),a=S.split(a),m(e,f,a),Q.moveToBookmark(g)):(b&&c.nodeValue===X?m(e,f,b):(b=h(!0),c=b.firstChild,a.insertNode(b),d=1,m(e,f,b)),Q.setCursorLocation(c,d))}function r(){var a,b,d,i,k,l,m,o,q=Q.getRng(!0),r=[];for(a=q.startContainer,b=q.startOffset,k=a,3==a.nodeType&&(b!=a.nodeValue.length&&(i=!0),k=k.parentNode);k;){if(p(k,e,f,g)){l=k;break}k.nextSibling&&(i=!0),r.push(k),k=k.parentNode}if(l)if(i)d=Q.getBookmark(),q.collapse(!0),q=B(q,j(e),!0),q=S.split(q),n(e,f,q),Q.moveToBookmark(d);else{for(o=h(),k=o,m=r.length-1;m>=0;m--)k.appendChild(P.clone(r[m],!1)),k=k.firstChild;k.appendChild(P.doc.createTextNode(X)),k=k.firstChild;var s=P.getParent(l,c);s&&P.isEmpty(s)?l.parentNode.replaceChild(o,l):P.insertAfter(o,l),Q.setCursorLocation(k,1),P.isEmpty(l)&&P.remove(l)}}function s(){var b;b=k(Q.getStart()),b&&!P.isEmpty(b)&&a.walk(b,function(a){1!=a.nodeType||a.id===t||P.isEmpty(a)||P.setAttrib(a,"data-mce-bogus",null)},"childNodes")}var t="_mce_caret",u=b.settings.caret_debug;b._hasCaretEvents||(b.onBeforeGetContent.addToTop(function(){var a,b=[];if(i(k(Q.getStart()),b))for(a=b.length;a--;)P.setAttrib(b[a],"data-mce-bogus","1")}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){o(),s()})}),b.onKeyDown.addToTop(function(a,b){
var c=b.keyCode;(8==c&&Q.isCollapsed()||37==c||39==c)&&o(k(Q.getStart())),s()}),Q.onSetContent.add(s),b._hasCaretEvents=!0),"apply"==d?q():r()}function K(a){var b,c,d,f,g,h=a.startContainer,i=a.startOffset;if((a.startContainer!=a.endContainer||!e(a.startContainer.childNodes[a.startOffset]))&&(3==h.nodeType&&i>=h.nodeValue.length&&(i=W(h),h=h.parentNode,b=!0),1==h.nodeType))for(f=h.childNodes,h=f[Math.min(i,f.length-1)],c=new R(h,P.getParent(h,P.isBlock)),(i>f.length-1||b)&&c.next(),d=c.current();d;d=c.next())if(3==d.nodeType&&!z(d))return g=P.create("a",{"data-mce-bogus":"all"},X),d.parentNode.insertBefore(g,d),a.setStart(d,0),Q.setRng(a),void P.remove(g)}var L,M,N={},O=a.each,P=b.dom,Q=b.selection,R=a.dom.TreeWalker,S=new a.dom.RangeUtils(P),T=b.schema.isValidChild,U=P.isBlock,V=b.settings.forced_root_block,W=P.nodeIndex,X="\ufeff",Y=/^(src|href|style)$/,Z=!1,$=!0,_=P.getContentEditable,aa=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&"none"!==c}),c},ba=function(a){var c;1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType&&(c=aa(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"text-decoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:j,register:k,apply:m,remove:n,toggle:o,match:q,matchAll:r,matchNode:p,canApply:s,formatChanged:t}),h(),i()}}(tinymce),tinymce.onAddEditor.add(function(a,b){function c(b,c){a.each(c,function(a,c){a&&g.setStyle(b,c,a)}),g.rename(b,"span")}function d(c,d){g=c.dom,h.convert_fonts_to_spans&&a.each(g.select("font,u,strike",d.node),function(a){e[a.nodeName.toLowerCase()](b.dom,a)})}var e,f,g,h=b.settings;h.inline_styles&&(f=a.explode(h.font_size_legacy_values),e={font:function(a,b){c(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:f[parseInt(b.size,10)-1]})},u:function(a,b){c(b,{textDecoration:"underline"})},strike:function(a,b){c(b,{textDecoration:"line-through"})}},b.onPreProcess.add(d),b.onSetContent.add(d),b.onInit.add(function(){b.selection.onSetContent.add(d)}))}),function(a){var b=a.dom.TreeWalker;a.EnterKey=function(c){function d(d){function j(a){return a&&e.isBlock(a)&&!/^(TD|TH|CAPTION|FORM)$/.test(a.nodeName)&&!/^(fixed|absolute)/i.test(a.style.position)&&"true"!==e.getContentEditable(a)}function k(b){var c;a.isIE&&!a.isIE11&&e.isBlock(b)&&(c=f.getRng(),b.appendChild(e.create("span",null," ")),f.select(b),b.lastChild.outerHTML="",f.setRng(c))}function l(a){var b,c=a,d=[];if(c){for(;c=c.firstChild;){if(e.isBlock(c))return;1!=c.nodeType||i[c.nodeName.toLowerCase()]||d.push(c)}for(b=d.length;b--;)c=d[b],!c.hasChildNodes()||c.firstChild==c.lastChild&&""===c.firstChild.nodeValue?e.remove(c):"A"==c.nodeName&&" "===(c.innerText||c.textContent)&&e.remove(c)}}function m(a){var d,g,h,j,k,l,m=a;if(h=e.createRng(),a.hasChildNodes()){for(d=new b(a,a);g=d.current();){if(3==g.nodeType){h.setStart(g,0),h.setEnd(g,0);break}if(i[g.nodeName.toLowerCase()]){h.setStartBefore(g),h.setEndBefore(g);break}m=g,g=d.next()}g||(h.setStart(m,0),h.setEnd(m,0))}else"BR"==a.nodeName?a.nextSibling&&e.isBlock(a.nextSibling)?((!B||B<9)&&(l=e.create("br"),a.parentNode.insertBefore(l,a)),h.setStartBefore(a),h.setEndBefore(a)):(h.setStartAfter(a),h.setEndAfter(a)):(h.setStart(a,0),h.setEnd(a,0));f.setRng(h),e.remove(l),k=e.getViewPort(c.getWin()),j=e.getPos(a).y,(j<k.y||j+25>k.y+k.h)&&c.getWin().scrollTo(0,j<k.y?j:j-k.h+25)}function n(b){var c,d,f,h=y;if(c=b||"TABLE"==G?e.create(b||I):g.keep_attributes?A.cloneNode(!1):e.create(A.nodeName),f=c,g.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)){if("_mce_caret"==h.id)continue;d=h.cloneNode(!1),e.setAttrib(d,"id",""),c.hasChildNodes()?(d.appendChild(c.firstChild),c.appendChild(d)):(f=d,c.appendChild(d))}while(h=h.parentNode);return a.isIE&&!a.isIE11||(f.innerHTML='<br data-mce-bogus="1">'),c}function o(a){var c,d,e;if(3==y.nodeType&&(a?z>0:z<y.nodeValue.length))return!1;if(y.parentNode==A&&J&&!a)return!0;if(a&&1==y.nodeType&&y==A.firstChild)return!0;if("TABLE"===y.nodeName||y.previousSibling&&"TABLE"==y.previousSibling.nodeName)return J&&!a||!J&&a;for(c=new b(y,A),3==y.nodeType&&(a&&0==z?c.prev():a||z!=y.nodeValue.length||c.next());d=c.current();){if(1===d.nodeType){if(!d.getAttribute("data-mce-bogus")&&(e=d.nodeName.toLowerCase(),i[e]&&"br"!==e))return!1}else if(3===d.nodeType&&!/^[ \t\r\n]*$/.test(d.nodeValue))return!1;a?c.prev():c.next()}return!0}function p(a,b){var c,d,f,g,h,i=I||"P";if(d=e.getParent(a,e.isBlock),!d||!j(d)){if(d=d||x,!d.hasChildNodes())return c=e.create(i),d.appendChild(c),K.setStart(c,0),K.setEnd(c,0),c;for(g=a;g.parentNode!=d;)g=g.parentNode;for(;g&&!e.isBlock(g);)f=g,g=g.previousSibling;if(f){for(c=e.create(i),f.parentNode.insertBefore(c,f),g=f;g&&!e.isBlock(g);)h=g.nextSibling,c.appendChild(g),g=h;K.setStart(a,b),K.setEnd(a,b)}}return a}function q(){function a(a){for(var b=F[a?"firstChild":"lastChild"];b&&1!=b.nodeType;)b=b[a?"nextSibling":"previousSibling"];return b===A}D=I?n(I):e.create("BR"),a(!0)&&a()?e.replace(D,F):a(!0)?F.parentNode.insertBefore(D,F):a()?(e.insertAfter(D,F),k(D)):(w=K.cloneRange(),w.setStartAfter(A),w.setEndAfter(F),E=w.extractContents(),e.insertAfter(E,F),e.insertAfter(D,F)),e.remove(A),m(D),h.add()}function r(){for(var a,c=new b(y,A);a=c.next();)if(i[a.nodeName.toLowerCase()]||a.length>0)return!0}function s(){var b,c,d;y&&3==y.nodeType&&z>=y.nodeValue.length&&(a.isIE&&!a.isIE11||r()||(b=e.create("br"),K.insertNode(b),K.setStartAfter(b),K.setEndAfter(b),c=!0)),b=e.create("br"),K.insertNode(b),a.isIE&&!a.isIE11&&"PRE"==G&&(!B||B<8)&&b.parentNode.insertBefore(e.doc.createTextNode("\r"),b),d=e.create("span",{},"&nbsp;"),b.parentNode.insertBefore(d,b),f.scrollIntoView(d),e.remove(d),c?(K.setStartBefore(b),K.setEndBefore(b)):(K.setStartAfter(b),K.setEndAfter(b)),f.setRng(K),h.add()}function t(a){do 3===a.nodeType&&(a.nodeValue=a.nodeValue.replace(/^[\r\n]+/,"")),a=a.firstChild;while(a)}function u(a){var b,c,d=e.getRoot();for(b=a;b!==d&&"false"!==e.getContentEditable(b);)"true"===e.getContentEditable(b)&&(c=b),b=b.parentNode;return b!==d?c:d}function v(b){var c;a.isIE&&!a.isIE11||(b.normalize(),c=b.lastChild,c&&!/^(left|right)$/gi.test(e.getStyle(c,"float",!0))||e.add(b,"br"))}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=f.getRng(!0);if(!K.collapsed)return void c.execCommand("Delete");if(!d.isDefaultPrevented()&&(y=K.startContainer,z=K.startOffset,I=(g.force_p_newlines?"p":"")||g.forced_root_block,I=I?I.toUpperCase():"",B=e.doc.documentMode,C=d.shiftKey,1==y.nodeType&&y.hasChildNodes()&&(J=z>y.childNodes.length-1,y=y.childNodes[Math.min(z,y.childNodes.length-1)]||y,z=J&&3==y.nodeType?y.nodeValue.length:0),x=u(y))){if(h.beforeChange(),!e.isBlock(x)&&x!=e.getRoot())return void(I&&!C||s());if((I&&!C||!I&&C)&&(y=p(y,z)),A=e.getParent(y,e.isBlock),F=A?e.getParent(A.parentNode,e.isBlock):null,G=A?A.nodeName.toUpperCase():"",H=F?F.nodeName.toUpperCase():"","LI"!=H||d.ctrlKey||(A=F,G=H),"LI"==G){if(!I&&C)return void s();if(e.isEmpty(A))return!/^(UL|OL|LI)$/.test(F.parentNode.nodeName)&&void q()}if("PRE"==G&&g.br_in_pre!==!1){if(!C)return void s()}else if(!I&&!C&&"LI"!=G||I&&C)return void s();I=I||"P",o()?(D=/^(H[1-6]|PRE)$/.test(G)&&"HGROUP"!=H?n(I):n(),g.end_container_on_empty_block&&j(F)&&e.isEmpty(A)?D=e.split(F,A):e.insertAfter(D,A),m(D)):o(!0)?(D=A.parentNode.insertBefore(n(),A),k(D)):(w=K.cloneRange(),w.setEndAfter(A),E=w.extractContents(),t(E),D=E.firstChild,e.insertAfter(E,A),l(D),v(A),m(D)),e.setAttrib(D,"id",""),h.add()}}var e=c.dom,f=c.selection,g=c.settings,h=c.undoManager,i=c.schema.getNonEmptyElements();c.onKeyDown.add(function(a,b){13==b.keyCode&&d(b)!==!1&&b.preventDefault()})}}(tinymce);