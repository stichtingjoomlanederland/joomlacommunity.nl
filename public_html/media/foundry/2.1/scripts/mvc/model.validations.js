!function(){var moduleFactory=function($){var module=this;$.require().script("mvc/model").done(function(){var exports=function(){var validate=function(attrNames,options,proc){if(proc||(proc=options,options={}),options=options||{},attrNames=$.makeArray(attrNames),!options.testIf||options.testIf.call(this)){var self=this;$.each(attrNames,function(i,attrName){self.validations[attrName]||(self.validations[attrName]=[]),self.validations[attrName].push(function(){var res=proc.call(this,this[attrName]);return void 0===res?void 0:options.message||res
})})}};$.extend($.Model,{validate:validate,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",presence:"can't be empty",range:"is out of range"},validateFormatOf:function(attrNames,regexp,options){validate.call(this,attrNames,options,function(value){return"undefined"!=typeof value&&""!=value&&null==String(value).match(regexp)?this.Class.validationMessages.format:void 0})},validateInclusionOf:function(attrNames,inArray,options){validate.call(this,attrNames,options,function(value){return"undefined"!=typeof value?0==$.grep(inArray,function(elm){return elm==value
}).length?this.Class.validationMessages.inclusion:void 0:void 0})},validateLengthOf:function(attrNames,min,max,options){validate.call(this,attrNames,options,function(value){return"undefined"==typeof value&&min>0||value.length<min?this.Class.validationMessages.lengthShort+" (min="+min+")":"undefined"!=typeof value&&value.length>max?this.Class.validationMessages.lengthLong+" (max="+max+")":void 0})},validatePresenceOf:function(attrNames,options){validate.call(this,attrNames,options,function(value){return"undefined"==typeof value||""==value||null===value?this.Class.validationMessages.presence:void 0
})},validateRangeOf:function(attrNames,low,hi,options){validate.call(this,attrNames,options,function(value){return"undefined"!=typeof value&&low>value||value>hi?this.Class.validationMessages.range+" ["+low+","+hi+"]":void 0})}})};exports(),module.resolveWith(exports)})};dispatch("mvc/model.validations").containing(moduleFactory).to("Foundry/2.1 Modules")}();