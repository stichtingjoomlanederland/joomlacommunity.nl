!function(){var moduleFactory=function($){var module=this;$.require().script("mvc/event.drag","mvc/dom.cur_styles").done(function(){var exports=function(){var round=function(x,m){return Math.round(x/m)*m};$.Drag.prototype.step=function(amount,container,center){"number"==typeof amount&&(amount={x:amount,y:amount}),container=container||$(document.body),this._step=amount;var styles=container.curStyles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),top=parseInt(styles.borderTopWidth)+parseInt(styles.paddingTop),left=parseInt(styles.borderLeftWidth)+parseInt(styles.paddingLeft);
return this._step.offset=container.offsetv().plus(left,top),this._step.center=center,this};var oldPosition=$.Drag.prototype.position;$.Drag.prototype.position=function(offsetPositionv){if(this._step){var step=this._step,center=step.center&&step.center.toLowerCase(),movingSize=this.movingElement.dimensionsv("outer"),lot=step.offset.top()-(center&&"x"!=center?movingSize.height()/2:0),lof=step.offset.left()-(center&&"y"!=center?movingSize.width()/2:0);this._step.x&&offsetPositionv.left(Math.round(lof+round(offsetPositionv.left()-lof,this._step.x))),this._step.y&&offsetPositionv.top(Math.round(lot+round(offsetPositionv.top()-lot,this._step.y)))
}oldPosition.call(this,offsetPositionv)}};exports(),module.resolveWith(exports)})};dispatch("mvc/event.drag.step").containing(moduleFactory).to("Foundry/2.1 Modules")}();