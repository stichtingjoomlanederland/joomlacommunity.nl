!function(){var moduleFactory=function($){var module=this,jQuery=$;$.require().script("ui/core","ui/widget","ui/button","ui/draggable","ui/mouse","ui/position","ui/resizable").stylesheet("ui/dialog").done(function(){var exports=function(){!function($,undefined){var uiDialogClasses="ui-dialog ui-widget ui-widget-content ui-corner-all ",sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};
$.widget("ui.dialog",{version:"1.9.0pre",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;
var that=this,options=this.options,title=options.title||"&#160;",uiDialog=(this.uiDialog=$("<div>")).addClass(uiDialogClasses+options.dialogClass).css({display:"none",outline:0,zIndex:options.zIndex}).attr("tabIndex",-1).keydown(function(event){options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(that.close(event),event.preventDefault())}).mousedown(function(event){that.moveToTop(!1,event)}).appendTo("body"),uiDialogTitlebar=(this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(uiDialog),(this.uiDialogTitlebar=$("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(uiDialog)),uiDialogTitlebarClose=$("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(event){event.preventDefault(),that.close(event)
}).appendTo(uiDialogTitlebar),uiDialogTitle=((this.uiDialogTitlebarCloseText=$("<span>")).addClass("ui-icon ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),$("<span>").uniqueId().addClass("ui-dialog-title").html(title).prependTo(uiDialogTitlebar)),uiDialogButtonPane=(this.uiDialogButtonPane=$("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=$("<div>")).addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane),uiDialog.attr({role:"dialog","aria-labelledby":uiDialogTitle.attr("id")}),uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection(),this._hoverable(uiDialogTitlebarClose),this._focusable(uiDialogTitlebarClose),options.draggable&&$.fn.draggable&&this._makeDraggable(),options.resizable&&$.fn.resizable&&this._makeResizable(),this._createButtons(options.buttons),this._isOpen=!1,$.fn.bgiframe&&uiDialog.bgiframe(),this._on(uiDialog,{keydown:function(event){if(options.modal&&event.keyCode===$.ui.keyCode.TAB){var tabbables=$(":tabbable",uiDialog),first=tabbables.filter(":first"),last=tabbables.filter(":last");
return event.target!==last[0]||event.shiftKey?event.target===first[0]&&event.shiftKey?(last.focus(1),!1):void 0:(first.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var next,oldPosition=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=oldPosition.parent.children().eq(oldPosition.index),next.length?next.before(this.element):oldPosition.parent.append(this.element)
},widget:function(){return this.uiDialog},close:function(event){var maxZ,thisZ,that=this;if(this._isOpen&&!1!==this._trigger("beforeClose",event))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){that._trigger("close",event)}):(this.uiDialog.hide(),this._trigger("close",event)),$.ui.dialog.overlay.resize(),this.options.modal&&(maxZ=0,$(".ui-dialog").each(function(){this!==that.uiDialog[0]&&(thisZ=$(this).css("z-index"),isNaN(thisZ)||(maxZ=Math.max(maxZ,thisZ)))
}),$.ui.dialog.maxZ=maxZ),this},isOpen:function(){return this._isOpen},moveToTop:function(force,event){var saveScroll,options=this.options;return options.modal&&!force||!options.stack&&!options.modal?this._trigger("focus",event):(options.zIndex>$.ui.dialog.maxZ&&($.ui.dialog.maxZ=options.zIndex),this.overlay&&($.ui.dialog.maxZ+=1,$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ,this.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ)),saveScroll={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},$.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",$.ui.dialog.maxZ),this.element.attr(saveScroll),this._trigger("focus",event),this)
},open:function(){if(!this._isOpen){var hasFocus,options=this.options,uiDialog=this.uiDialog;return this._size(),this._position(options.position),uiDialog.show(options.show),this.overlay=options.modal?new $.ui.dialog.overlay(this):null,this.moveToTop(!0),hasFocus=this.element.find(":tabbable"),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable"),hasFocus.length||(hasFocus=uiDialog)),hasFocus.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(buttons){var that=this,hasButtons=!1;
this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof buttons&&null!==buttons&&$.each(buttons,function(){return!(hasButtons=!0)}),hasButtons?($.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$("<button type='button'>").attr(props,!0).unbind("click").click(function(){props.click.apply(that.element[0],arguments)}).appendTo(that.uiButtonSet);$.fn.button&&button.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")
},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()],$(this).removeClass("ui-dialog-dragging"),that._trigger("dragStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()
}})},_makeResizable:function(handles){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}handles=handles===undefined?this.options.resizable:handles;var that=this,options=this.options,position=this.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._trigger("resizeStart",event,filteredUi(ui))
},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing"),options.height=$(this).height(),options.width=$(this).width(),that._trigger("resizeStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)
},_position:function(position){var isVisible,myAt=[],offset=[0,0];position?(("string"==typeof position||"object"==typeof position&&"0"in position)&&(myAt=position.split?position.split(" "):[position[0],position[1]],1===myAt.length&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" ")}),position=$.extend({},$.ui.dialog.prototype.options.position,position)):position=$.ui.dialog.prototype.options.position,isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.position(position),isVisible||this.uiDialog.hide()
},_setOptions:function(options){var that=this,resizableOptions={},resize=!1;$.each(options,function(key,value){that._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;switch(key){case"buttons":this._createButtons(value);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+value);
break;case"dialogClass":uiDialog.removeClass(this.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":value?uiDialog.addClass("ui-dialog-disabled"):uiDialog.removeClass("ui-dialog-disabled");break;case"draggable":isDraggable=uiDialog.is(":data(draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable();break;case"position":this._position(value);break;case"resizable":isResizable=uiDialog.is(":data(resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable(value);
break;case"title":$(".ui-dialog-title",this.uiDialogTitlebar).html(""+(value||"&#160;"))}this._super(key,value)},_size:function(){var nonContentHeight,minContentHeight,autoHeight,options=this.options,isVisible=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),"auto"===options.height?$.support.minHeight?this.element.css({minHeight:minContentHeight,height:"auto"}):(this.uiDialog.show(),autoHeight=this.element.css("height","auto").height(),isVisible||this.uiDialog.hide(),this.element.height(Math.max(autoHeight,minContentHeight))):this.element.height(Math.max(options.height-nonContentHeight,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())
}}),$.extend($.ui.dialog,{uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");return id||(this.uuid+=1,id=this.uuid),"ui-dialog-title-"+id},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog)}}),$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay"}).join(" "),create:function(dialog){0===this.instances.length&&(setTimeout(function(){$.ui.dialog.overlay.instances.length&&$(document).bind($.ui.dialog.overlay.events,function(event){return $(event.target).zIndex()<$.ui.dialog.overlay.maxZ?!1:void 0
})},1),$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize));var $el=this.oldInstances.pop()||$("<div>").addClass("ui-widget-overlay");return $(document).bind("keydown.dialog-overlay",function(event){var instances=$.ui.dialog.overlay.instances;0!==instances.length&&instances[instances.length-1]===$el&&dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(dialog.close(event),event.preventDefault())}),$el.appendTo(document.body).css({width:this.width(),height:this.height()}),$.fn.bgiframe&&$el.bgiframe(),this.instances.push($el),$el
},destroy:function($el){var indexOf=$.inArray($el,this.instances),maxZ=0;-1!==indexOf&&this.oldInstances.push(this.instances.splice(indexOf,1)[0]),0===this.instances.length&&$([document,window]).unbind(".dialog-overlay"),$el.height(0).width(0).remove(),$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"))}),this.maxZ=maxZ},height:function(){var scrollHeight,offsetHeight;return $.browser.msie?(scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),offsetHeight>scrollHeight?$(window).height()+"px":scrollHeight+"px"):$(document).height()+"px"
},width:function(){var scrollWidth,offsetWidth;return $.browser.msie?(scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),offsetWidth>scrollWidth?$(window).width()+"px":scrollWidth+"px"):$(document).width()+"px"},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this)}),$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()})
}}),$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el)}})}(jQuery)};exports(),module.resolveWith(exports)})};dispatch("ui/dialog").containing(moduleFactory).to("Foundry/2.1 Modules")}();