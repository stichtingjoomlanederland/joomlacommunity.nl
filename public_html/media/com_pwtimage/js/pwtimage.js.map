{"version":3,"sources":["pwtimage.js"],"names":["global","factory","exports","module","define","amd","globalThis","self","Cropper","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","n","toString","call","slice","name","test","len","arr2","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","viewMode","dragMode","initialAspectRatio","NaN","aspectRatio","data","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","ready","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNaN","Number","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","error","isFunction","toArray","callback","assign","_len","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","undefined","Math","round","REGEXP_SUFFIX","setStyle","element","styles","style","property","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","maxRatio","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getAdjustedSizes","_ref4","height","width","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","createElement","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","fromCharCode","String","getStringFromCharCode","dataView","start","str","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","DataView","orientation","littleEndian","app1Start","ifdStart","byteLength","offset","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_length","_offset","setUint16","parseOrientation","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","limited","limitCanvas","oldLeft","oldTop","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOrigin","crossOriginUrl","alt","src","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","querySelector","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","events","bind","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","buttons","button","pointerType","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","p","methods","reset","initialImageData","clear","hasSameSize","isImg","replaced","uncreate","load","enable","disable","destroy","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","rotateTo","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","sourceWidth","sourceHeight","srcX","srcY","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","setAspectRatio","mode","croppable","AnotherCropper","tagName","Error","reloading","sizing","init","toDataURL","clone","read","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","_this2","isIOSWebKit","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","noConflict","setDefaults","doc","MODAL_JS_CLASS","MODAL_ID_PREFIX","MODAL_CLASS_SUFFIX","MODAL_DATA_BACKGROUND_ATTR","MODAL_PREFIX_CLASS_ATTR","MODAL_TEXT_ATTR","MODAL_CONTENT_ID_ATTR","MODAL_DESCRIBEDBY_ID_ATTR","MODAL_TITLE_ATTR","MODAL_FOCUS_TO_ATTR","MODAL_CLOSE_TEXT_ATTR","MODAL_CLOSE_TITLE_ATTR","MODAL_CLOSE_IMG_ATTR","MODAL_ROLE","MODAL_BUTTON_CLASS_SUFFIX","MODAL_BUTTON_JS_ID","MODAL_BUTTON_JS_CLASS","MODAL_BUTTON_CONTENT_BACK_ID","MODAL_BUTTON_FOCUS_BACK_ID","MODAL_WRAPPER_CLASS_SUFFIX","MODAL_CONTENT_CLASS_SUFFIX","MODAL_CONTENT_JS_ID","MODAL_CLOSE_IMG_CLASS_SUFFIX","MODAL_CLOSE_TEXT_CLASS_SUFFIX","MODAL_TITLE_ID","MODAL_TITLE_CLASS_SUFFIX","FOCUSABLE_ELEMENTS_STRING","WRAPPER_PAGE_JS","MODAL_JS_ID","MODAL_OVERLAY_ID","MODAL_OVERLAY_CLASS_SUFFIX","MODAL_OVERLAY_TXT","MODAL_OVERLAY_BG_ENABLED_ATTR","VISUALLY_HIDDEN_CLASS","NO_SCROLL_CLASS","ATTR_ROLE","ATTR_OPEN","ATTR_LABELLEDBY","ATTR_DESCRIBEDBY","ATTR_HIDDEN","ATTR_HASPOPUP","ATTR_HASPOPUP_VALUE","findById","id","getElementById","RegExp","wrapInner","parent","wrapper","firstChild","searchParent","parentClass","found","parentElement","createOverlay","config","overlayText","text","overlayClass","prefixClass","overlayBackgroundEnabled","backgroundEnabled","createModal","modalClassName","modalPrefixClass","modalClassWrapper","buttonCloseClassName","buttonCloseInner","modalCloseImgPath","modalCloseText","contentClassName","titleClassName","title","modalTitle","button_close","modalCloseTitle","modalContentId","modalFocusBackId","content","modalText","describedById","modalDescribedById","contentFromId","closeModal","overlay","contentBackId","contentBack","modalContent","contentFocus","focus","$listModals","node","attach","addListeners","modal_node","iLisible","random","wrapperBody","eventName","e","parentModalLauncher","modalLauncher","hasAttribute","modalGiveFocusToId","insertAdjacentHTML","closeButton","focusTo","parentButton","modalButtonClose","fromId","$listFocusables","keyCode","onLoad","van11yAccessibleModalWindowAria","root","vanillaTabScroller","supports","eventTimeout","settings","defaults","scroller","tabs","tab","tabsButtonPrevClass","tabsButtonNextClass","tabsOverflowClass","tabsOverflowLeftClass","tabsOverflowRightClass","tabsScrollAmount","tabsAnimationSpeed","beforeSetWidth","afterSetWidth","collection","scope","prop","extend","extended","deep","merge","getClosest","selector","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","item","scrollTo","to","duration","currentTime","increment","animateScroll","val","easeInOutQuad","scrollLeft","t","b","c","d","setup","tabScroller","beforeButton","afterButton","scrollToTab","tabsCalculateScroll","localSettings","tabscroller","tabsWidth","scrollerWidth","clientWidth","calculateScroll","direction","scroll","positionLeft","offsetLeft","positionRight","parentPaddingLeft","parseInt","getComputedStyle","getPropertyValue","parentPaddingRight","scrollerOffset","clickHandler","metaKey","resizeThrottler","pwtImage","croppers","targetId","iFrameLink","wysiwyg","resultFile","altText","captionText","uploadImage","imageLimit","showImageDirect","rootPath","imagePrefix","imageSuffix","initialise","jQuery","on","trigger","initialiseDragnDrop","dragZone","stopPropagation","files","dataTransfer","createPreview","cleanUpAfterUpload","directToCanvas","addRepeatImage","modalId","addNewButton","imageField","imageBlock","first","currentId","children","selectButton","newOnClick","attr","append","prepareUpload","setTargetId","setIframeLink","link","setRootPath","setImagePrefix","prefix","setImageSuffix","suffix","setWysiwyg","setViewMode","getTargetId","saveImage","createNew","postUrl","keepOriginal","is","useOriginal","sourcePath","subPath","localfile","targetfile","backgroundColor","origin","FormData","Image","ajax","contentType","cache","processData","async","headers","Joomla","getOptions","success","friendlyMessage","findErrorMessage","renderMessage","message","warning","messages","imageCanvas","JText","_","console","log","responseText","replaceWith","substring","loadFolder","fulltab","next","exception","cancelImage","clearImage","imageToolbar","getParentId","method","option","ratios","openImage","hide","closest","folder","folders","folderItems","folderPath","structure","addToLocalStorage","each","index","folderItem","itemPath","itemFolders","pagination","pages","ceil","page","basePath","prepareImages","itemImages","paginationBar","selectFilter","status","statusText","loadSelectFolders","choicesFolder","clearChoices","setChoices","label","setChoiceByValue","showMoreImages","storedFiles","getFromLocalStorage","getImageElement","imageElement","imageUrl","pattern","addImageToCanvas","file","upload","ratioSplit","json","baseName","base","lastIndexOf","submit","click","setDestination","choicesDestination","getValue","imageInfo","isSelected","find","imageName","siblings","pathField","altInput","captionInput","show","uploadImagePreview","URL","webkitURL","imageUpload","onchange","checked","display","imageMaxSize","dimensionSizes","size","alert","createObjectURL","fileName","off","filesize","previewImage","cleanFile","selected","prev","path","filename","task","format","mime","search","storedFolders","filteredItems","filteredFolders","filterItems","filterFolders","links","pushFolders","elements","items","query","kb","toFixed","mb","payload","JSON","parse","localStorage","getItem","storedKey","setItem","stringify","local","messageContainer","renderMessages","setHotkeys","optionsStorage","PWTImageConfig","webpackUniversalModuleDefinition","modules","installedModules","__webpack_require__","moduleId","l","m","getter","r","toStringTag","__esModule","ns","create","getDefault","getModuleExports","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classNames","classes","argType","inner","isMergeableObject","isNonNullObject","isSpecial","stringValue","isReactElement","canUseSymbol","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","cloneUnlessOtherwiseSpecified","deepmerge","defaultArrayMerge","getMergeFunction","customMerge","getEnumerableOwnPropertySymbols","symbol","propertyIsEnumerable","getKeys","propertyIsUnsafe","unused","mergeObject","destination","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmergeAll","array","reduce","deepmerge_1","__webpack_exports__","_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__","result","matchmask","minMatchCharLength","matchedIndices","mask","charAt","_i","SPECIAL_CHARS_REGEX","tokenSeparator","regex","isMatch","matchesLen","score","_ref$errors","errors","_ref$currentLocation","currentLocation","_ref$expectedLocation","expectedLocation","_ref$distance","distance","accuracy","proximity","bitapScore","patternAlphabet","_ref$location","_ref$threshold","threshold","_ref$findAllMatches","findAllMatches","_ref$minMatchCharLeng","textLen","currentThreshold","bestLocation","patternLen","matchMask","_score","lastBitArr","finalScore","binMax","binMin","binMid","_score3","finish","bitArr","j","charMatch","_score2","bitapRegexSearch","bitapSearch","Bitap","_ref$maxPatternLength","maxPatternLength","_ref$isCaseSensitive","isCaseSensitive","_ref$tokenSeparator","_this$options","_this$options2","deepValue","list","dotIndex","firstSegment","remaining","Fuse","_ref$caseSensitive","caseSensitive","_ref$id","_ref$keys","_ref$shouldSort","shouldSort","_ref$getFn","getFn","_ref$sortFn","sortFn","a","_ref$tokenize","tokenize","_ref$matchAllTokens","matchAllTokens","_ref$includeMatches","includeMatches","_ref$includeScore","includeScore","_ref$verbose","verbose","setCollection","opts","limit","_log","_this$_prepareSearche","_prepareSearchers","tokenSearchers","fullSearcher","_this$_search","_search","weights","results","_computeScore","_sort","_format","tokens","resultMap","_analyze","record","keysLen","weight","_ref2$arrayIndex","arrayIndex","_ref3$tokenSearchers","_ref3$fullSearcher","_ref3$resultMap","_ref3$results","exists","averageScore","numTextMatches","mainSearchResult","words","scores","tokenSearcher","hasMatchInText","word","tokenSearchResult","scoresLen","_i2","checkTextMatches","existingResult","_i3","scoreLen","currScore","bestScore","nScore","sort","finalOutput","transformers","indices","_console","symbolObservablePonyfill","observable","delegateEvent","addedListenerTypes","Map","_callback","fn","has","splice","g","Function","originalModule","webpackPolyfill","dist_fuse","fuse_default","cjs","cjs_default","delegate_events","es","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","isSubscribed","unsubscribe","dispatch","replaceReducer","nextReducer","outerSubscribe","observer","observeState","getUndefinedStateErrorMessage","actionType","actionDescription","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","argumentName","unexpectedKeys","assertReducerShape","initialState","combineReducers","finalReducers","finalReducerKeys","shapeAssertionError","combination","state","warningMessage","hasChanged","nextState","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","compose","funcs","applyMiddleware","middlewares","store","_dispatch","middlewareAPI","chain","middleware","isCrushed","defaultState","items_items","newState","choiceId","groupId","active","highlighted","customProperties","placeholder","groups_defaultState","groups","choices_defaultState","choices_choices","elementId","activateOptions","choice","some","general_defaultState","loading","general","isLoading","reducers_general","utils_this","getRandomNumber","generateChars","chars","randomChar","generateId","getType","isType","isElement","utils_wrap","wrap","findAncestorByAttrName","getAdjacentEl","startEl","startPos","operatorDirection","isScrolledIntoView","isVisible","scrollTop","offsetTop","sanitise","strToEl","tmpEl","cleanedInput","firldChild","calcWidthOfInput","input","testEl","position","padding","whiteSpace","inputStyle","fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform","paddingLeft","paddingRight","requestAnimationFrame","sortByAlpha","labelA","labelB","sortByScore","customArgs","getWindowHeight","_document","scrollHeight","clientHeight","fetchFromObject","substr","isIE11","existsInArray","cloneObject","diff","aKeys","bKeys","appReducer","choices","reducers_rootReducer","rootReducer","passedState","store_Store","Store","_store","__REDUX_DEVTOOLS_EXTENSION__","_proto","onChange","getChoiceById","activeChoices","getGroupById","group","selectableChoices","reverse","isActive","hasActiveOptions","Dropdown","distanceFromTopWindow","dimensions","getChild","activeState","container_Container","Container","isOpen","isFlipped","isFocussed","isDisabled","_onFocus","_onBlur","addEventListeners","removeEventListeners","shouldFlip","dropdownPos","windowHeight","setActiveDescendant","activeDescendantID","removeActiveDescendant","openState","flippedState","close","addFocusState","focusState","removeFocusState","disabledState","unwrap","addLoadingState","loadingState","removeLoadingState","input_defineProperties","input_createClass","input_Input","Input","placeholderValue","activeElement","_onPaste","_onInput","form","_onFormReset","blur","setWidth","enforceWidth","_placeholderValue","valueHasDesiredLength","calcWidth","preventPaste","DEFAULT_CLASSNAMES","containerOuter","containerInner","inputCloned","listItems","listSingle","listDropdown","itemSelectable","itemDisabled","itemChoice","groupHeading","highlightedState","hiddenState","noResults","noChoices","DEFAULT_CONFIG","silent","renderChoiceLimit","maxItemCount","addItems","addItemFilterFn","removeItems","removeItemButton","editItems","duplicateItemsAllowed","delimiter","paste","searchEnabled","searchChoices","searchFloor","searchResultLimit","searchFields","resetScrollPosition","shouldSortItems","searchPlaceholderValue","prependValue","appendValue","renderSelectedChoices","loadingText","noResultsText","noChoicesText","itemSelectText","uniqueItemText","customAddItemText","addItemText","maxItemText","itemComparer","fuseOptions","callbackOnInit","callbackOnCreateTemplates","EVENTS","showDropdown","hideDropdown","addItem","removeItem","highlightItem","highlightChoice","ACTION_TYPES","ADD_CHOICE","FILTER_CHOICES","ACTIVATE_CHOICES","CLEAR_CHOICES","ADD_GROUP","ADD_ITEM","REMOVE_ITEM","HIGHLIGHT_ITEM","CLEAR_ALL","KEY_CODES","BACK_KEY","DELETE_KEY","ENTER_KEY","A_KEY","ESC_KEY","UP_KEY","DOWN_KEY","PAGE_UP_KEY","PAGE_DOWN_KEY","SCROLLING_SPEED","list_List","List","scrollPos","hasChildren","scrollToTop","scrollToChoice","dropdownHeight","choiceHeight","choicePos","containerScrollPos","endpoint","time","_animateScroll","_scrollDown","strength","easing","_scrollUp","choiceListScrollTop","continueAnimation","wrapped_element_defineProperties","wrapped_element_createClass","wrapped_element_WrappedElement","WrappedElement","conceal","tabIndex","origStyle","reveal","triggerEvent","eventType","wrapped_input_defineProperties","wrapped_input_createClass","_inheritsLoose","subClass","superClass","__proto__","WrappedInput","_WrappedElement","itemValues","joinedValues","wrapped_select_defineProperties","wrapped_select_createClass","wrapped_select_inheritsLoose","WrappedSelect","appendDocFragment","fragment","createDocumentFragment","addOptionToFragment","optionData","classnames","classnames_default","TEMPLATES","globalClasses","isSelectElement","isSelectOneElement","passedElementType","role","ariaAutoComplete","itemList","_classNames","localClasses","_classNames2","ariaSelected","ariaDisabled","_classNames3","choiceList","ariaMultiSelectable","choiceGroup","_classNames4","_classNames5","dropdown","notice","_classNames6","templates","choices_addChoice","addChoice","choices_filterChoices","filterChoices","choices_activateChoices","activateChoices","choices_clearChoices","items_addItem","items_removeItem","items_highlightItem","groups_addGroup","addGroup","clearAll","resetTo","setIsLoading","choices_Choices","Choices","userConfig","_generateInstances","userDefaults","destinationArray","sourceArray","invalidConfigOptions","warn","includes","passedElement","_isTextElement","_isSelectOneElement","_isSelectMultipleElement","_isSelectElement","initialised","_initialState","_currentState","_prevState","_currentValue","_canSearch","_isScrollingOnIe","_highlightPosition","_wasTap","_generatePlaceholderValue","_baseId","_direction","_idNames","_presetChoices","_presetItems","_render","_onKeyUp","_onKeyDown","_onClick","_onTouchMove","_onTouchEnd","_onMouseDown","_onMouseOver","_onAKey","_onEnterKey","_onEscapeKey","_onDirectionKey","_onDeleteKey","_createTemplates","_createElements","_createStructure","_addEventListeners","shouldDisable","_removeEventListeners","clearStore","runEvent","_item$groupId","_item$value","_item$label","groupValue","unhighlightItem","_item$groupId2","_item$value2","_item$label2","highlightAll","unhighlightAll","_this3","removeActiveItemsByValue","_this4","activeItems","_removeItem","removeActiveItems","excludedId","_this5","removeHighlightedItems","_this6","highlightedActiveItems","_triggerChange","preventInputFocus","_this7","preventInputBlur","_this8","valueOnly","selectedItems","itemValue","setValue","_this9","_setChoiceOrItem","_this10","choiceValue","_findAndSelectChoiceByValue","replaceChoices","_this11","addGroupsAndChoices","groupOrChoice","_addGroup","valueKey","labelKey","_addChoice","_setLoading","clearInput","shouldSetInputWidth","_isSearching","_this12","_handleLoadingState","_ajaxCallback","stateChanged","shouldRenderChoices","shouldRenderItems","_renderChoices","_renderItems","_this13","_this$_store","activeGroups","choiceListFragment","activePlaceholders","activeChoice","_createChoicesFragment","_createGroupsFragment","childNodes","canAddItem","_canAddItem","_highlightChoice","_getTemplate","dropdownItem","itemListFragment","_createItemsFragment","_this14","groupFragment","getGroupChoices","groupChoices","dropdownGroup","withinGroup","_this15","choicesFragment","_this$config","appendChoice","shouldRender","rendererableChoices","_rendererableChoices$","acc","placeholderChoices","normalChoices","choiceLimit","sortedChoices","_this16","_this$config2","addItemToFragment","listItem","_selectPlaceholderChoice","placeholderChoice","_addItem","_handleButtonAction","itemId","itemToRemove","_handleItemAction","hasShiftKey","_this17","passedId","_handleChoiceAction","passedKeyCode","hasActiveDropdown","_handleBackspace","lastItem","hasHighlightedItems","setLoading","placeholderItem","_handleSearch","_this$config3","hasUnactiveChoices","resultCount","_searchChoices","isDuplicateValue","_this18","parsedResults","newValue","currentValue","haystack","searchableChoices","needle","fuse","_keyDownActions","hasFocusedInput","hasItems","keyString","hasCtrlDownKeyPressed","keyDownActions","backKey","deleteKey","canShowDropdownNotice","outerHTML","userHasRemovedValue","canReactivateChoices","canSearch","shouldHightlightAll","enterKey","targetWasButton","highlightedChoice","downKey","pageUpKey","pageDownKey","directionInt","skipKey","selectableChoiceIdentifier","nextEl","pop","currentEl","touches","touchWasWithinContainer","containerWasExactTarget","buttonTarget","itemTarget","choiceTarget","_ref9","targetWithinDropdown","shouldHighlightChoice","_ref10","clickWasWithinContainer","_ref11","_this19","focusWasWithinContainer","focusActions","selectOne","selectMultiple","_ref12","_this20","blurWasWithinContainer","blurActions","_this21","passedEl","highlightedChoices","_ref13","_ref13$label","_ref13$choiceId","_ref13$groupId","_ref13$customProperti","_ref13$placeholder","_ref13$keyCode","passedValue","passedCustomProperties","passedLabel","passedOptionId","_ref14","_ref14$label","_ref14$isSelected","_ref14$isDisabled","_ref14$groupId","_ref14$customProperti","_ref14$placeholder","_ref14$keyCode","choiceLabel","choiceElementId","_ref15","_this22","_ref15$valueKey","_ref15$labelKey","valueOf","addGroupChoices","isOptDisabled","_templates$template","_this$config4","userTemplates","_addPredefinedChoices","_addPredefinedItems","_this23","passedGroups","optionGroups","placeholderOption","passedOptions","allChoices","hasSelectedChoice","handleChoice","shouldPreselect","_this24","handlePresetItem","itemType","_this25","handleType","string","_this26","foundChoice","instances","scripts_choices"],"mappings":"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","sourcesContent":["/*!\n * Cropper.js v1.5.9\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2020-09-10T13:16:26.743Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n}(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90\n\n      case 8:\n        rotate = -90;\n        break;\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var ratio = container.offsetWidth / containerData.width; // Resize when width changed or height changed\n\n      if (ratio !== 1 || container.offsetHeight !== containerData.height) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"https://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        xhr.open('GET', url);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n})));\n\n/*\n * ES2015 accessible modal window system, using ARIA\n * Website: https://van11y.net/accessible-modal/\n * License MIT: https://github.com/nico3333fr/van11y-accessible-modal-aria/blob/master/LICENSE\n */\n'use strict';\n\n(function (doc) {\n\n  'use strict';\n\n  var MODAL_JS_CLASS = 'js-modal';\n  var MODAL_ID_PREFIX = 'label_modal_';\n  var MODAL_CLASS_SUFFIX = 'modal';\n  var MODAL_DATA_BACKGROUND_ATTR = 'data-modal-background-click';\n  var MODAL_PREFIX_CLASS_ATTR = 'data-modal-prefix-class';\n  var MODAL_TEXT_ATTR = 'data-modal-text';\n  var MODAL_CONTENT_ID_ATTR = 'data-modal-content-id';\n  var MODAL_DESCRIBEDBY_ID_ATTR = 'data-modal-describedby-id';\n  var MODAL_TITLE_ATTR = 'data-modal-title';\n  var MODAL_FOCUS_TO_ATTR = 'data-modal-focus-toid';\n  var MODAL_CLOSE_TEXT_ATTR = 'data-modal-close-text';\n  var MODAL_CLOSE_TITLE_ATTR = 'data-modal-close-title';\n  var MODAL_CLOSE_IMG_ATTR = 'data-modal-close-img';\n  var MODAL_ROLE = 'dialog';\n\n  var MODAL_BUTTON_CLASS_SUFFIX = 'modal-close';\n  var MODAL_BUTTON_JS_ID = 'js-modal-close';\n  var MODAL_BUTTON_JS_CLASS = 'js-modal-close';\n  var MODAL_BUTTON_CONTENT_BACK_ID = 'data-content-back-id';\n  var MODAL_BUTTON_FOCUS_BACK_ID = 'data-focus-back';\n\n  var MODAL_WRAPPER_CLASS_SUFFIX = 'modal__wrapper';\n  var MODAL_CONTENT_CLASS_SUFFIX = 'modal__content';\n  var MODAL_CONTENT_JS_ID = 'js-modal-content';\n\n  var MODAL_CLOSE_IMG_CLASS_SUFFIX = 'modal__closeimg';\n  var MODAL_CLOSE_TEXT_CLASS_SUFFIX = 'modal-close__text';\n\n  var MODAL_TITLE_ID = 'modal-title';\n  var MODAL_TITLE_CLASS_SUFFIX = 'modal-title';\n\n  var FOCUSABLE_ELEMENTS_STRING = \"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]\";\n  var WRAPPER_PAGE_JS = 'js-modal-page';\n\n  var MODAL_JS_ID = 'js-modal';\n\n  var MODAL_OVERLAY_ID = 'js-modal-overlay';\n  var MODAL_OVERLAY_CLASS_SUFFIX = 'modal-overlay';\n  var MODAL_OVERLAY_TXT = 'Close modal';\n  var MODAL_OVERLAY_BG_ENABLED_ATTR = 'data-background-click';\n\n  var VISUALLY_HIDDEN_CLASS = 'invisible';\n  var NO_SCROLL_CLASS = 'no-scroll';\n\n  var ATTR_ROLE = 'role';\n  var ATTR_OPEN = 'open';\n  var ATTR_LABELLEDBY = 'aria-labelledby';\n  var ATTR_DESCRIBEDBY = 'aria-describedby';\n  var ATTR_HIDDEN = 'aria-hidden';\n  //const ATTR_MODAL = 'aria-modal=\"true\"';\n  var ATTR_HASPOPUP = 'aria-haspopup';\n  var ATTR_HASPOPUP_VALUE = 'dialog';\n\n  var findById = function findById(id) {\n    return doc.getElementById(id);\n  };\n\n  var addClass = function addClass(el, className) {\n    if (el.classList) {\n      el.classList.add(className); // IE 10+\n    } else {\n        el.className += ' ' + className; // IE 8+\n      }\n  };\n\n  var removeClass = function removeClass(el, className) {\n    if (el.classList) {\n      el.classList.remove(className); // IE 10+\n    } else {\n        el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' '); // IE 8+\n      }\n  };\n\n  var hasClass = function hasClass(el, className) {\n    if (el.classList) {\n      return el.classList.contains(className); // IE 10+\n    } else {\n        return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className); // IE 8+ ?\n      }\n  };\n  /*const wrapInner = (el, wrapper_el) => { // doesn't work on IE/Edge, f\n      while (el.firstChild)\n          wrapper_el.append(el.firstChild);\n      el.append(wrapper_el);\n   }*/\n  function wrapInner(parent, wrapper) {\n    if (typeof wrapper === \"string\") wrapper = document.createElement(wrapper);\n\n    parent.appendChild(wrapper);\n\n    while (parent.firstChild !== wrapper) wrapper.appendChild(parent.firstChild);\n  }\n\n  function remove(el) {\n    /* node.remove() is too modern for IE11 */\n    el.parentNode.removeChild(el);\n  }\n\n  /* gets an element el, search if it is child of parent class, returns id of the parent */\n  var searchParent = function searchParent(el, parentClass) {\n    var found = false;\n    var parentElement = el.parentNode;\n    while (parentElement && found === false) {\n      if (hasClass(parentElement, parentClass) === true) {\n        found = true;\n      } else {\n        parentElement = parentElement.parentNode;\n      }\n    }\n    if (found === true) {\n      return parentElement.getAttribute('id');\n    } else {\n      return '';\n    }\n  };\n\n  /**\n   * Create the template for an overlay\n   * @param  {Object} config\n   * @return {String}\n   */\n  var createOverlay = function createOverlay(config) {\n\n    var id = MODAL_OVERLAY_ID;\n    var overlayText = config.text || MODAL_OVERLAY_TXT;\n    var overlayClass = config.prefixClass + MODAL_OVERLAY_CLASS_SUFFIX;\n    var overlayBackgroundEnabled = config.backgroundEnabled === 'disabled' ? 'disabled' : 'enabled';\n\n    return '<span\\n                    id=\"' + id + '\"\\n                    class=\"' + overlayClass + '\"\\n                    ' + MODAL_OVERLAY_BG_ENABLED_ATTR + '=\"' + overlayBackgroundEnabled + '\"\\n                    title=\"' + overlayText + '\"\\n                    >\\n                    <span class=\"' + VISUALLY_HIDDEN_CLASS + '\">' + overlayText + '</span>\\n                  </span>';\n  };\n\n  /**\n   * Create the template for a modal\n   * @param  {Object} config\n   * @return {String}\n   */\n  var createModal = function createModal(config) {\n\n    var id = MODAL_JS_ID;\n    var modalClassName = config.modalPrefixClass + MODAL_CLASS_SUFFIX;\n    var modalClassWrapper = config.modalPrefixClass + MODAL_WRAPPER_CLASS_SUFFIX;\n    var buttonCloseClassName = config.modalPrefixClass + MODAL_BUTTON_CLASS_SUFFIX;\n    var buttonCloseInner = config.modalCloseImgPath ? '<img src=\"' + config.modalCloseImgPath + '\" alt=\"' + config.modalCloseText + '\" class=\"' + config.modalPrefixClass + MODAL_CLOSE_IMG_CLASS_SUFFIX + '\" />' : '<span class=\"' + config.modalPrefixClass + MODAL_CLOSE_TEXT_CLASS_SUFFIX + '\">\\n                                          ' + config.modalCloseText + '\\n                                         </span>';\n    var contentClassName = config.modalPrefixClass + MODAL_CONTENT_CLASS_SUFFIX;\n    var titleClassName = config.modalPrefixClass + MODAL_TITLE_CLASS_SUFFIX;\n    var title = config.modalTitle !== '' ? '<h1 id=\"' + MODAL_TITLE_ID + '\" class=\"' + titleClassName + '\">\\n                                          ' + config.modalTitle + '\\n                                         </h1>' : '';\n    var button_close = '<button type=\"button\" class=\"' + MODAL_BUTTON_JS_CLASS + ' ' + buttonCloseClassName + '\" id=\"' + MODAL_BUTTON_JS_ID + '\" title=\"' + config.modalCloseTitle + '\" ' + MODAL_BUTTON_CONTENT_BACK_ID + '=\"' + config.modalContentId + '\" ' + MODAL_BUTTON_FOCUS_BACK_ID + '=\"' + config.modalFocusBackId + '\">\\n                               ' + buttonCloseInner + '\\n                              </button>';\n    var content = config.modalText;\n    var describedById = config.modalDescribedById !== '' ? ATTR_DESCRIBEDBY + '=\"' + config.modalDescribedById + '\"' : '';\n\n    // If there is no content but an id we try to fetch content id\n    if (content === '' && config.modalContentId) {\n      var contentFromId = findById(config.modalContentId);\n      if (contentFromId) {\n        content = '<div id=\"' + MODAL_CONTENT_JS_ID + '\">\\n                              ' + contentFromId.innerHTML + '\\n                             </div';\n        // we remove content from its source to avoid id duplicates, etc.\n        contentFromId.innerHTML = '';\n      }\n    }\n\n    return '<dialog id=\"' + id + '\" class=\"' + modalClassName + '\" ' + ATTR_ROLE + '=\"' + MODAL_ROLE + '\" ' + describedById + ' ' + ATTR_OPEN + ' ' + ATTR_LABELLEDBY + '=\"' + MODAL_TITLE_ID + '\">\\n                    <div role=\"document\" class=\"' + modalClassWrapper + '\">\\n                      ' + button_close + '\\n                      <div class=\"' + contentClassName + '\">\\n                        ' + title + '\\n                        ' + content + '\\n                      </div>\\n                    </div>\\n                  </dialog>';\n  };\n\n  var closeModal = function closeModal(config) {\n\n    remove(config.modal);\n    remove(config.overlay);\n\n    if (config.contentBackId !== '') {\n      var contentBack = findById(config.contentBackId);\n      if (contentBack) {\n        contentBack.innerHTML = config.modalContent;\n      }\n    }\n\n    if (config.modalFocusBackId) {\n      var contentFocus = findById(config.modalFocusBackId);\n      if (contentFocus) {\n        contentFocus.focus();\n      }\n    }\n  };\n\n  /** Find all modals inside a container\n   * @param  {Node} node Default document\n   * @return {Array}\n   */\n  var $listModals = function $listModals() {\n    var node = arguments.length <= 0 || arguments[0] === undefined ? doc : arguments[0];\n    return [].slice.call(node.querySelectorAll('.' + MODAL_JS_CLASS));\n  };\n\n  /**\n   * Build modals for a container\n   * @param  {Node} node\n   */\n  var attach = function attach(node) {\n    var addListeners = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n    $listModals(node).forEach(function (modal_node) {\n\n      var iLisible = Math.random().toString(32).slice(2, 12);\n      var wrapperBody = findById(WRAPPER_PAGE_JS);\n      var body = doc.querySelector('body');\n\n      modal_node.setAttribute('id', MODAL_ID_PREFIX + iLisible);\n      modal_node.setAttribute(ATTR_HASPOPUP, ATTR_HASPOPUP_VALUE);\n\n      if (wrapperBody === null || wrapperBody.length === 0) {\n        var wrapper = doc.createElement('DIV');\n        wrapper.setAttribute('id', WRAPPER_PAGE_JS);\n        wrapInner(body, wrapper);\n      }\n    });\n\n    if (addListeners) {\n\n      /* listeners */\n      ['click', 'keydown'].forEach(function (eventName) {\n\n        doc.body.addEventListener(eventName, function (e) {\n\n          // click on link modal\n          var parentModalLauncher = searchParent(e.target, MODAL_JS_CLASS);\n          if ((hasClass(e.target, MODAL_JS_CLASS) === true || parentModalLauncher !== '') && eventName === 'click') {\n            var body = doc.querySelector('body');\n            var modalLauncher = parentModalLauncher !== '' ? findById(parentModalLauncher) : e.target;\n            var modalPrefixClass = modalLauncher.hasAttribute(MODAL_PREFIX_CLASS_ATTR) === true ? modalLauncher.getAttribute(MODAL_PREFIX_CLASS_ATTR) + '-' : '';\n            var modalText = modalLauncher.hasAttribute(MODAL_TEXT_ATTR) === true ? modalLauncher.getAttribute(MODAL_TEXT_ATTR) : '';\n            var modalContentId = modalLauncher.hasAttribute(MODAL_CONTENT_ID_ATTR) === true ? modalLauncher.getAttribute(MODAL_CONTENT_ID_ATTR) : '';\n            var modalDescribedById = modalLauncher.hasAttribute(MODAL_DESCRIBEDBY_ID_ATTR) === true ? modalLauncher.getAttribute(MODAL_DESCRIBEDBY_ID_ATTR) : '';\n            var modalTitle = modalLauncher.hasAttribute(MODAL_TITLE_ATTR) === true ? modalLauncher.getAttribute(MODAL_TITLE_ATTR) : '';\n            var modalCloseText = modalLauncher.hasAttribute(MODAL_CLOSE_TEXT_ATTR) === true ? modalLauncher.getAttribute(MODAL_CLOSE_TEXT_ATTR) : MODAL_OVERLAY_TXT;\n            var modalCloseTitle = modalLauncher.hasAttribute(MODAL_CLOSE_TITLE_ATTR) === true ? modalLauncher.getAttribute(MODAL_CLOSE_TITLE_ATTR) : modalCloseText;\n            var modalCloseImgPath = modalLauncher.hasAttribute(MODAL_CLOSE_IMG_ATTR) === true ? modalLauncher.getAttribute(MODAL_CLOSE_IMG_ATTR) : '';\n            var backgroundEnabled = modalLauncher.hasAttribute(MODAL_DATA_BACKGROUND_ATTR) === true ? modalLauncher.getAttribute(MODAL_DATA_BACKGROUND_ATTR) : '';\n            var modalGiveFocusToId = modalLauncher.hasAttribute(MODAL_FOCUS_TO_ATTR) === true ? modalLauncher.getAttribute(MODAL_FOCUS_TO_ATTR) : '';\n\n            var wrapperBody = findById(WRAPPER_PAGE_JS);\n\n            // insert overlay\n            body.insertAdjacentHTML('beforeEnd', createOverlay({\n              text: modalCloseTitle,\n              backgroundEnabled: backgroundEnabled,\n              prefixClass: modalPrefixClass\n            }));\n\n            // insert modal\n            body.insertAdjacentHTML('beforeEnd', createModal({\n              modalText: modalText,\n              modalPrefixClass: modalPrefixClass,\n              backgroundEnabled: modalContentId,\n              modalTitle: modalTitle,\n              modalCloseText: modalCloseText,\n              modalCloseTitle: modalCloseTitle,\n              modalCloseImgPath: modalCloseImgPath,\n              modalContentId: modalContentId,\n              modalDescribedById: modalDescribedById,\n              modalFocusBackId: modalLauncher.getAttribute('id')\n            }));\n\n            // hide page\n            wrapperBody.setAttribute(ATTR_HIDDEN, 'true');\n\n            // add class noscroll to body\n            addClass(body, NO_SCROLL_CLASS);\n\n            // give focus to close button or specified element\n            var closeButton = findById(MODAL_BUTTON_JS_ID);\n            if (modalGiveFocusToId !== '') {\n              var focusTo = findById(modalGiveFocusToId);\n              if (focusTo) {\n                focusTo.focus();\n              } else {\n                closeButton.focus();\n              }\n            } else {\n              closeButton.focus();\n            }\n\n            e.preventDefault();\n          }\n\n          // click on close button or on overlay not blocked\n          var parentButton = searchParent(e.target, MODAL_BUTTON_JS_CLASS);\n          if ((e.target.getAttribute('id') === MODAL_BUTTON_JS_ID || parentButton !== '' || e.target.getAttribute('id') === MODAL_OVERLAY_ID || hasClass(e.target, MODAL_BUTTON_JS_CLASS) === true) && eventName === 'click') {\n            var body = doc.querySelector('body');\n            var wrapperBody = findById(WRAPPER_PAGE_JS);\n            var modal = findById(MODAL_JS_ID);\n            var modalContent = findById(MODAL_CONTENT_JS_ID) ? findById(MODAL_CONTENT_JS_ID).innerHTML : '';\n            var overlay = findById(MODAL_OVERLAY_ID);\n            var modalButtonClose = findById(MODAL_BUTTON_JS_ID);\n            var modalFocusBackId = modalButtonClose.getAttribute(MODAL_BUTTON_FOCUS_BACK_ID);\n            var contentBackId = modalButtonClose.getAttribute(MODAL_BUTTON_CONTENT_BACK_ID);\n            var backgroundEnabled = overlay.getAttribute(MODAL_OVERLAY_BG_ENABLED_ATTR);\n\n            if (!(e.target.getAttribute('id') === MODAL_OVERLAY_ID && backgroundEnabled === 'disabled')) {\n\n              closeModal({\n                modal: modal,\n                modalContent: modalContent,\n                overlay: overlay,\n                modalFocusBackId: modalFocusBackId,\n                contentBackId: contentBackId,\n                backgroundEnabled: backgroundEnabled,\n                fromId: e.target.getAttribute('id')\n              });\n\n              // show back page\n              wrapperBody.removeAttribute(ATTR_HIDDEN);\n\n              // remove class noscroll to body\n              removeClass(body, NO_SCROLL_CLASS);\n            }\n          }\n\n          // strike a key when modal opened\n          if (findById(MODAL_JS_ID) && eventName === 'keydown') {\n            var body = doc.querySelector('body');\n            var wrapperBody = findById(WRAPPER_PAGE_JS);\n            var modal = findById(MODAL_JS_ID);\n            var modalContent = findById(MODAL_CONTENT_JS_ID) ? findById(MODAL_CONTENT_JS_ID).innerHTML : '';\n            var overlay = findById(MODAL_OVERLAY_ID);\n            var modalButtonClose = findById(MODAL_BUTTON_JS_ID);\n            var modalFocusBackId = modalButtonClose.getAttribute(MODAL_BUTTON_FOCUS_BACK_ID);\n            var contentBackId = modalButtonClose.getAttribute(MODAL_BUTTON_CONTENT_BACK_ID);\n            var $listFocusables = [].slice.call(modal.querySelectorAll(FOCUSABLE_ELEMENTS_STRING));\n\n            // esc\n            if (e.keyCode === 27) {\n\n              closeModal({\n                modal: modal,\n                modalContent: modalContent,\n                overlay: overlay,\n                modalFocusBackId: modalFocusBackId,\n                contentBackId: contentBackId\n              });\n\n              // show back page\n              wrapperBody.removeAttribute(ATTR_HIDDEN);\n\n              // remove class noscroll to body\n              removeClass(body, NO_SCROLL_CLASS);\n            }\n\n            // tab or Maj Tab in modal => capture focus\n            if (e.keyCode === 9 && $listFocusables.indexOf(e.target) >= 0) {\n\n              // maj-tab on first element focusable => focus on last\n              if (e.shiftKey) {\n                if (e.target === $listFocusables[0]) {\n                  $listFocusables[$listFocusables.length - 1].focus();\n                  e.preventDefault();\n                }\n              } else {\n                // tab on last element focusable => focus on first\n                if (e.target === $listFocusables[$listFocusables.length - 1]) {\n                  $listFocusables[0].focus();\n                  e.preventDefault();\n                }\n              }\n            }\n\n            // tab outside modal => put it in focus\n            if (e.keyCode === 9 && $listFocusables.indexOf(e.target) === -1) {\n              e.preventDefault();\n              $listFocusables[0].focus();\n            }\n          }\n        }, true);\n      });\n    }\n  };\n\n  var onLoad = function onLoad() {\n    attach();\n    document.removeEventListener('DOMContentLoaded', onLoad);\n  };\n\n  document.addEventListener('DOMContentLoaded', onLoad);\n\n  window.van11yAccessibleModalWindowAria = attach;\n})(document);\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory(root));\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.vanillaTabScroller = factory(root);\n  }\n}(typeof global !== 'undefined' ? global : this.window || this.global, (root) => {\n  //\n  // Variables\n  //\n\n  const vanillaTabScroller = {}; // Object for public APIs\n  const supports = 'querySelector' in document && 'addEventListener' in root; // Feature test\n  let eventTimeout; let settings;\n\n  // Default settings\n  const defaults = {\n    scroller: '[data-tabs-scroller]',\n    wrapper: '[data-tabs-wrapper]',\n    tabs: '[data-tabs]',\n    tab: '[data-tab]',\n    tabsButtonPrevClass: 'pwt-tabs-scroller-prev',\n    tabsButtonNextClass: 'pwt-tabs-scroller-next',\n    tabsOverflowClass: 'has-tabs-overflow',\n    tabsOverflowLeftClass: 'has-tabs-left-overflow',\n    tabsOverflowRightClass: 'has-tabs-right-overflow',\n    tabsScrollAmount: 0.8,\n    tabsAnimationSpeed: 400,\n\n    // Callbacks\n    beforeSetWidth() {},\n    afterSetWidth() {}\n  };\n\n\n  //\n  // Methods\n  //\n\n  /**\n     * A simple forEach() implementation for Arrays, Objects and NodeLists.\n     * @private\n     * @author Todd Motto\n     * @link   https://github.com/toddmotto/foreach\n     * @param {Array|Object|NodeList} collection Collection of items to iterate\n     * @param {Function}              callback   Callback function for each iteration\n     * @param {Array|Object|NodeList} scope      Object/NodeList/Array that forEach is iterating over (aka `this`)\n     */\n  const forEach = function (collection, callback, scope) {\n    if (Object.prototype.toString.call(collection) === '[object Object]') {\n      for (const prop in collection) {\n        if (Object.prototype.hasOwnProperty.call(collection, prop)) {\n          callback.call(scope, collection[prop], prop, collection);\n        }\n      }\n    } else {\n      for (let i = collection.length - 1; i >= 0; i--) {\n        callback.call(scope, collection[i], i, collection);\n      }\n    }\n  };\n\n  /**\n     * Merge defaults with user options\n     * @private\n     * @param {Object} defaults Default settings\n     * @param {Object} options User options\n     * @returns {Object} Merged values of defaults and options\n     */\n  var extend = function () {\n    // Variables\n    const extended = {};\n    let deep = false;\n    let i = 0;\n    const length = arguments.length;\n\n    // Check if a deep merge\n    if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n      deep = arguments[0];\n      i++;\n    }\n\n    // Merge the object into the extended object\n    const merge = function (obj) {\n      for (const prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n          // If deep merge and property is an object, merge properties\n          if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n            extended[prop] = extend(true, extended[prop], obj[prop]);\n          } else {\n            extended[prop] = obj[prop];\n          }\n        }\n      }\n    };\n\n    // Loop through each object and conduct a merge\n    for (; i < length; i++) {\n      const obj = arguments[i];\n      merge(obj);\n    }\n\n    return extended;\n  };\n\n  /**\n     * Get the closest matching element up the DOM tree.\n     * @private\n     * @param  {Element} elem     Starting element\n     * @param  {String}  selector Selector to match against\n     * @return {Boolean|Element}  Returns null if not match found\n     */\n  const getClosest = function (elem, selector) {\n    // Element.matches() polyfill\n    if (!Element.prototype.matches) {\n      Element.prototype.matches =\n                Element.prototype.matchesSelector ||\n                Element.prototype.mozMatchesSelector ||\n                Element.prototype.msMatchesSelector ||\n                Element.prototype.oMatchesSelector ||\n                Element.prototype.webkitMatchesSelector ||\n                function (s) {\n                  const matches = (this.document || this.ownerDocument).querySelectorAll(s);\n                  let i = matches.length;\n                  while (--i >= 0 && matches.item(i) !== this) {}\n                  return i > -1;\n                };\n    }\n\n    // Get closest match\n    for (; elem && elem !== document; elem = elem.parentNode) {\n      if (elem.matches(selector)) {\n        return elem;\n      }\n    }\n\n    return null;\n  };\n\n  /**\n     * Scroll animation\n     * @private\n     * @param {Object} defaults Default settings\n     * @param {Object} options User options\n     * @returns {Object} Merged values of defaults and options\n     */\n\n  function scrollTo(element, from, to, duration) {\n    const start = from;\n    const change = to - start;\n    let currentTime = 0;\n    const increment = 20;\n\n    var animateScroll = function () {\n      currentTime += increment;\n      const val = Math.easeInOutQuad(currentTime, start, change, duration);\n      element.scrollLeft = val;\n      if (currentTime < duration) {\n        setTimeout(animateScroll, increment);\n      }\n    };\n    animateScroll();\n  }\n\n  // t = current time\n  // b = start value\n  // c = change in value\n  // d = duration\n  Math.easeInOutQuad = function (t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t + b;\n    }\n    t--;\n    return -c / 2 * (t * (t - 2) - 1) + b;\n  };\n\n\n  /**\n     * Setup and active\n     * @private\n     */\n\n  const setup = function () {\n    // Find gallery and return if not found\n    const tabScroller = document.querySelectorAll(settings.scroller);\n    if (!tabScroller) {\n      return;\n    }\n\n    forEach(tabScroller, (value) => {\n      // Prev button\n      const beforeButton = document.createElement('button');\n      beforeButton.setAttribute('type', 'button');\n      beforeButton.innerHTML = 'prev';\n      beforeButton.classList.add(settings.tabsButtonPrevClass);\n      value.parentNode.insertBefore(beforeButton, value.parentNode.firstChild);\n\n      // Next button\n      const afterButton = document.createElement('button');\n      afterButton.setAttribute('type', 'button');\n      afterButton.innerHTML = 'next';\n      afterButton.classList.add(settings.tabsButtonNextClass);\n      value.parentNode.appendChild(afterButton);\n\n      // scroll to current tab\n      setTimeout(() => {\n        vanillaTabScroller.scrollToTab(value.querySelector('.is-active'), value);\n      }, settings.tabsAnimationSpeed);\n\n      // Run on scrolling the tab container\n      value.addEventListener('scroll', () => {\n        if (!eventTimeout) {\n          eventTimeout = setTimeout(() => {\n            eventTimeout = null; // Reset timeout\n            vanillaTabScroller.tabsCalculateScroll();\n          }, 200);\n        }\n      });\n\n      // Find gallery and return if not found\n      const tabs = value.querySelectorAll(settings.tab);\n      if (!tabs) {\n        return;\n      }\n\n      forEach(tabs, (elem) => {\n        elem.addEventListener('click', () => {\n          vanillaTabScroller.scrollToTab(elem, value);\n        });\n      });\n    });\n\n    vanillaTabScroller.tabsCalculateScroll();\n  };\n\n\n  // Calculate wether there is a scrollable area and apply classes accordingly\n  vanillaTabScroller.tabsCalculateScroll = function (options) {\n    // Merge user options with existing settings or defaults\n    const localSettings = extend(settings || defaults, options || {});\n\n    // Find gallery and return if not found\n    const scroller = document.querySelectorAll(localSettings.scroller);\n    if (!scroller) {\n      return;\n    }\n\n    forEach(scroller, (value) => {\n      // Variables\n      const tabscroller = value;\n      const tabsWidth = tabscroller.querySelector(settings.tabs).offsetWidth;\n      const scrollerWidth = tabscroller.clientWidth;\n      const scrollLeft = tabscroller.scrollLeft;\n      const wrapper = tabscroller.parentNode;\n\n      // Show / hide buttons\n      if (tabsWidth > scrollerWidth) {\n        wrapper.classList.add(settings.tabsOverflowClass);\n      } else {\n        wrapper.classList.remove(settings.tabsOverflowClass);\n      }\n\n      // \"Activate\" left button\n      if (tabsWidth > scrollerWidth && scrollLeft > 0) {\n        wrapper.classList.add(settings.tabsOverflowLeftClass);\n      }\n\n      // \"Activate\" right button\n      if (tabsWidth > scrollerWidth) {\n        wrapper.classList.add(settings.tabsOverflowRightClass);\n      }\n\n      // \"Deactivate\" left button\n      if (tabsWidth <= scrollerWidth || scrollLeft <= 0) {\n        wrapper.classList.remove(settings.tabsOverflowLeftClass);\n      }\n\n      // \"Deactivate\" right button\n      if (tabsWidth <= scrollerWidth || scrollLeft >= tabsWidth - scrollerWidth) {\n        wrapper.classList.remove(settings.tabsOverflowRightClass);\n      }\n    });\n  };\n\n\n  // Calculate the amount of scrolling to do\n  vanillaTabScroller.calculateScroll =  function (wrapper, direction) {\n    // Variables\n    const tabsWidth = wrapper.querySelector(settings.tabs).offsetWidth;\n    const scrollerWidth = wrapper.querySelector(settings.scroller).clientWidth;\n    const scrollLeft = wrapper.querySelector(settings.scroller).scrollLeft;\n    let scroll;\n\n    // Left button (scroll to right)\n    if (direction == 'prev') {\n      scroll = scrollLeft - scrollerWidth * settings.tabsScrollAmount;\n      if (scroll < 0) {\n        scroll = 0;\n      }\n    }\n\n    // Right button (scroll to left)\n    if (direction == 'next') {\n      scroll = scrollLeft + scrollerWidth * settings.tabsScrollAmount;\n      if (scroll > tabsWidth - scrollerWidth) {\n        scroll = tabsWidth - scrollerWidth;\n      }\n    }\n\n    // Animate the scroll\n    scrollTo(wrapper.querySelector(settings.scroller), scrollLeft, scroll, settings.tabsAnimationSpeed);\n  };\n\n\n  // Scroll active tab into screen\n  vanillaTabScroller.scrollToTab = function (element, scroller) {\n    if (!element) {\n      return;\n    }\n\n    const positionLeft = element.offsetLeft;\n    const positionRight = positionLeft + element.offsetWidth;\n\n    const parentPaddingLeft = parseInt(window.getComputedStyle(scroller.parentNode, null).getPropertyValue('padding-left'), 10);\n    const parentPaddingRight = parseInt(window.getComputedStyle(scroller.parentNode, null).getPropertyValue('padding-right'), 10);\n\n    const scrollerOffset = scroller.scrollLeft;\n    const scrollerWidth = scroller.clientWidth;\n    let scroll;\n\n\n    // When item falls of on the right side\n    if (positionRight > scrollerOffset + scrollerWidth) {\n      scroll = scrollerOffset + (positionRight - (scrollerWidth + scrollerOffset) + parentPaddingRight);\n    }\n\n    // When item falls of on the left side\n    if (positionLeft < scrollerOffset) {\n      scroll = scrollerOffset - (scrollerOffset - positionLeft + parentPaddingLeft);\n    }\n\n    if (!scroll) {\n      return;\n    }\n\n    // Animate the scroll\n    scrollTo(scroller, scrollerOffset, scroll, settings.tabsAnimationSpeed);\n  };\n\n\n  /**\n     * Handle toggle click events\n     * @private\n     */\n  const clickHandler = function (event) {\n    // Don't run if right-click or command/control + click\n    if (event.button !== 0 || event.metaKey || event.ctrlKey) {\n      return;\n    }\n\n    // Check if event target is a tab toggle\n    const wrapper = getClosest(event.target, settings.wrapper);\n    if (!wrapper) {\n      return;\n    }\n\n    if (event.target.className == settings.tabsButtonPrevClass) {\n      vanillaTabScroller.calculateScroll(wrapper, 'prev');\n    }\n    if (event.target.className == settings.tabsButtonNextClass) {\n      vanillaTabScroller.calculateScroll(wrapper, 'next');\n    }\n  };\n\n\n  /**\n     * On window scroll and resize, only run events at a rate of 15fps for better performance\n     * @private\n     * @param  {Function} eventTimeout Timeout function\n     * @param  {Object} settings\n     */\n  const resizeThrottler = function () {\n    if (!eventTimeout) {\n      eventTimeout = setTimeout(() => {\n        eventTimeout = null; // Reset timeout\n\n        vanillaTabScroller.tabsCalculateScroll();\n      }, 200);\n    }\n  };\n\n\n  /**\n     * Destroy the current initialization.\n     * @public\n     */\n  vanillaTabScroller.destroy = function () {\n    // If plugin isn't already initialized, stop\n    if (!settings) {\n      return;\n    }\n\n    // Remove event listeners\n    document.removeEventListener('click', clickHandler, false);\n    root.removeEventListener('resize', resizeThrottler, false);\n\n    // Reset variables\n    settings = null;\n  };\n\n\n  /**\n     * Initialize vanillaTabScroller\n     * @public\n     * @param {Object} options User settings\n     */\n  vanillaTabScroller.init = function (options) {\n    // feature test\n    if (!supports) {\n      return;\n    }\n\n    // Destroy any existing initializations\n    vanillaTabScroller.destroy();\n\n    // Merge user options with defaults\n    settings = extend(defaults, options || {});\n\n    // Listen\n    document.addEventListener('click', clickHandler, false);\n    root.addEventListener('resize', resizeThrottler, false);\n\n    // Run on default\n    setup();\n  };\n\n\n  //\n  // Public APIs\n  //\n\n  return vanillaTabScroller;\n}));\n\nconst pwtImage = (function () {\n    const pwtImage = {};\n    const croppers = [];\n    let targetId = '';\n    let iFrameLink = '';\n    let wysiwyg = false;\n    let resultFile = '';\n    let altText = '';\n    let captionText = '';\n    let uploadImage = '';\n    const imageLimit = 100;\n    let showImageDirect = 0;\n    let rootPath = '';\n    let imagePrefix = '';\n    let imageSuffix = '';\n    let viewMode = 1;\n\n    /**\n     * Initialise PWT Image\n     */\n    pwtImage.initialise = function () {\n        jQuery('.js-edit-image-button').on('click', () => {\n            jQuery('.js-image-cropper').removeClass('is-hidden');\n            jQuery('.js-image-preview').addClass('is-hidden');\n        });\n\n        jQuery('.js-select-existing').on('click', () => {\n            jQuery('[href=#select]').trigger('click');\n        });\n\n        jQuery('.js-upload-new').on('click', () => {\n            jQuery('[href=#upload]').trigger('click');\n        });\n    };\n\n    /**\n     * Initialise the drag and drop area\n     */\n    pwtImage.initialiseDragnDrop = function () {\n        const dragZone = jQuery('#js-dragarea');\n\n        dragZone.on('dragenter', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            dragZone.addClass('hover');\n\n            return false;\n        });\n\n        // Notify user when file is over the drop area\n        dragZone.on('dragover', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            dragZone.addClass('hover');\n\n            return false;\n        });\n\n        dragZone.on('dragleave', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            dragZone.removeClass('hover');\n\n            return false;\n        });\n\n        dragZone.on('drop', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            dragZone.removeClass('hover');\n\n            const files = e.originalEvent.target.files || e.originalEvent.dataTransfer.files;\n\n            if (!files.length) {\n                return;\n            }\n\n            const element = '.pwt-content';\n\n            // Store the file into the form\n            pwtImage.createPreview(element, files);\n\n            // Clean up after the upload\n            pwtImage.cleanUpAfterUpload(element);\n\n            if (showImageDirect) {\n                pwtImage.directToCanvas(element);\n            }\n        });\n    };\n\n    /**\n     * Creates another image selector instance.\n     * @param element The Add another image button\n     */\n    pwtImage.addRepeatImage = function (element) {\n        // Get a new unique ID\n        const modalId = new Date().getTime();\n\n        // Change the ID on the another image button\n        const addNewButton = jQuery(element).clone();\n        addNewButton.prop('id', `addmore${modalId}`);\n\n        // Duplicate the controls\n        const imageField = jQuery(element).parent();\n\n        // Duplicate the first image block\n        const imageBlock = imageField.first().clone();\n\n        // Get the current ID value\n        const currentId = imageBlock.children(':first').prop('id').split('_')[0];\n\n        // Replace all IDs with a new ID\n        imageBlock.prop('id', modalId);\n\n        // Set the required IDs on the Select button\n        const selectButton = imageBlock.children('[id^=label_modal_]');\n        selectButton.prop('id', `label_modal_${modalId}`);\n        let newOnClick = selectButton.attr('onclick').replace(`setTargetId('${currentId}`, `setTargetId('${modalId}`);\n        newOnClick = newOnClick.replace(`modalId=${currentId}`, `modalId=${modalId}`);\n        selectButton.attr('onclick', newOnClick);\n\n        // Set the other required IDs\n        imageBlock.children(`#${currentId}_preview`).prop('id', `${modalId}_preview`).html('');\n        imageBlock.children(`#${currentId}_value`).prop('id', `${modalId}_value`);\n        imageBlock.children(`#${currentId}_clear`).prop('id', `${modalId}_clear`)\n            .addClass('hidden').prop('onclick', `pwtImage.clearImage('${modalId}');`);\n        imageBlock.children(`#addmore${currentId}`).prop('id', `addmore${modalId}`);\n\n        // Add the new image to the DOM\n        imageField.first().parent().append(imageBlock);\n    };\n\n    /**\n     * Prepare everything to allow a new image upload\n     * @param id\n     */\n    pwtImage.prepareUpload = function (id) {\n        jQuery(`#${id} button.js-button-save-new`).prop('disabled', true);\n        jQuery(`#${id} .pwt-image-localfile`).val('');\n        jQuery(`#${id} .pwt-image-targetfile`).val('');\n        jQuery(`#${id} .pwt-message`).removeClass('is-visible');\n    };\n\n    /**\n     * Set the ID of the image controls to use\n     *\n     * @param id The unique ID of the image controls to use.\n     */\n    pwtImage.setTargetId = function (id) {\n        targetId = id;\n    };\n\n    /**\n     * Set the iFrame link to empty out the iFrame\n     */\n    pwtImage.setIframeLink = function (link) {\n        iFrameLink = link;\n    };\n\n    /**\n     * Set the root path of the installation\n     */\n    pwtImage.setRootPath = function (root) {\n        rootPath = root;\n    };\n\n    /**\n     * Set the prefix of an image\n     */\n    pwtImage.setImagePrefix = function (prefix) {\n        imagePrefix = prefix;\n    };\n\n    /**\n     * Set the suffix of an image\n     */\n    pwtImage.setImageSuffix = function (suffix) {\n        imageSuffix = suffix;\n    };\n\n    /**\n     * Set if we are called from a WYSIWYG editor\n     */\n    pwtImage.setWysiwyg = function (value) {\n        wysiwyg = value;\n    };\n\n    /**\n     * Set if we are called from a WYSIWYG editor\n     */\n    pwtImage.setViewMode = function (value) {\n        viewMode = value;\n    };\n\n    /**\n     * Set if the image should be opened in the canvas instead of preview mode\n     */\n    pwtImage.showImageDirect = function (value) {\n        showImageDirect = value;\n    };\n\n    /**\n     * Return the ID of the image controls to use\n     */\n    pwtImage.getTargetId = function () {\n        return targetId;\n    };\n\n    /**\n     * Store the image on the server.\n     *\n     * @param id\n     * @param createNew\n     */\n    pwtImage.saveImage = function (id, createNew) {\n        let cropper = false;\n\n        // Check if we have an existing cropper\n        if (croppers[id] !== undefined) {\n            cropper = croppers[id];\n        }\n\n        if (createNew === 'undefined') {\n            createNew = false;\n        }\n\n        const postUrl = jQuery('#post-url').val();\n        let image = jQuery(`#${id}_upload`)[0].files[0];\n        const crop = jQuery(`#${id} .js-pwt-image-data`).val();\n        let width = jQuery(`#${id} .js-pwt-image-width`).val();\n        const ratio = jQuery(`#${id} .js-pwt-image-ratio`).val();\n        const keepOriginal = jQuery(`#${id} .js-pwt-image-keepOriginal`).is(':checked');\n        const useOriginal = jQuery(`#${id} .js-pwt-image-useOriginal`).is(':checked');\n        let sourcePath = jQuery(`#${id} .js-pwt-image-sourcePath`).val();\n        let subPath = jQuery(`#${id} .js-pwt-image-subPath`).val();\n        const localfile = jQuery(`#${id} .js-pwt-image-localfile`).val();\n        const targetfile = jQuery(`#${id} .js-pwt-image-targetfile`).val();\n        const backgroundColor = jQuery(`#${id} .js-pwt-image-backgroundColor`).val();\n        const origin = jQuery(`#${id} .js-pwt-image-origin`).val();\n        const data = new FormData();\n\n        // Check if an actual file has been uploaded\n        if (uploadImage && image === undefined) {\n            image = uploadImage[0];\n        }\n\n        // Check if an alt text has been set by the image selector, if not we take the one from the edit tab\n        if (altText === '') {\n            altText = jQuery(`#${id} #alt`).val();\n        }\n\n        // Check if a caption text has been set by the image selector, if not we take the one from the edit tab\n        if (captionText === '') {\n            captionText = jQuery(`#${id} #caption`).val();\n        }\n\n        // Get the store folder\n        switch (jQuery(`#${id}_destinationFolder`).val()) {\n            case 'select':\n                subPath = jQuery(`#${id}_selectedFolderOptions`).val();\n                break;\n        }\n\n        // Check if we have a width from the field definition, if not we take the width from the cropped area\n        if (Number(width) === 0) {\n            if (cropper) {\n                width = cropper.getCropBoxData().width;\n            } else {\n                const img = new Image();\n\n                img.onload = function () {\n                    width = this.width;\n                };\n\n                img.src = localfile;\n            }\n        }\n\n        // Add the form data\n        data.append('option', 'com_pwtimage');\n        data.append('task', 'image.processImage');\n        data.append('format', 'json');\n        data.append('pwt-image-localFile', localfile);\n        data.append('pwt-image-targetFile', targetfile);\n        data.append('alt', altText);\n        data.append('caption', captionText);\n        data.append('pwt-image-data', crop);\n        data.append('pwt-image-width', width);\n        data.append('pwt-image-ratio', ratio);\n        data.append('pwt-image-keepOriginal', keepOriginal);\n        data.append('pwt-image-useOriginal', useOriginal);\n        data.append('pwt-image-sourcePath', sourcePath);\n        data.append('pwt-image-subPath', subPath);\n        data.append('pwt-image-backgroundColor', backgroundColor);\n        data.append('pwt-image-origin', origin);\n        data.append('image', image);\n\n        // Find the target ID\n        const targetId = pwtImage.getTargetId();\n\n        // Try to upload and process the image\n        try {\n            jQuery.ajax({\n                type: 'POST',\n                data,\n                contentType: false,\n                url: postUrl,\n                cache: false,\n                processData: false,\n                async: false,\n                headers: {\n                    'X-CSRF-TOKEN': Joomla.getOptions('csrf.token')\n                },\n                success(response) {\n                    if (response instanceof Object === false) {\n                        // Check if we have a know error message\n                        let friendlyMessage = findErrorMessage(response);\n\n                        if (friendlyMessage.length === 0) {\n                            friendlyMessage = response;\n                        }\n\n                        renderMessage({\n                            error: [friendlyMessage]\n                        }, true);\n\n                        throw false;\n                    }\n\n                    if (response.message) {\n                        renderMessage({\n                            warning: [response.message]\n                        });\n                    }\n\n                    if (response.messages) {\n                        renderMessage(response.messages);\n                    }\n\n                    // Check if there are multiple images returned, if so, take the first one\n                    resultFile = response.data;\n\n                    if (!wysiwyg) {\n                        resultFile = resultFile.split(',');\n\n                        if (resultFile.length > 0) {\n                            resultFile = resultFile[0];\n                        }\n\n                        var value = window.parent.jQuery(`#${targetId}_preview+input`);\n\n                        if (value.length === 0) {\n                            value = window.parent.jQuery(`#${targetId}_value`)\n                        }\n\n                        value.val(resultFile).trigger('change');\n\n                        window.parent.jQuery(`#${targetId}_preview`).html(`<img src=\"${rootPath}${resultFile}\" />`);\n                        window.parent.jQuery(`#${targetId}_clear`).removeClass('hidden');\n                    }\n\n                    if (createNew) {\n                        jQuery(`#${id} .pwt-message`).addClass('is-visible');\n                        jQuery(`#${id} span.has_folder`).html(response.data);\n                    }\n\n                    // All done, self-destruction is imminent if we don't want to create a new image\n                    if (cropper) {\n                        cropper.destroy();\n                    }\n\n                    const imageCanvas = document.getElementById(`${id}_js-pwtimage-image`);\n\n                    imageCanvas.removeAttribute('src');\n\n                    if (!createNew) {\n                        pwtImage.closeModal();\n                    }\n                },\n                error(response) {\n                    renderMessage({\n                        error: [Joomla.JText._('COM_PWTIMAGE_SAVE_FAILED', 'There was a problem to save the file')]\n                    });\n                    console.log(`Image upload failed: ${response.responseText}`);\n\n                    throw false;\n                }\n            });\n\n            // Switch back to upload tab if user wants to create another image\n            if (createNew) {\n                // Clear variables\n                altText = '';\n                captionText = '';\n                resultFile = '';\n                jQuery(`#${id} .js-pwt-image-localfile`).val('');\n                jQuery(`#${id}_upload`).replaceWith(jQuery(`#${id}_upload`).val('').clone(true));\n\n                // Clean up the crop data\n                jQuery(`#${id} .js-pwt-image-data`).val('');\n\n                // Reload the images\n                if (subPath.length === 0) {\n                    sourcePath = jQuery(`#${id} .js-sourcePath`).text();\n                    subPath = sourcePath.substring(0, sourcePath.length - 1);\n                }\n\n                pwtImage.loadFolder(`#${id}`, subPath, 'select');\n\n                // Reset the Edit page\n                const fulltab = jQuery('.pwt-fulltab-message');\n                fulltab.removeClass('is-hidden');\n                fulltab.next().addClass('is-hidden');\n\n                jQuery('[href=\"#select\"]').trigger('click');\n            }\n        } catch (exception) {\n            return false;\n        }\n\n        pwtImage.cancelImage(id);\n\n        return true;\n    };\n\n    /**\n     * Clears the current image and preview.\n     * @param id  The ID of the image\n     */\n    pwtImage.clearImage = function (id) {\n        jQuery(`#${id}_value`).val('');\n        jQuery(`#${id}_preview img`).prop('src', '');\n        jQuery(`#${id}_clear`).addClass('hidden');\n        jQuery(`#${id}_js-pwtimage-image`).prop('src', '');\n    };\n\n    /**\n     * Control the toolbar actions\n     *\n     * @param element  The element that has been clicked.\n     */\n    pwtImage.imageToolbar = function (element) {\n        const id = getParentId(element);\n        const data = jQuery(element).data();\n\n        // Check if the button is active\n        if (jQuery(this).prop('disabled') || jQuery(this).hasClass('disabled')) {\n            return;\n        }\n\n        // Check if we have a valid cropper\n        if (croppers[id] === undefined) {\n            return;\n        }\n\n        // Instantiate the cropper\n        const cropper = croppers[id];\n\n        // Set some values if needed\n        switch (data.method) {\n            case 'scaleX':\n            case 'scaleY':\n                cropper[data.method](data.option);\n                jQuery(element).data('option', data.option === 1 ? -1 : 1);\n                break;\n            case 'rotate':\n            case 'zoom':\n                cropper[data.method](data.option);\n                break;\n            case 'ratio':\n                var ratio = data.option;\n\n                if (typeof ratio === 'string' && ratio.indexOf('/') > 0) {\n                    const ratios = data.option.split('/');\n                    ratio = ratios[0] / ratios[1];\n                }\n                cropper.setAspectRatio(ratio);\n                jQuery(`#${id} .js-pwt-image-ratio`).val(data.option);\n                break;\n        }\n    };\n\n    /**\n     * Open the server image selection page\n     *\n     * @param element  The element that has been clicked.\n     */\n    pwtImage.openImage = function (element) {\n        // Get the parent ID\n        const id = getParentId(element);\n\n        jQuery(`#${id} .js-pwt-image-toolbar`).hide();\n        jQuery(`#${id} .js-cropper-container`).hide();\n        jQuery('form.js-image-form > div.pull-right').hide();\n    };\n\n    /**\n     * Get the parent ID of a given element\n     *\n     * @param element\n     * @returns string|boolean\n     *\n     * @todo Check with multiple blocks\n     */\n    function getParentId(element) {\n        const identifier = jQuery(element).closest('.js-pwtimage-id').prop('id');\n\n        if (identifier === undefined) {\n            console.log('Cannot find parent ID for element');\n            console.log(element);\n\n            return false;\n        }\n\n        return identifier;\n    }\n\n    /**\n     * Load subfolders for a selected folder\n     *\n     * @param element\n     * @param folder\n     * @param target\n     * @returns {boolean}\n     */\n    pwtImage.loadFolder = function (element, folder, target) {\n        const id = getParentId(element);\n        const data = new FormData();\n        const postUrl = jQuery('#post-url').val();\n\n        jQuery('#' + id + ' #selectFilter').val('');\n\n        // Add the form data\n        data.append('option', 'com_pwtimage');\n        data.append('task', 'image.loadFolder');\n        data.append('format', 'json');\n        data.append('folder', folder);\n\n        // Load the subfolders of given folder\n        jQuery.ajax({\n            type: 'POST',\n            data,\n            url: postUrl,\n            contentType: false,\n            cache: false,\n            processData: false,\n            headers: {\n                'X-CSRF-TOKEN': Joomla.getOptions('csrf.token')\n            },\n            success(response) {\n                try {\n                    if (response.message) {\n                        console.log(`Failed to load subfolders from folder ${folder}. Message: ${response.message}`);\n                        renderMessage({\n                            warning: [response.message]\n                        });\n\n                        return false;\n                    }\n\n                    if (response.messages) {\n                        renderMessage(response.messages);\n\n                        return false;\n                    }\n\n                    if (response.data === undefined) {\n                        return false;\n                    }\n                } catch (e) {\n                    console.log(e.message);\n                }\n\n                let link = [];\n\n                if (response.data.folders) {\n                    let folderItems;\n                    const folderPath = [];\n                    let structure = '';\n\n                    if (folder.indexOf('/') > 0 || folder.length > 1) {\n                        folderItems = folder.split('/');\n                    }\n\n                    // Store folders to localStorage\n                    addToLocalStorage(id, 'folders', response.data.folders);\n\n                    // Construct the breadcrumb path\n                    jQuery(folderItems).each((index, folderItem) => {\n                        structure += folderItem;\n\n\t                    if (structure.length > 1) {\n\t\t                    folderPath[index + 1] = '';\n\n\t\t                    if (index > 1) {\n\t\t\t                    folderPath[index + 1] = `<span class=\\\"format-slash\\\">/</span>`;\n\t\t                    }\n\n\t\t                    folderPath[index + 1] += `<a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '/${structure}', '${target}'); return false;\"><span class=\"icon-folder-2\"></span>${folderItem}</a>`;\n\t\t                    structure += '/';\n\t                    }\n                    });\n\n                    jQuery(`#${target} .js-breadcrumb`).html(folderPath.join(' '));\n\n                    // Collect all folders to show\n                    jQuery(response.data.folders).each((index, item) => {\n                        let itemPath = item;\n\n                        if (folder !== '/') {\n                            itemPath = `${folder}/${item}`;\n                        }\n\n                        link.push(`<div class=\"pwt-gallery__item\"><a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '${itemPath}', '${target}'); return false;\">` +\n                            '<div class=\"pwt-gallery__item__content\">' +\n                            '<span class=\"pwt-gallery__item__icon icon-folder-2\"></span>' +\n                            `<span class=\"pwt-gallery__item__title\">${item}</span>` +\n                            '</div>' +\n                            '</a></div>');\n                    });\n\n                    // Add the folders\n                    const itemFolders = jQuery(`#${id} #${target} .pwt-gallery__items--folders`);\n                    itemFolders.html('');\n\n                    if (link.length) {\n                        itemFolders.html(link.join(' '));\n                    }\n                }\n\n                // Add the files\n                const pagination = [];\n\n                if (response.data.files) {\n                    // Setup pagination\n                    const pages = Math.ceil(response.data.files.length / imageLimit);\n\n                    for (let page = 1; page <= pages; page++) {\n                        pagination.push(`<a onclick=\"pwtImage.showMoreImages('.pwt-gallery__items--images', ${page}, '${target}');\">${page}</a>`);\n                    }\n\n                    // Store the data in localStorage\n                    addToLocalStorage(id, 'files', response.data.files);\n                    addToLocalStorage(id, 'basePath', response.data.basePath);\n\n                    // Get the list of images to display\n                    const files = response.data.files.slice(0, imageLimit);\n\n                    // Prepare the images for display\n                    link = prepareImages(files, folder, target);\n\n                    // Add the files\n                    const itemImages = jQuery(`#${id} #${target} .pwt-gallery__items--images`);\n                    itemImages.html('');\n\n                    if (link.length) {\n                        itemImages.html(link.join(' '));\n                    }\n\n                    // Add the pagination\n                    const paginationBar = jQuery(`#${id} #${target} .pwt-pagination`);\n                    paginationBar.html('');\n\n                    if (pagination.length) {\n                        paginationBar.html(`<div class=\"pwt-pagination__pages\">${pagination.join(' ')}</div>`);\n                    }\n                }\n\n                // Filter the page\n                pwtImage.selectFilter(jQuery('#selectFilter').val());\n            },\n            error(response) {\n                console.log(`Failed to load folder: ${response.responseText}`);\n                console.log(`Response code: ${response.status} ${response.statusText}`);\n            }\n        });\n\n        return false;\n    };\n\n    /**\n     * Load the folders for the select picker\n     *\n     * @param folder\n     * @returns {boolean}\n     */\n    pwtImage.loadSelectFolders = function (folder) {\n        const data = new FormData();\n        const postUrl = jQuery('#post-url').val();\n\n        // Add the form data\n        data.append('option', 'com_pwtimage');\n        data.append('task', 'image.loadSelectFolders');\n        data.append('format', 'json');\n        data.append('sourcePath', folder);\n\n        // Load the folders\n        jQuery.ajax({\n            type: 'POST',\n            data,\n            url: postUrl,\n            contentType: false,\n            cache: false,\n            processData: false,\n            headers: {\n                'X-CSRF-TOKEN': Joomla.getOptions('csrf.token')\n            },\n            success(response) {\n                // Empty the list\n                choicesFolder.clearChoices();\n\n                // Add the folders\n                response.data[0].forEach((item) => {\n                    choicesFolder.setChoices([{\n                        value: item,\n                        label: item\n                    }], 'value', 'label', false);\n                });\n\n                // Set the default value\n                choicesFolder.setChoiceByValue('/');\n            },\n            error(response) {\n                console.log(`Failed to load folder: ${response.responseText}`);\n                console.log(`Response code: ${response.status} ${response.statusText}`);\n            }\n        });\n\n        return false;\n    };\n\n    /**\n     * Pagination class\n     *\n     * @param element\n     * @param page\n     * @param target\n     */\n    pwtImage.showMoreImages = function (element, page, target) {\n        const id = getParentId(element);\n        const storedFiles = getFromLocalStorage(id, 'files');\n        const basePath = getFromLocalStorage(id, 'basePath');\n        const start = page === 1 ? 0 : (page - 1) * imageLimit;\n        const end = page * imageLimit;\n        const files = storedFiles.slice(start, end);\n\n        // Prepare the images for display\n        const link = prepareImages(files, basePath, target);\n\n        // Add the files\n        const itemImages = jQuery(`#${id} #${target} .pwt-gallery__items--images`);\n        itemImages.html('');\n\n        if (link.length) {\n            itemImages.html(link.join(' '));\n        }\n\n        // Filter the page\n        pwtImage.selectFilter(jQuery('#selectFilter').val(), page);\n    };\n\n    /**\n     * Prepare a list of images for display\n     */\n    function prepareImages(files, folder, target) {\n        const link = [];\n\n        // Clean up the folder as the rootPath ends with a slash and the folder starts with a slash\n        if (folder.substring(0, 1) === '/') {\n            folder = `${folder.substring(1)}/`;\n        }\n\n        jQuery(files).each((index, item) => {\n            const itemPath = rootPath + folder + item;\n\n            link.push(getImageElement(item, itemPath, target));\n        });\n\n        return link;\n    }\n\n    /**\n     * Construct an image element\n     */\n    function getImageElement(item, itemPath, target) {\n        let imageElement = '';\n        let imageUrl = itemPath;\n\n        if (imagePrefix !== '') {\n            imageUrl = imagePrefix + imageUrl.replace(rootPath, '') + imageSuffix;\n        }\n\n        switch (target) {\n            case 'select':\n                imageElement = `${'<div class=\"pwt-gallery__item\">' +\n                    '<a onclick=\"return pwtImage.previewImage(\\'.pwt-gallery__items--images\\', \\''}${itemPath}');\" ` +\n                    `title=\"${item}\">` +\n                    '<div class=\"pwt-gallery__item__image\">' +\n                    '<div class=\"pwt-gallery__item__center\">' +\n                    `<img src=\"${imageUrl}\" alt=\"${item}\" />` +\n                    '</div>' +\n                    `<div class=\"pwt-gallery__item__imagename\">${\n                        item\n                    }</div>` +\n                    '</div>' +\n                    '</a>' +\n                    '</div>';\n                break;\n        }\n\n        return imageElement;\n    }\n\n    /**\n     * Find a known error message\n     *\n     * @param response  The response message to analyze\n     *\n     * @returns {string}\n     */\n    function findErrorMessage(response) {\n        // 'Fatal error: Allowed memory size';\n        const pattern = 'Allowed memory size';\n\n        if (response.indexOf(pattern) !== -1) {\n            return Joomla.JText._('COM_PWTIMAGE_ERROR_ALLOWED_MEMORY_SIZE');\n        }\n\n        return '';\n    }\n\n    /**\n     * This adds a file on the server to the canvas for cropping\n     *\n     * @param element  The page element to find the ID for.\n     * @param file     The selected image on the server\n     * @param image\n     * @param upload\n     *\n     * @returns {boolean}\n     */\n    pwtImage.addImageToCanvas = function (element, file, image, upload) {\n        const id = getParentId(element);\n\n        if (upload === undefined || upload === null) {\n            upload = false;\n        }\n\n        // Remove any existing cropper boxes\n        jQuery(`#${id} div.pwt-body div.cropper-container > div.cropper-container`).remove();\n\n        // Get the ratio\n        const ratio = jQuery(`#${id} .js-pwt-image-ratio`).val();\n        const ratioSplit = ratio.split('/');\n\n        // Get the image field\n        if (!upload) {\n            image = document.getElementById(`${id}_js-pwtimage-image`);\n        }\n\n        // Instantiate the cropper\n        var cropper = new Cropper(image, {\n            aspectRatio: ratioSplit[0] / ratioSplit[1],\n            viewMode,\n            crop(e) {\n                const json = [\n                    `{\"x\":${e.detail.x}`,\n                    `\"y\":${e.detail.y}`,\n                    `\"height\":${e.detail.height}`,\n                    `\"width\":${e.detail.width}`,\n                    `\"rotate\":${e.detail.rotate}`,\n                    `\"scaleX\":${e.detail.scaleX}`,\n                    `\"scaleY\":${e.detail.scaleY}}`\n                ].join();\n\n                jQuery(`#${id} .js-pwt-image-data`).val(json);\n            },\n            ready() {\n                const imageData = cropper.getImageData();\n                cropper.setCropBoxData(\n                    {\n                        top: 0,\n                        width: imageData.width\n                    }\n                );\n            }\n        });\n\n        // Add the cropper to the list of croppers\n        if (upload) {\n            croppers[id] = cropper;\n            cropper.init();\n\n            // Set the image value in the form\n            window.parent.jQuery(`#${id}_value`).prop('value', file.name).trigger('change');\n        } else {\n            // Replace the image\n            cropper.replace(file);\n            croppers[id] = cropper;\n        }\n\n        // Hide the message\n        jQuery(`#${id} .pwt-fulltab-message`).addClass('is-hidden');\n\n        // Enable the Save & new button\n        jQuery(`#${id} button.js-button-save-new`).prop('disabled', false);\n\n        jQuery(`#${id} .js-image-info`).removeClass('is-hidden');\n\n        // Make the edit tab visible\n        jQuery('[href=\"#edit\"]').trigger('click');\n        jQuery(`#${id} .js-button-image`).removeClass('hidden');\n\n        return false;\n    };\n\n    /**\n     * Get the basename of a filename with path\n     *\n     * @param str\n     * @returns {string}\n     */\n    function baseName(str) {\n        let base = str.substring(str.lastIndexOf('/') + 1);\n\n        if (base.lastIndexOf('.') !== -1) {\n            base = base.substring(0, base.lastIndexOf('.'));\n        }\n\n        return base;\n    }\n\n    /**\n     * Close the modal window\n     */\n    pwtImage.closeModal = function () {\n        if (wysiwyg) {\n            if (resultFile) {\n                jQuery('form.js-image-form #formPath').val(resultFile);\n            }\n\n            if (altText) {\n                jQuery('form.js-image-form #alt').val(altText);\n            }\n\n            if (captionText) {\n                jQuery('form.js-image-form #caption').val(captionText);\n            }\n\n            jQuery('form.js-image-form #layout').val('close');\n            jQuery('form.js-image-form').submit();\n        } else {\n            window.parent.jQuery(`iframe#pwtImageFrame-${targetId}`).prop('src', iFrameLink);\n            window.parent.jQuery('#js-modal-close').click();\n        }\n    };\n\n    /**\n     * Show the applicable destination option\n     */\n    pwtImage.setDestination = function (element) {\n        const id = getParentId(element);\n\n        if (choicesDestination !== undefined) {\n            switch (choicesDestination.getValue().value) {\n                case 'default':\n                    jQuery(`#${id}_enterFolder`).addClass('is-visible').removeClass('is-hidden');\n                    jQuery(`#${id}_subPath`).prop('disabled', true);\n                    jQuery(`#${id}_selectFolder`).addClass('is-hidden').removeClass('is-visible');\n                    break;\n                case 'select':\n                    jQuery(`#${id}_enterFolder`).addClass('is-hidden').removeClass('is-visible');\n                    jQuery(`#${id}_selectFolder`).addClass('is-visible').removeClass('is-hidden');\n                    jQuery(`#${id}_selectFolder`).trigger('change');\n                    break;\n                case 'custom':\n                    jQuery(`#${id}_enterFolder`).addClass('is-visible').removeClass('is-hidden');\n                    jQuery(`#${id}_subPath`).prop('disabled', false);\n                    jQuery(`#${id}_selectFolder`).addClass('is-hidden').removeClass('is-visible');\n                    break;\n            }\n        }\n    };\n\n    /**\n     * Shows the alt and caption input fields for a selected gallery image\n     *\n     * @param element\n     */\n    pwtImage.imageInfo = function (element) {\n        // Check if we should act on the click, only act in the sortable result div\n        if (jQuery(element).closest('#js-sortable-result').length === 0) {\n            return;\n        }\n\n        // Check if we are selected\n        const isSelected = jQuery(element).parent().find('a').hasClass('is-selected');\n\n        // Remove all selected borders\n        jQuery('#js-sortable-result').find('a.is-selected').removeClass('is-selected');\n\n        // Hide any existing inputs\n        jQuery('#gallery-image-info .js-image-info').hide();\n\n        // If we were selected, don't select it again\n        if (isSelected) {\n            // Show the Alt and Caption box\n            jQuery('#gallery-image-info').hide();\n\n            return;\n        }\n\n        // Add border to selected image\n        jQuery(element).parent().find('a').addClass('is-selected');\n\n        // Get the unique image name\n        if (element.type === 'button') {\n            var imageName = jQuery(element).siblings().find('img').prop('src').replace(/[\\/\\.]/g, '_');\n        } else {\n            var imageName = jQuery(element).find('img').prop('src').replace(/[\\/\\.]/g, '_');\n        }\n\n        // Check if an input exists\n        if (jQuery(`#gallery-image-info input[name=\"input_${imageName}_alt\"]`).length === 0) {\n            // Create the text field image name\n            const pathField = document.createElement('div');\n            pathField.className = `js-image-info ${imageName}_path`;\n            pathField.innerHTML = jQuery(element).parent().find('img').prop('src');\n            jQuery('#gallery-image-info .pwt-form-group:first').append(pathField);\n\n            // Create the alt input box with a unique name\n            const altInput = document.createElement('input');\n            altInput.type = 'text';\n            altInput.name = `input_${imageName}_alt`;\n            altInput.className = 'pwt-form-control js-image-info js-pwt-image-alt';\n            jQuery('#gallery-image-info .pwt-form-group:nth-child(3)').append(altInput);\n\n            // Create the caption input box with a unique name\n            const captionInput = document.createElement('input');\n            captionInput.type = 'text';\n            captionInput.name = `input_${imageName}_caption`;\n            captionInput.className = 'pwt-form-control js-image-info js-pwt-image-caption';\n            jQuery('#gallery-image-info .pwt-form-group:nth-child(4)').append(captionInput);\n        } else {\n            // Show existing input boxes\n            jQuery(`#gallery-image-info div.${imageName}_path`).show();\n            jQuery(`#gallery-image-info input[name=\"input_${imageName}_alt\"]`).show();\n            jQuery(`#gallery-image-info input[name=\"input_${imageName}_caption\"]`).show();\n        }\n\n        // Show the Alt and Caption box\n        jQuery('#gallery-image-info').show();\n\n        jQuery(`#gallery-image-info input[name=\"input_${imageName}_alt\"]`).focus();\n    };\n\n    /**\n     * Clean up after uploading an image\n     *\n     * @param element\n     */\n    pwtImage.cleanUpAfterUpload = function (element) {\n        const id = getParentId(element);\n\n        // Make the edit tab visible\n        jQuery('[href=\"#edit\"]').trigger('click');\n\n        // Set the Save to folder selector to default\n        if (choicesDestination !== undefined) {\n            choicesDestination.setChoiceByValue('default');\n            pwtImage.setDestination(`#${id}_destinationFolder`);\n        }\n\n        // Clear the local file\n        jQuery('.js-pwt-image-localfile').val('');\n    };\n\n    /**\n     * Create a preview of the manual uploaded image\n     *\n     * @param element\n     * @returns {boolean}\n     */\n    pwtImage.uploadImagePreview = function (element) {\n        // Get the image details\n        const url = window.URL || window.webkitURL;\n\n        // Check if we have a URL\n        if (url) {\n            // Get the image field\n            const id = getParentId(element);\n            const imageUpload = document.getElementById(`${id}_upload`);\n\n            imageUpload.onchange = function () {\n                // Create the preview\n                pwtImage.createPreview(element, this.files);\n\n                // Clean up\n                pwtImage.cleanUpAfterUpload(element);\n\n                // Hide the use original image option, if use original is available\n                const useOriginal = document.getElementById('useOriginal');\n\n                if (useOriginal !== null) {\n                    // Perform the operations\n                    pwtImage.useOriginal(id, element);\n\n                    // Uncheck the box\n                    document.getElementById('useOriginal').checked = false;\n                    document.getElementById('useOriginal').value = 0;\n\n                    // Hide the box\n                    document.getElementById('useOriginal').parentElement.style.display = 'none';\n                }\n\n                // Make the edit tab active\n                jQuery('[href=\"#edit\"]')[0].click();\n\n                if (showImageDirect) {\n                    pwtImage.directToCanvas(element);\n                }\n            };\n        }\n\n        return false;\n    };\n\n    /**\n     * Shortcut for adding image to canvas from preview window\n     *\n     * @param element\n     */\n    pwtImage.directToCanvas = function (element) {\n        const id = getParentId(element);\n\n        // Set the correct classes\n        jQuery(`#${id} .js-image-preview`).addClass('is-hidden');\n        jQuery(`#${id} .js-image-cropper`).removeClass('is-hidden');\n\n        // Get the file to show\n        const file = jQuery(`#${id}_preview img`).prop('src');\n\n        // Disable the keep original size option\n        jQuery(`#${id} #keepOriginal`).prop('checked', false);\n\n        // Add the file to the canvas\n        pwtImage.addImageToCanvas(element, file);\n    };\n\n    /**\n     * Create an image preview for a manual or drag and drop uploaded image\n     *\n     * @param element\n     * @param files\n     * @returns {boolean}\n     */\n    pwtImage.createPreview = function (element, files) {\n        // Get the parent ID\n        const id = getParentId(element);\n        const image = jQuery(`#${id}_preview img`);\n\n        // Check if any file has been uploaded\n        if (files && files.length) {\n            // Store the uploaded files\n            uploadImage = files;\n\n            // Get the values\n            var file = files[0];\n            const imageMaxSize = jQuery('.js-pwt-image-maxsize').val();\n            const dimensionSizes = jQuery('.js-pwt-image-dimensionsize');\n\n            // Check if the image is within our maximum sizes\n            if (file.size > imageMaxSize && imageMaxSize > 0) {\n                window.alert(jQuery('.js-pwt-image-maxsize-message').val());\n\n                // Clear the images\n                imageUpload.value = '';\n                image.removeAttribute('src');\n\n                return false;\n            }\n\n            // Check if the image is of an image type\n            if (/^image\\/\\w+$/.test(file.type)) {\n                // Load the image\n                image.prop('src', URL.createObjectURL(file));\n\n                // Now check for dimension size\n                if (image.naturalHeight > dimensionSizes.val() || image.naturalWidth > dimensionSizes.val()) {\n                    // Show the error message\n                    window.alert(jQuery('.js-pwt-image-maxsize-message').val());\n\n                    // Clear the images\n                    imageUpload.value = '';\n                    image.removeAttribute('src');\n\n                    return false;\n                }\n\n                // Set the filename in the Save to folder location\n                const fileName = file.name.split('/').slice(-1)[0];\n                jQuery(`#${id} #pwt-image-targetFile`).val(fileName);\n\n                // Set the width\n            } else {\n                window.alert(Joomla.JText._('COM_PWTIMAGE_CHOOSE_IMAGE', 'Please choose an image file.'));\n            }\n        }\n\n        // Hide the message\n        jQuery(`#${id} .pwt-message`).removeClass('is-visible');\n\n        // Show the preview\n        jQuery(`#${id} .pwt-edit-block`).removeClass('is-hidden');\n        jQuery(`#${id} .pwt-fulltab-message`).addClass('is-hidden');\n\n        // Enable the insert button on the edit page\n        jQuery(`#${id} .js-button-image`).prop('disabled', false);\n\n        // Show some basic info of the original file\n        image.off('load').on('load', function () {\n            jQuery('.js-pwt-filename').html(file.name);\n            jQuery('.js-pwt-filesize').html(filesize(file.size));\n            jQuery('.js-pwt-fileext').html(file.type.replace('image/', ''));\n            jQuery('.js-pwt-filedimensions').html(`${this.naturalWidth} x ${this.naturalHeight}`);\n        });\n    };\n\n    /**\n     * Add an image selected from server to the edit tab. Not in the cropper but in a div.\n     *\n     * @param element\n     * @param file\n     */\n    pwtImage.previewImage = function (element, file) {\n        const id = getParentId(element);\n\n        pwtImage.cancelImage(id);\n\n        // Get the local path of the file\n        const cleanFile = file.replace(rootPath, '/');\n\n        jQuery(`#${id}_preview img`).prop('src', file);\n        jQuery(`#${id}_js-pwtimage-image`).prop('src', cleanFile);\n        jQuery(`#${id} .js-pwt-image-localfile`).val(cleanFile);\n\n        // Make the edit tab visible\n        jQuery('[href=\"#edit\"]').trigger('click');\n\n        // Hide the message\n        jQuery(`#${id} .pwt-fulltab-message`).addClass('is-hidden');\n        jQuery(`#${id} .pwt-edit-block`).removeClass('is-hidden');\n\n        // Show the preview\n        jQuery(`#${id} .js-image-preview`).removeClass('is-hidden');\n\n        // Set the folder option to select\n        if (choicesDestination !== undefined) {\n            // Check if the select option exists\n            choicesDestination.setChoiceByValue('select');\n            var selected = choicesDestination.getValue().value;\n\n            if (selected !== 'select') {\n                choicesDestination.setChoiceByValue('default');\n            }\n\n            pwtImage.setDestination(`#${id}_destinationFolder`);\n        }\n\n        // Remove the domain form the file\n        if (file.indexOf(rootPath) === 0) {\n            file = file.substring(rootPath.length - 1);\n        }\n\n        // Set the path of the image\n        const basePath = jQuery(`#${id}_selectFolder`).prev().text();\n        let path = file.substring(basePath.length, file.lastIndexOf('/'));\n        const filename = file.substring(file.lastIndexOf('/') + 1);\n\n        const sourcePath = jQuery(`#${id} .js-sourcePath`).text();\n\n        if (path.lastIndexOf(sourcePath) === 0) {\n            path = path.substring(sourcePath.length);\n        }\n\n        if (path.length > 1) {\n            if (selected === 'select' && choicesFolder !== undefined) {\n                choicesFolder.setChoiceByValue(path);\n            } else {\n                jQuery(`#${id}_subPath`).val(`${path}/`);\n            }\n        }\n\n        if (filename.length > 0) {\n            jQuery(`#${id} #pwt-image-targetFile`).val(filename);\n        }\n\n        // Enable the insert button on the edit page\n        jQuery(`#${id} .js-button-image`).prop('disabled', false);\n\n        if (showImageDirect) {\n            pwtImage.directToCanvas('.pwt-content');\n        }\n\n        // Show the Use original image option\n        const useOriginal = document.getElementById('useOriginal');\n\n        if (useOriginal) {\n            useOriginal.parentElement.style.display = 'block';\n        }\n\n        // Show some basic info of the original file\n        jQuery.ajax({\n            type: 'POST',\n            data: {\n                option: 'com_pwtimage',\n                task: 'image.loadMetaData',\n                format: 'json',\n                image: file\n            },\n            url: jQuery('#post-url').val(),\n            headers: {\n                'X-CSRF-TOKEN': Joomla.getOptions('csrf.token')\n            },\n            success(response) {\n                if (response && response.success === true) {\n                    file = response.data;\n\n                    jQuery('.js-pwt-filename').html(file.name);\n                    jQuery('.js-pwt-filesize').html(filesize(file.size));\n                    jQuery('.js-pwt-fileext').html(file.mime.replace('image/', ''));\n                    jQuery('.js-pwt-filedimensions').html(`${file[0]} x ${file[1]}`);\n                }\n            },\n            error(response) {\n                // Hide the info section\n                console.log(response);\n            }\n        });\n    };\n\n    /**\n     * Cancel the editing of the current image\n     */\n    pwtImage.cancelImage = function (id) {\n        jQuery(`#${id} button.js-button-save-new`).prop('disabled', true);\n        jQuery(`#${id} .js-image-cropper`).addClass('is-hidden');\n        jQuery(`#${id} .js-image-info`).addClass('is-hidden');\n        jQuery(`#${id} .js-image-preview`).removeClass('is-hidden');\n    };\n\n    /**\n     * Filter the select list of images\n     *\n     * @param search The search value to filter on\n     * @param page   The page that is active\n     */\n    pwtImage.selectFilter = function (search, page) {\n        // Remove all images\n        jQuery('#select .pwt-filepicker__content .pwt-gallery__items--images').html('');\n\n        if (page === undefined) {\n            page = 1;\n        }\n\n        // Initialise all variables\n        const id = getParentId('#selectFilter');\n        const storedFiles = getFromLocalStorage(id, 'files');\n        const storedFolders = getFromLocalStorage(id, 'folders');\n        const basePath = getFromLocalStorage(id, 'basePath');\n        let filteredItems = storedFiles;\n        let filteredFolders = storedFolders;\n        const target = 'select';\n        const start = page === 1 ? 0 : (page - 1) * imageLimit;\n        const end = page * imageLimit;\n        const pagination = [];\n\n        // If we have a search filter, filter the images\n        if (search) {\n            filteredItems = filterItems(storedFiles, search);\n            filteredFolders = filterFolders(storedFolders, search);\n        }\n\n        // Get the final list of items\n        const files = filteredItems.slice(start, end);\n\n        // Create the list of images to show\n        const links = prepareImages(files, basePath, target);\n\n        // Add the files\n        const itemImages = jQuery(`#${id} #${target} .pwt-gallery__items--images`);\n        itemImages.html('');\n\n        if (links.length) {\n            itemImages.html(links.join(' '));\n        }\n\n        // Setup pagination\n        const pages = Math.ceil(filteredItems.length / imageLimit);\n\n        for (page = 1; page <= pages; page++) {\n            pagination.push(`<a onclick=\"pwtImage.showMoreImages('.pwt-gallery__items--images', ${page}, '${target}');\">${page}</a>`);\n        }\n\n        // Add the pagination\n        const paginationBar = jQuery(`#${id} #${target} .pwt-pagination`);\n        paginationBar.html('');\n\n        if (pagination.length) {\n            paginationBar.html(`<div class=\"pwt-pagination__pages\">${pagination.join(' ')}</div>`);\n        }\n\n        pushFolders(id, filteredFolders, target);\n    };\n\n    /**\n     * Push the filtered (or not) folders\n     *\n     * @param id\n     * @param folders\n     * @param target\n     */\n    function pushFolders(id, folders, target) {\n        var link = [];\n        var folder = getFromLocalStorage(id, 'basePath');\n\n        jQuery(folders).each(function (index, item) {\n            var itemPath = item;\n\n            if (folder !== '/') {\n                itemPath = `${folder}/${item}`;\n            }\n\n            link.push(`<div class=\"pwt-gallery__item\"><a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '${itemPath}', '${target}'); return false;\">` +\n                '<div class=\"pwt-gallery__item__content\">' + '<span class=\"pwt-gallery__item__icon icon-folder-2\"></span>' +\n                `<span class=\"pwt-gallery__item__title\">${item}</span>` +\n                '</div>' +\n                '</a></div>');\n        });\n\n        // Add the folders\n        var itemFolders = jQuery('#' + id + ' #select .pwt-gallery__items--folders');\n        itemFolders.html('');\n\n        if (link.length) {\n            itemFolders.html(link.join(' '));\n        }\n    }\n\n    /**\n     * Restore canvas as user wants to keep the original image\n     */\n    pwtImage.useOriginal = function (id, element) {\n        const elements = document.getElementsByClassName('pwt-image-modify');\n        let display = '';\n\n        if (jQuery(element).is(':checked')) {\n            pwtImage.cancelImage(id);\n\n            // Hide modify elements\n            display = 'none';\n        }\n\n        for (let i = 0; i < elements.length; i++) {\n            elements[i].style.display = display;\n        }\n    };\n\n    /**\n     * Restore canvas as user wants to keep the original image\n     */\n    pwtImage.keepOriginal = function (id, element) {\n        if (jQuery(element).is(':checked')) {\n            pwtImage.cancelImage(id);\n        }\n    };\n\n    /**\n     * Array filters items based on search criteria (query)\n     *\n     * @param items\n     * @param query\n     */\n    function filterItems(items, query) {\n        return items.filter((el) => el.toLowerCase().indexOf(query.toLowerCase()) > -1);\n    }\n\n    /**\n     * Array filters items based on search criteria (query)\n     *\n     * @param folders\n     * @param query\n     */\n    function filterFolders(folders, query) {\n        return folders.filter((el) => el.toLowerCase().indexOf(query.toLowerCase()) > -1);\n    }\n\n    /**\n     * Get the filesize in a human readable string\n     *\n     * @param size The size in bits\n     *\n     * @return string Human readable string\n     */\n    function filesize(size) {\n        const kb = (size / 1024).toFixed(2);\n        const mb = (size / 1048576).toFixed(2);\n\n        return mb >= 1 ? `${mb} MB` : `${kb} KB`;\n    }\n\n    /**\n     * Add the data from the localStorage\n     *\n     * @param id The unique session ID\n     * @param type The type of data to be stored\n     * @param payload The data to be stored\n     */\n    function addToLocalStorage(id, type, payload) {\n        // Get our container\n        let container = JSON.parse(localStorage.getItem('pwtImage'));\n\n        // Make sure the container is defined\n        if (container === undefined || container === null) {\n            container = {};\n        }\n\n        // Construct a unique key\n        const key = `${id}_${type}`;\n\n        // Check for any existing IDs, remove obsolete ones\n        for (const storedKey in container) {\n            if (storedKey.indexOf(type) > 0 && key !== storedKey && container.hasOwnProperty(storedKey)) {\n                delete container[storedKey];\n            }\n        }\n\n        // Fill the container\n        container[key] = payload;\n\n        // Store the container\n        localStorage.setItem('pwtImage', JSON.stringify(container));\n    }\n\n    /**\n     * Get the data from the localStorage\n     */\n    function getFromLocalStorage(id, type) {\n        // Get our container\n        const container = JSON.parse(localStorage.getItem('pwtImage'));\n\n        // Make sure the container is defined\n        if (container === undefined || container === null) {\n            return [];\n        }\n\n        // Construct a unique key\n        const key = `${id}_${type}`;\n\n        // Check if the key exist\n        if (container.hasOwnProperty(key)) {\n            return container[key];\n        }\n    }\n\n    /**\n     * Render a Joomla system message\n     */\n    function renderMessage(message, local) {\n        if (local === 'undefined') {\n            // Render the Joomla message, first make sure there is a message container present\n            var messageContainer = window.parent.document.getElementById('system-message-container');\n\n            if (!messageContainer) {\n                return true;\n            }\n\n            window.parent.Joomla.renderMessages(message);\n        } else {\n            // Render the Joomla message, first make sure there is a message container present\n            var messageContainer = window.document.getElementById('system-message-container');\n\n            if (!messageContainer) {\n                return true;\n            }\n\n            window.Joomla.renderMessages(message);\n        }\n    }\n\n    /**\n     * Set the hotkeys\n     */\n    pwtImage.setHotkeys = function (modalId) {\n        document.addEventListener('keyup', (e) => {\n            if (e.key === 'Escape') {\n                pwtImage.closeModal();\n            } else if (e.key === 'Enter') {\n                const modalId = window.Joomla.optionsStorage.PWTImageConfig.modalId;\n                pwtImage.saveImage(modalId);\n            }\n        });\n    };\n\n    // Return the public parts\n    return pwtImage;\n}());\n\n/*! choices.js v7.1.5 |  2019 Josh Johnson | https://github.com/jshjohnson/Choices#readme */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Choices\"] = factory();\n\telse\n\t\troot[\"Choices\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/public/assets/scripts/\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif ( true && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (true) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n}());\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\ttry {\n\t\treturn (key in target) // Properties are safe to merge if they don't exist in the target yet,\n\t\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n\t} catch (unused) {\n\t\t// Counterintuitively, it's safe to merge any property on a target that causes the `in` operator to throw.\n\t\t// This happens when trying to copy an object in the source over a plain string in the target.\n\t\treturn false\n\t}\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global, module) {/* harmony import */ var _ponyfill_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);\n/* global window */\n\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (true) {\n  root = module;\n} else {}\n\nvar result = Object(_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(root);\n/* harmony default export */ __webpack_exports__[\"a\"] = (result);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(7), __webpack_require__(8)(module)))\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Fuse.js v3.4.2 - Lightweight fuzzy-search (http://fusejs.io)\n * \n * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n * \n * http://www.apache.org/licenses/LICENSE-2.0\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse {}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/bitap/bitap_matched_indices.js\":\n/*!********************************************!*\\\n  !*** ./src/bitap/bitap_matched_indices.js ***!\n  \\********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function () {\n  var matchmask = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var minMatchCharLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var matchedIndices = [];\n  var start = -1;\n  var end = -1;\n  var i = 0;\n\n  for (var len = matchmask.length; i < len; i += 1) {\n    var match = matchmask[i];\n\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n\n      if (end - start + 1 >= minMatchCharLength) {\n        matchedIndices.push([start, end]);\n      }\n\n      start = -1;\n    }\n  } // (i-1 - start) + 1 => i - start\n\n\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    matchedIndices.push([start, i - 1]);\n  }\n\n  return matchedIndices;\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_pattern_alphabet.js\":\n/*!*********************************************!*\\\n  !*** ./src/bitap/bitap_pattern_alphabet.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function (pattern) {\n  var mask = {};\n  var len = pattern.length;\n\n  for (var i = 0; i < len; i += 1) {\n    mask[pattern.charAt(i)] = 0;\n  }\n\n  for (var _i = 0; _i < len; _i += 1) {\n    mask[pattern.charAt(_i)] |= 1 << len - _i - 1;\n  }\n\n  return mask;\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_regex_search.js\":\n/*!*****************************************!*\\\n  !*** ./src/bitap/bitap_regex_search.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar SPECIAL_CHARS_REGEX = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;\n\nmodule.exports = function (text, pattern) {\n  var tokenSeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : / +/g;\n  var regex = new RegExp(pattern.replace(SPECIAL_CHARS_REGEX, '\\\\$&').replace(tokenSeparator, '|'));\n  var matches = text.match(regex);\n  var isMatch = !!matches;\n  var matchedIndices = [];\n\n  if (isMatch) {\n    for (var i = 0, matchesLen = matches.length; i < matchesLen; i += 1) {\n      var match = matches[i];\n      matchedIndices.push([text.indexOf(match), match.length - 1]);\n    }\n  }\n\n  return {\n    // TODO: revisit this score\n    score: isMatch ? 0.5 : 1,\n    isMatch: isMatch,\n    matchedIndices: matchedIndices\n  };\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_score.js\":\n/*!**********************************!*\\\n  !*** ./src/bitap/bitap_score.js ***!\n  \\**********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function (pattern, _ref) {\n  var _ref$errors = _ref.errors,\n      errors = _ref$errors === void 0 ? 0 : _ref$errors,\n      _ref$currentLocation = _ref.currentLocation,\n      currentLocation = _ref$currentLocation === void 0 ? 0 : _ref$currentLocation,\n      _ref$expectedLocation = _ref.expectedLocation,\n      expectedLocation = _ref$expectedLocation === void 0 ? 0 : _ref$expectedLocation,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 100 : _ref$distance;\n  var accuracy = errors / pattern.length;\n  var proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy;\n  }\n\n  return accuracy + proximity / distance;\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_search.js\":\n/*!***********************************!*\\\n  !*** ./src/bitap/bitap_search.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar bitapScore = __webpack_require__(/*! ./bitap_score */ \"./src/bitap/bitap_score.js\");\n\nvar matchedIndices = __webpack_require__(/*! ./bitap_matched_indices */ \"./src/bitap/bitap_matched_indices.js\");\n\nmodule.exports = function (text, pattern, patternAlphabet, _ref) {\n  var _ref$location = _ref.location,\n      location = _ref$location === void 0 ? 0 : _ref$location,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 100 : _ref$distance,\n      _ref$threshold = _ref.threshold,\n      threshold = _ref$threshold === void 0 ? 0.6 : _ref$threshold,\n      _ref$findAllMatches = _ref.findAllMatches,\n      findAllMatches = _ref$findAllMatches === void 0 ? false : _ref$findAllMatches,\n      _ref$minMatchCharLeng = _ref.minMatchCharLength,\n      minMatchCharLength = _ref$minMatchCharLeng === void 0 ? 1 : _ref$minMatchCharLeng;\n  var expectedLocation = location; // Set starting location at beginning text and initialize the alphabet.\n\n  var textLen = text.length; // Highest score beyond which we give up.\n\n  var currentThreshold = threshold; // Is there a nearby exact match? (speedup)\n\n  var bestLocation = text.indexOf(pattern, expectedLocation);\n  var patternLen = pattern.length; // a mask of the matches\n\n  var matchMask = [];\n\n  for (var i = 0; i < textLen; i += 1) {\n    matchMask[i] = 0;\n  }\n\n  if (bestLocation !== -1) {\n    var score = bitapScore(pattern, {\n      errors: 0,\n      currentLocation: bestLocation,\n      expectedLocation: expectedLocation,\n      distance: distance\n    });\n    currentThreshold = Math.min(score, currentThreshold); // What about in the other direction? (speed up)\n\n    bestLocation = text.lastIndexOf(pattern, expectedLocation + patternLen);\n\n    if (bestLocation !== -1) {\n      var _score = bitapScore(pattern, {\n        errors: 0,\n        currentLocation: bestLocation,\n        expectedLocation: expectedLocation,\n        distance: distance\n      });\n\n      currentThreshold = Math.min(_score, currentThreshold);\n    }\n  } // Reset the best location\n\n\n  bestLocation = -1;\n  var lastBitArr = [];\n  var finalScore = 1;\n  var binMax = patternLen + textLen;\n  var mask = 1 << patternLen - 1;\n\n  for (var _i = 0; _i < patternLen; _i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    var binMin = 0;\n    var binMid = binMax;\n\n    while (binMin < binMid) {\n      var _score3 = bitapScore(pattern, {\n        errors: _i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation: expectedLocation,\n        distance: distance\n      });\n\n      if (_score3 <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    binMax = binMid;\n    var start = Math.max(1, expectedLocation - binMid + 1);\n    var finish = findAllMatches ? textLen : Math.min(expectedLocation + binMid, textLen) + patternLen; // Initialize the bit array\n\n    var bitArr = Array(finish + 2);\n    bitArr[finish + 1] = (1 << _i) - 1;\n\n    for (var j = finish; j >= start; j -= 1) {\n      var currentLocation = j - 1;\n      var charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (charMatch) {\n        matchMask[currentLocation] = 1;\n      } // First pass: exact match\n\n\n      bitArr[j] = (bitArr[j + 1] << 1 | 1) & charMatch; // Subsequent passes: fuzzy match\n\n      if (_i !== 0) {\n        bitArr[j] |= (lastBitArr[j + 1] | lastBitArr[j]) << 1 | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = bitapScore(pattern, {\n          errors: _i,\n          currentLocation: currentLocation,\n          expectedLocation: expectedLocation,\n          distance: distance\n        }); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation; // Already passed `loc`, downhill from here on in.\n\n          if (bestLocation <= expectedLocation) {\n            break;\n          } // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n\n\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    var _score2 = bitapScore(pattern, {\n      errors: _i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation: expectedLocation,\n      distance: distance\n    }); // console.log('score', score, finalScore)\n\n\n    if (_score2 > currentThreshold) {\n      break;\n    }\n\n    lastBitArr = bitArr;\n  } // console.log('FINAL SCORE', finalScore)\n  // Count exact matches (those with a score of 0) to be \"almost\" exact\n\n\n  return {\n    isMatch: bestLocation >= 0,\n    score: finalScore === 0 ? 0.001 : finalScore,\n    matchedIndices: matchedIndices(matchMask, minMatchCharLength)\n  };\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/index.js\":\n/*!****************************!*\\\n  !*** ./src/bitap/index.js ***!\n  \\****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar bitapRegexSearch = __webpack_require__(/*! ./bitap_regex_search */ \"./src/bitap/bitap_regex_search.js\");\n\nvar bitapSearch = __webpack_require__(/*! ./bitap_search */ \"./src/bitap/bitap_search.js\");\n\nvar patternAlphabet = __webpack_require__(/*! ./bitap_pattern_alphabet */ \"./src/bitap/bitap_pattern_alphabet.js\");\n\nvar Bitap =\n/*#__PURE__*/\nfunction () {\n  function Bitap(pattern, _ref) {\n    var _ref$location = _ref.location,\n        location = _ref$location === void 0 ? 0 : _ref$location,\n        _ref$distance = _ref.distance,\n        distance = _ref$distance === void 0 ? 100 : _ref$distance,\n        _ref$threshold = _ref.threshold,\n        threshold = _ref$threshold === void 0 ? 0.6 : _ref$threshold,\n        _ref$maxPatternLength = _ref.maxPatternLength,\n        maxPatternLength = _ref$maxPatternLength === void 0 ? 32 : _ref$maxPatternLength,\n        _ref$isCaseSensitive = _ref.isCaseSensitive,\n        isCaseSensitive = _ref$isCaseSensitive === void 0 ? false : _ref$isCaseSensitive,\n        _ref$tokenSeparator = _ref.tokenSeparator,\n        tokenSeparator = _ref$tokenSeparator === void 0 ? / +/g : _ref$tokenSeparator,\n        _ref$findAllMatches = _ref.findAllMatches,\n        findAllMatches = _ref$findAllMatches === void 0 ? false : _ref$findAllMatches,\n        _ref$minMatchCharLeng = _ref.minMatchCharLength,\n        minMatchCharLength = _ref$minMatchCharLeng === void 0 ? 1 : _ref$minMatchCharLeng;\n\n    _classCallCheck(this, Bitap);\n\n    this.options = {\n      location: location,\n      distance: distance,\n      threshold: threshold,\n      maxPatternLength: maxPatternLength,\n      isCaseSensitive: isCaseSensitive,\n      tokenSeparator: tokenSeparator,\n      findAllMatches: findAllMatches,\n      minMatchCharLength: minMatchCharLength\n    };\n    this.pattern = this.options.isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    if (this.pattern.length <= maxPatternLength) {\n      this.patternAlphabet = patternAlphabet(this.pattern);\n    }\n  }\n\n  _createClass(Bitap, [{\n    key: \"search\",\n    value: function search(text) {\n      if (!this.options.isCaseSensitive) {\n        text = text.toLowerCase();\n      } // Exact match\n\n\n      if (this.pattern === text) {\n        return {\n          isMatch: true,\n          score: 0,\n          matchedIndices: [[0, text.length - 1]]\n        };\n      } // When pattern length is greater than the machine word length, just do a a regex comparison\n\n\n      var _this$options = this.options,\n          maxPatternLength = _this$options.maxPatternLength,\n          tokenSeparator = _this$options.tokenSeparator;\n\n      if (this.pattern.length > maxPatternLength) {\n        return bitapRegexSearch(text, this.pattern, tokenSeparator);\n      } // Otherwise, use Bitap algorithm\n\n\n      var _this$options2 = this.options,\n          location = _this$options2.location,\n          distance = _this$options2.distance,\n          threshold = _this$options2.threshold,\n          findAllMatches = _this$options2.findAllMatches,\n          minMatchCharLength = _this$options2.minMatchCharLength;\n      return bitapSearch(text, this.pattern, this.patternAlphabet, {\n        location: location,\n        distance: distance,\n        threshold: threshold,\n        findAllMatches: findAllMatches,\n        minMatchCharLength: minMatchCharLength\n      });\n    }\n  }]);\n\n  return Bitap;\n}(); // let x = new Bitap(\"od mn war\", {})\n// let result = x.search(\"Old Man's War\")\n// console.log(result)\n\n\nmodule.exports = Bitap;\n\n/***/ }),\n\n/***/ \"./src/helpers/deep_value.js\":\n/*!***********************************!*\\\n  !*** ./src/helpers/deep_value.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isArray = __webpack_require__(/*! ./is_array */ \"./src/helpers/is_array.js\");\n\nvar deepValue = function deepValue(obj, path, list) {\n  if (!path) {\n    // If there's no path left, we've gotten to the object we care about.\n    list.push(obj);\n  } else {\n    var dotIndex = path.indexOf('.');\n    var firstSegment = path;\n    var remaining = null;\n\n    if (dotIndex !== -1) {\n      firstSegment = path.slice(0, dotIndex);\n      remaining = path.slice(dotIndex + 1);\n    }\n\n    var value = obj[firstSegment];\n\n    if (value !== null && value !== undefined) {\n      if (!remaining && (typeof value === 'string' || typeof value === 'number')) {\n        list.push(value.toString());\n      } else if (isArray(value)) {\n        // Search each item in the array.\n        for (var i = 0, len = value.length; i < len; i += 1) {\n          deepValue(value[i], remaining, list);\n        }\n      } else if (remaining) {\n        // An object. Recurse further.\n        deepValue(value, remaining, list);\n      }\n    }\n  }\n\n  return list;\n};\n\nmodule.exports = function (obj, path) {\n  return deepValue(obj, path, []);\n};\n\n/***/ }),\n\n/***/ \"./src/helpers/is_array.js\":\n/*!*********************************!*\\\n  !*** ./src/helpers/is_array.js ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function (obj) {\n  return !Array.isArray ? Object.prototype.toString.call(obj) === '[object Array]' : Array.isArray(obj);\n};\n\n/***/ }),\n\n/***/ \"./src/index.js\":\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Bitap = __webpack_require__(/*! ./bitap */ \"./src/bitap/index.js\");\n\nvar deepValue = __webpack_require__(/*! ./helpers/deep_value */ \"./src/helpers/deep_value.js\");\n\nvar isArray = __webpack_require__(/*! ./helpers/is_array */ \"./src/helpers/is_array.js\");\n\nvar Fuse =\n/*#__PURE__*/\nfunction () {\n  function Fuse(list, _ref) {\n    var _ref$location = _ref.location,\n        location = _ref$location === void 0 ? 0 : _ref$location,\n        _ref$distance = _ref.distance,\n        distance = _ref$distance === void 0 ? 100 : _ref$distance,\n        _ref$threshold = _ref.threshold,\n        threshold = _ref$threshold === void 0 ? 0.6 : _ref$threshold,\n        _ref$maxPatternLength = _ref.maxPatternLength,\n        maxPatternLength = _ref$maxPatternLength === void 0 ? 32 : _ref$maxPatternLength,\n        _ref$caseSensitive = _ref.caseSensitive,\n        caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n        _ref$tokenSeparator = _ref.tokenSeparator,\n        tokenSeparator = _ref$tokenSeparator === void 0 ? / +/g : _ref$tokenSeparator,\n        _ref$findAllMatches = _ref.findAllMatches,\n        findAllMatches = _ref$findAllMatches === void 0 ? false : _ref$findAllMatches,\n        _ref$minMatchCharLeng = _ref.minMatchCharLength,\n        minMatchCharLength = _ref$minMatchCharLeng === void 0 ? 1 : _ref$minMatchCharLeng,\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? null : _ref$id,\n        _ref$keys = _ref.keys,\n        keys = _ref$keys === void 0 ? [] : _ref$keys,\n        _ref$shouldSort = _ref.shouldSort,\n        shouldSort = _ref$shouldSort === void 0 ? true : _ref$shouldSort,\n        _ref$getFn = _ref.getFn,\n        getFn = _ref$getFn === void 0 ? deepValue : _ref$getFn,\n        _ref$sortFn = _ref.sortFn,\n        sortFn = _ref$sortFn === void 0 ? function (a, b) {\n      return a.score - b.score;\n    } : _ref$sortFn,\n        _ref$tokenize = _ref.tokenize,\n        tokenize = _ref$tokenize === void 0 ? false : _ref$tokenize,\n        _ref$matchAllTokens = _ref.matchAllTokens,\n        matchAllTokens = _ref$matchAllTokens === void 0 ? false : _ref$matchAllTokens,\n        _ref$includeMatches = _ref.includeMatches,\n        includeMatches = _ref$includeMatches === void 0 ? false : _ref$includeMatches,\n        _ref$includeScore = _ref.includeScore,\n        includeScore = _ref$includeScore === void 0 ? false : _ref$includeScore,\n        _ref$verbose = _ref.verbose,\n        verbose = _ref$verbose === void 0 ? false : _ref$verbose;\n\n    _classCallCheck(this, Fuse);\n\n    this.options = {\n      location: location,\n      distance: distance,\n      threshold: threshold,\n      maxPatternLength: maxPatternLength,\n      isCaseSensitive: caseSensitive,\n      tokenSeparator: tokenSeparator,\n      findAllMatches: findAllMatches,\n      minMatchCharLength: minMatchCharLength,\n      id: id,\n      keys: keys,\n      includeMatches: includeMatches,\n      includeScore: includeScore,\n      shouldSort: shouldSort,\n      getFn: getFn,\n      sortFn: sortFn,\n      verbose: verbose,\n      tokenize: tokenize,\n      matchAllTokens: matchAllTokens\n    };\n    this.setCollection(list);\n  }\n\n  _createClass(Fuse, [{\n    key: \"setCollection\",\n    value: function setCollection(list) {\n      this.list = list;\n      return list;\n    }\n  }, {\n    key: \"search\",\n    value: function search(pattern) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        limit: false\n      };\n\n      this._log(\"---------\\nSearch pattern: \\\"\".concat(pattern, \"\\\"\"));\n\n      var _this$_prepareSearche = this._prepareSearchers(pattern),\n          tokenSearchers = _this$_prepareSearche.tokenSearchers,\n          fullSearcher = _this$_prepareSearche.fullSearcher;\n\n      var _this$_search = this._search(tokenSearchers, fullSearcher),\n          weights = _this$_search.weights,\n          results = _this$_search.results;\n\n      this._computeScore(weights, results);\n\n      if (this.options.shouldSort) {\n        this._sort(results);\n      }\n\n      if (opts.limit && typeof opts.limit === 'number') {\n        results = results.slice(0, opts.limit);\n      }\n\n      return this._format(results);\n    }\n  }, {\n    key: \"_prepareSearchers\",\n    value: function _prepareSearchers() {\n      var pattern = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var tokenSearchers = [];\n\n      if (this.options.tokenize) {\n        // Tokenize on the separator\n        var tokens = pattern.split(this.options.tokenSeparator);\n\n        for (var i = 0, len = tokens.length; i < len; i += 1) {\n          tokenSearchers.push(new Bitap(tokens[i], this.options));\n        }\n      }\n\n      var fullSearcher = new Bitap(pattern, this.options);\n      return {\n        tokenSearchers: tokenSearchers,\n        fullSearcher: fullSearcher\n      };\n    }\n  }, {\n    key: \"_search\",\n    value: function _search() {\n      var tokenSearchers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var fullSearcher = arguments.length > 1 ? arguments[1] : undefined;\n      var list = this.list;\n      var resultMap = {};\n      var results = []; // Check the first item in the list, if it's a string, then we assume\n      // that every item in the list is also a string, and thus it's a flattened array.\n\n      if (typeof list[0] === 'string') {\n        // Iterate over every item\n        for (var i = 0, len = list.length; i < len; i += 1) {\n          this._analyze({\n            key: '',\n            value: list[i],\n            record: i,\n            index: i\n          }, {\n            resultMap: resultMap,\n            results: results,\n            tokenSearchers: tokenSearchers,\n            fullSearcher: fullSearcher\n          });\n        }\n\n        return {\n          weights: null,\n          results: results\n        };\n      } // Otherwise, the first item is an Object (hopefully), and thus the searching\n      // is done on the values of the keys of each item.\n\n\n      var weights = {};\n\n      for (var _i = 0, _len = list.length; _i < _len; _i += 1) {\n        var item = list[_i]; // Iterate over every key\n\n        for (var j = 0, keysLen = this.options.keys.length; j < keysLen; j += 1) {\n          var key = this.options.keys[j];\n\n          if (typeof key !== 'string') {\n            weights[key.name] = {\n              weight: 1 - key.weight || 1\n            };\n\n            if (key.weight <= 0 || key.weight > 1) {\n              throw new Error('Key weight has to be > 0 and <= 1');\n            }\n\n            key = key.name;\n          } else {\n            weights[key] = {\n              weight: 1\n            };\n          }\n\n          this._analyze({\n            key: key,\n            value: this.options.getFn(item, key),\n            record: item,\n            index: _i\n          }, {\n            resultMap: resultMap,\n            results: results,\n            tokenSearchers: tokenSearchers,\n            fullSearcher: fullSearcher\n          });\n        }\n      }\n\n      return {\n        weights: weights,\n        results: results\n      };\n    }\n  }, {\n    key: \"_analyze\",\n    value: function _analyze(_ref2, _ref3) {\n      var key = _ref2.key,\n          _ref2$arrayIndex = _ref2.arrayIndex,\n          arrayIndex = _ref2$arrayIndex === void 0 ? -1 : _ref2$arrayIndex,\n          value = _ref2.value,\n          record = _ref2.record,\n          index = _ref2.index;\n      var _ref3$tokenSearchers = _ref3.tokenSearchers,\n          tokenSearchers = _ref3$tokenSearchers === void 0 ? [] : _ref3$tokenSearchers,\n          _ref3$fullSearcher = _ref3.fullSearcher,\n          fullSearcher = _ref3$fullSearcher === void 0 ? [] : _ref3$fullSearcher,\n          _ref3$resultMap = _ref3.resultMap,\n          resultMap = _ref3$resultMap === void 0 ? {} : _ref3$resultMap,\n          _ref3$results = _ref3.results,\n          results = _ref3$results === void 0 ? [] : _ref3$results;\n\n      // Check if the texvaluet can be searched\n      if (value === undefined || value === null) {\n        return;\n      }\n\n      var exists = false;\n      var averageScore = -1;\n      var numTextMatches = 0;\n\n      if (typeof value === 'string') {\n        this._log(\"\\nKey: \".concat(key === '' ? '-' : key));\n\n        var mainSearchResult = fullSearcher.search(value);\n\n        this._log(\"Full text: \\\"\".concat(value, \"\\\", score: \").concat(mainSearchResult.score));\n\n        if (this.options.tokenize) {\n          var words = value.split(this.options.tokenSeparator);\n          var scores = [];\n\n          for (var i = 0; i < tokenSearchers.length; i += 1) {\n            var tokenSearcher = tokenSearchers[i];\n\n            this._log(\"\\nPattern: \\\"\".concat(tokenSearcher.pattern, \"\\\"\")); // let tokenScores = []\n\n\n            var hasMatchInText = false;\n\n            for (var j = 0; j < words.length; j += 1) {\n              var word = words[j];\n              var tokenSearchResult = tokenSearcher.search(word);\n              var obj = {};\n\n              if (tokenSearchResult.isMatch) {\n                obj[word] = tokenSearchResult.score;\n                exists = true;\n                hasMatchInText = true;\n                scores.push(tokenSearchResult.score);\n              } else {\n                obj[word] = 1;\n\n                if (!this.options.matchAllTokens) {\n                  scores.push(1);\n                }\n              }\n\n              this._log(\"Token: \\\"\".concat(word, \"\\\", score: \").concat(obj[word])); // tokenScores.push(obj)\n\n            }\n\n            if (hasMatchInText) {\n              numTextMatches += 1;\n            }\n          }\n\n          averageScore = scores[0];\n          var scoresLen = scores.length;\n\n          for (var _i2 = 1; _i2 < scoresLen; _i2 += 1) {\n            averageScore += scores[_i2];\n          }\n\n          averageScore = averageScore / scoresLen;\n\n          this._log('Token score average:', averageScore);\n        }\n\n        var finalScore = mainSearchResult.score;\n\n        if (averageScore > -1) {\n          finalScore = (finalScore + averageScore) / 2;\n        }\n\n        this._log('Score average:', finalScore);\n\n        var checkTextMatches = this.options.tokenize && this.options.matchAllTokens ? numTextMatches >= tokenSearchers.length : true;\n\n        this._log(\"\\nCheck Matches: \".concat(checkTextMatches)); // If a match is found, add the item to <rawResults>, including its score\n\n\n        if ((exists || mainSearchResult.isMatch) && checkTextMatches) {\n          // Check if the item already exists in our results\n          var existingResult = resultMap[index];\n\n          if (existingResult) {\n            // Use the lowest score\n            // existingResult.score, bitapResult.score\n            existingResult.output.push({\n              key: key,\n              arrayIndex: arrayIndex,\n              value: value,\n              score: finalScore,\n              matchedIndices: mainSearchResult.matchedIndices\n            });\n          } else {\n            // Add it to the raw result list\n            resultMap[index] = {\n              item: record,\n              output: [{\n                key: key,\n                arrayIndex: arrayIndex,\n                value: value,\n                score: finalScore,\n                matchedIndices: mainSearchResult.matchedIndices\n              }]\n            };\n            results.push(resultMap[index]);\n          }\n        }\n      } else if (isArray(value)) {\n        for (var _i3 = 0, len = value.length; _i3 < len; _i3 += 1) {\n          this._analyze({\n            key: key,\n            arrayIndex: _i3,\n            value: value[_i3],\n            record: record,\n            index: index\n          }, {\n            resultMap: resultMap,\n            results: results,\n            tokenSearchers: tokenSearchers,\n            fullSearcher: fullSearcher\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_computeScore\",\n    value: function _computeScore(weights, results) {\n      this._log('\\n\\nComputing score:\\n');\n\n      for (var i = 0, len = results.length; i < len; i += 1) {\n        var output = results[i].output;\n        var scoreLen = output.length;\n        var currScore = 1;\n        var bestScore = 1;\n\n        for (var j = 0; j < scoreLen; j += 1) {\n          var weight = weights ? weights[output[j].key].weight : 1;\n          var score = weight === 1 ? output[j].score : output[j].score || 0.001;\n          var nScore = score * weight;\n\n          if (weight !== 1) {\n            bestScore = Math.min(bestScore, nScore);\n          } else {\n            output[j].nScore = nScore;\n            currScore *= nScore;\n          }\n        }\n\n        results[i].score = bestScore === 1 ? currScore : bestScore;\n\n        this._log(results[i]);\n      }\n    }\n  }, {\n    key: \"_sort\",\n    value: function _sort(results) {\n      this._log('\\n\\nSorting....');\n\n      results.sort(this.options.sortFn);\n    }\n  }, {\n    key: \"_format\",\n    value: function _format(results) {\n      var finalOutput = [];\n\n      if (this.options.verbose) {\n        var cache = [];\n\n        this._log('\\n\\nOutput:\\n\\n', JSON.stringify(results, function (key, value) {\n          if (_typeof(value) === 'object' && value !== null) {\n            if (cache.indexOf(value) !== -1) {\n              // Circular reference found, discard key\n              return;\n            } // Store value in our collection\n\n\n            cache.push(value);\n          }\n\n          return value;\n        }));\n\n        cache = null;\n      }\n\n      var transformers = [];\n\n      if (this.options.includeMatches) {\n        transformers.push(function (result, data) {\n          var output = result.output;\n          data.matches = [];\n\n          for (var i = 0, len = output.length; i < len; i += 1) {\n            var item = output[i];\n\n            if (item.matchedIndices.length === 0) {\n              continue;\n            }\n\n            var obj = {\n              indices: item.matchedIndices,\n              value: item.value\n            };\n\n            if (item.key) {\n              obj.key = item.key;\n            }\n\n            if (item.hasOwnProperty('arrayIndex') && item.arrayIndex > -1) {\n              obj.arrayIndex = item.arrayIndex;\n            }\n\n            data.matches.push(obj);\n          }\n        });\n      }\n\n      if (this.options.includeScore) {\n        transformers.push(function (result, data) {\n          data.score = result.score;\n        });\n      }\n\n      for (var i = 0, len = results.length; i < len; i += 1) {\n        var result = results[i];\n\n        if (this.options.id) {\n          result.item = this.options.getFn(result.item, this.options.id)[0];\n        }\n\n        if (!transformers.length) {\n          finalOutput.push(result.item);\n          continue;\n        }\n\n        var data = {\n          item: result.item\n        };\n\n        for (var j = 0, _len2 = transformers.length; j < _len2; j += 1) {\n          transformers[j](result, data);\n        }\n\n        finalOutput.push(data);\n      }\n\n      return finalOutput;\n    }\n  }, {\n    key: \"_log\",\n    value: function _log() {\n      if (this.options.verbose) {\n        var _console;\n\n        (_console = console).log.apply(_console, arguments);\n      }\n    }\n  }]);\n\n  return Fuse;\n}();\n\nmodule.exports = Fuse;\n\n/***/ })\n\n/******/ });\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return symbolObservablePonyfill; });\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(9);\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nwindow.delegateEvent = function delegateEvent() {\n  var events;\n  var addedListenerTypes;\n\n  if (typeof events === 'undefined') {\n    events = new Map();\n  }\n\n  if (typeof addedListenerTypes === 'undefined') {\n    addedListenerTypes = [];\n  }\n\n  function _callback(event) {\n    var type = events.get(event.type);\n    if (!type) return;\n    type.forEach(function (fn) {\n      return fn(event);\n    });\n  }\n\n  return {\n    add: function add(type, fn) {\n      // Cache list of events.\n      if (events.has(type)) {\n        events.get(type).push(fn);\n      } else {\n        events.set(type, [fn]);\n      } // Setup events.\n\n\n      if (addedListenerTypes.indexOf(type) === -1) {\n        document.documentElement.addEventListener(type, _callback, true);\n        addedListenerTypes.push(type);\n      }\n    },\n    remove: function remove(type, fn) {\n      if (!events.get(type)) return;\n      events.set(type, events.get(type).filter(function (item) {\n        return item !== fn;\n      }));\n\n      if (!events.get(type).length) {\n        addedListenerTypes.splice(addedListenerTypes.indexOf(type), 1);\n      }\n    }\n  };\n}();\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/fuse.js/dist/fuse.js\nvar dist_fuse = __webpack_require__(3);\nvar fuse_default = /*#__PURE__*/__webpack_require__.n(dist_fuse);\n\n// EXTERNAL MODULE: ./node_modules/deepmerge/dist/cjs.js\nvar cjs = __webpack_require__(1);\nvar cjs_default = /*#__PURE__*/__webpack_require__.n(cjs);\n\n// EXTERNAL MODULE: ./src/scripts/lib/delegate-events.js\nvar delegate_events = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/symbol-observable/es/index.js\nvar es = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./node_modules/redux/es/redux.js\n\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[es[\"a\" /* default */]] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[es[\"a\" /* default */]] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (false) {}\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (false) {}\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (false) { var warningMessage; }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (false) {}\n\n\n\n// CONCATENATED MODULE: ./src/scripts/reducers/items.js\nvar defaultState = [];\nfunction items_items(state, action) {\n  if (state === void 0) {\n    state = defaultState;\n  }\n\n  switch (action.type) {\n    case 'ADD_ITEM':\n      {\n        // Add object to items array\n        var newState = [].concat(state, [{\n          id: action.id,\n          choiceId: action.choiceId,\n          groupId: action.groupId,\n          value: action.value,\n          label: action.label,\n          active: true,\n          highlighted: false,\n          customProperties: action.customProperties,\n          placeholder: action.placeholder || false,\n          keyCode: null\n        }]);\n        return newState.map(function (obj) {\n          var item = obj;\n          item.highlighted = false;\n          return item;\n        });\n      }\n\n    case 'REMOVE_ITEM':\n      {\n        // Set item to inactive\n        return state.map(function (obj) {\n          var item = obj;\n\n          if (item.id === action.id) {\n            item.active = false;\n          }\n\n          return item;\n        });\n      }\n\n    case 'HIGHLIGHT_ITEM':\n      {\n        return state.map(function (obj) {\n          var item = obj;\n\n          if (item.id === action.id) {\n            item.highlighted = action.highlighted;\n          }\n\n          return item;\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n// CONCATENATED MODULE: ./src/scripts/reducers/groups.js\nvar groups_defaultState = [];\nfunction groups(state, action) {\n  if (state === void 0) {\n    state = groups_defaultState;\n  }\n\n  switch (action.type) {\n    case 'ADD_GROUP':\n      {\n        return [].concat(state, [{\n          id: action.id,\n          value: action.value,\n          active: action.active,\n          disabled: action.disabled\n        }]);\n      }\n\n    case 'CLEAR_CHOICES':\n      {\n        return [];\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n// CONCATENATED MODULE: ./src/scripts/reducers/choices.js\nvar choices_defaultState = [];\nfunction choices_choices(state, action) {\n  if (state === void 0) {\n    state = choices_defaultState;\n  }\n\n  switch (action.type) {\n    case 'ADD_CHOICE':\n      {\n        /*\n            A disabled choice appears in the choice dropdown but cannot be selected\n            A selected choice has been added to the passed input's value (added as an item)\n            An active choice appears within the choice dropdown\n         */\n        return [].concat(state, [{\n          id: action.id,\n          elementId: action.elementId,\n          groupId: action.groupId,\n          value: action.value,\n          label: action.label || action.value,\n          disabled: action.disabled || false,\n          selected: false,\n          active: true,\n          score: 9999,\n          customProperties: action.customProperties,\n          placeholder: action.placeholder || false,\n          keyCode: null\n        }]);\n      }\n\n    case 'ADD_ITEM':\n      {\n        // If all choices need to be activated\n        if (action.activateOptions) {\n          return state.map(function (obj) {\n            var choice = obj;\n            choice.active = action.active;\n            return choice;\n          });\n        } // When an item is added and it has an associated choice,\n        // we want to disable it so it can't be chosen again\n\n\n        if (action.choiceId > -1) {\n          return state.map(function (obj) {\n            var choice = obj;\n\n            if (choice.id === parseInt(action.choiceId, 10)) {\n              choice.selected = true;\n            }\n\n            return choice;\n          });\n        }\n\n        return state;\n      }\n\n    case 'REMOVE_ITEM':\n      {\n        // When an item is removed and it has an associated choice,\n        // we want to re-enable it so it can be chosen again\n        if (action.choiceId > -1) {\n          return state.map(function (obj) {\n            var choice = obj;\n\n            if (choice.id === parseInt(action.choiceId, 10)) {\n              choice.selected = false;\n            }\n\n            return choice;\n          });\n        }\n\n        return state;\n      }\n\n    case 'FILTER_CHOICES':\n      {\n        return state.map(function (obj) {\n          var choice = obj; // Set active state based on whether choice is\n          // within filtered results\n\n          choice.active = action.results.some(function (_ref) {\n            var item = _ref.item,\n                score = _ref.score;\n\n            if (item.id === choice.id) {\n              choice.score = score;\n              return true;\n            }\n\n            return false;\n          });\n          return choice;\n        });\n      }\n\n    case 'ACTIVATE_CHOICES':\n      {\n        return state.map(function (obj) {\n          var choice = obj;\n          choice.active = action.active;\n          return choice;\n        });\n      }\n\n    case 'CLEAR_CHOICES':\n      {\n        return choices_defaultState;\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n// CONCATENATED MODULE: ./src/scripts/reducers/general.js\nvar general_defaultState = {\n  loading: false\n};\n\nvar general = function general(state, action) {\n  if (state === void 0) {\n    state = general_defaultState;\n  }\n\n  switch (action.type) {\n    case 'SET_IS_LOADING':\n      {\n        return {\n          loading: action.isLoading\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\n/* harmony default export */ var reducers_general = (general);\n// CONCATENATED MODULE: ./src/scripts/lib/utils.js\nvar utils_this = undefined;\n\nvar getRandomNumber = function getRandomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min) + min);\n};\nvar generateChars = function generateChars(length) {\n  var chars = '';\n\n  for (var i = 0; i < length; i++) {\n    var randomChar = getRandomNumber(0, 36);\n    chars += randomChar.toString(36);\n  }\n\n  return chars;\n};\nvar generateId = function generateId(element, prefix) {\n  var id = element.id || element.name && element.name + \"-\" + generateChars(2) || generateChars(4);\n  id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\n  id = prefix + \"-\" + id;\n  return id;\n};\nvar getType = function getType(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1);\n};\nvar isType = function isType(type, obj) {\n  return obj !== undefined && obj !== null && getType(obj) === type;\n};\nvar isElement = function isElement(element) {\n  return element instanceof Element;\n};\nvar utils_wrap = function wrap(element, wrapper) {\n  if (wrapper === void 0) {\n    wrapper = document.createElement('div');\n  }\n\n  if (element.nextSibling) {\n    element.parentNode.insertBefore(wrapper, element.nextSibling);\n  } else {\n    element.parentNode.appendChild(wrapper);\n  }\n\n  return wrapper.appendChild(element);\n};\nvar findAncestorByAttrName = function findAncestorByAttrName(el, attr) {\n  var target = el;\n\n  while (target) {\n    if (target.hasAttribute(attr)) {\n      return target;\n    }\n\n    target = target.parentElement;\n  }\n\n  return null;\n};\nvar getAdjacentEl = function getAdjacentEl(startEl, className, direction) {\n  if (direction === void 0) {\n    direction = 1;\n  }\n\n  if (!startEl || !className) {\n    return;\n  }\n\n  var parent = startEl.parentNode.parentNode;\n  var children = Array.from(parent.querySelectorAll(className));\n  var startPos = children.indexOf(startEl);\n  var operatorDirection = direction > 0 ? 1 : -1;\n  return children[startPos + operatorDirection];\n};\nvar isScrolledIntoView = function isScrolledIntoView(el, parent, direction) {\n  if (direction === void 0) {\n    direction = 1;\n  }\n\n  if (!el) {\n    return;\n  }\n\n  var isVisible;\n\n  if (direction > 0) {\n    // In view from bottom\n    isVisible = parent.scrollTop + parent.offsetHeight >= el.offsetTop + el.offsetHeight;\n  } else {\n    // In view from top\n    isVisible = el.offsetTop >= parent.scrollTop;\n  }\n\n  return isVisible;\n};\nvar sanitise = function sanitise(value) {\n  if (!isType('String', value)) {\n    return value;\n  }\n\n  return value.replace(/&/g, '&amp;').replace(/>/g, '&rt;').replace(/</g, '&lt;').replace(/\"/g, '&quot;');\n};\nvar strToEl = function () {\n  var tmpEl = document.createElement('div');\n  return function (str) {\n    var cleanedInput = str.trim();\n    tmpEl.innerHTML = cleanedInput;\n    var firldChild = tmpEl.children[0];\n\n    while (tmpEl.firstChild) {\n      tmpEl.removeChild(tmpEl.firstChild);\n    }\n\n    return firldChild;\n  };\n}();\n/**\n * Determines the width of a passed input based on its value and passes\n * it to the supplied callback function.\n */\n\nvar calcWidthOfInput = function calcWidthOfInput(input, callback) {\n  var value = input.value || input.placeholder;\n  var width = input.offsetWidth;\n\n  if (value) {\n    var testEl = strToEl(\"<span>\" + sanitise(value) + \"</span>\");\n    testEl.style.position = 'absolute';\n    testEl.style.padding = '0';\n    testEl.style.top = '-9999px';\n    testEl.style.left = '-9999px';\n    testEl.style.width = 'auto';\n    testEl.style.whiteSpace = 'pre';\n\n    if (document.body.contains(input) && window.getComputedStyle) {\n      var inputStyle = window.getComputedStyle(input);\n\n      if (inputStyle) {\n        testEl.style.fontSize = inputStyle.fontSize;\n        testEl.style.fontFamily = inputStyle.fontFamily;\n        testEl.style.fontWeight = inputStyle.fontWeight;\n        testEl.style.fontStyle = inputStyle.fontStyle;\n        testEl.style.letterSpacing = inputStyle.letterSpacing;\n        testEl.style.textTransform = inputStyle.textTransform;\n        testEl.style.paddingLeft = inputStyle.paddingLeft;\n        testEl.style.paddingRight = inputStyle.paddingRight;\n      }\n    }\n\n    document.body.appendChild(testEl);\n    requestAnimationFrame(function () {\n      if (value && testEl.offsetWidth !== input.offsetWidth) {\n        width = testEl.offsetWidth + 4;\n      }\n\n      document.body.removeChild(testEl);\n      callback.call(utils_this, width + \"px\");\n    });\n  } else {\n    callback.call(utils_this, width + \"px\");\n  }\n};\nvar sortByAlpha = function sortByAlpha(a, b) {\n  var labelA = (\"\" + (a.label || a.value)).toLowerCase();\n  var labelB = (\"\" + (b.label || b.value)).toLowerCase();\n\n  if (labelA < labelB) {\n    return -1;\n  }\n\n  if (labelA > labelB) {\n    return 1;\n  }\n\n  return 0;\n};\nvar sortByScore = function sortByScore(a, b) {\n  return a.score - b.score;\n};\nvar dispatchEvent = function dispatchEvent(element, type, customArgs) {\n  if (customArgs === void 0) {\n    customArgs = null;\n  }\n\n  var event = new CustomEvent(type, {\n    detail: customArgs,\n    bubbles: true,\n    cancelable: true\n  });\n  return element.dispatchEvent(event);\n};\nvar getWindowHeight = function getWindowHeight() {\n  var _document = document,\n      body = _document.body;\n  var html = document.documentElement;\n  return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n};\nvar fetchFromObject = function fetchFromObject(object, path) {\n  var index = path.indexOf('.');\n\n  if (index > -1) {\n    return fetchFromObject(object[path.substring(0, index)], path.substr(index + 1));\n  }\n\n  return object[path];\n};\nvar isIE11 = function isIE11() {\n  return !!(navigator.userAgent.match(/Trident/) && navigator.userAgent.match(/rv[ :]11/));\n};\nvar existsInArray = function existsInArray(array, value, key) {\n  if (key === void 0) {\n    key = 'value';\n  }\n\n  return array.some(function (item) {\n    if (isType('String', value)) {\n      return item[key] === value.trim();\n    }\n\n    return item[key] === value;\n  });\n};\nvar cloneObject = function cloneObject(obj) {\n  return JSON.parse(JSON.stringify(obj));\n};\nvar diff = function diff(a, b) {\n  var aKeys = Object.keys(a).sort();\n  var bKeys = Object.keys(b).sort();\n  return aKeys.filter(function (i) {\n    return bKeys.indexOf(i) < 0;\n  });\n};\n// CONCATENATED MODULE: ./src/scripts/reducers/index.js\n\n\n\n\n\n\nvar appReducer = combineReducers({\n  items: items_items,\n  groups: groups,\n  choices: choices_choices,\n  general: reducers_general\n});\n\nvar reducers_rootReducer = function rootReducer(passedState, action) {\n  var state = passedState; // If we are clearing all items, groups and options we reassign\n  // state and then pass that state to our proper reducer. This isn't\n  // mutating our actual state\n  // See: http://stackoverflow.com/a/35641992\n\n  if (action.type === 'CLEAR_ALL') {\n    state = undefined;\n  } else if (action.type === 'RESET_TO') {\n    return cloneObject(action.state);\n  }\n\n  return appReducer(state, action);\n};\n\n/* harmony default export */ var reducers = (reducers_rootReducer);\n// CONCATENATED MODULE: ./src/scripts/store/store.js\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar store_Store =\n/*#__PURE__*/\nfunction () {\n  function Store() {\n    this._store = createStore(reducers, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n  }\n  /**\n   * Subscribe store to function call (wrapped Redux method)\n   * @param  {Function} onChange Function to trigger when state changes\n   * @return\n   */\n\n\n  var _proto = Store.prototype;\n\n  _proto.subscribe = function subscribe(onChange) {\n    this._store.subscribe(onChange);\n  }\n  /**\n   * Dispatch event to store (wrapped Redux method)\n   * @param  {Function} action Action function to trigger\n   * @return\n   */\n  ;\n\n  _proto.dispatch = function dispatch(action) {\n    this._store.dispatch(action);\n  }\n  /**\n   * Get store object (wrapping Redux method)\n   * @return {Object} State\n   */\n  ;\n\n  /**\n   * Get loading state from store\n   * @return {Boolean} Loading State\n   */\n  _proto.isLoading = function isLoading() {\n    return this.state.general.loading;\n  }\n  /**\n   * Get single choice by it's ID\n   * @return {Object} Found choice\n   */\n  ;\n\n  _proto.getChoiceById = function getChoiceById(id) {\n    if (id) {\n      return this.activeChoices.find(function (choice) {\n        return choice.id === parseInt(id, 10);\n      });\n    }\n\n    return false;\n  }\n  /**\n   * Get group by group id\n   * @param  {Number} id Group ID\n   * @return {Object}    Group data\n   */\n  ;\n\n  _proto.getGroupById = function getGroupById(id) {\n    return this.groups.find(function (group) {\n      return group.id === parseInt(id, 10);\n    });\n  };\n\n  _createClass(Store, [{\n    key: \"state\",\n    get: function get() {\n      return this._store.getState();\n    }\n    /**\n     * Get items from store\n     * @return {Array} Item objects\n     */\n\n  }, {\n    key: \"items\",\n    get: function get() {\n      return this.state.items;\n    }\n    /**\n     * Get active items from store\n     * @return {Array} Item objects\n     */\n\n  }, {\n    key: \"activeItems\",\n    get: function get() {\n      return this.items.filter(function (item) {\n        return item.active === true;\n      });\n    }\n    /**\n     * Get highlighted items from store\n     * @return {Array} Item objects\n     */\n\n  }, {\n    key: \"highlightedActiveItems\",\n    get: function get() {\n      return this.items.filter(function (item) {\n        return item.active && item.highlighted;\n      });\n    }\n    /**\n     * Get choices from store\n     * @return {Array} Option objects\n     */\n\n  }, {\n    key: \"choices\",\n    get: function get() {\n      return this.state.choices;\n    }\n    /**\n     * Get active choices from store\n     * @return {Array} Option objects\n     */\n\n  }, {\n    key: \"activeChoices\",\n    get: function get() {\n      var choices = this.choices;\n      var values = choices.filter(function (choice) {\n        return choice.active === true;\n      });\n      return values;\n    }\n    /**\n     * Get selectable choices from store\n     * @return {Array} Option objects\n     */\n\n  }, {\n    key: \"selectableChoices\",\n    get: function get() {\n      return this.choices.filter(function (choice) {\n        return choice.disabled !== true;\n      });\n    }\n    /**\n     * Get choices that can be searched (excluding placeholders)\n     * @return {Array} Option objects\n     */\n\n  }, {\n    key: \"searchableChoices\",\n    get: function get() {\n      return this.selectableChoices.filter(function (choice) {\n        return choice.placeholder !== true;\n      });\n    }\n    /**\n     * Get placeholder choice from store\n     * @return {Object} Found placeholder\n     */\n\n  }, {\n    key: \"placeholderChoice\",\n    get: function get() {\n      return [].concat(this.choices).reverse().find(function (choice) {\n        return choice.placeholder === true;\n      });\n    }\n    /**\n     * Get groups from store\n     * @return {Array} Group objects\n     */\n\n  }, {\n    key: \"groups\",\n    get: function get() {\n      return this.state.groups;\n    }\n    /**\n     * Get active groups from store\n     * @return {Array} Group objects\n     */\n\n  }, {\n    key: \"activeGroups\",\n    get: function get() {\n      var groups = this.groups,\n          choices = this.choices;\n      return groups.filter(function (group) {\n        var isActive = group.active === true && group.disabled === false;\n        var hasActiveOptions = choices.some(function (choice) {\n          return choice.active === true && choice.disabled === false;\n        });\n        return isActive && hasActiveOptions;\n      }, []);\n    }\n  }]);\n\n  return Store;\n}();\n\n\n// CONCATENATED MODULE: ./src/scripts/components/dropdown.js\nvar Dropdown =\n/*#__PURE__*/\nfunction () {\n  function Dropdown(_ref) {\n    var element = _ref.element,\n        type = _ref.type,\n        classNames = _ref.classNames;\n    Object.assign(this, {\n      element: element,\n      type: type,\n      classNames: classNames\n    });\n    this.isActive = false;\n  }\n  /**\n   * Determine how far the top of our element is from\n   * the top of the window\n   * @return {Number} Vertical position\n   */\n\n\n  var _proto = Dropdown.prototype;\n\n  _proto.distanceFromTopWindow = function distanceFromTopWindow() {\n    this.dimensions = this.element.getBoundingClientRect();\n    this.position = Math.ceil(this.dimensions.top + window.pageYOffset + this.element.offsetHeight);\n    return this.position;\n  }\n  /**\n   * Find element that matches passed selector\n   * @return {HTMLElement}\n   */\n  ;\n\n  _proto.getChild = function getChild(selector) {\n    return this.element.querySelector(selector);\n  }\n  /**\n   * Show dropdown to user by adding active state class\n   * @return {Object} Class instance\n   * @public\n   */\n  ;\n\n  _proto.show = function show() {\n    this.element.classList.add(this.classNames.activeState);\n    this.element.setAttribute('aria-expanded', 'true');\n    this.isActive = true;\n    return this;\n  }\n  /**\n   * Hide dropdown from user\n   * @return {Object} Class instance\n   * @public\n   */\n  ;\n\n  _proto.hide = function hide() {\n    this.element.classList.remove(this.classNames.activeState);\n    this.element.setAttribute('aria-expanded', 'false');\n    this.isActive = false;\n    return this;\n  };\n\n  return Dropdown;\n}();\n\n\n// CONCATENATED MODULE: ./src/scripts/components/container.js\n\n\nvar container_Container =\n/*#__PURE__*/\nfunction () {\n  function Container(_ref) {\n    var element = _ref.element,\n        type = _ref.type,\n        classNames = _ref.classNames,\n        position = _ref.position;\n    Object.assign(this, {\n      element: element,\n      classNames: classNames,\n      type: type,\n      position: position\n    });\n    this.isOpen = false;\n    this.isFlipped = false;\n    this.isFocussed = false;\n    this.isDisabled = false;\n    this.isLoading = false;\n    this._onFocus = this._onFocus.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n  }\n  /**\n   * Add event listeners\n   */\n\n\n  var _proto = Container.prototype;\n\n  _proto.addEventListeners = function addEventListeners() {\n    this.element.addEventListener('focus', this._onFocus);\n    this.element.addEventListener('blur', this._onBlur);\n  }\n  /**\n   * Remove event listeners\n   */\n\n  /** */\n  ;\n\n  _proto.removeEventListeners = function removeEventListeners() {\n    this.element.removeEventListener('focus', this._onFocus);\n    this.element.removeEventListener('blur', this._onBlur);\n  }\n  /**\n   * Determine whether container should be flipped\n   * based on passed dropdown position\n   * @param {Number} dropdownPos\n   * @returns\n   */\n  ;\n\n  _proto.shouldFlip = function shouldFlip(dropdownPos, windowHeight) {\n    if (windowHeight === void 0) {\n      windowHeight = getWindowHeight();\n    }\n\n    if (dropdownPos === undefined) {\n      return false;\n    } // If flip is enabled and the dropdown bottom position is\n    // greater than the window height flip the dropdown.\n\n\n    var shouldFlip = false;\n\n    if (this.position === 'auto') {\n      shouldFlip = dropdownPos >= windowHeight;\n    } else if (this.position === 'top') {\n      shouldFlip = true;\n    }\n\n    return shouldFlip;\n  }\n  /**\n   * Set active descendant attribute\n   * @param {Number} activeDescendant ID of active descendant\n   */\n  ;\n\n  _proto.setActiveDescendant = function setActiveDescendant(activeDescendantID) {\n    this.element.setAttribute('aria-activedescendant', activeDescendantID);\n  }\n  /**\n   * Remove active descendant attribute\n   */\n  ;\n\n  _proto.removeActiveDescendant = function removeActiveDescendant() {\n    this.element.removeAttribute('aria-activedescendant');\n  };\n\n  _proto.open = function open(dropdownPos) {\n    this.element.classList.add(this.classNames.openState);\n    this.element.setAttribute('aria-expanded', 'true');\n    this.isOpen = true;\n\n    if (this.shouldFlip(dropdownPos)) {\n      this.element.classList.add(this.classNames.flippedState);\n      this.isFlipped = true;\n    }\n  };\n\n  _proto.close = function close() {\n    this.element.classList.remove(this.classNames.openState);\n    this.element.setAttribute('aria-expanded', 'false');\n    this.removeActiveDescendant();\n    this.isOpen = false; // A dropdown flips if it does not have space within the page\n\n    if (this.isFlipped) {\n      this.element.classList.remove(this.classNames.flippedState);\n      this.isFlipped = false;\n    }\n  };\n\n  _proto.focus = function focus() {\n    if (!this.isFocussed) {\n      this.element.focus();\n    }\n  };\n\n  _proto.addFocusState = function addFocusState() {\n    this.element.classList.add(this.classNames.focusState);\n  };\n\n  _proto.removeFocusState = function removeFocusState() {\n    this.element.classList.remove(this.classNames.focusState);\n  }\n  /**\n   * Remove disabled state\n   */\n  ;\n\n  _proto.enable = function enable() {\n    this.element.classList.remove(this.classNames.disabledState);\n    this.element.removeAttribute('aria-disabled');\n\n    if (this.type === 'select-one') {\n      this.element.setAttribute('tabindex', '0');\n    }\n\n    this.isDisabled = false;\n  }\n  /**\n   * Set disabled state\n   */\n  ;\n\n  _proto.disable = function disable() {\n    this.element.classList.add(this.classNames.disabledState);\n    this.element.setAttribute('aria-disabled', 'true');\n\n    if (this.type === 'select-one') {\n      this.element.setAttribute('tabindex', '-1');\n    }\n\n    this.isDisabled = true;\n  };\n\n  _proto.wrap = function wrap(element) {\n    utils_wrap(element, this.element);\n  };\n\n  _proto.unwrap = function unwrap(element) {\n    // Move passed element outside this element\n    this.element.parentNode.insertBefore(element, this.element); // Remove this element\n\n    this.element.parentNode.removeChild(this.element);\n  }\n  /**\n   * Add loading state to element\n   */\n  ;\n\n  _proto.addLoadingState = function addLoadingState() {\n    this.element.classList.add(this.classNames.loadingState);\n    this.element.setAttribute('aria-busy', 'true');\n    this.isLoading = true;\n  }\n  /**\n   * Remove loading state from element\n   */\n  ;\n\n  _proto.removeLoadingState = function removeLoadingState() {\n    this.element.classList.remove(this.classNames.loadingState);\n    this.element.removeAttribute('aria-busy');\n    this.isLoading = false;\n  }\n  /**\n   * Set focussed state\n   */\n  ;\n\n  _proto._onFocus = function _onFocus() {\n    this.isFocussed = true;\n  }\n  /**\n   * Remove blurred state\n   */\n  ;\n\n  _proto._onBlur = function _onBlur() {\n    this.isFocussed = false;\n  };\n\n  return Container;\n}();\n\n\n// CONCATENATED MODULE: ./src/scripts/components/input.js\nfunction input_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction input_createClass(Constructor, protoProps, staticProps) { if (protoProps) input_defineProperties(Constructor.prototype, protoProps); if (staticProps) input_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar input_Input =\n/*#__PURE__*/\nfunction () {\n  function Input(_ref) {\n    var element = _ref.element,\n        type = _ref.type,\n        classNames = _ref.classNames,\n        placeholderValue = _ref.placeholderValue;\n    Object.assign(this, {\n      element: element,\n      type: type,\n      classNames: classNames,\n      placeholderValue: placeholderValue\n    });\n    this.element = element;\n    this.classNames = classNames;\n    this.isFocussed = this.element === document.activeElement;\n    this.isDisabled = false;\n    this._onPaste = this._onPaste.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n  }\n\n  var _proto = Input.prototype;\n\n  _proto.addEventListeners = function addEventListeners() {\n    this.element.addEventListener('input', this._onInput);\n    this.element.addEventListener('paste', this._onPaste);\n    this.element.addEventListener('focus', this._onFocus);\n    this.element.addEventListener('blur', this._onBlur);\n\n    if (this.element.form) {\n      this.element.form.addEventListener('reset', this._onFormReset);\n    }\n  };\n\n  _proto.removeEventListeners = function removeEventListeners() {\n    this.element.removeEventListener('input', this._onInput);\n    this.element.removeEventListener('paste', this._onPaste);\n    this.element.removeEventListener('focus', this._onFocus);\n    this.element.removeEventListener('blur', this._onBlur);\n\n    if (this.element.form) {\n      this.element.form.removeEventListener('reset', this._onFormReset);\n    }\n  };\n\n  _proto.enable = function enable() {\n    this.element.removeAttribute('disabled');\n    this.isDisabled = false;\n  };\n\n  _proto.disable = function disable() {\n    this.element.setAttribute('disabled', '');\n    this.isDisabled = true;\n  };\n\n  _proto.focus = function focus() {\n    if (!this.isFocussed) {\n      this.element.focus();\n    }\n  };\n\n  _proto.blur = function blur() {\n    if (this.isFocussed) {\n      this.element.blur();\n    }\n  }\n  /**\n   * Set value of input to blank\n   * @return {Object} Class instance\n   * @public\n   */\n  ;\n\n  _proto.clear = function clear(setWidth) {\n    if (setWidth === void 0) {\n      setWidth = true;\n    }\n\n    if (this.element.value) {\n      this.element.value = '';\n    }\n\n    if (setWidth) {\n      this.setWidth();\n    }\n\n    return this;\n  }\n  /**\n   * Set the correct input width based on placeholder\n   * value or input value\n   * @return\n   */\n  ;\n\n  _proto.setWidth = function setWidth(enforceWidth) {\n    var _this = this;\n\n    var callback = function callback(width) {\n      _this.element.style.width = width;\n    };\n\n    if (this._placeholderValue) {\n      // If there is a placeholder, we only want to set the width of the input when it is a greater\n      // length than 75% of the placeholder. This stops the input jumping around.\n      var valueHasDesiredLength = this.element.value.length >= this._placeholderValue.length / 1.25;\n\n      if (this.element.value && valueHasDesiredLength || enforceWidth) {\n        this.calcWidth(callback);\n      }\n    } else {\n      // If there is no placeholder, resize input to contents\n      this.calcWidth(callback);\n    }\n  };\n\n  _proto.calcWidth = function calcWidth(callback) {\n    return calcWidthOfInput(this.element, callback);\n  };\n\n  _proto.setActiveDescendant = function setActiveDescendant(activeDescendantID) {\n    this.element.setAttribute('aria-activedescendant', activeDescendantID);\n  };\n\n  _proto.removeActiveDescendant = function removeActiveDescendant() {\n    this.element.removeAttribute('aria-activedescendant');\n  };\n\n  _proto._onInput = function _onInput() {\n    if (this.type !== 'select-one') {\n      this.setWidth();\n    }\n  };\n\n  _proto._onPaste = function _onPaste(event) {\n    var target = event.target;\n\n    if (target === this.element && this.preventPaste) {\n      event.preventDefault();\n    }\n  };\n\n  _proto._onFocus = function _onFocus() {\n    this.isFocussed = true;\n  };\n\n  _proto._onBlur = function _onBlur() {\n    this.isFocussed = false;\n  };\n\n  input_createClass(Input, [{\n    key: \"placeholder\",\n    set: function set(placeholder) {\n      this.element.placeholder = placeholder;\n    }\n  }, {\n    key: \"value\",\n    set: function set(value) {\n      this.element.value = value;\n    },\n    get: function get() {\n      return sanitise(this.element.value);\n    }\n  }]);\n\n  return Input;\n}();\n\n\n// CONCATENATED MODULE: ./src/scripts/constants.js\n\nvar DEFAULT_CLASSNAMES = {\n  containerOuter: 'choices',\n  containerInner: 'choices__inner',\n  input: 'choices__input',\n  inputCloned: 'choices__input--cloned',\n  list: 'choices__list',\n  listItems: 'choices__list--multiple',\n  listSingle: 'choices__list--single',\n  listDropdown: 'choices__list--dropdown',\n  item: 'choices__item',\n  itemSelectable: 'choices__item--selectable',\n  itemDisabled: 'choices__item--disabled',\n  itemChoice: 'choices__item--choice',\n  placeholder: 'choices__placeholder',\n  group: 'choices__group',\n  groupHeading: 'choices__heading',\n  button: 'choices__button',\n  activeState: 'is-active',\n  focusState: 'is-focused',\n  openState: 'is-open',\n  disabledState: 'is-disabled',\n  highlightedState: 'is-highlighted',\n  hiddenState: 'is-hidden',\n  flippedState: 'is-flipped',\n  loadingState: 'is-loading',\n  noResults: 'has-no-results',\n  noChoices: 'has-no-choices'\n};\nvar DEFAULT_CONFIG = {\n  items: [],\n  choices: [],\n  silent: false,\n  renderChoiceLimit: -1,\n  maxItemCount: -1,\n  addItems: true,\n  addItemFilterFn: null,\n  removeItems: true,\n  removeItemButton: false,\n  editItems: false,\n  duplicateItemsAllowed: true,\n  delimiter: ',',\n  paste: true,\n  searchEnabled: true,\n  searchChoices: true,\n  searchFloor: 1,\n  searchResultLimit: 4,\n  searchFields: ['label', 'value'],\n  position: 'auto',\n  resetScrollPosition: true,\n  shouldSort: true,\n  shouldSortItems: false,\n  sortFn: sortByAlpha,\n  placeholder: true,\n  placeholderValue: null,\n  searchPlaceholderValue: null,\n  prependValue: null,\n  appendValue: null,\n  renderSelectedChoices: 'auto',\n  loadingText: 'Loading...',\n  noResultsText: 'No results found',\n  noChoicesText: 'No choices to choose from',\n  itemSelectText: 'Press to select',\n  uniqueItemText: 'Only unique values can be added',\n  customAddItemText: 'Only values matching specific conditions can be added',\n  addItemText: function addItemText(value) {\n    return \"Press Enter to add <b>\\\"\" + sanitise(value) + \"\\\"</b>\";\n  },\n  maxItemText: function maxItemText(maxItemCount) {\n    return \"Only \" + maxItemCount + \" values can be added\";\n  },\n  itemComparer: function itemComparer(choice, item) {\n    return choice === item;\n  },\n  fuseOptions: {\n    includeScore: true\n  },\n  callbackOnInit: null,\n  callbackOnCreateTemplates: null,\n  classNames: DEFAULT_CLASSNAMES\n};\nvar EVENTS = {\n  showDropdown: 'showDropdown',\n  hideDropdown: 'hideDropdown',\n  change: 'change',\n  choice: 'choice',\n  search: 'search',\n  addItem: 'addItem',\n  removeItem: 'removeItem',\n  highlightItem: 'highlightItem',\n  highlightChoice: 'highlightChoice'\n};\nvar ACTION_TYPES = {\n  ADD_CHOICE: 'ADD_CHOICE',\n  FILTER_CHOICES: 'FILTER_CHOICES',\n  ACTIVATE_CHOICES: 'ACTIVATE_CHOICES',\n  CLEAR_CHOICES: 'CLEAR_CHOICES',\n  ADD_GROUP: 'ADD_GROUP',\n  ADD_ITEM: 'ADD_ITEM',\n  REMOVE_ITEM: 'REMOVE_ITEM',\n  HIGHLIGHT_ITEM: 'HIGHLIGHT_ITEM',\n  CLEAR_ALL: 'CLEAR_ALL'\n};\nvar KEY_CODES = {\n  BACK_KEY: 46,\n  DELETE_KEY: 8,\n  ENTER_KEY: 13,\n  A_KEY: 65,\n  ESC_KEY: 27,\n  UP_KEY: 38,\n  DOWN_KEY: 40,\n  PAGE_UP_KEY: 33,\n  PAGE_DOWN_KEY: 34\n};\nvar SCROLLING_SPEED = 4;\n// CONCATENATED MODULE: ./src/scripts/components/list.js\n\n\nvar list_List =\n/*#__PURE__*/\nfunction () {\n  function List(_ref) {\n    var element = _ref.element;\n    Object.assign(this, {\n      element: element\n    });\n    this.scrollPos = this.element.scrollTop;\n    this.height = this.element.offsetHeight;\n    this.hasChildren = !!this.element.children;\n  }\n\n  var _proto = List.prototype;\n\n  _proto.clear = function clear() {\n    this.element.innerHTML = '';\n  };\n\n  _proto.append = function append(node) {\n    this.element.appendChild(node);\n  };\n\n  _proto.getChild = function getChild(selector) {\n    return this.element.querySelector(selector);\n  };\n\n  _proto.scrollToTop = function scrollToTop() {\n    this.element.scrollTop = 0;\n  };\n\n  _proto.scrollToChoice = function scrollToChoice(choice, direction) {\n    var _this = this;\n\n    if (!choice) {\n      return;\n    }\n\n    var dropdownHeight = this.element.offsetHeight;\n    var choiceHeight = choice.offsetHeight; // Distance from bottom of element to top of parent\n\n    var choicePos = choice.offsetTop + choiceHeight; // Scroll position of dropdown\n\n    var containerScrollPos = this.element.scrollTop + dropdownHeight; // Difference between the choice and scroll position\n\n    var endpoint = direction > 0 ? this.element.scrollTop + choicePos - containerScrollPos : choice.offsetTop;\n    requestAnimationFrame(function (time) {\n      _this._animateScroll(time, endpoint, direction);\n    });\n  };\n\n  _proto._scrollDown = function _scrollDown(scrollPos, strength, endpoint) {\n    var easing = (endpoint - scrollPos) / strength;\n    var distance = easing > 1 ? easing : 1;\n    this.element.scrollTop = scrollPos + distance;\n  };\n\n  _proto._scrollUp = function _scrollUp(scrollPos, strength, endpoint) {\n    var easing = (scrollPos - endpoint) / strength;\n    var distance = easing > 1 ? easing : 1;\n    this.element.scrollTop = scrollPos - distance;\n  };\n\n  _proto._animateScroll = function _animateScroll(time, endpoint, direction) {\n    var _this2 = this;\n\n    var strength = SCROLLING_SPEED;\n    var choiceListScrollTop = this.element.scrollTop;\n    var continueAnimation = false;\n\n    if (direction > 0) {\n      this._scrollDown(choiceListScrollTop, strength, endpoint);\n\n      if (choiceListScrollTop < endpoint) {\n        continueAnimation = true;\n      }\n    } else {\n      this._scrollUp(choiceListScrollTop, strength, endpoint);\n\n      if (choiceListScrollTop > endpoint) {\n        continueAnimation = true;\n      }\n    }\n\n    if (continueAnimation) {\n      requestAnimationFrame(function () {\n        _this2._animateScroll(time, endpoint, direction);\n      });\n    }\n  };\n\n  return List;\n}();\n\n\n// CONCATENATED MODULE: ./src/scripts/components/wrapped-element.js\nfunction wrapped_element_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction wrapped_element_createClass(Constructor, protoProps, staticProps) { if (protoProps) wrapped_element_defineProperties(Constructor.prototype, protoProps); if (staticProps) wrapped_element_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar wrapped_element_WrappedElement =\n/*#__PURE__*/\nfunction () {\n  function WrappedElement(_ref) {\n    var element = _ref.element,\n        classNames = _ref.classNames;\n    Object.assign(this, {\n      element: element,\n      classNames: classNames\n    });\n\n    if (!isElement(element)) {\n      throw new TypeError('Invalid element passed');\n    }\n\n    this.isDisabled = false;\n  }\n\n  var _proto = WrappedElement.prototype;\n\n  _proto.conceal = function conceal() {\n    // Hide passed input\n    this.element.classList.add(this.classNames.input);\n    this.element.classList.add(this.classNames.hiddenState); // Remove element from tab index\n\n    this.element.tabIndex = '-1'; // Backup original styles if any\n\n    var origStyle = this.element.getAttribute('style');\n\n    if (origStyle) {\n      this.element.setAttribute('data-choice-orig-style', origStyle);\n    }\n\n    this.element.setAttribute('aria-hidden', 'true');\n    this.element.setAttribute('data-choice', 'active');\n  };\n\n  _proto.reveal = function reveal() {\n    // Reinstate passed element\n    this.element.classList.remove(this.classNames.input);\n    this.element.classList.remove(this.classNames.hiddenState);\n    this.element.removeAttribute('tabindex'); // Recover original styles if any\n\n    var origStyle = this.element.getAttribute('data-choice-orig-style');\n\n    if (origStyle) {\n      this.element.removeAttribute('data-choice-orig-style');\n      this.element.setAttribute('style', origStyle);\n    } else {\n      this.element.removeAttribute('style');\n    }\n\n    this.element.removeAttribute('aria-hidden');\n    this.element.removeAttribute('data-choice'); // Re-assign values - this is weird, I know\n\n    this.element.value = this.element.value;\n  };\n\n  _proto.enable = function enable() {\n    this.element.removeAttribute('disabled');\n    this.element.disabled = false;\n    this.isDisabled = false;\n  };\n\n  _proto.disable = function disable() {\n    this.element.setAttribute('disabled', '');\n    this.element.disabled = true;\n    this.isDisabled = true;\n  };\n\n  _proto.triggerEvent = function triggerEvent(eventType, data) {\n    dispatchEvent(this.element, eventType, data);\n  };\n\n  wrapped_element_createClass(WrappedElement, [{\n    key: \"value\",\n    get: function get() {\n      return this.element.value;\n    },\n    set: function set(value) {\n      // you must define setter here otherwise it will be readonly property\n      this.element.value = value;\n    }\n  }]);\n\n  return WrappedElement;\n}();\n\n\n// CONCATENATED MODULE: ./src/scripts/components/wrapped-input.js\nfunction wrapped_input_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction wrapped_input_createClass(Constructor, protoProps, staticProps) { if (protoProps) wrapped_input_defineProperties(Constructor.prototype, protoProps); if (staticProps) wrapped_input_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n\n\nvar WrappedInput =\n/*#__PURE__*/\nfunction (_WrappedElement) {\n  _inheritsLoose(WrappedInput, _WrappedElement);\n\n  function WrappedInput(_ref) {\n    var _this;\n\n    var element = _ref.element,\n        classNames = _ref.classNames,\n        delimiter = _ref.delimiter;\n    _this = _WrappedElement.call(this, {\n      element: element,\n      classNames: classNames\n    }) || this;\n    _this.delimiter = delimiter;\n    return _this;\n  }\n\n  wrapped_input_createClass(WrappedInput, [{\n    key: \"value\",\n    set: function set(items) {\n      var itemValues = items.map(function (_ref2) {\n        var value = _ref2.value;\n        return value;\n      });\n      var joinedValues = itemValues.join(this.delimiter);\n      this.element.setAttribute('value', joinedValues);\n      this.element.value = joinedValues;\n    },\n    get: function get() {\n      return this.element.value;\n    }\n  }]);\n\n  return WrappedInput;\n}(wrapped_element_WrappedElement);\n\n\n// CONCATENATED MODULE: ./src/scripts/components/wrapped-select.js\nfunction wrapped_select_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction wrapped_select_createClass(Constructor, protoProps, staticProps) { if (protoProps) wrapped_select_defineProperties(Constructor.prototype, protoProps); if (staticProps) wrapped_select_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction wrapped_select_inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n\n\nvar WrappedSelect =\n/*#__PURE__*/\nfunction (_WrappedElement) {\n  wrapped_select_inheritsLoose(WrappedSelect, _WrappedElement);\n\n  function WrappedSelect(_ref) {\n    var _this;\n\n    var element = _ref.element,\n        classNames = _ref.classNames,\n        template = _ref.template;\n    _this = _WrappedElement.call(this, {\n      element: element,\n      classNames: classNames\n    }) || this;\n    _this.template = template;\n    return _this;\n  }\n\n  var _proto = WrappedSelect.prototype;\n\n  _proto.appendDocFragment = function appendDocFragment(fragment) {\n    this.element.innerHTML = '';\n    this.element.appendChild(fragment);\n  };\n\n  wrapped_select_createClass(WrappedSelect, [{\n    key: \"placeholderOption\",\n    get: function get() {\n      return this.element.querySelector('option[value=\"\"]') || // Backward compatibility layer for the non-standard placeholder attribute supported in older versions.\n      this.element.querySelector('option[placeholder]');\n    }\n  }, {\n    key: \"optionGroups\",\n    get: function get() {\n      return Array.from(this.element.getElementsByTagName('OPTGROUP'));\n    }\n  }, {\n    key: \"options\",\n    get: function get() {\n      return Array.from(this.element.options);\n    },\n    set: function set(options) {\n      var _this2 = this;\n\n      var fragment = document.createDocumentFragment();\n\n      var addOptionToFragment = function addOptionToFragment(data) {\n        // Create a standard select option\n        var option = _this2.template(data); // Append it to fragment\n\n\n        fragment.appendChild(option);\n      }; // Add each list item to list\n\n\n      options.forEach(function (optionData) {\n        return addOptionToFragment(optionData);\n      });\n      this.appendDocFragment(fragment);\n    }\n  }]);\n\n  return WrappedSelect;\n}(wrapped_element_WrappedElement);\n\n\n// CONCATENATED MODULE: ./src/scripts/components/index.js\n\n\n\n\n\n\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(0);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// CONCATENATED MODULE: ./src/scripts/templates.js\n\n\nvar TEMPLATES = {\n  containerOuter: function containerOuter(globalClasses, direction, isSelectElement, isSelectOneElement, searchEnabled, passedElementType) {\n    var tabIndex = isSelectOneElement ? 'tabindex=\"0\"' : '';\n    var role = isSelectElement ? 'role=\"listbox\"' : '';\n    var ariaAutoComplete = '';\n\n    if (isSelectElement && searchEnabled) {\n      role = 'role=\"combobox\"';\n      ariaAutoComplete = 'aria-autocomplete=\"list\"';\n    }\n\n    return strToEl(\"\\n      <div\\n        class=\\\"\" + globalClasses.containerOuter + \"\\\"\\n        data-type=\\\"\" + passedElementType + \"\\\"\\n        \" + role + \"\\n        \" + tabIndex + \"\\n        \" + ariaAutoComplete + \"\\n        aria-haspopup=\\\"true\\\"\\n        aria-expanded=\\\"false\\\"\\n        dir=\\\"\" + direction + \"\\\"\\n        >\\n      </div>\\n    \");\n  },\n  containerInner: function containerInner(globalClasses) {\n    return strToEl(\"\\n      <div class=\\\"\" + globalClasses.containerInner + \"\\\"></div>\\n    \");\n  },\n  itemList: function itemList(globalClasses, isSelectOneElement) {\n    var _classNames;\n\n    var localClasses = classnames_default()(globalClasses.list, (_classNames = {}, _classNames[globalClasses.listSingle] = isSelectOneElement, _classNames[globalClasses.listItems] = !isSelectOneElement, _classNames));\n    return strToEl(\"\\n      <div class=\\\"\" + localClasses + \"\\\"></div>\\n    \");\n  },\n  placeholder: function placeholder(globalClasses, value) {\n    return strToEl(\"\\n      <div class=\\\"\" + globalClasses.placeholder + \"\\\">\\n        \" + value + \"\\n      </div>\\n    \");\n  },\n  item: function item(globalClasses, data, removeItemButton) {\n    var _classNames2;\n\n    var ariaSelected = data.active ? 'aria-selected=\"true\"' : '';\n    var ariaDisabled = data.disabled ? 'aria-disabled=\"true\"' : '';\n    var localClasses = classnames_default()(globalClasses.item, (_classNames2 = {}, _classNames2[globalClasses.highlightedState] = data.highlighted, _classNames2[globalClasses.itemSelectable] = !data.highlighted, _classNames2[globalClasses.placeholder] = data.placeholder, _classNames2));\n\n    if (removeItemButton) {\n      var _classNames3;\n\n      localClasses = classnames_default()(globalClasses.item, (_classNames3 = {}, _classNames3[globalClasses.highlightedState] = data.highlighted, _classNames3[globalClasses.itemSelectable] = !data.disabled, _classNames3[globalClasses.placeholder] = data.placeholder, _classNames3));\n      return strToEl(\"\\n        <div\\n          class=\\\"\" + localClasses + \"\\\"\\n          data-item\\n          data-id=\\\"\" + data.id + \"\\\"\\n          data-value=\\\"\" + data.value + \"\\\"\\n          data-custom-properties='\" + data.customProperties + \"'\\n          data-deletable\\n          \" + ariaSelected + \"\\n          \" + ariaDisabled + \"\\n          >\\n          \" + data.label + \"<!--\\n       --><button\\n            type=\\\"button\\\"\\n            class=\\\"\" + globalClasses.button + \"\\\"\\n            data-button\\n            aria-label=\\\"Remove item: '\" + data.value + \"'\\\"\\n            >\\n            Remove item\\n          </button>\\n        </div>\\n      \");\n    }\n\n    return strToEl(\"\\n      <div\\n        class=\\\"\" + localClasses + \"\\\"\\n        data-item\\n        data-id=\\\"\" + data.id + \"\\\"\\n        data-value=\\\"\" + data.value + \"\\\"\\n        \" + ariaSelected + \"\\n        \" + ariaDisabled + \"\\n        >\\n        \" + data.label + \"\\n      </div>\\n    \");\n  },\n  choiceList: function choiceList(globalClasses, isSelectOneElement) {\n    var ariaMultiSelectable = !isSelectOneElement ? 'aria-multiselectable=\"true\"' : '';\n    return strToEl(\"\\n      <div\\n        class=\\\"\" + globalClasses.list + \"\\\"\\n        dir=\\\"ltr\\\"\\n        role=\\\"listbox\\\"\\n        \" + ariaMultiSelectable + \"\\n        >\\n      </div>\\n    \");\n  },\n  choiceGroup: function choiceGroup(globalClasses, data) {\n    var _classNames4;\n\n    var ariaDisabled = data.disabled ? 'aria-disabled=\"true\"' : '';\n    var localClasses = classnames_default()(globalClasses.group, (_classNames4 = {}, _classNames4[globalClasses.itemDisabled] = data.disabled, _classNames4));\n    return strToEl(\"\\n      <div\\n        class=\\\"\" + localClasses + \"\\\"\\n        data-group\\n        data-id=\\\"\" + data.id + \"\\\"\\n        data-value=\\\"\" + data.value + \"\\\"\\n        role=\\\"group\\\"\\n        \" + ariaDisabled + \"\\n        >\\n        <div class=\\\"\" + globalClasses.groupHeading + \"\\\">\" + data.value + \"</div>\\n      </div>\\n    \");\n  },\n  choice: function choice(globalClasses, data, itemSelectText) {\n    var _classNames5;\n\n    var role = data.groupId > 0 ? 'role=\"treeitem\"' : 'role=\"option\"';\n    var localClasses = classnames_default()(globalClasses.item, globalClasses.itemChoice, (_classNames5 = {}, _classNames5[globalClasses.itemDisabled] = data.disabled, _classNames5[globalClasses.itemSelectable] = !data.disabled, _classNames5[globalClasses.placeholder] = data.placeholder, _classNames5));\n    return strToEl(\"\\n      <div\\n        class=\\\"\" + localClasses + \"\\\"\\n        data-select-text=\\\"\" + itemSelectText + \"\\\"\\n        data-choice\\n        data-id=\\\"\" + data.id + \"\\\"\\n        data-value=\\\"\" + data.value + \"\\\"\\n        \" + (data.disabled ? 'data-choice-disabled aria-disabled=\"true\"' : 'data-choice-selectable') + \"\\n        id=\\\"\" + data.elementId + \"\\\"\\n        \" + role + \"\\n        >\\n        \" + data.label + \"\\n      </div>\\n    \");\n  },\n  input: function input(globalClasses, placeholderValue) {\n    var localClasses = classnames_default()(globalClasses.input, globalClasses.inputCloned);\n    return strToEl(\"\\n      <input\\n        type=\\\"text\\\"\\n        class=\\\"\" + localClasses + \"\\\"\\n        autocomplete=\\\"off\\\"\\n        autocapitalize=\\\"off\\\"\\n        spellcheck=\\\"false\\\"\\n        role=\\\"textbox\\\"\\n        aria-autocomplete=\\\"list\\\"\\n        aria-label=\\\"\" + placeholderValue + \"\\\"\\n        >\\n    \");\n  },\n  dropdown: function dropdown(globalClasses) {\n    var localClasses = classnames_default()(globalClasses.list, globalClasses.listDropdown);\n    return strToEl(\"\\n      <div\\n        class=\\\"\" + localClasses + \"\\\"\\n        aria-expanded=\\\"false\\\"\\n        >\\n      </div>\\n    \");\n  },\n  notice: function notice(globalClasses, label, type) {\n    var _classNames6;\n\n    if (type === void 0) {\n      type = '';\n    }\n\n    var localClasses = classnames_default()(globalClasses.item, globalClasses.itemChoice, (_classNames6 = {}, _classNames6[globalClasses.noResults] = type === 'no-results', _classNames6[globalClasses.noChoices] = type === 'no-choices', _classNames6));\n    return strToEl(\"\\n      <div class=\\\"\" + localClasses + \"\\\">\\n        \" + label + \"\\n      </div>\\n    \");\n  },\n  option: function option(data) {\n    return strToEl(\"\\n      <option value=\\\"\" + data.value + \"\\\" \" + (data.active ? 'selected' : '') + \" \" + (data.disabled ? 'disabled' : '') + \" \" + (data.customProperties ? \"data-custom-properties=\" + data.customProperties : '') + \">\" + data.label + \"</option>\\n    \");\n  }\n};\n/* harmony default export */ var templates = (TEMPLATES);\n// CONCATENATED MODULE: ./src/scripts/actions/choices.js\n\nvar choices_addChoice = function addChoice(_ref) {\n  var value = _ref.value,\n      label = _ref.label,\n      id = _ref.id,\n      groupId = _ref.groupId,\n      disabled = _ref.disabled,\n      elementId = _ref.elementId,\n      customProperties = _ref.customProperties,\n      placeholder = _ref.placeholder,\n      keyCode = _ref.keyCode;\n  return {\n    type: ACTION_TYPES.ADD_CHOICE,\n    value: value,\n    label: label,\n    id: id,\n    groupId: groupId,\n    disabled: disabled,\n    elementId: elementId,\n    customProperties: customProperties,\n    placeholder: placeholder,\n    keyCode: keyCode\n  };\n};\nvar choices_filterChoices = function filterChoices(results) {\n  return {\n    type: ACTION_TYPES.FILTER_CHOICES,\n    results: results\n  };\n};\nvar choices_activateChoices = function activateChoices(active) {\n  if (active === void 0) {\n    active = true;\n  }\n\n  return {\n    type: ACTION_TYPES.ACTIVATE_CHOICES,\n    active: active\n  };\n};\nvar choices_clearChoices = function clearChoices() {\n  return {\n    type: ACTION_TYPES.CLEAR_CHOICES\n  };\n};\n// CONCATENATED MODULE: ./src/scripts/actions/items.js\n\nvar items_addItem = function addItem(_ref) {\n  var value = _ref.value,\n      label = _ref.label,\n      id = _ref.id,\n      choiceId = _ref.choiceId,\n      groupId = _ref.groupId,\n      customProperties = _ref.customProperties,\n      placeholder = _ref.placeholder,\n      keyCode = _ref.keyCode;\n  return {\n    type: ACTION_TYPES.ADD_ITEM,\n    value: value,\n    label: label,\n    id: id,\n    choiceId: choiceId,\n    groupId: groupId,\n    customProperties: customProperties,\n    placeholder: placeholder,\n    keyCode: keyCode\n  };\n};\nvar items_removeItem = function removeItem(id, choiceId) {\n  return {\n    type: ACTION_TYPES.REMOVE_ITEM,\n    id: id,\n    choiceId: choiceId\n  };\n};\nvar items_highlightItem = function highlightItem(id, highlighted) {\n  return {\n    type: ACTION_TYPES.HIGHLIGHT_ITEM,\n    id: id,\n    highlighted: highlighted\n  };\n};\n// CONCATENATED MODULE: ./src/scripts/actions/groups.js\n\n/* eslint-disable import/prefer-default-export */\n\nvar groups_addGroup = function addGroup(value, id, active, disabled) {\n  return {\n    type: ACTION_TYPES.ADD_GROUP,\n    value: value,\n    id: id,\n    active: active,\n    disabled: disabled\n  };\n};\n// CONCATENATED MODULE: ./src/scripts/actions/misc.js\nvar clearAll = function clearAll() {\n  return {\n    type: 'CLEAR_ALL'\n  };\n};\nvar resetTo = function resetTo(state) {\n  return {\n    type: 'RESET_TO',\n    state: state\n  };\n};\n// CONCATENATED MODULE: ./src/scripts/actions/general.js\n/* eslint-disable import/prefer-default-export */\nvar setIsLoading = function setIsLoading(isLoading) {\n  return {\n    type: 'SET_IS_LOADING',\n    isLoading: isLoading\n  };\n};\n// CONCATENATED MODULE: ./src/scripts/choices.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Choices\n * @author Josh Johnson<josh@joshuajohnson.co.uk>\n */\n\nvar choices_Choices =\n/*#__PURE__*/\nfunction () {\n  function Choices(element, userConfig) {\n    var _this = this;\n\n    if (element === void 0) {\n      element = '[data-choice]';\n    }\n\n    if (userConfig === void 0) {\n      userConfig = {};\n    }\n\n    if (isType('String', element)) {\n      var elements = Array.from(document.querySelectorAll(element)); // If there are multiple elements, create a new instance\n      // for each element besides the first one (as that already has an instance)\n\n      if (elements.length > 1) {\n        return this._generateInstances(elements, userConfig);\n      }\n    }\n\n    this.config = cjs_default.a.all([DEFAULT_CONFIG, Choices.userDefaults, userConfig], // When merging array configs, replace with a copy of the userConfig array,\n    // instead of concatenating with the default array\n    {\n      arrayMerge: function arrayMerge(destinationArray, sourceArray) {\n        return [].concat(sourceArray);\n      }\n    });\n    var invalidConfigOptions = diff(this.config, DEFAULT_CONFIG);\n\n    if (invalidConfigOptions.length) {\n      console.warn('Unknown config option(s) passed', invalidConfigOptions.join(', '));\n    }\n\n    if (!['auto', 'always'].includes(this.config.renderSelectedChoices)) {\n      this.config.renderSelectedChoices = 'auto';\n    } // Retrieve triggering element (i.e. element with 'data-choice' trigger)\n\n\n    var passedElement = isType('String', element) ? document.querySelector(element) : element;\n\n    if (!passedElement) {\n      if (!this.config.silent) {\n        console.error('Could not find passed element or passed element was of an invalid type');\n      }\n\n      return;\n    }\n\n    this._isTextElement = passedElement.type === 'text';\n    this._isSelectOneElement = passedElement.type === 'select-one';\n    this._isSelectMultipleElement = passedElement.type === 'select-multiple';\n    this._isSelectElement = this._isSelectOneElement || this._isSelectMultipleElement;\n\n    if (this._isTextElement) {\n      this.passedElement = new WrappedInput({\n        element: passedElement,\n        classNames: this.config.classNames,\n        delimiter: this.config.delimiter\n      });\n    } else if (this._isSelectElement) {\n      this.passedElement = new WrappedSelect({\n        element: passedElement,\n        classNames: this.config.classNames,\n        template: function template(data) {\n          return _this.config.templates.option(data);\n        }\n      });\n    }\n\n    if (!this.passedElement) {\n      return console.error('Passed element was of an invalid type');\n    }\n\n    this.initialised = false;\n    this._store = new store_Store(this.render);\n    this._initialState = {};\n    this._currentState = {};\n    this._prevState = {};\n    this._currentValue = '';\n    this._canSearch = this.config.searchEnabled;\n    this._isScrollingOnIe = false;\n    this._highlightPosition = 0;\n    this._wasTap = true;\n    this._placeholderValue = this._generatePlaceholderValue();\n    this._baseId = generateId(this.passedElement.element, 'choices-');\n    this._direction = this.passedElement.element.getAttribute('dir') || 'ltr';\n    this._idNames = {\n      itemChoice: 'item-choice'\n    }; // Assign preset choices from passed object\n\n    this._presetChoices = this.config.choices; // Assign preset items from passed object first\n\n    this._presetItems = this.config.items; // Then add any values passed from attribute\n\n    if (this.passedElement.value) {\n      this._presetItems = this._presetItems.concat(this.passedElement.value.split(this.config.delimiter));\n    }\n\n    this._render = this._render.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n    this._onKeyUp = this._onKeyUp.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this._onTouchMove = this._onTouchMove.bind(this);\n    this._onTouchEnd = this._onTouchEnd.bind(this);\n    this._onMouseDown = this._onMouseDown.bind(this);\n    this._onMouseOver = this._onMouseOver.bind(this);\n    this._onFormReset = this._onFormReset.bind(this);\n    this._onAKey = this._onAKey.bind(this);\n    this._onEnterKey = this._onEnterKey.bind(this);\n    this._onEscapeKey = this._onEscapeKey.bind(this);\n    this._onDirectionKey = this._onDirectionKey.bind(this);\n    this._onDeleteKey = this._onDeleteKey.bind(this);\n\n    if (!this.config.silent) {\n      if (this.config.shouldSortItems === true && this._isSelectOneElement) {\n        console.warn(\"shouldSortElements: Type of passed element is 'select-one', falling back to false.\");\n      } // If element has already been initialised with Choices, fail silently\n\n\n      if (this.passedElement.element.getAttribute('data-choice') === 'active') {\n        console.warn('Trying to initialise Choices on element already initialised');\n      }\n    } // Let's go\n\n\n    this.init();\n  }\n  /* ========================================\n  =            Public functions            =\n  ======================================== */\n\n\n  var _proto = Choices.prototype;\n\n  _proto.init = function init() {\n    if (this.initialised) {\n      return;\n    }\n\n    this._createTemplates();\n\n    this._createElements();\n\n    this._createStructure(); // Set initial state (We need to clone the state because some reducers\n    // modify the inner objects properties in the state) \n\n\n    this._initialState = cloneObject(this._store.state);\n\n    this._store.subscribe(this._render);\n\n    this._render();\n\n    this._addEventListeners();\n\n    var shouldDisable = !this.config.addItems || this.passedElement.element.hasAttribute('disabled');\n\n    if (shouldDisable) {\n      this.disable();\n    }\n\n    this.initialised = true;\n    var callbackOnInit = this.config.callbackOnInit; // Run callback if it is a function\n\n    if (callbackOnInit && isType('Function', callbackOnInit)) {\n      callbackOnInit.call(this);\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    if (!this.initialised) {\n      return;\n    }\n\n    this._removeEventListeners();\n\n    this.passedElement.reveal();\n    this.containerOuter.unwrap(this.passedElement.element);\n\n    if (this._isSelectElement) {\n      this.passedElement.options = this._presetChoices;\n    }\n\n    this.clearStore();\n    this.config.templates = null;\n    this.initialised = false;\n  };\n\n  _proto.enable = function enable() {\n    if (this.passedElement.isDisabled) {\n      this.passedElement.enable();\n    }\n\n    if (this.containerOuter.isDisabled) {\n      this._addEventListeners();\n\n      this.input.enable();\n      this.containerOuter.enable();\n    }\n\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this.passedElement.isDisabled) {\n      this.passedElement.disable();\n    }\n\n    if (!this.containerOuter.isDisabled) {\n      this._removeEventListeners();\n\n      this.input.disable();\n      this.containerOuter.disable();\n    }\n\n    return this;\n  };\n\n  _proto.highlightItem = function highlightItem(item, runEvent) {\n    if (runEvent === void 0) {\n      runEvent = true;\n    }\n\n    if (!item) {\n      return this;\n    }\n\n    var id = item.id,\n        _item$groupId = item.groupId,\n        groupId = _item$groupId === void 0 ? -1 : _item$groupId,\n        _item$value = item.value,\n        value = _item$value === void 0 ? '' : _item$value,\n        _item$label = item.label,\n        label = _item$label === void 0 ? '' : _item$label;\n    var group = groupId >= 0 ? this._store.getGroupById(groupId) : null;\n\n    this._store.dispatch(items_highlightItem(id, true));\n\n    if (runEvent) {\n      this.passedElement.triggerEvent(EVENTS.highlightItem, {\n        id: id,\n        value: value,\n        label: label,\n        groupValue: group && group.value ? group.value : null\n      });\n    }\n\n    return this;\n  };\n\n  _proto.unhighlightItem = function unhighlightItem(item) {\n    if (!item) {\n      return this;\n    }\n\n    var id = item.id,\n        _item$groupId2 = item.groupId,\n        groupId = _item$groupId2 === void 0 ? -1 : _item$groupId2,\n        _item$value2 = item.value,\n        value = _item$value2 === void 0 ? '' : _item$value2,\n        _item$label2 = item.label,\n        label = _item$label2 === void 0 ? '' : _item$label2;\n    var group = groupId >= 0 ? this._store.getGroupById(groupId) : null;\n\n    this._store.dispatch(items_highlightItem(id, false));\n\n    this.passedElement.triggerEvent(EVENTS.highlightItem, {\n      id: id,\n      value: value,\n      label: label,\n      groupValue: group && group.value ? group.value : null\n    });\n    return this;\n  };\n\n  _proto.highlightAll = function highlightAll() {\n    var _this2 = this;\n\n    this._store.items.forEach(function (item) {\n      return _this2.highlightItem(item);\n    });\n\n    return this;\n  };\n\n  _proto.unhighlightAll = function unhighlightAll() {\n    var _this3 = this;\n\n    this._store.items.forEach(function (item) {\n      return _this3.unhighlightItem(item);\n    });\n\n    return this;\n  };\n\n  _proto.removeActiveItemsByValue = function removeActiveItemsByValue(value) {\n    var _this4 = this;\n\n    this._store.activeItems.filter(function (item) {\n      return item.value === value;\n    }).forEach(function (item) {\n      return _this4._removeItem(item);\n    });\n\n    return this;\n  };\n\n  _proto.removeActiveItems = function removeActiveItems(excludedId) {\n    var _this5 = this;\n\n    this._store.activeItems.filter(function (_ref) {\n      var id = _ref.id;\n      return id !== excludedId;\n    }).forEach(function (item) {\n      return _this5._removeItem(item);\n    });\n\n    return this;\n  };\n\n  _proto.removeHighlightedItems = function removeHighlightedItems(runEvent) {\n    var _this6 = this;\n\n    if (runEvent === void 0) {\n      runEvent = false;\n    }\n\n    this._store.highlightedActiveItems.forEach(function (item) {\n      _this6._removeItem(item); // If this action was performed by the user\n      // trigger the event\n\n\n      if (runEvent) {\n        _this6._triggerChange(item.value);\n      }\n    });\n\n    return this;\n  };\n\n  _proto.showDropdown = function showDropdown(preventInputFocus) {\n    var _this7 = this;\n\n    if (this.dropdown.isActive) {\n      return this;\n    }\n\n    requestAnimationFrame(function () {\n      _this7.dropdown.show();\n\n      _this7.containerOuter.open(_this7.dropdown.distanceFromTopWindow());\n\n      if (!preventInputFocus && _this7._canSearch) {\n        _this7.input.focus();\n      }\n\n      _this7.passedElement.triggerEvent(EVENTS.showDropdown, {});\n    });\n    return this;\n  };\n\n  _proto.hideDropdown = function hideDropdown(preventInputBlur) {\n    var _this8 = this;\n\n    if (!this.dropdown.isActive) {\n      return this;\n    }\n\n    requestAnimationFrame(function () {\n      _this8.dropdown.hide();\n\n      _this8.containerOuter.close();\n\n      if (!preventInputBlur && _this8._canSearch) {\n        _this8.input.removeActiveDescendant();\n\n        _this8.input.blur();\n      }\n\n      _this8.passedElement.triggerEvent(EVENTS.hideDropdown, {});\n    });\n    return this;\n  };\n\n  _proto.getValue = function getValue(valueOnly) {\n    if (valueOnly === void 0) {\n      valueOnly = false;\n    }\n\n    var values = this._store.activeItems.reduce(function (selectedItems, item) {\n      var itemValue = valueOnly ? item.value : item;\n      selectedItems.push(itemValue);\n      return selectedItems;\n    }, []);\n\n    return this._isSelectOneElement ? values[0] : values;\n  };\n\n  _proto.setValue = function setValue(args) {\n    var _this9 = this;\n\n    if (!this.initialised) {\n      return this;\n    }\n\n    [].concat(args).forEach(function (value) {\n      return _this9._setChoiceOrItem(value);\n    });\n    return this;\n  };\n\n  _proto.setChoiceByValue = function setChoiceByValue(value) {\n    var _this10 = this;\n\n    if (!this.initialised || this._isTextElement) {\n      return this;\n    } // If only one value has been passed, convert to array\n\n\n    var choiceValue = isType('Array', value) ? value : [value]; // Loop through each value and\n\n    choiceValue.forEach(function (val) {\n      return _this10._findAndSelectChoiceByValue(val);\n    });\n    return this;\n  };\n\n  _proto.setChoices = function setChoices(choices, value, label, replaceChoices) {\n    var _this11 = this;\n\n    if (choices === void 0) {\n      choices = [];\n    }\n\n    if (value === void 0) {\n      value = '';\n    }\n\n    if (label === void 0) {\n      label = '';\n    }\n\n    if (replaceChoices === void 0) {\n      replaceChoices = false;\n    }\n\n    if (!this._isSelectElement || !value) {\n      return this;\n    } // Clear choices if needed\n\n\n    if (replaceChoices) {\n      this.clearChoices();\n    }\n\n    this.containerOuter.removeLoadingState();\n\n    var addGroupsAndChoices = function addGroupsAndChoices(groupOrChoice) {\n      if (groupOrChoice.choices) {\n        _this11._addGroup({\n          group: groupOrChoice,\n          id: groupOrChoice.id || null,\n          valueKey: value,\n          labelKey: label\n        });\n      } else {\n        _this11._addChoice({\n          value: groupOrChoice[value],\n          label: groupOrChoice[label],\n          isSelected: groupOrChoice.selected,\n          isDisabled: groupOrChoice.disabled,\n          customProperties: groupOrChoice.customProperties,\n          placeholder: groupOrChoice.placeholder\n        });\n      }\n    };\n\n    this._setLoading(true);\n\n    choices.forEach(addGroupsAndChoices);\n\n    this._setLoading(false);\n\n    return this;\n  };\n\n  _proto.clearChoices = function clearChoices() {\n    this._store.dispatch(choices_clearChoices());\n  };\n\n  _proto.clearStore = function clearStore() {\n    this._store.dispatch(clearAll());\n\n    return this;\n  };\n\n  _proto.clearInput = function clearInput() {\n    var shouldSetInputWidth = !this._isSelectOneElement;\n    this.input.clear(shouldSetInputWidth);\n\n    if (!this._isTextElement && this._canSearch) {\n      this._isSearching = false;\n\n      this._store.dispatch(choices_activateChoices(true));\n    }\n\n    return this;\n  };\n\n  _proto.ajax = function ajax(fn) {\n    var _this12 = this;\n\n    if (!this.initialised || !this._isSelectElement || !fn) {\n      return this;\n    }\n\n    requestAnimationFrame(function () {\n      return _this12._handleLoadingState(true);\n    });\n    fn(this._ajaxCallback());\n    return this;\n  }\n  /* =====  End of Public functions  ====== */\n\n  /* =============================================\n  =                Private functions            =\n  ============================================= */\n  ;\n\n  _proto._render = function _render() {\n    if (this._store.isLoading()) {\n      return;\n    }\n\n    this._currentState = this._store.state;\n    var stateChanged = this._currentState.choices !== this._prevState.choices || this._currentState.groups !== this._prevState.groups || this._currentState.items !== this._prevState.items;\n    var shouldRenderChoices = this._isSelectElement;\n    var shouldRenderItems = this._currentState.items !== this._prevState.items;\n\n    if (!stateChanged) {\n      return;\n    }\n\n    if (shouldRenderChoices) {\n      this._renderChoices();\n    }\n\n    if (shouldRenderItems) {\n      this._renderItems();\n    }\n\n    this._prevState = this._currentState;\n  };\n\n  _proto._renderChoices = function _renderChoices() {\n    var _this13 = this;\n\n    var _this$_store = this._store,\n        activeGroups = _this$_store.activeGroups,\n        activeChoices = _this$_store.activeChoices;\n    var choiceListFragment = document.createDocumentFragment();\n    this.choiceList.clear();\n\n    if (this.config.resetScrollPosition) {\n      requestAnimationFrame(function () {\n        return _this13.choiceList.scrollToTop();\n      });\n    } // If we have grouped options\n\n\n    if (activeGroups.length >= 1 && !this._isSearching) {\n      // If we have a placeholder choice along with groups\n      var activePlaceholders = activeChoices.filter(function (activeChoice) {\n        return activeChoice.placeholder === true && activeChoice.groupId === -1;\n      });\n\n      if (activePlaceholders.length >= 1) {\n        choiceListFragment = this._createChoicesFragment(activePlaceholders, choiceListFragment);\n      }\n\n      choiceListFragment = this._createGroupsFragment(activeGroups, activeChoices, choiceListFragment);\n    } else if (activeChoices.length >= 1) {\n      choiceListFragment = this._createChoicesFragment(activeChoices, choiceListFragment);\n    } // If we have choices to show\n\n\n    if (choiceListFragment.childNodes && choiceListFragment.childNodes.length > 0) {\n      var activeItems = this._store.activeItems;\n\n      var canAddItem = this._canAddItem(activeItems, this.input.value); // ...and we can select them\n\n\n      if (canAddItem.response) {\n        // ...append them and highlight the first choice\n        this.choiceList.append(choiceListFragment);\n\n        this._highlightChoice();\n      } else {\n        // ...otherwise show a notice\n        this.choiceList.append(this._getTemplate('notice', canAddItem.notice));\n      }\n    } else {\n      // Otherwise show a notice\n      var dropdownItem;\n      var notice;\n\n      if (this._isSearching) {\n        notice = isType('Function', this.config.noResultsText) ? this.config.noResultsText() : this.config.noResultsText;\n        dropdownItem = this._getTemplate('notice', notice, 'no-results');\n      } else {\n        notice = isType('Function', this.config.noChoicesText) ? this.config.noChoicesText() : this.config.noChoicesText;\n        dropdownItem = this._getTemplate('notice', notice, 'no-choices');\n      }\n\n      this.choiceList.append(dropdownItem);\n    }\n  };\n\n  _proto._renderItems = function _renderItems() {\n    var activeItems = this._store.activeItems || [];\n    this.itemList.clear(); // Create a fragment to store our list items\n    // (so we don't have to update the DOM for each item)\n\n    var itemListFragment = this._createItemsFragment(activeItems); // If we have items to add, append them\n\n\n    if (itemListFragment.childNodes) {\n      this.itemList.append(itemListFragment);\n    }\n  };\n\n  _proto._createGroupsFragment = function _createGroupsFragment(groups, choices, fragment) {\n    var _this14 = this;\n\n    var groupFragment = fragment || document.createDocumentFragment();\n\n    var getGroupChoices = function getGroupChoices(group) {\n      return choices.filter(function (choice) {\n        if (_this14._isSelectOneElement) {\n          return choice.groupId === group.id;\n        }\n\n        return choice.groupId === group.id && (_this14.config.renderSelectedChoices === 'always' || !choice.selected);\n      });\n    }; // If sorting is enabled, filter groups\n\n\n    if (this.config.shouldSort) {\n      groups.sort(this.config.sortFn);\n    }\n\n    groups.forEach(function (group) {\n      var groupChoices = getGroupChoices(group);\n\n      if (groupChoices.length >= 1) {\n        var dropdownGroup = _this14._getTemplate('choiceGroup', group);\n\n        groupFragment.appendChild(dropdownGroup);\n\n        _this14._createChoicesFragment(groupChoices, groupFragment, true);\n      }\n    });\n    return groupFragment;\n  };\n\n  _proto._createChoicesFragment = function _createChoicesFragment(choices, fragment, withinGroup) {\n    var _this15 = this;\n\n    if (withinGroup === void 0) {\n      withinGroup = false;\n    }\n\n    // Create a fragment to store our list items (so we don't have to update the DOM for each item)\n    var choicesFragment = fragment || document.createDocumentFragment();\n    var _this$config = this.config,\n        renderSelectedChoices = _this$config.renderSelectedChoices,\n        searchResultLimit = _this$config.searchResultLimit,\n        renderChoiceLimit = _this$config.renderChoiceLimit;\n    var filter = this._isSearching ? sortByScore : this.config.sortFn;\n\n    var appendChoice = function appendChoice(choice) {\n      var shouldRender = renderSelectedChoices === 'auto' ? _this15._isSelectOneElement || !choice.selected : true;\n\n      if (shouldRender) {\n        var dropdownItem = _this15._getTemplate('choice', choice, _this15.config.itemSelectText);\n\n        choicesFragment.appendChild(dropdownItem);\n      }\n    };\n\n    var rendererableChoices = choices;\n\n    if (renderSelectedChoices === 'auto' && !this._isSelectOneElement) {\n      rendererableChoices = choices.filter(function (choice) {\n        return !choice.selected;\n      });\n    } // Split array into placeholders and \"normal\" choices\n\n\n    var _rendererableChoices$ = rendererableChoices.reduce(function (acc, choice) {\n      if (choice.placeholder) {\n        acc.placeholderChoices.push(choice);\n      } else {\n        acc.normalChoices.push(choice);\n      }\n\n      return acc;\n    }, {\n      placeholderChoices: [],\n      normalChoices: []\n    }),\n        placeholderChoices = _rendererableChoices$.placeholderChoices,\n        normalChoices = _rendererableChoices$.normalChoices; // If sorting is enabled or the user is searching, filter choices\n\n\n    if (this.config.shouldSort || this._isSearching) {\n      normalChoices.sort(filter);\n    }\n\n    var choiceLimit = rendererableChoices.length; // Prepend placeholeder\n\n    var sortedChoices = [].concat(placeholderChoices, normalChoices);\n\n    if (this._isSearching) {\n      choiceLimit = searchResultLimit;\n    } else if (renderChoiceLimit > 0 && !withinGroup) {\n      choiceLimit = renderChoiceLimit;\n    } // Add each choice to dropdown within range\n\n\n    for (var i = 0; i < choiceLimit; i += 1) {\n      if (sortedChoices[i]) {\n        appendChoice(sortedChoices[i]);\n      }\n    }\n\n    return choicesFragment;\n  };\n\n  _proto._createItemsFragment = function _createItemsFragment(items, fragment) {\n    var _this16 = this;\n\n    if (fragment === void 0) {\n      fragment = null;\n    }\n\n    // Create fragment to add elements to\n    var _this$config2 = this.config,\n        shouldSortItems = _this$config2.shouldSortItems,\n        sortFn = _this$config2.sortFn,\n        removeItemButton = _this$config2.removeItemButton;\n    var itemListFragment = fragment || document.createDocumentFragment(); // If sorting is enabled, filter items\n\n    if (shouldSortItems && !this._isSelectOneElement) {\n      items.sort(sortFn);\n    }\n\n    if (this._isTextElement) {\n      // Update the value of the hidden input\n      this.passedElement.value = items;\n    } else {\n      // Update the options of the hidden input\n      this.passedElement.options = items;\n    }\n\n    var addItemToFragment = function addItemToFragment(item) {\n      // Create new list element\n      var listItem = _this16._getTemplate('item', item, removeItemButton); // Append it to list\n\n\n      itemListFragment.appendChild(listItem);\n    }; // Add each list item to list\n\n\n    items.forEach(function (item) {\n      return addItemToFragment(item);\n    });\n    return itemListFragment;\n  };\n\n  _proto._triggerChange = function _triggerChange(value) {\n    if (value === undefined || value === null) {\n      return;\n    }\n\n    this.passedElement.triggerEvent(EVENTS.change, {\n      value: value\n    });\n  };\n\n  _proto._selectPlaceholderChoice = function _selectPlaceholderChoice() {\n    var placeholderChoice = this._store.placeholderChoice;\n\n    if (placeholderChoice) {\n      this._addItem({\n        value: placeholderChoice.value,\n        label: placeholderChoice.label,\n        choiceId: placeholderChoice.id,\n        groupId: placeholderChoice.groupId,\n        placeholder: placeholderChoice.placeholder\n      });\n\n      this._triggerChange(placeholderChoice.value);\n    }\n  };\n\n  _proto._handleButtonAction = function _handleButtonAction(activeItems, element) {\n    if (!activeItems || !element || !this.config.removeItems || !this.config.removeItemButton) {\n      return;\n    }\n\n    var itemId = element.parentNode.getAttribute('data-id');\n    var itemToRemove = activeItems.find(function (item) {\n      return item.id === parseInt(itemId, 10);\n    }); // Remove item associated with button\n\n    this._removeItem(itemToRemove);\n\n    this._triggerChange(itemToRemove.value);\n\n    if (this._isSelectOneElement) {\n      this._selectPlaceholderChoice();\n    }\n  };\n\n  _proto._handleItemAction = function _handleItemAction(activeItems, element, hasShiftKey) {\n    var _this17 = this;\n\n    if (hasShiftKey === void 0) {\n      hasShiftKey = false;\n    }\n\n    if (!activeItems || !element || !this.config.removeItems || this._isSelectOneElement) {\n      return;\n    }\n\n    var passedId = element.getAttribute('data-id'); // We only want to select one item with a click\n    // so we deselect any items that aren't the target\n    // unless shift is being pressed\n\n    activeItems.forEach(function (item) {\n      if (item.id === parseInt(passedId, 10) && !item.highlighted) {\n        _this17.highlightItem(item);\n      } else if (!hasShiftKey && item.highlighted) {\n        _this17.unhighlightItem(item);\n      }\n    }); // Focus input as without focus, a user cannot do anything with a\n    // highlighted item\n\n    this.input.focus();\n  };\n\n  _proto._handleChoiceAction = function _handleChoiceAction(activeItems, element) {\n    if (!activeItems || !element) {\n      return;\n    } // If we are clicking on an option\n\n\n    var id = element.getAttribute('data-id');\n\n    var choice = this._store.getChoiceById(id);\n\n    var passedKeyCode = activeItems[0] && activeItems[0].keyCode ? activeItems[0].keyCode : null;\n    var hasActiveDropdown = this.dropdown.isActive; // Update choice keyCode\n\n    choice.keyCode = passedKeyCode;\n    this.passedElement.triggerEvent(EVENTS.choice, {\n      choice: choice\n    });\n\n    if (choice && !choice.selected && !choice.disabled) {\n      var canAddItem = this._canAddItem(activeItems, choice.value);\n\n      if (canAddItem.response) {\n        this._addItem({\n          value: choice.value,\n          label: choice.label,\n          choiceId: choice.id,\n          groupId: choice.groupId,\n          customProperties: choice.customProperties,\n          placeholder: choice.placeholder,\n          keyCode: choice.keyCode\n        });\n\n        this._triggerChange(choice.value);\n      }\n    }\n\n    this.clearInput(); // We wont to close the dropdown if we are dealing with a single select box\n\n    if (hasActiveDropdown && this._isSelectOneElement) {\n      this.hideDropdown(true);\n      this.containerOuter.focus();\n    }\n  };\n\n  _proto._handleBackspace = function _handleBackspace(activeItems) {\n    if (!this.config.removeItems || !activeItems) {\n      return;\n    }\n\n    var lastItem = activeItems[activeItems.length - 1];\n    var hasHighlightedItems = activeItems.some(function (item) {\n      return item.highlighted;\n    }); // If editing the last item is allowed and there are not other selected items,\n    // we can edit the item value. Otherwise if we can remove items, remove all selected items\n\n    if (this.config.editItems && !hasHighlightedItems && lastItem) {\n      this.input.value = lastItem.value;\n      this.input.setWidth();\n\n      this._removeItem(lastItem);\n\n      this._triggerChange(lastItem.value);\n    } else {\n      if (!hasHighlightedItems) {\n        // Highlight last item if none already highlighted\n        this.highlightItem(lastItem, false);\n      }\n\n      this.removeHighlightedItems(true);\n    }\n  };\n\n  _proto._setLoading = function _setLoading(isLoading) {\n    this._store.dispatch(setIsLoading(isLoading));\n  };\n\n  _proto._handleLoadingState = function _handleLoadingState(setLoading) {\n    if (setLoading === void 0) {\n      setLoading = true;\n    }\n\n    var placeholderItem = this.itemList.getChild(\".\" + this.config.classNames.placeholder);\n\n    if (setLoading) {\n      this.disable();\n      this.containerOuter.addLoadingState();\n\n      if (this._isSelectOneElement) {\n        if (!placeholderItem) {\n          placeholderItem = this._getTemplate('placeholder', this.config.loadingText);\n          this.itemList.append(placeholderItem);\n        } else {\n          placeholderItem.innerHTML = this.config.loadingText;\n        }\n      } else {\n        this.input.placeholder = this.config.loadingText;\n      }\n    } else {\n      this.enable();\n      this.containerOuter.removeLoadingState();\n\n      if (this._isSelectOneElement) {\n        placeholderItem.innerHTML = this._placeholderValue || '';\n      } else {\n        this.input.placeholder = this._placeholderValue || '';\n      }\n    }\n  };\n\n  _proto._handleSearch = function _handleSearch(value) {\n    if (!value || !this.input.isFocussed) {\n      return;\n    }\n\n    var choices = this._store.choices;\n    var _this$config3 = this.config,\n        searchFloor = _this$config3.searchFloor,\n        searchChoices = _this$config3.searchChoices;\n    var hasUnactiveChoices = choices.some(function (option) {\n      return !option.active;\n    }); // Check that we have a value to search and the input was an alphanumeric character\n\n    if (value && value.length >= searchFloor) {\n      var resultCount = searchChoices ? this._searchChoices(value) : 0; // Trigger search event\n\n      this.passedElement.triggerEvent(EVENTS.search, {\n        value: value,\n        resultCount: resultCount\n      });\n    } else if (hasUnactiveChoices) {\n      // Otherwise reset choices to active\n      this._isSearching = false;\n\n      this._store.dispatch(choices_activateChoices(true));\n    }\n  };\n\n  _proto._canAddItem = function _canAddItem(activeItems, value) {\n    var canAddItem = true;\n    var notice = isType('Function', this.config.addItemText) ? this.config.addItemText(value) : this.config.addItemText;\n\n    if (!this._isSelectOneElement) {\n      var isDuplicateValue = existsInArray(activeItems, value);\n\n      if (this.config.maxItemCount > 0 && this.config.maxItemCount <= activeItems.length) {\n        // If there is a max entry limit and we have reached that limit\n        // don't update\n        canAddItem = false;\n        notice = isType('Function', this.config.maxItemText) ? this.config.maxItemText(this.config.maxItemCount) : this.config.maxItemText;\n      }\n\n      if (!this.config.duplicateItemsAllowed && isDuplicateValue && canAddItem) {\n        canAddItem = false;\n        notice = isType('Function', this.config.uniqueItemText) ? this.config.uniqueItemText(value) : this.config.uniqueItemText;\n      }\n\n      if (this._isTextElement && this.config.addItems && canAddItem && isType('Function', this.config.addItemFilterFn) && !this.config.addItemFilterFn(value)) {\n        canAddItem = false;\n        notice = isType('Function', this.config.customAddItemText) ? this.config.customAddItemText(value) : this.config.customAddItemText;\n      }\n    }\n\n    return {\n      response: canAddItem,\n      notice: notice\n    };\n  };\n\n  _proto._ajaxCallback = function _ajaxCallback() {\n    var _this18 = this;\n\n    return function (results, value, label) {\n      if (!results || !value) {\n        return;\n      }\n\n      var parsedResults = isType('Object', results) ? [results] : results;\n\n      if (parsedResults && isType('Array', parsedResults) && parsedResults.length) {\n        // Remove loading states/text\n        _this18._handleLoadingState(false);\n\n        _this18._setLoading(true); // Add each result as a choice\n\n\n        parsedResults.forEach(function (result) {\n          if (result.choices) {\n            _this18._addGroup({\n              group: result,\n              id: result.id || null,\n              valueKey: value,\n              labelKey: label\n            });\n          } else {\n            _this18._addChoice({\n              value: fetchFromObject(result, value),\n              label: fetchFromObject(result, label),\n              isSelected: result.selected,\n              isDisabled: result.disabled,\n              customProperties: result.customProperties,\n              placeholder: result.placeholder\n            });\n          }\n        });\n\n        _this18._setLoading(false);\n\n        if (_this18._isSelectOneElement) {\n          _this18._selectPlaceholderChoice();\n        }\n      } else {\n        // No results, remove loading state\n        _this18._handleLoadingState(false);\n      }\n    };\n  };\n\n  _proto._searchChoices = function _searchChoices(value) {\n    var newValue = isType('String', value) ? value.trim() : value;\n    var currentValue = isType('String', this._currentValue) ? this._currentValue.trim() : this._currentValue;\n\n    if (newValue.length < 1 && newValue === currentValue + \" \") {\n      return 0;\n    } // If new value matches the desired length and is not the same as the current value with a space\n\n\n    var haystack = this._store.searchableChoices;\n    var needle = newValue;\n    var keys = [].concat(this.config.searchFields);\n    var options = Object.assign(this.config.fuseOptions, {\n      keys: keys\n    });\n    var fuse = new fuse_default.a(haystack, options);\n    var results = fuse.search(needle);\n    this._currentValue = newValue;\n    this._highlightPosition = 0;\n    this._isSearching = true;\n\n    this._store.dispatch(choices_filterChoices(results));\n\n    return results.length;\n  };\n\n  _proto._addEventListeners = function _addEventListeners() {\n    window.delegateEvent.add('keyup', this._onKeyUp);\n    window.delegateEvent.add('keydown', this._onKeyDown);\n    window.delegateEvent.add('click', this._onClick);\n    window.delegateEvent.add('touchmove', this._onTouchMove);\n    window.delegateEvent.add('touchend', this._onTouchEnd);\n    window.delegateEvent.add('mousedown', this._onMouseDown);\n    window.delegateEvent.add('mouseover', this._onMouseOver);\n\n    if (this._isSelectOneElement) {\n      this.containerOuter.element.addEventListener('focus', this._onFocus);\n      this.containerOuter.element.addEventListener('blur', this._onBlur);\n    }\n\n    this.input.element.addEventListener('focus', this._onFocus);\n    this.input.element.addEventListener('blur', this._onBlur);\n\n    if (this.input.element.form) {\n      this.input.element.form.addEventListener('reset', this._onFormReset);\n    }\n\n    this.input.addEventListeners();\n  };\n\n  _proto._removeEventListeners = function _removeEventListeners() {\n    window.delegateEvent.remove('keyup', this._onKeyUp);\n    window.delegateEvent.remove('keydown', this._onKeyDown);\n    window.delegateEvent.remove('click', this._onClick);\n    window.delegateEvent.remove('touchmove', this._onTouchMove);\n    window.delegateEvent.remove('touchend', this._onTouchEnd);\n    window.delegateEvent.remove('mousedown', this._onMouseDown);\n    window.delegateEvent.remove('mouseover', this._onMouseOver);\n\n    if (this._isSelectOneElement) {\n      this.containerOuter.element.removeEventListener('focus', this._onFocus);\n      this.containerOuter.element.removeEventListener('blur', this._onBlur);\n    }\n\n    this.input.element.removeEventListener('focus', this._onFocus);\n    this.input.element.removeEventListener('blur', this._onBlur);\n\n    if (this.input.element.form) {\n      this.input.element.form.removeEventListener('reset', this._onFormReset);\n    }\n\n    this.input.removeEventListeners();\n  };\n\n  _proto._onKeyDown = function _onKeyDown(event) {\n    var _keyDownActions;\n\n    var target = event.target,\n        keyCode = event.keyCode,\n        ctrlKey = event.ctrlKey,\n        metaKey = event.metaKey;\n\n    if (target !== this.input.element && !this.containerOuter.element.contains(target)) {\n      return;\n    }\n\n    var activeItems = this._store.activeItems;\n    var hasFocusedInput = this.input.isFocussed;\n    var hasActiveDropdown = this.dropdown.isActive;\n    var hasItems = this.itemList.hasChildren;\n    var keyString = String.fromCharCode(keyCode);\n    var BACK_KEY = KEY_CODES.BACK_KEY,\n        DELETE_KEY = KEY_CODES.DELETE_KEY,\n        ENTER_KEY = KEY_CODES.ENTER_KEY,\n        A_KEY = KEY_CODES.A_KEY,\n        ESC_KEY = KEY_CODES.ESC_KEY,\n        UP_KEY = KEY_CODES.UP_KEY,\n        DOWN_KEY = KEY_CODES.DOWN_KEY,\n        PAGE_UP_KEY = KEY_CODES.PAGE_UP_KEY,\n        PAGE_DOWN_KEY = KEY_CODES.PAGE_DOWN_KEY;\n    var hasCtrlDownKeyPressed = ctrlKey || metaKey; // If a user is typing and the dropdown is not active\n\n    if (!this._isTextElement && /[a-zA-Z0-9-_ ]/.test(keyString)) {\n      this.showDropdown();\n    } // Map keys to key actions\n\n\n    var keyDownActions = (_keyDownActions = {}, _keyDownActions[A_KEY] = this._onAKey, _keyDownActions[ENTER_KEY] = this._onEnterKey, _keyDownActions[ESC_KEY] = this._onEscapeKey, _keyDownActions[UP_KEY] = this._onDirectionKey, _keyDownActions[PAGE_UP_KEY] = this._onDirectionKey, _keyDownActions[DOWN_KEY] = this._onDirectionKey, _keyDownActions[PAGE_DOWN_KEY] = this._onDirectionKey, _keyDownActions[DELETE_KEY] = this._onDeleteKey, _keyDownActions[BACK_KEY] = this._onDeleteKey, _keyDownActions); // If keycode has a function, run it\n\n    if (keyDownActions[keyCode]) {\n      keyDownActions[keyCode]({\n        event: event,\n        target: target,\n        keyCode: keyCode,\n        metaKey: metaKey,\n        activeItems: activeItems,\n        hasFocusedInput: hasFocusedInput,\n        hasActiveDropdown: hasActiveDropdown,\n        hasItems: hasItems,\n        hasCtrlDownKeyPressed: hasCtrlDownKeyPressed\n      });\n    }\n  };\n\n  _proto._onKeyUp = function _onKeyUp(_ref2) {\n    var target = _ref2.target,\n        keyCode = _ref2.keyCode;\n\n    if (target !== this.input.element) {\n      return;\n    }\n\n    var value = this.input.value;\n    var activeItems = this._store.activeItems;\n\n    var canAddItem = this._canAddItem(activeItems, value);\n\n    var backKey = KEY_CODES.BACK_KEY,\n        deleteKey = KEY_CODES.DELETE_KEY; // We are typing into a text input and have a value, we want to show a dropdown\n    // notice. Otherwise hide the dropdown\n\n    if (this._isTextElement) {\n      var canShowDropdownNotice = canAddItem.notice && value;\n\n      if (canShowDropdownNotice) {\n        var dropdownItem = this._getTemplate('notice', canAddItem.notice);\n\n        this.dropdown.element.innerHTML = dropdownItem.outerHTML;\n        this.showDropdown(true);\n      } else {\n        this.hideDropdown(true);\n      }\n    } else {\n      var userHasRemovedValue = (keyCode === backKey || keyCode === deleteKey) && !target.value;\n      var canReactivateChoices = !this._isTextElement && this._isSearching;\n      var canSearch = this._canSearch && canAddItem.response;\n\n      if (userHasRemovedValue && canReactivateChoices) {\n        this._isSearching = false;\n\n        this._store.dispatch(choices_activateChoices(true));\n      } else if (canSearch) {\n        this._handleSearch(this.input.value);\n      }\n    }\n\n    this._canSearch = this.config.searchEnabled;\n  };\n\n  _proto._onAKey = function _onAKey(_ref3) {\n    var hasItems = _ref3.hasItems,\n        hasCtrlDownKeyPressed = _ref3.hasCtrlDownKeyPressed;\n\n    // If CTRL + A or CMD + A have been pressed and there are items to select\n    if (hasCtrlDownKeyPressed && hasItems) {\n      this._canSearch = false;\n      var shouldHightlightAll = this.config.removeItems && !this.input.value && this.input.element === document.activeElement;\n\n      if (shouldHightlightAll) {\n        this.highlightAll();\n      }\n    }\n  };\n\n  _proto._onEnterKey = function _onEnterKey(_ref4) {\n    var event = _ref4.event,\n        target = _ref4.target,\n        activeItems = _ref4.activeItems,\n        hasActiveDropdown = _ref4.hasActiveDropdown;\n    var enterKey = KEY_CODES.ENTER_KEY;\n    var targetWasButton = target.hasAttribute('data-button');\n\n    if (this._isTextElement && target.value) {\n      var value = this.input.value;\n\n      var canAddItem = this._canAddItem(activeItems, value);\n\n      if (canAddItem.response) {\n        this.hideDropdown(true);\n\n        this._addItem({\n          value: value\n        });\n\n        this._triggerChange(value);\n\n        this.clearInput();\n      }\n    }\n\n    if (targetWasButton) {\n      this._handleButtonAction(activeItems, target);\n\n      event.preventDefault();\n    }\n\n    if (hasActiveDropdown) {\n      var highlightedChoice = this.dropdown.getChild(\".\" + this.config.classNames.highlightedState);\n\n      if (highlightedChoice) {\n        // add enter keyCode value\n        if (activeItems[0]) {\n          activeItems[0].keyCode = enterKey; // eslint-disable-line no-param-reassign\n        }\n\n        this._handleChoiceAction(activeItems, highlightedChoice);\n      }\n\n      event.preventDefault();\n    } else if (this._isSelectOneElement) {\n      this.showDropdown();\n      event.preventDefault();\n    }\n  };\n\n  _proto._onEscapeKey = function _onEscapeKey(_ref5) {\n    var hasActiveDropdown = _ref5.hasActiveDropdown;\n\n    if (hasActiveDropdown) {\n      this.hideDropdown(true);\n      this.containerOuter.focus();\n    }\n  };\n\n  _proto._onDirectionKey = function _onDirectionKey(_ref6) {\n    var event = _ref6.event,\n        hasActiveDropdown = _ref6.hasActiveDropdown,\n        keyCode = _ref6.keyCode,\n        metaKey = _ref6.metaKey;\n    var downKey = KEY_CODES.DOWN_KEY,\n        pageUpKey = KEY_CODES.PAGE_UP_KEY,\n        pageDownKey = KEY_CODES.PAGE_DOWN_KEY; // If up or down key is pressed, traverse through options\n\n    if (hasActiveDropdown || this._isSelectOneElement) {\n      this.showDropdown();\n      this._canSearch = false;\n      var directionInt = keyCode === downKey || keyCode === pageDownKey ? 1 : -1;\n      var skipKey = metaKey || keyCode === pageDownKey || keyCode === pageUpKey;\n      var selectableChoiceIdentifier = '[data-choice-selectable]';\n      var nextEl;\n\n      if (skipKey) {\n        if (directionInt > 0) {\n          nextEl = Array.from(this.dropdown.element.querySelectorAll(selectableChoiceIdentifier)).pop();\n        } else {\n          nextEl = this.dropdown.element.querySelector(selectableChoiceIdentifier);\n        }\n      } else {\n        var currentEl = this.dropdown.element.querySelector(\".\" + this.config.classNames.highlightedState);\n\n        if (currentEl) {\n          nextEl = getAdjacentEl(currentEl, selectableChoiceIdentifier, directionInt);\n        } else {\n          nextEl = this.dropdown.element.querySelector(selectableChoiceIdentifier);\n        }\n      }\n\n      if (nextEl) {\n        // We prevent default to stop the cursor moving\n        // when pressing the arrow\n        if (!isScrolledIntoView(nextEl, this.choiceList.element, directionInt)) {\n          this.choiceList.scrollToChoice(nextEl, directionInt);\n        }\n\n        this._highlightChoice(nextEl);\n      } // Prevent default to maintain cursor position whilst\n      // traversing dropdown options\n\n\n      event.preventDefault();\n    }\n  };\n\n  _proto._onDeleteKey = function _onDeleteKey(_ref7) {\n    var event = _ref7.event,\n        target = _ref7.target,\n        hasFocusedInput = _ref7.hasFocusedInput,\n        activeItems = _ref7.activeItems;\n\n    // If backspace or delete key is pressed and the input has no value\n    if (hasFocusedInput && !target.value && !this._isSelectOneElement) {\n      this._handleBackspace(activeItems);\n\n      event.preventDefault();\n    }\n  };\n\n  _proto._onTouchMove = function _onTouchMove() {\n    if (this._wasTap) {\n      this._wasTap = false;\n    }\n  };\n\n  _proto._onTouchEnd = function _onTouchEnd(event) {\n    var _ref8 = event || event.touches[0],\n        target = _ref8.target;\n\n    var touchWasWithinContainer = this._wasTap && this.containerOuter.element.contains(target);\n\n    if (touchWasWithinContainer) {\n      var containerWasExactTarget = target === this.containerOuter.element || target === this.containerInner.element;\n\n      if (containerWasExactTarget) {\n        if (this._isTextElement) {\n          this.input.focus();\n        } else if (this._isSelectMultipleElement) {\n          this.showDropdown();\n        }\n      } // Prevents focus event firing\n\n\n      event.stopPropagation();\n    }\n\n    this._wasTap = true;\n  };\n\n  _proto._onMouseDown = function _onMouseDown(event) {\n    var target = event.target,\n        shiftKey = event.shiftKey; // If we have our mouse down on the scrollbar and are on IE11...\n\n    if (this.choiceList.element.contains(target) && isIE11()) {\n      this._isScrollingOnIe = true;\n    }\n\n    if (!this.containerOuter.element.contains(target) || target === this.input.element) {\n      return;\n    }\n\n    var activeItems = this._store.activeItems;\n    var hasShiftKey = shiftKey;\n    var buttonTarget = findAncestorByAttrName(target, 'data-button');\n    var itemTarget = findAncestorByAttrName(target, 'data-item');\n    var choiceTarget = findAncestorByAttrName(target, 'data-choice');\n\n    if (buttonTarget) {\n      this._handleButtonAction(activeItems, buttonTarget);\n    } else if (itemTarget) {\n      this._handleItemAction(activeItems, itemTarget, hasShiftKey);\n    } else if (choiceTarget) {\n      this._handleChoiceAction(activeItems, choiceTarget);\n    }\n\n    event.preventDefault();\n  };\n\n  _proto._onMouseOver = function _onMouseOver(_ref9) {\n    var target = _ref9.target;\n    var targetWithinDropdown = target === this.dropdown || this.dropdown.element.contains(target);\n    var shouldHighlightChoice = targetWithinDropdown && target.hasAttribute('data-choice');\n\n    if (shouldHighlightChoice) {\n      this._highlightChoice(target);\n    }\n  };\n\n  _proto._onClick = function _onClick(_ref10) {\n    var target = _ref10.target;\n    var clickWasWithinContainer = this.containerOuter.element.contains(target);\n\n    if (clickWasWithinContainer) {\n      if (!this.dropdown.isActive && !this.containerOuter.isDisabled) {\n        if (this._isTextElement) {\n          if (document.activeElement !== this.input.element) {\n            this.input.focus();\n          }\n        } else {\n          this.showDropdown();\n          this.containerOuter.focus();\n        }\n      } else if (this._isSelectOneElement && target !== this.input.element && !this.dropdown.element.contains(target)) {\n        this.hideDropdown();\n      }\n    } else {\n      var hasHighlightedItems = this._store.highlightedActiveItems.length > 0;\n\n      if (hasHighlightedItems) {\n        this.unhighlightAll();\n      }\n\n      this.containerOuter.removeFocusState();\n      this.hideDropdown(true);\n    }\n  };\n\n  _proto._onFocus = function _onFocus(_ref11) {\n    var _this19 = this;\n\n    var target = _ref11.target;\n    var focusWasWithinContainer = this.containerOuter.element.contains(target);\n\n    if (!focusWasWithinContainer) {\n      return;\n    }\n\n    var focusActions = {\n      text: function text() {\n        if (target === _this19.input.element) {\n          _this19.containerOuter.addFocusState();\n        }\n      },\n      'select-one': function selectOne() {\n        _this19.containerOuter.addFocusState();\n\n        if (target === _this19.input.element) {\n          _this19.showDropdown(true);\n        }\n      },\n      'select-multiple': function selectMultiple() {\n        if (target === _this19.input.element) {\n          _this19.showDropdown(true); // If element is a select box, the focused element is the container and the dropdown\n          // isn't already open, focus and show dropdown\n\n\n          _this19.containerOuter.addFocusState();\n        }\n      }\n    };\n    focusActions[this.passedElement.element.type]();\n  };\n\n  _proto._onBlur = function _onBlur(_ref12) {\n    var _this20 = this;\n\n    var target = _ref12.target;\n    var blurWasWithinContainer = this.containerOuter.element.contains(target);\n\n    if (blurWasWithinContainer && !this._isScrollingOnIe) {\n      var activeItems = this._store.activeItems;\n      var hasHighlightedItems = activeItems.some(function (item) {\n        return item.highlighted;\n      });\n      var blurActions = {\n        text: function text() {\n          if (target === _this20.input.element) {\n            _this20.containerOuter.removeFocusState();\n\n            if (hasHighlightedItems) {\n              _this20.unhighlightAll();\n            }\n\n            _this20.hideDropdown(true);\n          }\n        },\n        'select-one': function selectOne() {\n          _this20.containerOuter.removeFocusState();\n\n          if (target === _this20.input.element || target === _this20.containerOuter.element && !_this20._canSearch) {\n            _this20.hideDropdown(true);\n          }\n        },\n        'select-multiple': function selectMultiple() {\n          if (target === _this20.input.element) {\n            _this20.containerOuter.removeFocusState();\n\n            _this20.hideDropdown(true);\n\n            if (hasHighlightedItems) {\n              _this20.unhighlightAll();\n            }\n          }\n        }\n      };\n      blurActions[this.passedElement.element.type]();\n    } else {\n      // On IE11, clicking the scollbar blurs our input and thus\n      // closes the dropdown. To stop this, we refocus our input\n      // if we know we are on IE *and* are scrolling.\n      this._isScrollingOnIe = false;\n      this.input.element.focus();\n    }\n  };\n\n  _proto._onFormReset = function _onFormReset() {\n    this._store.dispatch(resetTo(this._initialState));\n  };\n\n  _proto._highlightChoice = function _highlightChoice(el) {\n    var _this21 = this;\n\n    if (el === void 0) {\n      el = null;\n    }\n\n    var choices = Array.from(this.dropdown.element.querySelectorAll('[data-choice-selectable]'));\n\n    if (!choices.length) {\n      return;\n    }\n\n    var passedEl = el;\n    var highlightedChoices = Array.from(this.dropdown.element.querySelectorAll(\".\" + this.config.classNames.highlightedState)); // Remove any highlighted choices\n\n    highlightedChoices.forEach(function (choice) {\n      choice.classList.remove(_this21.config.classNames.highlightedState);\n      choice.setAttribute('aria-selected', 'false');\n    });\n\n    if (passedEl) {\n      this._highlightPosition = choices.indexOf(passedEl);\n    } else {\n      // Highlight choice based on last known highlight location\n      if (choices.length > this._highlightPosition) {\n        // If we have an option to highlight\n        passedEl = choices[this._highlightPosition];\n      } else {\n        // Otherwise highlight the option before\n        passedEl = choices[choices.length - 1];\n      }\n\n      if (!passedEl) {\n        passedEl = choices[0];\n      }\n    }\n\n    passedEl.classList.add(this.config.classNames.highlightedState);\n    passedEl.setAttribute('aria-selected', 'true');\n    this.passedElement.triggerEvent(EVENTS.highlightChoice, {\n      el: passedEl\n    });\n\n    if (this.dropdown.isActive) {\n      // IE11 ignores aria-label and blocks virtual keyboard\n      // if aria-activedescendant is set without a dropdown\n      this.input.setActiveDescendant(passedEl.id);\n      this.containerOuter.setActiveDescendant(passedEl.id);\n    }\n  };\n\n  _proto._addItem = function _addItem(_ref13) {\n    var value = _ref13.value,\n        _ref13$label = _ref13.label,\n        label = _ref13$label === void 0 ? null : _ref13$label,\n        _ref13$choiceId = _ref13.choiceId,\n        choiceId = _ref13$choiceId === void 0 ? -1 : _ref13$choiceId,\n        _ref13$groupId = _ref13.groupId,\n        groupId = _ref13$groupId === void 0 ? -1 : _ref13$groupId,\n        _ref13$customProperti = _ref13.customProperties,\n        customProperties = _ref13$customProperti === void 0 ? null : _ref13$customProperti,\n        _ref13$placeholder = _ref13.placeholder,\n        placeholder = _ref13$placeholder === void 0 ? false : _ref13$placeholder,\n        _ref13$keyCode = _ref13.keyCode,\n        keyCode = _ref13$keyCode === void 0 ? null : _ref13$keyCode;\n    var passedValue = isType('String', value) ? value.trim() : value;\n    var passedKeyCode = keyCode;\n    var passedCustomProperties = customProperties;\n    var items = this._store.items;\n    var passedLabel = label || passedValue;\n    var passedOptionId = parseInt(choiceId, 10) || -1;\n    var group = groupId >= 0 ? this._store.getGroupById(groupId) : null;\n    var id = items ? items.length + 1 : 1; // If a prepended value has been passed, prepend it\n\n    if (this.config.prependValue) {\n      passedValue = this.config.prependValue + passedValue.toString();\n    } // If an appended value has been passed, append it\n\n\n    if (this.config.appendValue) {\n      passedValue += this.config.appendValue.toString();\n    }\n\n    this._store.dispatch(items_addItem({\n      value: passedValue,\n      label: passedLabel,\n      id: id,\n      choiceId: passedOptionId,\n      groupId: groupId,\n      customProperties: customProperties,\n      placeholder: placeholder,\n      keyCode: passedKeyCode\n    }));\n\n    if (this._isSelectOneElement) {\n      this.removeActiveItems(id);\n    } // Trigger change event\n\n\n    this.passedElement.triggerEvent(EVENTS.addItem, {\n      id: id,\n      value: passedValue,\n      label: passedLabel,\n      customProperties: passedCustomProperties,\n      groupValue: group && group.value ? group.value : undefined,\n      keyCode: passedKeyCode\n    });\n    return this;\n  };\n\n  _proto._removeItem = function _removeItem(item) {\n    if (!item || !isType('Object', item)) {\n      return this;\n    }\n\n    var id = item.id,\n        value = item.value,\n        label = item.label,\n        choiceId = item.choiceId,\n        groupId = item.groupId;\n    var group = groupId >= 0 ? this._store.getGroupById(groupId) : null;\n\n    this._store.dispatch(items_removeItem(id, choiceId));\n\n    if (group && group.value) {\n      this.passedElement.triggerEvent(EVENTS.removeItem, {\n        id: id,\n        value: value,\n        label: label,\n        groupValue: group.value\n      });\n    } else {\n      this.passedElement.triggerEvent(EVENTS.removeItem, {\n        id: id,\n        value: value,\n        label: label\n      });\n    }\n\n    return this;\n  };\n\n  _proto._addChoice = function _addChoice(_ref14) {\n    var value = _ref14.value,\n        _ref14$label = _ref14.label,\n        label = _ref14$label === void 0 ? null : _ref14$label,\n        _ref14$isSelected = _ref14.isSelected,\n        isSelected = _ref14$isSelected === void 0 ? false : _ref14$isSelected,\n        _ref14$isDisabled = _ref14.isDisabled,\n        isDisabled = _ref14$isDisabled === void 0 ? false : _ref14$isDisabled,\n        _ref14$groupId = _ref14.groupId,\n        groupId = _ref14$groupId === void 0 ? -1 : _ref14$groupId,\n        _ref14$customProperti = _ref14.customProperties,\n        customProperties = _ref14$customProperti === void 0 ? null : _ref14$customProperti,\n        _ref14$placeholder = _ref14.placeholder,\n        placeholder = _ref14$placeholder === void 0 ? false : _ref14$placeholder,\n        _ref14$keyCode = _ref14.keyCode,\n        keyCode = _ref14$keyCode === void 0 ? null : _ref14$keyCode;\n\n    if (typeof value === 'undefined' || value === null) {\n      return;\n    } // Generate unique id\n\n\n    var choices = this._store.choices;\n    var choiceLabel = label || value;\n    var choiceId = choices ? choices.length + 1 : 1;\n    var choiceElementId = this._baseId + \"-\" + this._idNames.itemChoice + \"-\" + choiceId;\n\n    this._store.dispatch(choices_addChoice({\n      value: value,\n      label: choiceLabel,\n      id: choiceId,\n      groupId: groupId,\n      disabled: isDisabled,\n      elementId: choiceElementId,\n      customProperties: customProperties,\n      placeholder: placeholder,\n      keyCode: keyCode\n    }));\n\n    if (isSelected) {\n      this._addItem({\n        value: value,\n        label: choiceLabel,\n        choiceId: choiceId,\n        customProperties: customProperties,\n        placeholder: placeholder,\n        keyCode: keyCode\n      });\n    }\n  };\n\n  _proto._addGroup = function _addGroup(_ref15) {\n    var _this22 = this;\n\n    var group = _ref15.group,\n        id = _ref15.id,\n        _ref15$valueKey = _ref15.valueKey,\n        valueKey = _ref15$valueKey === void 0 ? 'value' : _ref15$valueKey,\n        _ref15$labelKey = _ref15.labelKey,\n        labelKey = _ref15$labelKey === void 0 ? 'label' : _ref15$labelKey;\n    var groupChoices = isType('Object', group) ? group.choices : Array.from(group.getElementsByTagName('OPTION'));\n    var groupId = id || Math.floor(new Date().valueOf() * Math.random());\n    var isDisabled = group.disabled ? group.disabled : false;\n\n    if (groupChoices) {\n      this._store.dispatch(groups_addGroup(group.label, groupId, true, isDisabled));\n\n      var addGroupChoices = function addGroupChoices(choice) {\n        var isOptDisabled = choice.disabled || choice.parentNode && choice.parentNode.disabled;\n\n        _this22._addChoice({\n          value: choice[valueKey],\n          label: isType('Object', choice) ? choice[labelKey] : choice.innerHTML,\n          isSelected: choice.selected,\n          isDisabled: isOptDisabled,\n          groupId: groupId,\n          customProperties: choice.customProperties,\n          placeholder: choice.placeholder\n        });\n      };\n\n      groupChoices.forEach(addGroupChoices);\n    } else {\n      this._store.dispatch(groups_addGroup(group.label, group.id, false, group.disabled));\n    }\n  };\n\n  _proto._getTemplate = function _getTemplate(template) {\n    var _templates$template;\n\n    if (!template) {\n      return null;\n    }\n\n    var _this$config4 = this.config,\n        templates = _this$config4.templates,\n        classNames = _this$config4.classNames;\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return (_templates$template = templates[template]).call.apply(_templates$template, [this, classNames].concat(args));\n  };\n\n  _proto._createTemplates = function _createTemplates() {\n    var callbackOnCreateTemplates = this.config.callbackOnCreateTemplates;\n    var userTemplates = {};\n\n    if (callbackOnCreateTemplates && isType('Function', callbackOnCreateTemplates)) {\n      userTemplates = callbackOnCreateTemplates.call(this, strToEl);\n    }\n\n    this.config.templates = cjs_default()(TEMPLATES, userTemplates);\n  };\n\n  _proto._createElements = function _createElements() {\n    this.containerOuter = new container_Container({\n      element: this._getTemplate('containerOuter', this._direction, this._isSelectElement, this._isSelectOneElement, this.config.searchEnabled, this.passedElement.element.type),\n      classNames: this.config.classNames,\n      type: this.passedElement.element.type,\n      position: this.config.position\n    });\n    this.containerInner = new container_Container({\n      element: this._getTemplate('containerInner'),\n      classNames: this.config.classNames,\n      type: this.passedElement.element.type,\n      position: this.config.position\n    });\n    this.input = new input_Input({\n      element: this._getTemplate('input', this._placeholderValue),\n      classNames: this.config.classNames,\n      type: this.passedElement.element.type\n    });\n    this.choiceList = new list_List({\n      element: this._getTemplate('choiceList', this._isSelectOneElement)\n    });\n    this.itemList = new list_List({\n      element: this._getTemplate('itemList', this._isSelectOneElement)\n    });\n    this.dropdown = new Dropdown({\n      element: this._getTemplate('dropdown'),\n      classNames: this.config.classNames,\n      type: this.passedElement.element.type\n    });\n  };\n\n  _proto._createStructure = function _createStructure() {\n    // Hide original element\n    this.passedElement.conceal(); // Wrap input in container preserving DOM ordering\n\n    this.containerInner.wrap(this.passedElement.element); // Wrapper inner container with outer container\n\n    this.containerOuter.wrap(this.containerInner.element);\n\n    if (this._isSelectOneElement) {\n      this.input.placeholder = this.config.searchPlaceholderValue || '';\n    } else if (this._placeholderValue) {\n      this.input.placeholder = this._placeholderValue;\n      this.input.setWidth(true);\n    }\n\n    this.containerOuter.element.appendChild(this.containerInner.element);\n    this.containerOuter.element.appendChild(this.dropdown.element);\n    this.containerInner.element.appendChild(this.itemList.element);\n\n    if (!this._isTextElement) {\n      this.dropdown.element.appendChild(this.choiceList.element);\n    }\n\n    if (!this._isSelectOneElement) {\n      this.containerInner.element.appendChild(this.input.element);\n    } else if (this.config.searchEnabled) {\n      this.dropdown.element.insertBefore(this.input.element, this.dropdown.element.firstChild);\n    }\n\n    if (this._isSelectElement) {\n      this._addPredefinedChoices();\n    } else if (this._isTextElement) {\n      this._addPredefinedItems();\n    }\n  };\n\n  _proto._addPredefinedChoices = function _addPredefinedChoices() {\n    var _this23 = this;\n\n    var passedGroups = this.passedElement.optionGroups;\n    this._highlightPosition = 0;\n    this._isSearching = false;\n\n    this._setLoading(true);\n\n    if (passedGroups && passedGroups.length) {\n      // If we have a placeholder option\n      var placeholderChoice = this.passedElement.placeholderOption;\n\n      if (placeholderChoice && placeholderChoice.parentNode.tagName === 'SELECT') {\n        this._addChoice({\n          value: placeholderChoice.value,\n          label: placeholderChoice.innerHTML,\n          isSelected: placeholderChoice.selected,\n          isDisabled: placeholderChoice.disabled,\n          placeholder: true\n        });\n      }\n\n      passedGroups.forEach(function (group) {\n        return _this23._addGroup({\n          group: group,\n          id: group.id || null\n        });\n      });\n    } else {\n      var passedOptions = this.passedElement.options;\n      var filter = this.config.sortFn;\n      var allChoices = this._presetChoices; // Create array of options from option elements\n\n      passedOptions.forEach(function (o) {\n        allChoices.push({\n          value: o.value,\n          label: o.innerHTML,\n          selected: o.selected,\n          disabled: o.disabled || o.parentNode.disabled,\n          placeholder: o.hasAttribute('placeholder'),\n          customProperties: o.getAttribute('data-custom-properties')\n        });\n      }); // If sorting is enabled or the user is searching, filter choices\n\n      if (this.config.shouldSort) allChoices.sort(filter); // Determine whether there is a selected choice\n\n      var hasSelectedChoice = allChoices.some(function (choice) {\n        return choice.selected;\n      });\n\n      var handleChoice = function handleChoice(choice, index) {\n        var value = choice.value,\n            label = choice.label,\n            customProperties = choice.customProperties,\n            placeholder = choice.placeholder;\n\n        if (_this23._isSelectElement) {\n          // If the choice is actually a group\n          if (choice.choices) {\n            _this23._addGroup({\n              group: choice,\n              id: choice.id || null\n            });\n          } else {\n            // If there is a selected choice already or the choice is not\n            // the first in the array, add each choice normally\n            // Otherwise pre-select the first choice in the array if it's a single select\n            var shouldPreselect = _this23._isSelectOneElement && !hasSelectedChoice && index === 0;\n            var isSelected = shouldPreselect ? true : choice.selected;\n            var isDisabled = shouldPreselect ? false : choice.disabled;\n\n            _this23._addChoice({\n              value: value,\n              label: label,\n              isSelected: isSelected,\n              isDisabled: isDisabled,\n              customProperties: customProperties,\n              placeholder: placeholder\n            });\n          }\n        } else {\n          _this23._addChoice({\n            value: value,\n            label: label,\n            isSelected: choice.selected,\n            isDisabled: choice.disabled,\n            customProperties: customProperties,\n            placeholder: placeholder\n          });\n        }\n      }; // Add each choice\n\n\n      allChoices.forEach(function (choice, index) {\n        return handleChoice(choice, index);\n      });\n    }\n\n    this._setLoading(false);\n  };\n\n  _proto._addPredefinedItems = function _addPredefinedItems() {\n    var _this24 = this;\n\n    var handlePresetItem = function handlePresetItem(item) {\n      var itemType = getType(item);\n\n      if (itemType === 'Object' && item.value) {\n        _this24._addItem({\n          value: item.value,\n          label: item.label,\n          choiceId: item.id,\n          customProperties: item.customProperties,\n          placeholder: item.placeholder\n        });\n      } else if (itemType === 'String') {\n        _this24._addItem({\n          value: item\n        });\n      }\n    };\n\n    this._presetItems.forEach(function (item) {\n      return handlePresetItem(item);\n    });\n  };\n\n  _proto._setChoiceOrItem = function _setChoiceOrItem(item) {\n    var _this25 = this;\n\n    var itemType = getType(item).toLowerCase();\n    var handleType = {\n      object: function object() {\n        if (!item.value) {\n          return;\n        } // If we are dealing with a select input, we need to create an option first\n        // that is then selected. For text inputs we can just add items normally.\n\n\n        if (!_this25._isTextElement) {\n          _this25._addChoice({\n            value: item.value,\n            label: item.label,\n            isSelected: true,\n            isDisabled: false,\n            customProperties: item.customProperties,\n            placeholder: item.placeholder\n          });\n        } else {\n          _this25._addItem({\n            value: item.value,\n            label: item.label,\n            choiceId: item.id,\n            customProperties: item.customProperties,\n            placeholder: item.placeholder\n          });\n        }\n      },\n      string: function string() {\n        if (!_this25._isTextElement) {\n          _this25._addChoice({\n            value: item,\n            label: item,\n            isSelected: true,\n            isDisabled: false\n          });\n        } else {\n          _this25._addItem({\n            value: item\n          });\n        }\n      }\n    };\n    handleType[itemType]();\n  };\n\n  _proto._findAndSelectChoiceByValue = function _findAndSelectChoiceByValue(val) {\n    var _this26 = this;\n\n    var choices = this._store.choices; // Check 'value' property exists and the choice isn't already selected\n\n    var foundChoice = choices.find(function (choice) {\n      return _this26.config.itemComparer(choice.value, val);\n    });\n\n    if (foundChoice && !foundChoice.selected) {\n      this._addItem({\n        value: foundChoice.value,\n        label: foundChoice.label,\n        choiceId: foundChoice.id,\n        groupId: foundChoice.groupId,\n        customProperties: foundChoice.customProperties,\n        placeholder: foundChoice.placeholder,\n        keyCode: foundChoice.keyCode\n      });\n    }\n  };\n\n  _proto._generateInstances = function _generateInstances(elements, config) {\n    return elements.reduce(function (instances, element) {\n      instances.push(new Choices(element, config));\n      return instances;\n    }, [this]);\n  };\n\n  _proto._generatePlaceholderValue = function _generatePlaceholderValue() {\n    if (this._isSelectOneElement) {\n      return false;\n    }\n\n    return this.config.placeholder ? this.config.placeholderValue || this.passedElement.element.getAttribute('placeholder') : false;\n  }\n  /* =====  End of Private functions  ====== */\n  ;\n\n  return Choices;\n}();\n\nchoices_Choices.userDefaults = {};\n/* harmony default export */ var scripts_choices = __webpack_exports__[\"default\"] = (choices_Choices);\n\n/***/ })\n/******/ ])[\"default\"];\n});"],"file":"pwtimage.js"}