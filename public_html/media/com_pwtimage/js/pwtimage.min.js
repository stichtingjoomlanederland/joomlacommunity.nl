function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Cropper=t()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="undefined"!=typeof window,r=a?window:{},e=a&&"ontouchstart"in r.document.documentElement,i=a&&"PointerEvent"in r,h="cropper",C="all",S="crop",x="move",I="zoom",T="e",O="w",j="s",k="n",D="ne",A="nw",M="se",L="sw",s="".concat(h,"-crop"),o="".concat(h,"-disabled"),P="".concat(h,"-hidden"),u="".concat(h,"-hide"),d="".concat(h,"-invisible"),l="".concat(h,"-modal"),p="".concat(h,"-move"),f="".concat(h,"Action"),m="".concat(h,"Preview"),c="crop",v="move",g="none",y="crop",b="cropend",_="cropmove",w="cropstart",E="dblclick",N=i?"pointerdown":e?"touchstart":"mousedown",F=i?"pointermove":e?"touchmove":"mousemove",B=i?"pointerup pointercancel":e?"touchend touchcancel":"mouseup",Q="zoom",R="image/jpeg",Y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,W=/^data:/,K=/^data:image\/jpeg;base64,/,X=/^img|canvas$/i,z={viewMode:0,dragMode:c,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},V=Number.isNaN||r.isNaN;function U(e){return"number"==typeof e&&!V(e)}var G=function(e){return 0<e&&e<1/0};function q(e){return void 0===e}function J(e){return"object"===t(e)&&null!==e}var $=Object.prototype.hasOwnProperty;function Z(e){if(!J(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&$.call(i,"isPrototypeOf")}catch(e){return!1}}function ee(e){return"function"==typeof e}var te=Array.prototype.slice;function ie(e){return Array.from?Array.from(e):te.call(e)}function ne(i,n){return i&&ee(n)&&(Array.isArray(i)||U(i.length)?ie(i).forEach(function(e,t){n.call(i,e,t,i)}):J(i)&&Object.keys(i).forEach(function(e){n.call(i,i[e],e,i)})),i}var ae=Object.assign||function(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return J(i)&&0<t.length&&t.forEach(function(t){J(t)&&Object.keys(t).forEach(function(e){i[e]=t[e]})}),i},oe=/\.\d*(?:0|9){12}\d*$/;function re(e,t){var i=1<arguments.length&&void 0!==t?t:1e11;return oe.test(e)?Math.round(e*i)/i:e}var se=/^width|height|left|top|marginLeft|marginTop$/;function le(e,t){var i=e.style;ne(t,function(e,t){se.test(t)&&U(e)&&(e="".concat(e,"px")),i[t]=e})}function ce(e,t){if(t)if(U(e.length))ne(e,function(e){ce(e,t)});else if(e.classList)e.classList.add(t);else{var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function he(e,t){t&&(U(e.length)?ne(e,function(e){he(e,t)}):e.classList?e.classList.remove(t):0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,"")))}function ue(e,t,i){t&&(U(e.length)?ne(e,function(e){ue(e,t,i)}):i?ce(e,t):he(e,t))}var de=/([a-z\d])([A-Z])/g;function pe(e){return e.replace(de,"$1-$2").toLowerCase()}function fe(e,t){return J(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(pe(t)))}function me(e,t,i){J(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(pe(t)),i)}var ve=/\s\s*/,ge=function(){var e=!1;if(a){var t=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});r.addEventListener("test",i,n),r.removeEventListener("test",i,n)}return e}();function ye(i,e,n,t){var a=3<arguments.length&&void 0!==t?t:{},o=n;e.trim().split(ve).forEach(function(e){if(!ge){var t=i.listeners;t&&t[e]&&t[e][n]&&(o=t[e][n],delete t[e][n],0===Object.keys(t[e]).length&&delete t[e],0===Object.keys(t).length&&delete i.listeners)}i.removeEventListener(e,o,a)})}function be(o,e,r,t){var s=3<arguments.length&&void 0!==t?t:{},l=r;e.trim().split(ve).forEach(function(n){if(s.once&&!ge){var e=o.listeners,a=void 0===e?{}:e;l=function(){delete a[n][r],o.removeEventListener(n,l,s);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.apply(o,t)},a[n]||(a[n]={}),a[n][r]&&o.removeEventListener(n,a[n][r],s),a[n][r]=l,o.listeners=a}o.addEventListener(n,l,s)})}function _e(e,t,i){var n;return ee(Event)&&ee(CustomEvent)?n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(n)}function we(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ee=r.location,Ce=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Se(e){var t=e.match(Ce);return null!==t&&(t[1]!==Ee.protocol||t[2]!==Ee.hostname||t[3]!==Ee.port)}function xe(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ie(e){var t=e.rotate,i=e.scaleX,n=e.scaleY,a=e.translateX,o=e.translateY,r=[];U(a)&&0!==a&&r.push("translateX(".concat(a,"px)")),U(o)&&0!==o&&r.push("translateY(".concat(o,"px)")),U(t)&&0!==t&&r.push("rotate(".concat(t,"deg)")),U(i)&&1!==i&&r.push("scaleX(".concat(i,")")),U(n)&&1!==n&&r.push("scaleY(".concat(n,")"));var s=r.length?r.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Te(e,t){var i=e.pageX,n=e.pageY,a={endX:i,endY:n};return t?a:ae({startX:i,startY:n},a)}function Oe(e,t){var i=e.aspectRatio,n=e.height,a=e.width,o=1<arguments.length&&void 0!==t?t:"contain",r=G(a),s=G(n);if(r&&s){var l=n*i;"contain"===o&&a<l||"cover"===o&&l<a?n=a/i:a=n*i}else r?n=a/i:s&&(a=n*i);return{width:a,height:n}}var je=String.fromCharCode;var ke=/^data:.*,/;function De(e){var t,i=new DataView(e);try{var n,a,o;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,s=2;s+1<r;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){a=s;break}s+=1}if(a){var l=a+10;if("Exif"===function(e,t,i){var n="";i+=t;for(var a=t;a<i;a+=1)n+=je(e.getUint8(a));return n}(i,a+4,4)){var c=i.getUint16(l);if(((n=18761===c)||19789===c)&&42===i.getUint16(l+2,n)){var h=i.getUint32(l+4,n);8<=h&&(o=l+h)}}}if(o){var u,d,p=i.getUint16(o,n);for(d=0;d<p;d+=1)if(u=o+12*d+2,274===i.getUint16(u,n)){u+=8,t=i.getUint16(u,n),i.setUint16(u,1,n);break}}}catch(e){t=1}return t}var Ae={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,n=this.cropper;ce(n,P),he(e,P);var a={width:Math.max(i.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(t.minContainerHeight)||100)};le(n,{width:(this.containerData=a).width,height:a.height}),ce(e,P),he(n,P)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,n=Math.abs(t.rotate)%180==90,a=n?t.naturalHeight:t.naturalWidth,o=n?t.naturalWidth:t.naturalHeight,r=a/o,s=e.width,l=e.height;e.height*r>e.width?3===i?s=e.height*r:l=e.width/r:3===i?l=e.width/r:s=e.height*r;var c={aspectRatio:r,naturalWidth:a,naturalHeight:o,width:s,height:l};c.left=(e.width-s)/2,c.top=(e.height-l)/2,c.oldLeft=c.left,c.oldTop=c.top,this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImageData=ae({},t),this.initialCanvasData=ae({},c)},limitCanvas:function(e,t){var i=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,r=i.viewMode,s=a.aspectRatio,l=this.cropped&&o;if(e){var c=Number(i.minCanvasWidth)||0,h=Number(i.minCanvasHeight)||0;1<r?(c=Math.max(c,n.width),h=Math.max(h,n.height),3===r&&(c<h*s?c=h*s:h=c/s)):0<r&&(c?c=Math.max(c,l?o.width:0):h?h=Math.max(h,l?o.height:0):l&&((c=o.width)<(h=o.height)*s?c=h*s:h=c/s));var u=Oe({aspectRatio:s,width:c,height:h});c=u.width,h=u.height,a.minWidth=c,a.minHeight=h,a.maxWidth=1/0,a.maxHeight=1/0}if(t)if((l?0:1)<r){var d=n.width-a.width,p=n.height-a.height;a.minLeft=Math.min(0,d),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,d),a.maxTop=Math.max(0,p),l&&this.limited&&(a.minLeft=Math.min(o.left,o.left+(o.width-a.width)),a.minTop=Math.min(o.top,o.top+(o.height-a.height)),a.maxLeft=o.left,a.maxTop=o.top,2===r&&(a.width>=n.width&&(a.minLeft=Math.min(0,d),a.maxLeft=Math.max(0,d)),a.height>=n.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(e,t){var i=this.canvasData,n=this.imageData;if(t){var a=function(e){var t=e.width,i=e.height,n=e.degree;if(90===(n=Math.abs(n)%180))return{width:i,height:t};var a=n%90*Math.PI/180,o=Math.sin(a),r=Math.cos(a),s=t*r+i*o,l=t*o+i*r;return 90<n?{width:l,height:s}:{width:s,height:l}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),o=a.width,r=a.height,s=i.width*(o/i.naturalWidth),l=i.height*(r/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(l-i.height)/2,i.width=s,i.height=l,i.aspectRatio=o/r,i.naturalWidth=o,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,le(this.canvas,ae({width:i.width,height:i.height},Ie({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,n=i.naturalWidth*(t.width/t.naturalWidth),a=i.naturalHeight*(t.height/t.naturalHeight);ae(i,{width:n,height:a,left:(t.width-n)/2,top:(t.height-a)/2}),le(this.image,ae({width:i.width,height:i.height},Ie(ae({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,a={width:t.width,height:t.height};i&&(t.height*i>t.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=t.left+(t.width-a.width)/2,a.top=t.top+(t.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=ae({},a)},limitCropBox:function(e,t){var i=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,r=this.limited,s=i.aspectRatio;if(e){var l=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,h=r?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,u=r?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;l=Math.min(l,n.width),c=Math.min(c,n.height),s&&(l&&c?l<c*s?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),h<u*s?u=h/s:h=u*s),o.minWidth=Math.min(l,h),o.minHeight=Math.min(c,u),o.maxWidth=h,o.maxHeight=u}t&&(r?(o.minLeft=Math.max(0,a.left),o.minTop=Math.max(0,a.top),o.maxLeft=Math.min(n.width,a.left+a.width)-o.width,o.maxTop=Math.min(n.height,a.top+a.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=n.width-o.width,o.maxTop=n.height-o.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&me(this.face,f,i.width>=t.width&&i.height>=t.height?x:C),le(this.cropBox,ae({width:i.width,height:i.height},Ie({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),_e(this.element,y,this.getData())}},Me={initPreview:function(){var e=this.element,i=this.crossOrigin,t=this.options.preview,n=i?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",o=document.createElement("img");if(i&&(o.crossOrigin=i),o.src=n,o.alt=a,this.viewBox.appendChild(o),this.viewBoxImage=o,t){var r=t;"string"==typeof t?r=e.ownerDocument.querySelectorAll(t):t.querySelector&&(r=[t]),ne(this.previews=r,function(e){var t=document.createElement("img");me(e,m,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),i&&(t.crossOrigin=i),t.src=n,t.alt=a,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(t)})}},resetPreview:function(){ne(this.previews,function(e){var t=fe(e,m);le(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(t,i){if(J(t[i]))try{delete t[i]}catch(e){t[i]=void 0}else if(t.dataset)try{delete t.dataset[i]}catch(e){t.dataset[i]=void 0}else t.removeAttribute("data-".concat(pe(i)))}(e,m)})},preview:function(){var s=this.imageData,e=this.canvasData,t=this.cropBoxData,l=t.width,c=t.height,h=s.width,u=s.height,d=t.left-e.left-s.left,p=t.top-e.top-s.top;this.cropped&&!this.disabled&&(le(this.viewBoxImage,ae({width:h,height:u},Ie(ae({translateX:-d,translateY:-p},s)))),ne(this.previews,function(e){var t=fe(e,m),i=t.width,n=t.height,a=i,o=n,r=1;l&&(o=c*(r=i/l)),c&&n<o&&(a=l*(r=n/c),o=n),le(e,{width:a,height:o}),le(e.getElementsByTagName("img")[0],ae({width:h*r,height:u*r},Ie(ae({translateX:-d*r,translateY:-p*r},s))))}))}},Le={bind:function(){var e=this.element,t=this.options,i=this.cropper;ee(t.cropstart)&&be(e,w,t.cropstart),ee(t.cropmove)&&be(e,_,t.cropmove),ee(t.cropend)&&be(e,b,t.cropend),ee(t.crop)&&be(e,y,t.crop),ee(t.zoom)&&be(e,Q,t.zoom),be(i,N,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&be(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&be(i,E,this.onDblclick=this.dblclick.bind(this)),be(e.ownerDocument,F,this.onCropMove=this.cropMove.bind(this)),be(e.ownerDocument,B,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&be(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;ee(t.cropstart)&&ye(e,w,t.cropstart),ee(t.cropmove)&&ye(e,_,t.cropmove),ee(t.cropend)&&ye(e,b,t.cropend),ee(t.crop)&&ye(e,y,t.crop),ee(t.zoom)&&ye(e,Q,t.zoom),ye(i,N,this.onCropStart),t.zoomable&&t.zoomOnWheel&&ye(i,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ye(i,E,this.onDblclick),ye(e.ownerDocument,F,this.onCropMove),ye(e.ownerDocument,B,this.onCropEnd),t.responsive&&ye(window,"resize",this.onResize)}},Pe={resize:function(){var e=this.options,t=this.container,i=this.containerData,n=Number(e.minContainerWidth)||200,a=Number(e.minContainerHeight)||100;if(!(this.disabled||i.width<=n||i.height<=a)){var o,r,s=t.offsetWidth/i.width;if(1!=s||t.offsetHeight!==i.height)e.restore&&(o=this.getCanvasData(),r=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(ne(o,function(e,t){o[t]=e*s})),this.setCropBoxData(ne(r,function(e,t){r[t]=e*s})))}},dblclick:function(){this.disabled||this.options.dragMode===g||this.setDragMode(function(e,t){return e.classList?e.classList.contains(t):-1<e.className.indexOf(t)}(this.dragBox,s)?v:c)},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?n=0<e.deltaY?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=0<e.detail?1:-1),this.zoom(-n*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||U(t)&&1!==t||U(i)&&0!==i||e.ctrlKey)){var n,a=this.options,o=this.pointers;e.changedTouches?ne(e.changedTouches,function(e){o[e.identifier]=Te(e)}):o[e.pointerId||0]=Te(e),n=1<Object.keys(o).length&&a.zoomable&&a.zoomOnTouch?I:fe(e.target,f),Y.test(n)&&!1!==_e(this.element,w,{originalEvent:e,action:n})&&(e.preventDefault(),this.action=n,this.cropping=!1,n===S&&(this.cropping=!0,ce(this.dragBox,l)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var i=this.pointers;e.preventDefault(),!1!==_e(this.element,_,{originalEvent:e,action:t})&&(e.changedTouches?ne(e.changedTouches,function(e){ae(i[e.identifier]||{},Te(e,!0))}):ae(i[e.pointerId||0]||{},Te(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?ne(e.changedTouches,function(e){delete i[e.identifier]}):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,ue(this.dragBox,l,this.cropped&&this.options.modal)),_e(this.element,b,{originalEvent:e,action:t}))}}},Ne={change:function(e){var t,i=this.options,n=this.canvasData,a=this.containerData,o=this.cropBoxData,r=this.pointers,s=this.action,l=i.aspectRatio,c=o.left,h=o.top,u=o.width,d=o.height,p=c+u,f=h+d,m=0,v=0,g=a.width,y=a.height,b=!0;!l&&e.shiftKey&&(l=u&&d?u/d:1),this.limited&&(m=o.minLeft,v=o.minTop,g=m+Math.min(a.width,n.width,n.left+n.width),y=v+Math.min(a.height,n.height,n.top+n.height));function _(e){switch(e){case T:p+E.x>g&&(E.x=g-p);break;case O:c+E.x<m&&(E.x=m-c);break;case k:h+E.y<v&&(E.y=v-h);break;case j:f+E.y>y&&(E.y=y-f)}}var w=r[Object.keys(r)[0]],E={x:w.endX-w.startX,y:w.endY-w.startY};switch(s){case C:c+=E.x,h+=E.y;break;case T:if(0<=E.x&&(g<=p||l&&(h<=v||y<=f))){b=!1;break}_(T),(u+=E.x)<0&&(s=O,c-=u=-u),l&&(d=u/l,h+=(o.height-d)/2);break;case k:if(E.y<=0&&(h<=v||l&&(c<=m||g<=p))){b=!1;break}_(k),d-=E.y,h+=E.y,d<0&&(s=j,h-=d=-d),l&&(u=d*l,c+=(o.width-u)/2);break;case O:if(E.x<=0&&(c<=m||l&&(h<=v||y<=f))){b=!1;break}_(O),u-=E.x,c+=E.x,u<0&&(s=T,c-=u=-u),l&&(d=u/l,h+=(o.height-d)/2);break;case j:if(0<=E.y&&(y<=f||l&&(c<=m||g<=p))){b=!1;break}_(j),(d+=E.y)<0&&(s=k,h-=d=-d),l&&(u=d*l,c+=(o.width-u)/2);break;case D:if(l){if(E.y<=0&&(h<=v||g<=p)){b=!1;break}_(k),d-=E.y,h+=E.y,u=d*l}else _(k),_(T),0<=E.x?p<g?u+=E.x:E.y<=0&&h<=v&&(b=!1):u+=E.x,E.y<=0?v<h&&(d-=E.y,h+=E.y):(d-=E.y,h+=E.y);u<0&&d<0?(s=L,h-=d=-d,c-=u=-u):u<0?(s=A,c-=u=-u):d<0&&(s=M,h-=d=-d);break;case A:if(l){if(E.y<=0&&(h<=v||c<=m)){b=!1;break}_(k),d-=E.y,h+=E.y,u=d*l,c+=o.width-u}else _(k),_(O),E.x<=0?m<c?(u-=E.x,c+=E.x):E.y<=0&&h<=v&&(b=!1):(u-=E.x,c+=E.x),E.y<=0?v<h&&(d-=E.y,h+=E.y):(d-=E.y,h+=E.y);u<0&&d<0?(s=M,h-=d=-d,c-=u=-u):u<0?(s=D,c-=u=-u):d<0&&(s=L,h-=d=-d);break;case L:if(l){if(E.x<=0&&(c<=m||y<=f)){b=!1;break}_(O),u-=E.x,c+=E.x,d=u/l}else _(j),_(O),E.x<=0?m<c?(u-=E.x,c+=E.x):0<=E.y&&y<=f&&(b=!1):(u-=E.x,c+=E.x),0<=E.y?f<y&&(d+=E.y):d+=E.y;u<0&&d<0?(s=D,h-=d=-d,c-=u=-u):u<0?(s=M,c-=u=-u):d<0&&(s=A,h-=d=-d);break;case M:if(l){if(0<=E.x&&(g<=p||y<=f)){b=!1;break}_(T),d=(u+=E.x)/l}else _(j),_(T),0<=E.x?p<g?u+=E.x:0<=E.y&&y<=f&&(b=!1):u+=E.x,0<=E.y?f<y&&(d+=E.y):d+=E.y;u<0&&d<0?(s=A,h-=d=-d,c-=u=-u):u<0?(s=L,c-=u=-u):d<0&&(s=D,h-=d=-d);break;case x:this.move(E.x,E.y),b=!1;break;case I:this.zoom(function(e){var t=ae({},e),l=[];return ne(e,function(s,e){delete t[e],ne(t,function(e){var t=Math.abs(s.startX-e.startX),i=Math.abs(s.startY-e.startY),n=Math.abs(s.endX-e.endX),a=Math.abs(s.endY-e.endY),o=Math.sqrt(t*t+i*i),r=(Math.sqrt(n*n+a*a)-o)/o;l.push(r)})}),l.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),l[0]}(r),e),b=!1;break;case S:if(!E.x||!E.y){b=!1;break}t=we(this.cropper),c=w.startX-t.left,h=w.startY-t.top,u=o.minWidth,d=o.minHeight,0<E.x?s=0<E.y?M:D:E.x<0&&(c-=u,s=0<E.y?L:A),E.y<0&&(h-=d),this.cropped||(he(this.cropBox,P),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(o.width=u,o.height=d,o.left=c,o.top=h,this.action=s,this.renderCropBox()),ne(r,function(e){e.startX=e.endX,e.startY=e.endY})}},Fe={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ce(this.dragBox,l),he(this.cropBox,P),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ae({},this.initialImageData),this.canvasData=ae({},this.initialCanvasData),this.cropBoxData=ae({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ae(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),he(this.dragBox,l),ce(this.cropBox,P)),this},replace:function(t,e){var i=1<arguments.length&&void 0!==e&&e;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,ne(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,he(this.cropper,o)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ce(this.cropper,o)),this},destroy:function(){var e=this.element;return e[h]&&(e[h]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate()),this},move:function(e,t){var i=1<arguments.length&&void 0!==t?t:e,n=this.canvasData,a=n.left,o=n.top;return this.moveTo(q(e)?e:a+Number(e),q(i)?i:o+Number(i))},moveTo:function(e,t){var i=1<arguments.length&&void 0!==t?t:e,n=this.canvasData,a=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(U(e)&&(n.left=e,a=!0),U(i)&&(n.top=i,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(i.width*e/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var n=this.options,a=this.canvasData,o=a.width,r=a.height,s=a.naturalWidth,l=a.naturalHeight;if(0<=(e=Number(e))&&this.ready&&!this.disabled&&n.zoomable){var c=s*e,h=l*e;if(!1===_e(this.element,Q,{ratio:e,oldRatio:o/s,originalEvent:i}))return this;if(i){var u=this.pointers,d=we(this.cropper),p=u&&Object.keys(u).length?function(e){var n=0,a=0,o=0;return ne(e,function(e){var t=e.startX,i=e.startY;n+=t,a+=i,o+=1}),{pageX:n/=o,pageY:a/=o}}(u):{pageX:i.pageX,pageY:i.pageY};a.left-=(c-o)*((p.pageX-d.left-a.left)/o),a.top-=(h-r)*((p.pageY-d.top-a.top)/r)}else Z(t)&&U(t.x)&&U(t.y)?(a.left-=(c-o)*((t.x-a.left)/o),a.top-=(h-r)*((t.y-a.top)/r)):(a.left-=(c-o)/2,a.top-=(h-r)/2);a.width=c,a.height=h,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return U(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,U(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(U(t)?t:1,e)},scale:function(e,t){var i=1<arguments.length&&void 0!==t?t:e,n=this.imageData,a=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(U(e)&&(n.scaleX=e,a=!0),U(i)&&(n.scaleY=i,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(e){var i,t=0<arguments.length&&void 0!==e&&e,n=this.options,a=this.imageData,o=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){i={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height};var s=a.width/a.naturalWidth;if(ne(i,function(e,t){i[t]=e/s}),t){var l=Math.round(i.y+i.height),c=Math.round(i.x+i.width);i.x=Math.round(i.x),i.y=Math.round(i.y),i.width=c-i.x,i.height=l-i.y}}else i={x:0,y:0,width:0,height:0};return n.rotatable&&(i.rotate=a.rotate||0),n.scalable&&(i.scaleX=a.scaleX||1,i.scaleY=a.scaleY||1),i},setData:function(e){var t=this.options,i=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&Z(e)){var o=!1;t.rotatable&&U(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,o=!0),t.scalable&&(U(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,o=!0),U(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;U(e.x)&&(a.left=e.x*r+n.left),U(e.y)&&(a.top=e.y*r+n.top),U(e.width)&&(a.width=e.width*r),U(e.height)&&(a.height=e.height*r),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?ae({},this.containerData):{}},getImageData:function(){return this.sized?ae({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&ne(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&Z(e)&&(U(e.left)&&(t.left=e.left),U(e.top)&&(t.top=e.top),U(e.width)?(t.width=e.width,t.height=e.width/i):U(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,i,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Z(e)&&(U(e.left)&&(n.left=e.left),U(e.top)&&(n.top=e.top),U(e.width)&&e.width!==n.width&&(t=!0,n.width=e.width),U(e.height)&&e.height!==n.height&&(i=!0,n.height=e.height),a&&(t?n.height=n.width/a:i&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,n=function(e,t,i,n){var a=t.aspectRatio,o=t.naturalWidth,r=t.naturalHeight,s=t.rotate,l=void 0===s?0:s,c=t.scaleX,h=void 0===c?1:c,u=t.scaleY,d=void 0===u?1:u,p=i.aspectRatio,f=i.naturalWidth,m=i.naturalHeight,v=n.fillColor,g=void 0===v?"transparent":v,y=n.imageSmoothingEnabled,b=void 0===y||y,_=n.imageSmoothingQuality,w=void 0===_?"low":_,E=n.maxWidth,C=void 0===E?1/0:E,S=n.maxHeight,x=void 0===S?1/0:S,I=n.minWidth,T=void 0===I?0:I,O=n.minHeight,j=void 0===O?0:O,k=document.createElement("canvas"),D=k.getContext("2d"),A=Oe({aspectRatio:p,width:C,height:x}),M=Oe({aspectRatio:p,width:T,height:j},"cover"),L=Math.min(A.width,Math.max(M.width,f)),P=Math.min(A.height,Math.max(M.height,m)),N=Oe({aspectRatio:a,width:C,height:x}),F=Oe({aspectRatio:a,width:T,height:j},"cover"),B=Math.min(N.width,Math.max(F.width,o)),Q=Math.min(N.height,Math.max(F.height,r)),R=[-B/2,-Q/2,B,Q];return k.width=re(L),k.height=re(P),D.fillStyle=g,D.fillRect(0,0,L,P),D.save(),D.translate(L/2,P/2),D.rotate(l*Math.PI/180),D.scale(h,d),D.imageSmoothingEnabled=b,D.imageSmoothingQuality=w,D.drawImage.apply(D,[e].concat(H(R.map(function(e){return Math.floor(re(e))})))),D.restore(),k}(this.image,this.imageData,i,t);if(!this.cropped)return n;var a=this.getData(),o=a.x,r=a.y,s=a.width,l=a.height,c=n.width/Math.floor(i.naturalWidth);1!=c&&(o*=c,r*=c,s*=c,l*=c);var h=s/l,u=Oe({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=Oe({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=Oe({aspectRatio:h,width:t.width||(1!=c?n.width:s),height:t.height||(1!=c?n.height:l)}),f=p.width,m=p.height;f=Math.min(u.width,Math.max(d.width,f)),m=Math.min(u.height,Math.max(d.height,m));var v=document.createElement("canvas"),g=v.getContext("2d");v.width=re(f),v.height=re(m),g.fillStyle=t.fillColor||"transparent",g.fillRect(0,0,f,m);var y=t.imageSmoothingEnabled,b=void 0===y||y,_=t.imageSmoothingQuality;g.imageSmoothingEnabled=b,_&&(g.imageSmoothingQuality=_);var w,E,C,S,x,I,T=n.width,O=n.height,j=o,k=r;j<=-s||T<j?x=C=w=j=0:j<=0?(C=-j,j=0,x=w=Math.min(T,s+j)):j<=T&&(C=0,x=w=Math.min(s,T-j)),w<=0||k<=-l||O<k?I=S=E=k=0:k<=0?(S=-k,k=0,I=E=Math.min(O,l+k)):k<=O&&(S=0,I=E=Math.min(l,O-k));var D=[j,k,w,E];if(0<x&&0<I){var A=f/s;D.push(C*A,S*A,x*A,I*A)}return g.drawImage.apply(g,[n].concat(H(D.map(function(e){return Math.floor(re(e))})))),v},setAspectRatio:function(e){var t=this.options;return this.disabled||q(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=e===c,o=t.movable&&e===v;e=a||o?e:g,t.dragMode=e,me(i,f,e),ue(i,s,a),ue(i,p,o),t.cropBoxMovable||(me(n,f,e),ue(n,s,a),ue(n,p,o))}return this}},Be=r.Cropper,Qe=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!e||!X.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=ae({},z,Z(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(i,[{key:"init",value:function(){var e,t=this.element,i=t.tagName.toLowerCase();if(!t[h]){if(t[h]=this,"img"===i){if(this.isImg=!0,e=t.getAttribute("src")||"",!(this.originalUrl=e))return;e=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(W.test(e))K.test(e)?this.read(function(e){var t=e.replace(ke,""),i=atob(t),n=new ArrayBuffer(i.length),a=new Uint8Array(n);return ne(a,function(e,t){a[t]=i.charCodeAt(t)}),n}(e)):this.clone();else{var a=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,(this.xhr=a).onabort=o,a.onerror=o,a.ontimeout=o,a.onprogress=function(){a.getResponseHeader("content-type")!==R&&a.abort()},a.onload=function(){t.read(a.response)},a.onloadend=function(){t.reloading=!1,t.xhr=null},n.checkCrossOrigin&&Se(e)&&i.crossOrigin&&(e=xe(e)),a.open("GET",e),a.responseType="arraybuffer",a.withCredentials="use-credentials"===i.crossOrigin,a.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,i=this.imageData,n=De(e),a=0,o=1,r=1;if(1<n){this.url=function(e,t){for(var i=[],n=new Uint8Array(e);0<n.length;)i.push(je.apply(null,ie(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}(e,R);var s=function(e){var t=0,i=1,n=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:n}}(n);a=s.rotate,o=s.scaleX,r=s.scaleY}t.rotatable&&(i.rotate=a),t.scalable&&(i.scaleX=o,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var e,t,i=this.element,n=this.url;this.options.checkCrossOrigin&&Se(n)&&(e=(e=i.crossOrigin)||"anonymous",t=xe(n)),this.crossOrigin=e,this.crossOriginUrl=t;var a=document.createElement("img");e&&(a.crossOrigin=e),a.src=t||n,a.alt=i.alt||"The image to crop",(this.image=a).onload=this.start.bind(this),a.onerror=this.stop.bind(this),ce(a,u),i.parentNode.insertBefore(a,i.nextSibling)}},{key:"start",value:function(){var i=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;function t(e,t){ae(i.imageData,{naturalWidth:e,naturalHeight:t,aspectRatio:e/t}),i.sizing=!1,i.sized=!0,i.build()}var n=r.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(r.navigator.userAgent);if(!e.naturalWidth||n){var a=document.createElement("img"),o=document.body||document.documentElement;(this.sizingImage=a).onload=function(){t(a.width,a.height),n||o.removeChild(a)},a.src=e.src,n||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(a))}else t(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,i=this.image,n=e.parentNode,a=document.createElement("div");a.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=a.querySelector(".".concat(h,"-container")),r=o.querySelector(".".concat(h,"-canvas")),s=o.querySelector(".".concat(h,"-drag-box")),l=o.querySelector(".".concat(h,"-crop-box")),c=l.querySelector(".".concat(h,"-face"));this.container=n,this.cropper=o,this.canvas=r,this.dragBox=s,this.cropBox=l,this.viewBox=o.querySelector(".".concat(h,"-view-box")),this.face=c,r.appendChild(i),ce(e,P),n.insertBefore(o,e.nextSibling),this.isImg||he(i,u),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,ce(l,P),t.guides||ce(l.getElementsByClassName("".concat(h,"-dashed")),P),t.center||ce(l.getElementsByClassName("".concat(h,"-center")),P),t.background&&ce(o,"".concat(h,"-bg")),t.highlight||ce(c,d),t.cropBoxMovable&&(ce(c,p),me(c,f,C)),t.cropBoxResizable||(ce(l.getElementsByClassName("".concat(h,"-line")),P),ce(l.getElementsByClassName("".concat(h,"-point")),P)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),ee(t.ready)&&be(e,"ready",t.ready,{once:!0}),_e(e,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),he(this.element,P))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Be,i}},{key:"setDefaults",value:function(e){ae(z,Z(e)&&e)}}]),i}();return ae(Qe.prototype,Ae,Me,Le,Pe,Ne,Fe),Qe}),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():window.Sortable=e()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};function D(e,t){if(!e||!e.getBoundingClientRect)return de();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=Ce(i);if(i.clientWidth<i.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!i||!i.getBoundingClientRect||i===$.body)return de();if(n||t)return i;n=!0}}}while(i=i.parentNode);return de()}function A(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function n(e){I&&I.parentNode&&I.parentNode[J]&&I.parentNode[J]._computeIsAligned(e)}function d(){!ae&&f&&Ce(f,"display","none")}function p(){!ae&&f&&Ce(f,"display","")}var I,T,f,m,O,j,v,M,L,P,k,a,N,o,F,B,s,l,c,g,Q,R,H,Y,W,K,y,X,z=[],V=!1,b=!1,U=!1,h=[],G=!1,q=!1,_=[],r=/\s+/g,J="Sortable"+(new Date).getTime(),w=window,$=w.document,E=w.parseInt,Z=w.setTimeout,t=w.jQuery||w.Zepto,i=w.Polymer,u={capture:!1,passive:!1},C=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),S=!!navigator.userAgent.match(/Edge/i),x=!!navigator.userAgent.match(/firefox/i),ee=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),te=!!navigator.userAgent.match(/iP(ad|od|hone)/i),ie=S||C?"cssFloat":"float",ne="draggable"in $.createElement("div"),ae=function(){if(C)return!1;var e=$.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),oe=!1,re=!1,se=Math.abs,le=Math.min,ce=Math.max,he=[],ue=function(e,t){var i=Ce(e),n=E(i.width)-E(i.paddingLeft)-E(i.paddingRight)-E(i.borderLeftWidth)-E(i.borderRightWidth),a=ke(e,0,t),o=ke(e,1,t),r=a&&Ce(a),s=o&&Ce(o),l=r&&E(r.marginLeft)+E(r.marginRight)+Re(a).width,c=s&&E(s.marginLeft)+E(s.marginRight)+Re(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&"none"!==r.float){var h="left"===r.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==h?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||n<=l&&"none"===i[ie]||o&&"none"===i[ie]&&n<l+c)?"vertical":"horizontal"},de=function(){return C?$.documentElement:$.scrollingElement},pe=e(function(i,e,t,n){if(e.scroll){var a=t?t[J]:window,o=e.scrollSensitivity,r=e.scrollSpeed,s=i.clientX,l=i.clientY,c=de(),h=!1;L!==t&&(fe(),M=e.scroll,P=e.scrollFn,!0===M&&(M=D(t,!0),L=M));var u=0,d=M;do{var p,f,m,v,g,y,b,_,w,E=d,C=Re(E),S=C.top,x=C.bottom,I=C.left,T=C.right,O=C.width,j=C.height;if(p=E.scrollWidth,f=E.scrollHeight,m=Ce(E),_=E.scrollLeft,w=E.scrollTop,b=E===c?(y=O<p&&("auto"===m.overflowX||"scroll"===m.overflowX||"visible"===m.overflowX),j<f&&("auto"===m.overflowY||"scroll"===m.overflowY||"visible"===m.overflowY)):(y=O<p&&("auto"===m.overflowX||"scroll"===m.overflowX),j<f&&("auto"===m.overflowY||"scroll"===m.overflowY)),v=y&&(se(T-s)<=o&&_+O<p)-(se(I-s)<=o&&!!_),g=b&&(se(x-l)<=o&&w+j<f)-(se(S-l)<=o&&!!w),!z[u])for(var k=0;k<=u;k++)z[k]||(z[k]={});z[u].vx==v&&z[u].vy==g&&z[u].el===E||(z[u].el=E,z[u].vx=v,z[u].vy=g,clearInterval(z[u].pid),!E||0==v&&0==g||(h=!0,z[u].pid=setInterval(function(){n&&0===this.layer&&(ye.active._emulateDragOver(!0),ye.active._onTouchMove(Q,!0));var e=z[this.layer].vy?z[this.layer].vy*r:0,t=z[this.layer].vx?z[this.layer].vx*r:0;"function"==typeof P&&"continue"!==P.call(a,t,e,i,Q,z[this.layer].el)||A(z[this.layer].el,t,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&d!==c&&(d=D(d,!1)));V=h}},30),fe=function(){z.forEach(function(e){clearInterval(e.pid)}),z=[]},me=function(e){function l(r,s){return function(e,t,i,n){var a=e.options.group.name&&t.options.group.name&&e.options.group.name===t.options.group.name;if(null==r&&(s||a))return!0;if(null==r||!1===r)return!1;if(s&&"clone"===r)return r;if("function"==typeof r)return l(r(e,t,i,n),s)(e,t,i,n);var o=(s?e:t).options.group.name;return!0===r||"string"==typeof r&&r===o||r.join&&-1<r.indexOf(o)}}var t={},i=e.group;i&&"object"==_typeof2(i)||(i={name:i}),t.name=i.name,t.checkPull=l(i.pull,!0),t.checkPut=l(i.put),t.revertClone=i.revertClone,e.group=t};$.addEventListener("click",function(e){if(U)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),U=!1},!0);function ve(e){if(I){var t=function(e,t){for(var i=0;i<h.length;i++)if(!De(h[i])){var n=Re(h[i]),a=h[i][J].options.emptyInsertThreshold,o=e>=n.left-a&&e<=n.right+a,r=t>=n.top-a&&t<=n.bottom+a;if(a&&o&&r)return h[i]}}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var i={};for(var n in e)i[n]=e[n];i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[J]._onDragOver(i)}}}var ge;function ye(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Ne({},t),e[J]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ue(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:E(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ye.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in i)n in t||(t[n]=i[n]);for(var a in me(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&ne,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_e(e,"pointerdown",this._onTapStart):(_e(e,"mousedown",this._onTapStart),_e(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_e(e,"dragover",this),_e(e,"dragenter",this)),h.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function be(e,t,i,n){if(e){i=i||$;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Pe(e,t):Pe(e,t))||n&&e===i)return e;if(e===i)break}while(e=(a=e).host&&a!==$&&a.host.nodeType?a.host:a.parentNode)}var a;return null}function _e(e,t,i){e.addEventListener(t,i,!C&&u)}function we(e,t,i){e.removeEventListener(t,i,!C&&u)}function Ee(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(r," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(r," ")}}function Ce(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return $.defaultView&&$.defaultView.getComputedStyle?i=$.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function Se(e){var t="";do{var i=Ce(e,"transform");i&&"none"!==i&&(t=i+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function xe(e,t,i){if(e){var n=e.getElementsByTagName(t),a=0,o=n.length;if(i)for(;a<o;a++)i(n[a],a);return n}return[]}function Ie(e,t,i,n,a,o,r,s,l,c,h){var u,d=(e=e||t[J]).options,p="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||C||S?(u=$.createEvent("Event")).initEvent(i,!0,!0):u=new CustomEvent(i,{bubbles:!0,cancelable:!0}),u.to=a||t,u.from=o||t,u.item=n||t,u.clone=m,u.oldIndex=r,u.newIndex=s,u.oldDraggableIndex=l,u.newDraggableIndex=c,u.originalEvent=h,u.pullMode=B?B.lastPutMode:void 0,t&&t.dispatchEvent(u),d[p]&&d[p].call(e,u)}function Te(e,t,i,n,a,o,r,s){var l,c,h=e[J],u=h.options.onMove;return!window.CustomEvent||C||S?(l=$.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=a||t,l.relatedRect=o||Re(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),u&&(c=u.call(h,l,r)),c}function Oe(e){e.draggable=!1}function je(){oe=!1}function ke(e,t,i){for(var n=0,a=0,o=e.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==f&&o[a]!==I&&be(o[a],i.draggable,e,!1)){if(n===t)return o[a];n++}a++}return null}function De(e){for(var t=e.lastElementChild;t&&(t===f||"none"===Ce(t,"display"));)t=t.previousElementSibling;return t||null}function Ae(e){return Le(I)<Le(e)?1:-1}function Me(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function Le(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e&&e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===m||t&&!Pe(e,t)||i++;return i}function Pe(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function e(i,n){return function(){if(!ge){var e=arguments,t=this;ge=Z(function(){1===e.length?i.call(t,e[0]):i.apply(t,e),ge=void 0},n)}}}function Ne(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Fe(e){return i&&i.dom?i.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Be(e){return Z(e,0)}function Qe(e){return clearTimeout(e)}function Re(e,t,i,n){if(e.getBoundingClientRect||e===w){var a,o,r,s,l,c,h;if(h=e!==w&&e!==de()?(o=(a=e.getBoundingClientRect()).top,r=a.left,s=a.bottom,l=a.right,c=a.height,a.width):(r=o=0,s=window.innerHeight,l=window.innerWidth,c=window.innerHeight,window.innerWidth),n&&e!==w&&(i=i||e.parentNode,!C))do{if(i&&i.getBoundingClientRect&&"none"!==Ce(i,"transform")){var u=i.getBoundingClientRect();o-=u.top+E(Ce(i,"border-top-width")),r-=u.left+E(Ce(i,"border-left-width")),s=o+a.height,l=r+a.width;break}}while(i=i.parentNode);if(t&&e!==w){var d=Se(i||e),p=d&&d.a,f=d&&d.d;d&&(s=(o/=f)+(c/=f),l=(r/=p)+(h/=p))}return{top:o,left:r,bottom:s,right:l,width:h,height:c}}}function He(e,t){for(var i=D(e,!0),n=Re(e)[t];i;){var a=Re(i)[t];if(!("top"===t||"left"===t?a<=n:n<=a))return i;if(i===de())break;i=D(i,!1)}return!1}function Ye(e){var t=0,i=0,n=de();if(e)do{var a=Se(e),o=a.a,r=a.d;t+=e.scrollLeft*o,i+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[t,i]}return ye.prototype={constructor:ye,_computeIsAligned:function(e){var t;if(f&&!ae?(d(),t=$.elementFromPoint(e.clientX,e.clientY),p()):t=e.target,t=be(t,this.options.draggable,this.el,!1),!re&&I&&I.parentNode===this.el){for(var i,n,a,o,r,s,l,c,h=this.el.children,u=0;u<h.length;u++)be(h[u],this.options.draggable,this.el,!1)&&h[u]!==t&&(h[u].sortableMouseAligned=(i=e.clientX,n=e.clientY,a=h[u],o=this._getDirection(e,null),this.options,void 0,r=Re(a),s="vertical"===o?r.left:r.top,l="vertical"===o?r.right:r.bottom,s<(c="vertical"===o?i:n)&&c<l));be(t,this.options.draggable,this.el,!0)||(H=null),re=!0,Z(function(){re=!1},30)}},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,I):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t,i,n=this,a=this.el,o=this.options,r=o.preventOnFilter,s=e.type,l=e.touches&&e.touches[0],c=(l||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,u=o.filter;if(function(e){he.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var n=t[i];n.checked&&he.push(n)}}(a),!I&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||o.disabled||h.isContentEditable||(c=be(c,o.draggable,a,!1),v===c))){if(t=Le(c),i=Le(c,o.draggable),"function"==typeof u){if(u.call(this,e,c,this))return Ie(n,h,"filter",c,a,a,t,void 0,i),void(r&&e.cancelable&&e.preventDefault())}else if(u=u&&u.split(",").some(function(e){if(e=be(h,e.trim(),a,!1))return Ie(n,e,"filter",c,a,a,t,void 0,i),!0}))return void(r&&e.cancelable&&e.preventDefault());o.handle&&!be(h,o.handle,a,!1)||this._prepareDragStart(e,l,c,t,i)}}},_handleAutoScroll:function(t,i){if(I&&this.options.scroll){var n=t.clientX,a=t.clientY,e=$.elementFromPoint(n,a),o=this;if(i||S||C||ee){pe(t,o.options,e,i);var r=D(e,!0);!V||s&&n===l&&a===c||(s&&clearInterval(s),s=setInterval(function(){if(I){var e=D($.elementFromPoint(n,a),!0);e!==r&&(r=e,fe(),pe(t,o.options,r,i))}},10),l=n,c=a)}else{if(!o.options.bubbleScroll||D(e,!0)===de())return void fe();pe(t,o.options,D(e,!1),!1)}}},_prepareDragStart:function(e,t,i,n,a){var o,r=this,s=r.el,l=r.options,c=s.ownerDocument;i&&!I&&i.parentNode===s&&(O=s,T=(I=i).parentNode,j=I.nextSibling,v=i,F=l.group,k=n,N=a,g={target:I,clientX:(t||e).clientX,clientY:(t||e).clientY},this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,I.style["will-change"]="all",I.style.transition="",I.style.transform="",o=function(){r._disableDelayedDragEvents(),!x&&r.nativeDraggable&&(I.draggable=!0),r._triggerDragStart(e,t),Ie(r,O,"choose",I,O,O,k,void 0,N),Ee(I,l.chosenClass,!0)},l.ignore.split(",").forEach(function(e){xe(I,e.trim(),Oe)}),_e(c,"dragover",ve),_e(c,"mousemove",ve),_e(c,"touchmove",ve),_e(c,"mouseup",r._onDrop),_e(c,"touchend",r._onDrop),_e(c,"touchcancel",r._onDrop),x&&this.nativeDraggable&&(this.options.touchStartThreshold=4,I.draggable=!0),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(S||C)?o():(_e(c,"mouseup",r._disableDelayedDrag),_e(c,"touchend",r._disableDelayedDrag),_e(c,"touchcancel",r._disableDelayedDrag),_e(c,"mousemove",r._delayedDragTouchMoveHandler),_e(c,"touchmove",r._delayedDragTouchMoveHandler),l.supportPointer&&_e(c,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=Z(o,l.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;ce(se(t.clientX-this._lastX),se(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){I&&Oe(I),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),!this.nativeDraggable||t?this.options.supportPointer?_e($,"pointermove",this._onTouchMove):_e($,t?"touchmove":"mousemove",this._onTouchMove):(_e(I,"dragend",this),_e(O,"dragstart",this._onDragStart));try{$.selection?Be(function(){$.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(b=!1,O&&I){this.nativeDraggable&&(_e($,"dragover",this._handleAutoScroll),_e($,"dragover",n));var i=this.options;e||Ee(I,i.dragClass,!1),Ee(I,i.ghostClass,!0),Ce(I,"transform",""),ye.active=this,e&&this._appendGhost(),Ie(this,O,"start",I,O,O,k,void 0,N,void 0,t)}else this._nulling()},_emulateDragOver:function(e){if(Q){if(this._lastX===Q.clientX&&this._lastY===Q.clientY&&!e)return;this._lastX=Q.clientX,this._lastY=Q.clientY,d();for(var t=$.elementFromPoint(Q.clientX,Q.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Q.clientX,Q.clientY))!==i;)i=t;if(i)do{if(i[J])if(i[J]._onDragOver({clientX:Q.clientX,clientY:Q.clientY,target:t,rootEl:i})&&!this.options.dragoverBubble)break;t=i}while(i=i.parentNode);I.parentNode[J]._computeIsAligned(Q),p()}},_onTouchMove:function(e,t){if(g){var i=this.options,n=i.fallbackTolerance,a=i.fallbackOffset,o=e.touches?e.touches[0]:e,r=f&&Se(f),s=f&&r&&r.a,l=f&&r&&r.d,c=te&&y&&Ye(y),h=(o.clientX-g.clientX+a.x)/(s||1)+(c?c[0]-_[0]:0)/(s||1),u=(o.clientY-g.clientY+a.y)/(l||1)+(c?c[1]-_[1]:0)/(l||1),d=e.touches?"translate3d("+h+"px,"+u+"px,0)":"translate("+h+"px,"+u+"px)";if(!ye.active&&!b){if(n&&le(se(o.clientX-this._lastX),se(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}t||this._handleAutoScroll(o,!0),R=!0,Q=o,Ce(f,"webkitTransform",d),Ce(f,"mozTransform",d),Ce(f,"msTransform",d),Ce(f,"transform",d),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!f){var e=this.options.fallbackOnBody?$.body:O,t=Re(I,!0,e,!te),i=(Ce(I),this.options);if(te){for(y=e;"static"===Ce(y,"position")&&"none"===Ce(y,"transform")&&y!==$;)y=y.parentNode;if(y!==$){var n=Re(y,!0);t.top-=n.top,t.left-=n.left}y!==$.body&&y!==$.documentElement?(y===$&&(y=de()),t.top+=y.scrollTop,t.left+=y.scrollLeft):y=de(),_=Ye(y)}Ee(f=I.cloneNode(!0),i.ghostClass,!1),Ee(f,i.fallbackClass,!0),Ee(f,i.dragClass,!0),Ce(f,"box-sizing","border-box"),Ce(f,"margin",0),Ce(f,"top",t.top),Ce(f,"left",t.left),Ce(f,"width",t.width),Ce(f,"height",t.height),Ce(f,"opacity","0.8"),Ce(f,"position",te?"absolute":"fixed"),Ce(f,"zIndex","100000"),Ce(f,"pointerEvents","none"),e.appendChild(f)}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,a=i.options;(m=Fe(I)).draggable=!1,m.style["will-change"]="",this._hideClone(),Ee(m,i.options.chosenClass,!1),i._cloneId=Be(function(){i.options.removeCloneOnHide||O.insertBefore(m,I),Ie(i,O,"clone",I)}),t||Ee(I,a.dragClass,!0),t?(U=!0,i._loopId=setInterval(i._emulateDragOver,50)):(we($,"mouseup",i._onDrop),we($,"touchend",i._onDrop),we($,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",a.setData&&a.setData.call(i,n,I)),_e($,"drop",i),Ce(I,"transform","translateZ(0)")),b=!0,i._dragStartId=Be(i._dragStarted.bind(i,t,e)),_e($,"selectstart",i),ee&&Ce($.body,"user-select","none")},_onDragOver:function(t){var i,n,e,a=this.el,o=t.target,r=this.options,s=r.group,l=ye.active,c=F===s,h=r.sort,u=this;if(!oe){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),R=!0,o=be(o,r.draggable,a,!0),I.contains(t.target)||o.animated)return S(!1);if(o!==I&&(U=!1),l&&!r.disabled&&(c?h||(e=!O.contains(I)):B===this||(this.lastPutMode=F.checkPull(this,l,I,t))&&s.checkPut(this,l,I,t))){var d=this._getDirection(t,o);if(i=Re(I),e)return this._hideClone(),T=O,j?O.insertBefore(I,j):O.appendChild(I),S(!0);var p=De(a);if(!p||function(e,t,i){var n=Re(De(i)),a="vertical"===t?e.clientY:e.clientX,o="vertical"===t?e.clientX:e.clientY,r="vertical"===t?n.bottom:n.right,s="vertical"===t?n.left:n.top,l="vertical"===t?n.right:n.bottom;return"vertical"===t?l+10<o||o<=l&&r<a&&s<=o:r<a&&s<o||a<=r&&l+10<o}(t,d,a)&&!p.animated){if(p&&a===t.target&&(o=p),o&&(n=Re(o)),c?l._hideClone():l._showClone(this),!1!==Te(O,a,I,i,o,n,t,!!o))return a.appendChild(I),T=a,X=null,x(),S(!0)}else if(o&&o!==I&&o.parentNode===a){var f,m=0,v=o.sortableMouseAligned,g=I.parentNode!==a,y="vertical"===d?"top":"left",b=He(o,"top")||He(I,"top"),_=b?b.scrollTop:void 0;if(H!==o&&(W=null,f=Re(o)[y],G=!1),W=function(e,t,i){var n=e===I&&X||Re(e),a=t===I&&X||Re(t),o="vertical"===i?n.left:n.top,r="vertical"===i?n.right:n.bottom,s="vertical"===i?n.width:n.height,l="vertical"===i?a.left:a.top,c="vertical"===i?a.right:a.bottom,h="vertical"===i?a.width:a.height;return o===l||r===c||o+s/2===l+h/2}(I,o,d)&&v||g||b||r.invertSwap||"insert"===W||"swap"===W?("swap"!==W&&(q=r.invertSwap||g),m=function(e,t,i,n,a,o,r){var s=Re(t),l="vertical"===i?e.clientY:e.clientX,c="vertical"===i?s.height:s.width,h="vertical"===i?s.top:s.left,u="vertical"===i?s.bottom:s.right,d=Re(I),p=!1;if(!o)if(r&&K<c*n)if(!G&&(1===Y?h+c*a/2<l:l<u-c*a/2)&&(G=!0),G)p=!0;else{"vertical"===i?d.top:d.left,"vertical"===i?d.bottom:d.right;if(1===Y?l<h+K:u-K<l)return-1*Y}else if(h+c*(1-n)/2<l&&l<u-c*(1-n)/2)return Ae(t);if((p=p||o)&&(l<h+c*a/2||u-c*a/2<l))return h+c/2<l?1:-1;return 0}(t,o,d,r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,q,H===o),"swap"):(m=Ae(o),"insert"),0===m)return S(!1);X=null,Y=m,n=Re(H=o);var w=o.nextElementSibling,E=!1,C=Te(O,a,I,i,o,n,t,E=1===m);if(!1!==C)return 1!==C&&-1!==C||(E=1===C),oe=!0,Z(je,30),c?l._hideClone():l._showClone(this),E&&!w?a.appendChild(I):o.parentNode.insertBefore(I,E?w:o),b&&A(b,0,_-b.scrollTop),T=I.parentNode,void 0===f||q||(K=se(f-Re(o)[y])),x(),S(!0)}if(a.contains(I))return S(!1)}return!1}function S(e){return e&&(c?l._hideClone():l._showClone(u),l&&(Ee(I,B?B.options.ghostClass:l.options.ghostClass,!1),Ee(I,r.ghostClass,!0)),B!==u&&u!==ye.active?B=u:u===ye.active&&(B=null),i&&u._animate(i,I),o&&n&&u._animate(n,o)),(o===I&&!I.animated||o===a&&!o.animated)&&(H=null),r.dragoverBubble||t.rootEl||o===$||(u._handleAutoScroll(t),I.parentNode[J]._computeIsAligned(t),e||ve(t)),!r.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),!0}function x(){Ie(u,O,"change",o,a,O,k,Le(I),N,Le(I,r.draggable),t)}},_animate:function(e,t){var i=this.options.animation;if(i){var n=Re(t);if(t===I&&(X=n),1===e.nodeType&&(e=Re(e)),e.left+e.width/2!==n.left+n.width/2||e.top+e.height/2!==n.top+n.height/2){var a=Se(this.el),o=a&&a.a,r=a&&a.d;Ce(t,"transition","none"),Ce(t,"transform","translate3d("+(e.left-n.left)/(o||1)+"px,"+(e.top-n.top)/(r||1)+"px,0)"),this._repaint(t),Ce(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Ce(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=Z(function(){Ce(t,"transition",""),Ce(t,"transform",""),t.animated=!1},i)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){we($,"touchmove",this._onTouchMove),we($,"pointermove",this._onTouchMove),we($,"dragover",ve),we($,"mousemove",ve),we($,"touchmove",ve)},_offUpEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we($,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;G=q=V=b=!1,clearInterval(this._loopId),clearInterval(s),fe(),clearTimeout(ge),ge=void 0,clearTimeout(this._dragStartTimer),Qe(this._cloneId),Qe(this._dragStartId),we($,"mousemove",this._onTouchMove),this.nativeDraggable&&(we($,"drop",this),we(t,"dragstart",this._onDragStart),we($,"dragover",this._handleAutoScroll),we($,"dragover",n)),ee&&Ce($.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),e&&(R&&(e.cancelable&&e.preventDefault(),i.dropBubble||e.stopPropagation()),f&&f.parentNode&&f.parentNode.removeChild(f),(O===T||B&&"clone"!==B.lastPutMode)&&m&&m.parentNode&&m.parentNode.removeChild(m),I&&(this.nativeDraggable&&we(I,"dragend",this),Oe(I),I.style["will-change"]="",Ee(I,B?B.options.ghostClass:this.options.ghostClass,!1),Ee(I,this.options.chosenClass,!1),Ie(this,O,"unchoose",I,T,O,k,null,N,null,e),O!==T?(a=Le(I),o=Le(I,i.draggable),0<=a&&(Ie(null,T,"add",I,T,O,k,a,N,o,e),Ie(this,O,"remove",I,T,O,k,a,N,o,e),Ie(null,T,"sort",I,T,O,k,a,N,o,e),Ie(this,O,"sort",I,T,O,k,a,N,o,e)),B&&B.save()):I.nextSibling!==j&&(a=Le(I),o=Le(I,i.draggable),0<=a&&(Ie(this,O,"update",I,T,O,k,a,N,o,e),Ie(this,O,"sort",I,T,O,k,a,N,o,e))),ye.active&&(null!=a&&-1!==a||(a=k,o=N),Ie(this,O,"end",I,T,O,k,a,N,o,e),this.save()))),this._nulling()},_nulling:function(){O=I=T=f=j=m=v=M=L=z.length=s=l=c=g=Q=R=a=k=H=Y=X=B=F=ye.active=null,he.forEach(function(e){e.checked=!0}),he.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":I&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,a=i.length,o=this.options;n<a;n++)be(e=i[n],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Me(e));return t},sort:function(e){var n={},a=this.el;this.toArray().forEach(function(e,t){var i=a.children[t];be(i,this.options.draggable,a,!1)&&(n[e]=i)},this),e.forEach(function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&me(i)},destroy:function(){var e=this.el;e[J]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),h.splice(h.indexOf(this.el),1),this.el=e=null},_hideClone:function(){m.cloneHidden||(Ce(m,"display","none"),m.cloneHidden=!0,m.parentNode&&this.options.removeCloneOnHide&&m.parentNode.removeChild(m))},_showClone:function(e){"clone"===e.lastPutMode?m.cloneHidden&&(O.contains(I)&&!this.options.group.revertClone?O.insertBefore(m,I):j?O.insertBefore(m,j):O.appendChild(m),this.options.group.revertClone&&this._animate(I,m),Ce(m,"display",""),m.cloneHidden=!1):this._hideClone()}},_e($,"touchmove",function(e){(ye.active||b)&&e.cancelable&&e.preventDefault()}),ye.utils={on:_e,off:we,css:Ce,find:xe,is:function(e,t){return!!be(e,t,e,!1)},extend:Ne,throttle:e,closest:be,toggleClass:Ee,clone:Fe,index:Le,nextTick:Be,cancelNextTick:Qe,detectDirection:ue,getChild:ke},ye.create=function(e,t){return new ye(e,t)},ye.version="1.9.0",ye}),function(I){"use strict";function T(e){return I.getElementById(e)}function O(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function j(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}var k="js-modal",D="data-modal-background-click",A="data-modal-prefix-class",M="data-modal-text",L="data-modal-content-id",P="data-modal-describedby-id",N="data-modal-title",F="data-modal-focus-toid",B="data-modal-close-text",Q="data-modal-close-title",R="data-modal-close-img",H="js-modal-close",Y="js-modal-close",W="data-content-back-id",K="data-focus-back",X="js-modal-content",z="modal-title",V="js-modal-page",U="js-modal",G="js-modal-overlay",q="Close modal",J="data-background-click",$="no-scroll",Z="aria-hidden";function n(e){e.parentNode.removeChild(e)}function ee(e,t){for(var i=!1,n=e.parentNode;n&&!1===i;)!0===j(n,t)?i=!0:n=n.parentNode;return!0===i?n.getAttribute("id"):""}function te(e){if(n(e.modal),n(e.overlay),""!==e.contentBackId){var t=T(e.contentBackId);t&&(t.innerHTML=e.modalContent)}if(e.modalFocusBackId){var i=T(e.modalFocusBackId);i&&i.focus()}}function t(e,t){var i=arguments.length<=1||void 0===t||t;(function(e){var t=arguments.length<=0||void 0===e?I:e;return[].slice.call(t.querySelectorAll("."+k))})(e).forEach(function(e){var t=Math.random().toString(32).slice(2,12),i=T(V),n=I.querySelector("body");if(e.setAttribute("id","label_modal_"+t),e.setAttribute("aria-haspopup","dialog"),null===i||0===i.length){var a=I.createElement("DIV");a.setAttribute("id",V),function(e,t){for("string"==typeof t&&(t=document.createElement(t)),e.appendChild(t);e.firstChild!==t;)t.appendChild(e.firstChild)}(n,a)}}),i&&["click","keydown"].forEach(function(x){I.body.addEventListener(x,function(e){var t=ee(e.target,k);if((!0===j(e.target,k)||""!==t)&&"click"===x){var i=I.querySelector("body"),n=""!==t?T(t):e.target,a=!0===n.hasAttribute(A)?n.getAttribute(A)+"-":"",o=!0===n.hasAttribute(M)?n.getAttribute(M):"",r=!0===n.hasAttribute(L)?n.getAttribute(L):"",s=!0===n.hasAttribute(P)?n.getAttribute(P):"",l=!0===n.hasAttribute(N)?n.getAttribute(N):"",c=!0===n.hasAttribute(B)?n.getAttribute(B):q,h=!0===n.hasAttribute(Q)?n.getAttribute(Q):c,u=!0===n.hasAttribute(R)?n.getAttribute(R):"",d=!0===n.hasAttribute(D)?n.getAttribute(D):"",p=!0===n.hasAttribute(F)?n.getAttribute(F):"",f=T(V);i.insertAdjacentHTML("beforeEnd",function(e){var t=e.text||q,i=e.prefixClass+"modal-overlay",n="disabled"===e.backgroundEnabled?"disabled":"enabled";return'<span\n                    id="js-modal-overlay"\n                    class="'+i+'"\n                    '+J+'="'+n+'"\n                    title="'+t+'"\n                    >\n                    <span class="invisible">'+t+"</span>\n                  </span>"}({text:h,backgroundEnabled:d,prefixClass:a})),i.insertAdjacentHTML("beforeEnd",function(e){var t=e.modalPrefixClass+"modal",i=e.modalPrefixClass+"modal__wrapper",n=e.modalPrefixClass+"modal-close",a=e.modalCloseImgPath?'<img src="'+e.modalCloseImgPath+'" alt="'+e.modalCloseText+'" class="'+e.modalPrefixClass+'modal__closeimg" />':'<span class="'+e.modalPrefixClass+'modal-close__text">\n                                          '+e.modalCloseText+"\n                                         </span>",o=e.modalPrefixClass+"modal__content",r=e.modalPrefixClass+"modal-title",s=""!==e.modalTitle?'<h1 id="'+z+'" class="'+r+'">\n                                          '+e.modalTitle+"\n                                         </h1>":"",l='<button type="button" class="'+Y+" "+n+'" id="'+H+'" title="'+e.modalCloseTitle+'" '+W+'="'+e.modalContentId+'" '+K+'="'+e.modalFocusBackId+'">\n                               '+a+"\n                              </button>",c=e.modalText,h=""!==e.modalDescribedById?'aria-describedby="'+e.modalDescribedById+'"':"";if(""===c&&e.modalContentId){var u=T(e.modalContentId);u&&(c='<div id="'+X+'">\n                              '+u.innerHTML+"\n                             </div",u.innerHTML="")}return'<dialog id="js-modal" class="'+t+'" role="dialog" '+h+' open aria-labelledby="'+z+'">\n                    <div role="document" class="'+i+'">\n                      '+l+'\n                      <div class="'+o+'">\n                        '+s+"\n                        "+c+"\n                      </div>\n                    </div>\n                  </dialog>"}({modalText:o,modalPrefixClass:a,backgroundEnabled:r,modalTitle:l,modalCloseText:c,modalCloseTitle:h,modalCloseImgPath:u,modalContentId:r,modalDescribedById:s,modalFocusBackId:n.getAttribute("id")})),f.setAttribute(Z,"true"),function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}(i,$);var m=T(H);if(""!==p){var v=T(p);v?v.focus():m.focus()}else m.focus();e.preventDefault()}var g=ee(e.target,Y);if((e.target.getAttribute("id")===H||""!==g||e.target.getAttribute("id")===G||!0===j(e.target,Y))&&"click"===x){i=I.querySelector("body"),f=T(V);var y=T(U),b=T(X)?T(X).innerHTML:"",_=T(G),w=(C=T(H)).getAttribute(K),E=C.getAttribute(W);d=_.getAttribute(J);e.target.getAttribute("id")===G&&"disabled"===d||(te({modal:y,modalContent:b,overlay:_,modalFocusBackId:w,contentBackId:E,backgroundEnabled:d,fromId:e.target.getAttribute("id")}),f.removeAttribute(Z),O(i,$))}if(T(U)&&"keydown"===x){i=I.querySelector("body"),f=T(V),y=T(U),b=T(X)?T(X).innerHTML:"",_=T(G),w=(C=T(H)).getAttribute(K),E=C.getAttribute(W);var C,S=[].slice.call(y.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"));27===e.keyCode&&(te({modal:y,modalContent:b,overlay:_,modalFocusBackId:w,contentBackId:E}),f.removeAttribute(Z),O(i,$)),9===e.keyCode&&0<=S.indexOf(e.target)&&(e.shiftKey?e.target===S[0]&&(S[S.length-1].focus(),e.preventDefault()):e.target===S[S.length-1]&&(S[0].focus(),e.preventDefault())),9===e.keyCode&&-1===S.indexOf(e.target)&&(e.preventDefault(),S[0].focus())}},!0)})}document.addEventListener("DOMContentLoaded",function e(){t(),document.removeEventListener("DOMContentLoaded",e)}),window.van11yAccessibleModalWindowAria=t}(document),function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(e):e.vanillaTabScroller=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(t){function a(e,t,i){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(i,e[n],n,e);else for(var a=e.length-1;0<=a;a--)t.call(i,e[a],a,e)}function r(e){var i={},n=!1,t=0,a=arguments.length;function o(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?i[t]=r(!0,i[t],e[t]):i[t]=e[t])}for("[object Boolean]"===Object.prototype.toString.call(e)&&(n=e,t++);t<a;t++){o(arguments[t])}return i}var o,c,s={},i="querySelector"in document&&"addEventListener"in t,n={scroller:"[data-tabs-scroller]",wrapper:"[data-tabs-wrapper]",tabs:"[data-tabs]",tab:"[data-tab]",tabsButtonPrevClass:"pwt-tabs-scroller-prev",tabsButtonNextClass:"pwt-tabs-scroller-next",tabsOverflowClass:"has-tabs-overflow",tabsOverflowLeftClass:"has-tabs-left-overflow",tabsOverflowRightClass:"has-tabs-right-overflow",tabsScrollAmount:.8,tabsAnimationSpeed:400,beforeSetWidth:function(){},afterSetWidth:function(){}};function h(i,e,t,n){var a=e,o=t-a,r=0;!function e(){r+=20;var t=Math.easeInOutQuad(r,a,o,n);i.scrollLeft=t,r<n&&setTimeout(e,20)}()}Math.easeInOutQuad=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t};s.tabsCalculateScroll=function(e){var t=r(c||n,e||{}),i=document.querySelectorAll(t.scroller);i&&a(i,function(e){var t=e,i=t.querySelector(c.tabs).offsetWidth,n=t.clientWidth,a=t.scrollLeft,o=t.parentNode;n<i?o.classList.add(c.tabsOverflowClass):o.classList.remove(c.tabsOverflowClass),n<i&&0<a&&o.classList.add(c.tabsOverflowLeftClass),n<i&&o.classList.add(c.tabsOverflowRightClass),(i<=n||a<=0)&&o.classList.remove(c.tabsOverflowLeftClass),(i<=n||i-n<=a)&&o.classList.remove(c.tabsOverflowRightClass)})},s.calculateScroll=function(e,t){var i,n=e.querySelector(c.tabs).offsetWidth,a=e.querySelector(c.scroller).clientWidth,o=e.querySelector(c.scroller).scrollLeft;"prev"==t&&(i=o-a*c.tabsScrollAmount)<0&&(i=0),"next"==t&&n-a<(i=o+a*c.tabsScrollAmount)&&(i=n-a),h(e.querySelector(c.scroller),o,i,c.tabsAnimationSpeed)},s.scrollToTab=function(e,t){if(e){var i,n=e.offsetLeft,a=n+e.offsetWidth,o=parseInt(window.getComputedStyle(t.parentNode,null).getPropertyValue("padding-left"),10),r=parseInt(window.getComputedStyle(t.parentNode,null).getPropertyValue("padding-right"),10),s=t.scrollLeft,l=t.clientWidth;s+l<a&&(i=s+(a-(l+s)+r)),n<s&&(i=s-(s-n+o)),i&&h(t,s,i,c.tabsAnimationSpeed)}};function l(e){if(0===e.button&&!e.metaKey&&!e.ctrlKey){var t=function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;0<=--i&&t.item(i)!==this;);return-1<i});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}(e.target,c.wrapper);t&&(e.target.className==c.tabsButtonPrevClass&&s.calculateScroll(t,"prev"),e.target.className==c.tabsButtonNextClass&&s.calculateScroll(t,"next"))}}function u(){o=o||setTimeout(function(){o=null,s.tabsCalculateScroll()},200)}return s.destroy=function(){c&&(document.removeEventListener("click",l,!1),t.removeEventListener("resize",u,!1),c=null)},s.init=function(e){i&&(s.destroy(),c=r(n,e||{}),document.addEventListener("click",l,!1),t.addEventListener("resize",u,!1),function(){var e=document.querySelectorAll(c.scroller);e&&(a(e,function(t){var e=document.createElement("button");e.setAttribute("type","button"),e.innerHTML="prev",e.classList.add(c.tabsButtonPrevClass),t.parentNode.insertBefore(e,t.parentNode.firstChild);var i=document.createElement("button");i.setAttribute("type","button"),i.innerHTML="next",i.classList.add(c.tabsButtonNextClass),t.parentNode.appendChild(i),setTimeout(function(){s.scrollToTab(t.querySelector(".is-active"),t)},c.tabsAnimationSpeed),t.addEventListener("scroll",function(){o=o||setTimeout(function(){o=null,s.tabsCalculateScroll()},200)});var n=t.querySelectorAll(c.tab);n&&a(n,function(e){e.addEventListener("click",function(){s.scrollToTab(e,t)})})}),s.tabsCalculateScroll())}())},s});var pwtImage=function(){var c,w={},E=[],t="",i="",C=!1,S="",x="",I="",T="",h=0,O="",s=1;function v(e){var t=jQuery(e).closest(".js-pwtimage-id").prop("id");return void 0===t?(console.log("Cannot find parent ID for element"),console.log(e),!1):t}function g(e,n,a){var o=[];return"/"===n.substring(0,1)&&(n="".concat(n.substring(1),"/")),jQuery(e).each(function(e,t){var i=O+n+t;o.push(function(e,t,i){var n="",a=t.substring(t.lastIndexOf("/")+1);switch(i){case"select":n="".concat("<div class=\"pwt-gallery__item\"><a onclick=\"return pwtImage.previewImage('.pwt-gallery__items--images', '").concat(t,"');\" ")+'title="'.concat(a,'">')+'<div class="pwt-gallery__item__image"><div class="pwt-gallery__item__center">'+'<img src="'.concat(t,'" alt="').concat(function(e){var t=e.substring(e.lastIndexOf("/")+1);-1!==t.lastIndexOf(".")&&(t=t.substring(0,t.lastIndexOf(".")));return t}(e),'" />')+"</div>"+'<div class="pwt-gallery__item__imagename">'.concat(a,"</div>")+"</div></a></div>"}return n}(t,i,a))}),o}function u(e){var t=(e/1024).toFixed(2),i=(e/1048576).toFixed(2);return 1<=i?"".concat(i," MB"):"".concat(t," KB")}function y(e,t,i){var n=JSON.parse(localStorage.getItem("pwtImage"));null==n&&(n={});var a="".concat(e,"_").concat(t);for(var o in n)0<o.indexOf(t)&&a!==o&&n.hasOwnProperty(o)&&delete n[o];n[a]=i,localStorage.setItem("pwtImage",JSON.stringify(n))}function f(e,t){var i=JSON.parse(localStorage.getItem("pwtImage"));if(null==i)return[];var n="".concat(e,"_").concat(t);return i.hasOwnProperty(n)?i[n]:void 0}function j(e,t){if("undefined"===t){if(!window.parent.document.getElementById("system-message-container"))return!0;window.parent.Joomla.renderMessages(e)}else{if(!window.document.getElementById("system-message-container"))return!0;window.Joomla.renderMessages(e)}}return w.initialise=function(){jQuery(".js-edit-image-button").on("click",function(){jQuery(".js-image-cropper").removeClass("is-hidden"),jQuery(".js-image-preview").addClass("is-hidden")}),jQuery(".js-select-existing").on("click",function(){jQuery("[href=#select]").trigger("click")}),jQuery(".js-upload-new").on("click",function(){jQuery("[href=#upload]").trigger("click")});var e=Joomla.getOptions("PWTImageConfig");c=e.sessionToken},w.initialiseDragnDrop=function(){var n=jQuery("#js-dragarea");n.on("dragenter",function(e){return e.preventDefault(),e.stopPropagation(),n.addClass("hover"),!1}),n.on("dragover",function(e){return e.preventDefault(),e.stopPropagation(),n.addClass("hover"),!1}),n.on("dragleave",function(e){return e.preventDefault(),e.stopPropagation(),n.removeClass("hover"),!1}),n.on("drop",function(e){e.preventDefault(),e.stopPropagation(),n.removeClass("hover");var t=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;if(t.length){var i=".pwt-content";w.createPreview(i,t),w.cleanUpAfterUpload(i),h&&w.directToCanvas(i)}})},w.addRepeatImage=function(e){var t=(new Date).getTime();jQuery(e).clone().prop("id","addmore".concat(t));var i=jQuery(e).parent(),n=i.first().clone(),a=n.children(":first").prop("id").split("_")[0];n.prop("id",t);var o=n.children("[id^=label_modal_]");o.prop("id","label_modal_".concat(t));var r=o.attr("onclick").replace("setTargetId('".concat(a),"setTargetId('".concat(t));r=r.replace("modalId=".concat(a),"modalId=".concat(t)),o.attr("onclick",r),n.children("#".concat(a,"_preview")).prop("id","".concat(t,"_preview")).html(""),n.children("#".concat(a,"_value")).prop("id","".concat(t,"_value")),n.children("#".concat(a,"_clear")).prop("id","".concat(t,"_clear")).addClass("hidden").prop("onclick","pwtImage.clearImage('".concat(t,"');")),n.children("#addmore".concat(a)).prop("id","addmore".concat(t)),i.first().parent().append(n)},w.prepareUpload=function(e){jQuery("#".concat(e," button.js-button-save-new")).prop("disabled",!0),jQuery("#".concat(e," .pwt-image-localfile")).val(""),jQuery("#".concat(e," .pwt-image-targetfile")).val(""),jQuery("#".concat(e," .pwt-message")).removeClass("is-visible")},w.setTargetId=function(e){t=e},w.setIframeLink=function(e){i=e},w.setRootPath=function(e){O=e},w.setWysiwyg=function(e){C=e},w.setViewMode=function(e){s=e},w.showImageDirect=function(e){h=e},w.getTargetId=function(){return t},w.saveImage=function(i,e,n){var a=!1;void 0!==E[i]&&(a=E[i]),"undefined"===n&&(n=!1);var t=jQuery("#post-url").val(),o=jQuery("#".concat(i,"_upload"))[0].files[0],r=jQuery("#".concat(i," .js-pwt-image-data")).val(),s=jQuery("#".concat(i," .js-pwt-image-width")).val(),l=jQuery("#".concat(i," .js-pwt-image-ratio")).val(),c=jQuery("#".concat(i," .js-pwt-image-keepOriginal")).is(":checked"),h=jQuery("#".concat(i," .js-pwt-image-useOriginal")).is(":checked"),u=jQuery("#".concat(i," .js-pwt-image-sourcePath")).val(),d=jQuery("#".concat(i," .js-pwt-image-subPath")).val(),p=jQuery("#".concat(i," .js-pwt-image-localfile")).val(),f=jQuery("#".concat(i," .js-pwt-image-targetfile")).val(),m=jQuery("#".concat(i," .js-pwt-image-backgroundColor")).val(),v=jQuery("#".concat(i," .js-pwt-image-origin")).val(),g=new FormData;switch(T&&void 0===o&&(o=T[0]),""===x&&(x=jQuery("#".concat(i," #alt")).val()),""===I&&(I=jQuery("#".concat(i," #caption")).val()),jQuery("#".concat(i,"_destinationFolder")).val()){case"select":d=jQuery("#".concat(i,"_selectedFolderOptions")).val()}if(0===Number(s))if(a)s=a.getCropBoxData().width;else{var y=new Image;y.onload=function(){s=this.width},y.src=p}g.append("option","com_pwtimage"),g.append("task","image.processImage"),g.append("format","json"),g.append("pwt-image-localFile",p),g.append("pwt-image-targetFile",f),g.append("alt",x),g.append("caption",I),g.append("pwt-image-data",r),g.append("pwt-image-width",s),g.append("pwt-image-ratio",l),g.append("pwt-image-keepOriginal",c),g.append("pwt-image-useOriginal",h),g.append("pwt-image-sourcePath",u),g.append("pwt-image-subPath",d),g.append("pwt-image-backgroundColor",m),g.append("pwt-image-origin",v),g.append("image",o);var b=w.getTargetId();try{if(jQuery.ajax({type:"POST",data:g,contentType:!1,url:t,cache:!1,processData:!1,async:!1,headers:{"X-CSRF-TOKEN":e},success:function(e){if(e instanceof Object==!1){var t=function(e){return-1===e.indexOf("Allowed memory size")?"":Joomla.JText._("COM_PWTIMAGE_ERROR_ALLOWED_MEMORY_SIZE")}(e);throw 0===t.length&&(t=e),j({error:[t]},!0),!1}e.message&&j({warning:[e.message]}),e.messages&&j(e.messages),S=e.data,C||(0<(S=S.split(",")).length&&(S=S[0]),window.parent.jQuery("#".concat(b,"_value")).val(S).trigger("change"),window.parent.jQuery("#".concat(b,"_preview")).html('<img src="'.concat(O).concat(S,'" />')),window.parent.jQuery("#".concat(b,"_clear")).removeClass("hidden")),n&&(jQuery("#".concat(i," .pwt-message")).addClass("is-visible"),jQuery("#".concat(i," span.has_folder")).html(e.data)),a&&a.destroy(),document.getElementById("".concat(i,"_js-pwtimage-image")).removeAttribute("src"),n||w.closeModal()},error:function(e){throw j({error:[Joomla.JText._("COM_PWTIMAGE_SAVE_FAILED","There was a problem to save the file")]}),console.log("Image upload failed: ".concat(e.responseText)),!1}}),n){S=I=x="",jQuery("#".concat(i," .js-pwt-image-localfile")).val(""),jQuery("#".concat(i,"_upload")).replaceWith(jQuery("#".concat(i,"_upload")).val("").clone(!0)),jQuery("#".concat(i," .js-pwt-image-data")).val(""),0===d.length&&(d=(u=jQuery("#".concat(i," .js-sourcePath")).text()).substring(0,u.length-1)),w.loadFolder("#".concat(i),d,"select",e);var _=jQuery(".pwt-fulltab-message");_.removeClass("is-hidden"),_.next().addClass("is-hidden"),jQuery('[href="#select"]').trigger("click")}}catch(e){return!1}return w.cancelImage(i),!0},w.clearImage=function(e){jQuery("#".concat(e,"_value")).val(""),jQuery("#".concat(e,"_preview img")).prop("src",""),jQuery("#".concat(e,"_clear")).addClass("hidden"),jQuery("#".concat(e,"_js-pwtimage-image")).prop("src","")},w.imageToolbar=function(e){var t=v(e),i=jQuery(e).data();if(!jQuery(this).prop("disabled")&&!jQuery(this).hasClass("disabled")&&void 0!==E[t]){var n=E[t];switch(i.method){case"scaleX":case"scaleY":n[i.method](i.option),jQuery(e).data("option",1===i.option?-1:1);break;case"rotate":case"zoom":n[i.method](i.option);break;case"ratio":var a=i.option;if("string"==typeof a&&0<a.indexOf("/")){var o=i.option.split("/");a=o[0]/o[1]}n.setAspectRatio(a),jQuery("#".concat(t," .js-pwt-image-ratio")).val(i.option)}}},w.openImage=function(e){var t=v(e);jQuery("#".concat(t," .js-pwt-image-toolbar")).hide(),jQuery("#".concat(t," .js-cropper-container")).hide(),jQuery("form.js-image-form > div.pull-right").hide()},w.loadFolder=function(e,d,p,f){var m=v(e),t=new FormData,i=jQuery("#post-url").val();return t.append("option","com_pwtimage"),t.append("task","image.loadFolder"),t.append("format","json"),t.append("folder",d),jQuery.ajax({type:"POST",data:t,url:i,contentType:!1,cache:!1,processData:!1,headers:{"X-CSRF-TOKEN":f},success:function(e){try{if(e.message)return console.log("Failed to load subfolders from folder ".concat(d,". Message: ").concat(e.message)),j({warning:[e.message]}),!1;if(e.messages)return j(e.messages),!1;if(void 0===e.data)return!1}catch(e){console.log(e.message)}var n=[];if(e.data.folders){var t,i=[],a="";(0<d.indexOf("/")||1<d.length)&&(t=d.split("/")),jQuery(t).each(function(e,t){0<(a+=t).length&&(i[e+1]="<a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '/".concat(a,"', '").concat(p,"', '").concat(f,'\'); return false;"><span class="icon-folder-2"></span>').concat(t,"</a>"),a+="/")}),jQuery("#".concat(p," .js-breadcrumb")).html(i.join(" ")),jQuery(e.data.folders).each(function(e,t){var i=t;"/"!==d&&(i="".concat(d,"/").concat(t)),n.push("<div class=\"pwt-gallery__item\"><a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '".concat(i,"', '").concat(p,"', '").concat(f,"'); return false;\">")+'<div class="pwt-gallery__item__content"><span class="pwt-gallery__item__icon icon-folder-2"></span>'+'<span class="pwt-gallery__item__title">'.concat(t,"</span>")+"</div></a></div>")});var o=jQuery("#".concat(m," #").concat(p," .pwt-gallery__items--folders"));o.html(""),n.length&&o.html(n.join(" "))}var r=[];if(e.data.files){for(var s=Math.ceil(e.data.files.length/100),l=1;l<=s;l++)r.push("<a onclick=\"pwtImage.showMoreImages('.pwt-gallery__items--images', ".concat(l,", '").concat(p,"');\">").concat(l,"</a>"));y(m,"files",e.data.files),y(m,"basePath",e.data.basePath);var c=e.data.files.slice(0,100);n=g(c,d,p);var h=jQuery("#".concat(m," #").concat(p," .pwt-gallery__items--images"));h.html(""),n.length&&h.html(n.join(" "));var u=jQuery("#".concat(m," #").concat(p," .pwt-pagination"));u.html(""),r.length&&u.html('<div class="pwt-pagination__pages">'.concat(r.join(" "),"</div>"))}w.selectFilter(jQuery("#selectFilter").val())},error:function(e){console.log("Failed to load folder: ".concat(e.responseText)),console.log("Response code: ".concat(e.status," ").concat(e.statusText))}}),!1},w.loadSelectFolders=function(e,t){var i=new FormData,n=jQuery("#post-url").val();return i.append("option","com_pwtimage"),i.append("task","image.loadSelectFolders"),i.append("format","json"),i.append("sourcePath",e),jQuery.ajax({type:"POST",data:i,url:n,contentType:!1,cache:!1,processData:!1,headers:{"X-CSRF-TOKEN":t},success:function(e){choicesFolder.clearChoices(),e.data[0].forEach(function(e){choicesFolder.setChoices([{value:e,label:e}],"value","label",!1)}),choicesFolder.setChoiceByValue("/")},error:function(e){console.log("Failed to load folder: ".concat(e.responseText)),console.log("Response code: ".concat(e.status," ").concat(e.statusText))}}),!1},w.showMoreImages=function(e,t,i){var n=v(e),a=f(n,"files"),o=f(n,"basePath"),r=1===t?0:100*(t-1),s=100*t,l=g(a.slice(r,s),o,i),c=jQuery("#".concat(n," #").concat(i," .pwt-gallery__items--images"));c.html(""),l.length&&c.html(l.join(" ")),w.selectFilter(jQuery("#selectFilter").val(),t)},w.addImageToCanvas=function(e,t,i,n){var a=v(e);null==n&&(n=!1),jQuery("#".concat(a," div.pwt-body div.cropper-container > div.cropper-container")).remove();var o=jQuery("#".concat(a," .js-pwt-image-ratio")).val().split("/");n||(i=document.getElementById("".concat(a,"_js-pwtimage-image")));var r=new Cropper(i,{aspectRatio:o[0]/o[1],viewMode:s,crop:function(e){var t=['{"x":'.concat(e.detail.x),'"y":'.concat(e.detail.y),'"height":'.concat(e.detail.height),'"width":'.concat(e.detail.width),'"rotate":'.concat(e.detail.rotate),'"scaleX":'.concat(e.detail.scaleX),'"scaleY":'.concat(e.detail.scaleY,"}")].join();jQuery("#".concat(a," .js-pwt-image-data")).val(t)},ready:function(){var e=r.getImageData();r.setCropBoxData({top:0,width:e.width})}});return n?((E[a]=r).init(),window.parent.jQuery("#".concat(a,"_value")).prop("value",t.name).trigger("change")):(r.replace(t),E[a]=r),jQuery("#".concat(a," .pwt-fulltab-message")).addClass("is-hidden"),jQuery("#".concat(a," button.js-button-save-new")).prop("disabled",!1),jQuery("#".concat(a," .js-image-info")).removeClass("is-hidden"),jQuery('[href="#edit"]').trigger("click"),jQuery("#".concat(a," .js-button-image")).removeClass("hidden"),!1},w.closeModal=function(){C?(S&&jQuery("form.js-image-form #formPath").val(S),x&&jQuery("form.js-image-form #alt").val(x),I&&jQuery("form.js-image-form #caption").val(I),jQuery("form.js-image-form #layout").val("close"),jQuery("form.js-image-form").submit()):(window.parent.jQuery("iframe#pwtImageFrame-".concat(t)).prop("src",i),window.parent.jQuery("#js-modal-close").click())},w.setDestination=function(e){var t=v(e);if(void 0!==choicesDestination){switch(choicesDestination.getValue().value){case"default":jQuery("#".concat(t,"_enterFolder")).addClass("is-visible").removeClass("is-hidden"),jQuery("#".concat(t,"_subPath")).prop("disabled",!0),jQuery("#".concat(t,"_selectFolder")).addClass("is-hidden").removeClass("is-visible");break;case"select":jQuery("#".concat(t,"_enterFolder")).addClass("is-hidden").removeClass("is-visible"),jQuery("#".concat(t,"_selectFolder")).addClass("is-visible").removeClass("is-hidden");break;case"custom":jQuery("#".concat(t,"_enterFolder")).addClass("is-visible").removeClass("is-hidden"),jQuery("#".concat(t,"_subPath")).prop("disabled",!1),jQuery("#".concat(t,"_selectFolder")).addClass("is-hidden").removeClass("is-visible")}jQuery("#".concat(t,"_selectFolder")).trigger("change")}},w.imageInfo=function(e){if(0!==jQuery(e).closest("#js-sortable-result").length){var t=jQuery(e).parent().find("a").hasClass("is-selected");if(jQuery("#js-sortable-result").find("a.is-selected").removeClass("is-selected"),jQuery("#gallery-image-info .js-image-info").hide(),t)jQuery("#gallery-image-info").hide();else{if(jQuery(e).parent().find("a").addClass("is-selected"),"button"===e.type)var i=jQuery(e).siblings().find("img").prop("src").replace(/[\/\.]/g,"_");else i=jQuery(e).find("img").prop("src").replace(/[\/\.]/g,"_");if(0===jQuery('#gallery-image-info input[name="input_'.concat(i,'_alt"]')).length){var n=document.createElement("div");n.className="js-image-info ".concat(i,"_path"),n.innerHTML=jQuery(e).parent().find("img").prop("src"),jQuery("#gallery-image-info .pwt-form-group:first").append(n);var a=document.createElement("input");a.type="text",a.name="input_".concat(i,"_alt"),a.className="pwt-form-control js-image-info js-pwt-image-alt",jQuery("#gallery-image-info .pwt-form-group:nth-child(3)").append(a);var o=document.createElement("input");o.type="text",o.name="input_".concat(i,"_caption"),o.className="pwt-form-control js-image-info js-pwt-image-caption",jQuery("#gallery-image-info .pwt-form-group:nth-child(4)").append(o)}else jQuery("#gallery-image-info div.".concat(i,"_path")).show(),jQuery('#gallery-image-info input[name="input_'.concat(i,'_alt"]')).show(),jQuery('#gallery-image-info input[name="input_'.concat(i,'_caption"]')).show();jQuery("#gallery-image-info").show(),jQuery('#gallery-image-info input[name="input_'.concat(i,'_alt"]')).focus()}}},w.cleanUpAfterUpload=function(e){var t=v(e);jQuery('[href="#edit"]').trigger("click"),void 0!==choicesDestination&&(choicesDestination.setChoiceByValue("default"),w.setDestination("#".concat(t,"_destinationFolder"))),jQuery(".js-pwt-image-localfile").val("")},w.uploadImagePreview=function(e){if(window.URL||window.webkitURL){var t=v(e);document.getElementById("".concat(t,"_upload")).onchange=function(){w.createPreview(e,this.files),w.cleanUpAfterUpload(e),null!==document.getElementById("useOriginal")&&(w.useOriginal(t,e),document.getElementById("useOriginal").checked=!1,document.getElementById("useOriginal").value=0,document.getElementById("useOriginal").parentElement.style.display="none"),jQuery('[href="#edit"]')[0].click(),h&&w.directToCanvas(e)}}return!1},w.directToCanvas=function(e){var t=v(e);jQuery("#".concat(t," .js-image-preview")).addClass("is-hidden"),jQuery("#".concat(t," .js-image-cropper")).removeClass("is-hidden");var i=jQuery("#".concat(t,"_preview img")).prop("src");jQuery("#".concat(t," #keepOriginal")).prop("checked",!1),w.addImageToCanvas(e,i)},w.createPreview=function(e,t){var i=v(e),n=jQuery("#".concat(i,"_preview img"));if(t&&t.length){var a=(T=t)[0],o=jQuery(".js-pwt-image-maxsize").val(),r=jQuery(".js-pwt-image-dimensionsize");if(a.size>o&&0<o)return window.alert(jQuery(".js-pwt-image-maxsize-message").val()),imageUpload.value="",n.removeAttribute("src"),!1;if(/^image\/\w+$/.test(a.type)){if(n.prop("src",URL.createObjectURL(a)),n.naturalHeight>r.val()||n.naturalWidth>r.val())return window.alert(jQuery(".js-pwt-image-maxsize-message").val()),imageUpload.value="",n.removeAttribute("src"),!1;var s=a.name.split("/").slice(-1)[0];jQuery("#".concat(i," #pwt-image-targetFile")).val(s)}else window.alert(Joomla.JText._("COM_PWTIMAGE_CHOOSE_IMAGE","Please choose an image file."))}jQuery("#".concat(i," .pwt-message")).removeClass("is-visible"),jQuery("#".concat(i," .pwt-edit-block")).removeClass("is-hidden"),jQuery("#".concat(i," .pwt-fulltab-message")).addClass("is-hidden"),jQuery("#".concat(i," .js-button-image")).prop("disabled",!1),n.off("load").on("load",function(){jQuery(".js-pwt-filename").html(a.name),jQuery(".js-pwt-filesize").html(u(a.size)),jQuery(".js-pwt-fileext").html(a.type.replace("image/","")),jQuery(".js-pwt-filedimensions").html("".concat(this.naturalWidth," x ").concat(this.naturalHeight))})},w.previewImage=function(e,t){var i=v(e);w.cancelImage(i);var n=t.replace(O,"/");if(jQuery("#".concat(i,"_preview img")).prop("src",t),jQuery("#".concat(i,"_js-pwtimage-image")).prop("src",n),jQuery("#".concat(i," .js-pwt-image-localfile")).val(n),jQuery('[href="#edit"]').trigger("click"),jQuery("#".concat(i," .pwt-fulltab-message")).addClass("is-hidden"),jQuery("#".concat(i," .pwt-edit-block")).removeClass("is-hidden"),jQuery("#".concat(i," .js-image-preview")).removeClass("is-hidden"),void 0!==choicesDestination){choicesDestination.setChoiceByValue("select");var a=choicesDestination.getValue().value;"select"!==a&&choicesDestination.setChoiceByValue("default"),w.setDestination("#".concat(i,"_destinationFolder"))}0===t.indexOf(O)&&(t=t.substring(O.length-1));var o=jQuery("#".concat(i,"_selectFolder")).prev().text(),r=t.substring(o.length,t.lastIndexOf("/")),s=t.substring(t.lastIndexOf("/")+1),l=jQuery("#".concat(i," .js-sourcePath")).text();0===r.lastIndexOf(l)&&(r=r.substring(l.length)),1<r.length&&("select"===a&&void 0!==choicesFolder?choicesFolder.setChoiceByValue(r):jQuery("#".concat(i,"_subPath")).val("".concat(r,"/"))),0<s.length&&jQuery("#".concat(i," #pwt-image-targetFile")).val(s),jQuery("#".concat(i," .js-button-image")).prop("disabled",!1),h&&w.directToCanvas(".pwt-content"),document.getElementById("useOriginal").parentElement.style.display="block",jQuery.ajax({type:"POST",data:{option:"com_pwtimage",task:"image.loadMetaData",format:"json",image:t},url:jQuery("#post-url").val(),headers:{"X-CSRF-TOKEN":c},success:function(e){e&&!0===e.success&&(t=e.data,jQuery(".js-pwt-filename").html(t.name),jQuery(".js-pwt-filesize").html(u(t.size)),jQuery(".js-pwt-fileext").html(t.mime.replace("image/","")),jQuery(".js-pwt-filedimensions").html("".concat(t[0]," x ").concat(t[1])))},error:function(e){console.log(e)}})},w.cancelImage=function(e){jQuery("#".concat(e," button.js-button-save-new")).prop("disabled",!0),jQuery("#".concat(e," .js-image-cropper")).addClass("is-hidden"),jQuery("#".concat(e," .js-image-info")).addClass("is-hidden"),jQuery("#".concat(e," .js-image-preview")).removeClass("is-hidden")},w.selectFilter=function(e,t){jQuery("#select .pwt-filepicker__content .pwt-gallery__items--images").html(""),void 0===t&&(t=1);var i=v("#selectFilter"),n=f(i,"files"),a=f(i,"basePath"),o=n,r="select",s=1===t?0:100*(t-1),l=100*t,c=[];e&&(o=function(e,t){return e.filter(function(e){return-1<e.toLowerCase().indexOf(t.toLowerCase())})}(n,e));var h=g(o.slice(s,l),a,r),u=jQuery("#".concat(i," #").concat(r," .pwt-gallery__items--images"));u.html(""),h.length&&u.html(h.join(" "));var d=Math.ceil(o.length/100);for(t=1;t<=d;t++)c.push("<a onclick=\"pwtImage.showMoreImages('.pwt-gallery__items--images', ".concat(t,", '").concat(r,"');\">").concat(t,"</a>"));var p=jQuery("#".concat(i," #").concat(r," .pwt-pagination"));p.html(""),c.length&&p.html('<div class="pwt-pagination__pages">'.concat(c.join(" "),"</div>"))},w.useOriginal=function(e,t){var i=document.getElementsByClassName("pwt-image-modify"),n="";jQuery(t).is(":checked")&&(w.cancelImage(e),n="none");for(var a=0;a<i.length;a++)i[a].style.display=n},w.keepOriginal=function(e,t){jQuery(t).is(":checked")&&w.cancelImage(e)},w}();!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.Choices=t():e.Choices=t()}(window,function(){return n={},a.m=i=[function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diff=t.cloneObject=t.existsInArray=t.isIE11=t.fetchFromObject=t.getWindowHeight=t.dispatchEvent=t.sortByScore=t.sortByAlpha=t.calcWidthOfInput=t.strToEl=t.sanitise=t.isScrolledIntoView=t.getAdjacentEl=t.findAncestorByAttrName=t.wrap=t.isElement=t.isType=t.getType=t.generateId=t.generateChars=t.getRandomNumber=void 0;function n(e,t){return Math.floor(Math.random()*(t-e)+e)}t.getRandomNumber=n;function a(e){for(var t="",i=0;i<e;i++){t+=n(0,36).toString(36)}return t}t.generateChars=a;t.generateId=function(e,t){var i=e.id||e.name&&"".concat(e.name,"-").concat(a(2))||a(4);return i=i.replace(/(:|\.|\[|\]|,)/g,""),i="".concat(t,"-").concat(i)};function o(e){return Object.prototype.toString.call(e).slice(8,-1)}t.getType=o;function r(e,t){return null!=t&&o(t)===e}t.isType=r;t.isElement=function(e){return e instanceof Element};t.wrap=function(e,t){var i=1<arguments.length&&void 0!==t?t:document.createElement("div");return e.nextSibling?e.parentNode.insertBefore(i,e.nextSibling):e.parentNode.appendChild(i),i.appendChild(e)};t.findAncestorByAttrName=function(e,t){for(var i=e;i;){if(i.hasAttribute(t))return i;i=i.parentElement}return null};t.getAdjacentEl=function(e,t,i){var n=2<arguments.length&&void 0!==i?i:1;if(e&&t){var a=e.parentNode.parentNode,o=Array.from(a.querySelectorAll(t)),r=o.indexOf(e);return o[r+(0<n?1:-1)]}};t.isScrolledIntoView=function(e,t,i){if(e)return 0<(2<arguments.length&&void 0!==i?i:1)?t.scrollTop+t.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=t.scrollTop};function s(e){return r("String",e)?e.replace(/&/g,"&amp;").replace(/>/g,"&rt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):e}t.sanitise=s;var l,c=(l=document.createElement("div"),function(e){var t=e.trim();l.innerHTML=t;for(var i=l.children[0];l.firstChild;)l.removeChild(l.firstChild);return i});t.strToEl=c;t.calcWidthOfInput=function(e,t){var i=e.value||e.placeholder,n=e.offsetWidth;if(i){var a=c("<span>".concat(s(i),"</span>"));if(a.style.position="absolute",a.style.padding="0",a.style.top="-9999px",a.style.left="-9999px",a.style.width="auto",a.style.whiteSpace="pre",document.body.contains(e)&&window.getComputedStyle){var o=window.getComputedStyle(e);o&&(a.style.fontSize=o.fontSize,a.style.fontFamily=o.fontFamily,a.style.fontWeight=o.fontWeight,a.style.fontStyle=o.fontStyle,a.style.letterSpacing=o.letterSpacing,a.style.textTransform=o.textTransform,a.style.padding=o.padding)}document.body.appendChild(a),requestAnimationFrame(function(){i&&a.offsetWidth!==e.offsetWidth&&(n=a.offsetWidth+4),document.body.removeChild(a),t.call(void 0,"".concat(n,"px"))})}else t.call(void 0,"".concat(n,"px"))};t.sortByAlpha=function(e,t){var i="".concat(e.label||e.value).toLowerCase(),n="".concat(t.label||t.value).toLowerCase();return i<n?-1:n<i?1:0};t.sortByScore=function(e,t){return e.score-t.score};t.dispatchEvent=function(e,t,i){var n=new CustomEvent(t,{detail:2<arguments.length&&void 0!==i?i:null,bubbles:!0,cancelable:!0});return e.dispatchEvent(n)};t.getWindowHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)};t.fetchFromObject=function e(t,i){var n=i.indexOf(".");return-1<n?e(t[i.substring(0,n)],i.substr(n+1)):t[i]};t.isIE11=function(){return!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/))};t.existsInArray=function(e,t,i){var n=2<arguments.length&&void 0!==i?i:"value";return e.some(function(e){return r("String",t)?e[n]===t.trim():e[n]===t})};t.cloneObject=function(e){return JSON.parse(JSON.stringify(e))};t.diff=function(e,t){var i=Object.keys(e).sort(),n=Object.keys(t).sort();return i.filter(function(e){return n.indexOf(e)<0})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCROLLING_SPEED=t.KEY_CODES=t.ACTION_TYPES=t.EVENTS=t.DEFAULT_CONFIG=t.DEFAULT_CLASSNAMES=void 0;var n=i(0),a={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"};t.DEFAULT_CLASSNAMES=a;var o={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilterFn:null,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sortFn:n.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(e){return'Press Enter to add <b>"'.concat((0,n.sanitise)(e),'"</b>')},maxItemText:function(e){return"Only ".concat(e," values can be added")},itemComparer:function(e,t){return e===t},fuseOptions:{includeScore:!0},callbackOnInit:null,callbackOnCreateTemplates:null,classNames:a};t.DEFAULT_CONFIG=o;t.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice"};t.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL"};t.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34};t.SCROLLING_SPEED=4},function(e,o,r){"use strict";(function(e,t){var i,n=r(7);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t;var a=Object(n.a)(i);o.a=a}).call(this,r(3),r(14)(e))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":_typeof2(window))&&(i=window)}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(0);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function n(e){var t=e.element,i=e.classNames;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Object.assign(this,{element:t,classNames:i}),!(0,a.isElement)(t))throw new TypeError("Invalid element passed");this.isDisabled=!1}return function(e,t,i){t&&o(e.prototype,t),i&&o(e,i)}(n,[{key:"conceal",value:function(){this.element.classList.add(this.classNames.input),this.element.classList.add(this.classNames.hiddenState),this.element.tabIndex="-1";var e=this.element.getAttribute("style");e&&this.element.setAttribute("data-choice-orig-style",e),this.element.setAttribute("aria-hidden","true"),this.element.setAttribute("data-choice","active")}},{key:"reveal",value:function(){this.element.classList.remove(this.classNames.input),this.element.classList.remove(this.classNames.hiddenState),this.element.removeAttribute("tabindex");var e=this.element.getAttribute("data-choice-orig-style");e?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",e)):this.element.removeAttribute("style"),this.element.removeAttribute("aria-hidden"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value}},{key:"enable",value:function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1}},{key:"disable",value:function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0}},{key:"triggerEvent",value:function(e,t){(0,a.dispatchEvent)(this.element,e,t)}},{key:"value",get:function(){return this.element.value}}]),n}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TEMPLATES=void 0;var n,l=(n=i(27))&&n.__esModule?n:{default:n},c=i(0);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a={containerOuter:function(e,t,i,n,a,o){var r=n?'tabindex="0"':"",s=i?'role="listbox"':"",l="";return i&&a&&(s='role="combobox"',l='aria-autocomplete="list"'),(0,c.strToEl)('\n      <div\n        class="'.concat(e.containerOuter,'"\n        data-type="').concat(o,'"\n        ').concat(s,"\n        ").concat(r,"\n        ").concat(l,'\n        aria-haspopup="true"\n        aria-expanded="false"\n        dir="').concat(t,'"\n        >\n      </div>\n    '))},containerInner:function(e){return(0,c.strToEl)('\n      <div class="'.concat(e.containerInner,'"></div>\n    '))},itemList:function(e,t){var i,n=(0,l.default)(e.list,(h(i={},e.listSingle,t),h(i,e.listItems,!t),i));return(0,c.strToEl)('\n      <div class="'.concat(n,'"></div>\n    '))},placeholder:function(e,t){return(0,c.strToEl)('\n      <div class="'.concat(e.placeholder,'">\n        ').concat(t,"\n      </div>\n    "))},item:function(e,t,i){var n,a,o=t.active?'aria-selected="true"':"",r=t.disabled?'aria-disabled="true"':"",s=(0,l.default)(e.item,(h(n={},e.highlightedState,t.highlighted),h(n,e.itemSelectable,!t.highlighted),h(n,e.placeholder,t.placeholder),n));return i?(s=(0,l.default)(e.item,(h(a={},e.highlightedState,t.highlighted),h(a,e.itemSelectable,!t.disabled),h(a,e.placeholder,t.placeholder),a)),(0,c.strToEl)('\n        <div\n          class="'.concat(s,'"\n          data-item\n          data-id="').concat(t.id,'"\n          data-value="').concat(t.value,"\"\n          data-custom-properties='").concat(t.customProperties,"'\n          data-deletable\n          ").concat(o,"\n          ").concat(r,"\n          >\n          ").concat(t.label,'\x3c!--\n       --\x3e<button\n            type="button"\n            class="').concat(e.button,'"\n            data-button\n            aria-label="Remove item: \'').concat(t.value,"'\"\n            >\n            Remove item\n          </button>\n        </div>\n      "))):(0,c.strToEl)('\n      <div\n        class="'.concat(s,'"\n        data-item\n        data-id="').concat(t.id,'"\n        data-value="').concat(t.value,'"\n        ').concat(o,"\n        ").concat(r,"\n        >\n        ").concat(t.label,"\n      </div>\n    "))},choiceList:function(e,t){var i=t?"":'aria-multiselectable="true"';return(0,c.strToEl)('\n      <div\n        class="'.concat(e.list,'"\n        dir="ltr"\n        role="listbox"\n        ').concat(i,"\n        >\n      </div>\n    "))},choiceGroup:function(e,t){var i=t.disabled?'aria-disabled="true"':"",n=(0,l.default)(e.group,h({},e.itemDisabled,t.disabled));return(0,c.strToEl)('\n      <div\n        class="'.concat(n,'"\n        data-group\n        data-id="').concat(t.id,'"\n        data-value="').concat(t.value,'"\n        role="group"\n        ').concat(i,'\n        >\n        <div class="').concat(e.groupHeading,'">').concat(t.value,"</div>\n      </div>\n    "))},choice:function(e,t,i){var n,a=0<t.groupId?'role="treeitem"':'role="option"',o=(0,l.default)(e.item,e.itemChoice,(h(n={},e.itemDisabled,t.disabled),h(n,e.itemSelectable,!t.disabled),h(n,e.placeholder,t.placeholder),n));return(0,c.strToEl)('\n      <div\n        class="'.concat(o,'"\n        data-select-text="').concat(i,'"\n        data-choice\n        data-id="').concat(t.id,'"\n        data-value="').concat(t.value,'"\n        ').concat(t.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable",'\n        id="').concat(t.elementId,'"\n        ').concat(a,"\n        >\n        ").concat(t.label,"\n      </div>\n    "))},input:function(e){var t=(0,l.default)(e.input,e.inputCloned);return(0,c.strToEl)('\n      <input\n        type="text"\n        class="'.concat(t,'"\n        autocomplete="off"\n        autocapitalize="off"\n        spellcheck="false"\n        role="textbox"\n        aria-autocomplete="list"\n        >\n    '))},dropdown:function(e){var t=(0,l.default)(e.list,e.listDropdown);return(0,c.strToEl)('\n      <div\n        class="'.concat(t,'"\n        aria-expanded="false"\n        >\n      </div>\n    '))},notice:function(e,t,i){var n,a=2<arguments.length&&void 0!==i?i:"",o=(0,l.default)(e.item,e.itemChoice,(h(n={},e.noResults,"no-results"===a),h(n,e.noChoices,"no-choices"===a),n));return(0,c.strToEl)('\n      <div class="'.concat(o,'">\n        ').concat(t,"\n      </div>\n    "))},option:function(e){return(0,c.strToEl)('\n      <option value="'.concat(e.value,'" ').concat(e.active?"selected":""," ").concat(e.disabled?"disabled":""," ").concat(e.customProperties?"data-custom-properties=".concat(e.customProperties):"",">").concat(e.label,"</option>\n    "))}},o=t.TEMPLATES=a;t.default=o},function(e,t,i){"use strict";i.r(t);var n=i(8),a="object"==("undefined"==typeof self?"undefined":_typeof2(self))&&self&&self.Object===Object&&self,o=(n.a||a||Function("return this")()).Symbol,r=Object.prototype,s=r.hasOwnProperty,l=r.toString,c=o?o.toStringTag:void 0;var h=function(e){var t=s.call(e,c),i=e[c];try{var n=!(e[c]=void 0)}catch(e){}var a=l.call(e);return n&&(t?e[c]=i:delete e[c]),a},u=Object.prototype.toString;var d=function(e){return u.call(e)},p=o?o.toStringTag:void 0;var f=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?h(e):d(e)};var m=function(t,i){return function(e){return t(i(e))}}(Object.getPrototypeOf,Object);var v=function(e){return null!=e&&"object"==_typeof2(e)},g=Function.prototype,y=Object.prototype,b=g.toString,_=y.hasOwnProperty,w=b.call(Object);var E=function(e){if(!v(e)||"[object Object]"!=f(e))return!1;var t=m(e);if(null===t)return!0;var i=_.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&b.call(i)==w},C=i(2),S={INIT:"@@redux/INIT"};function x(e,t,i){var n;if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(x)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e,o=t,r=[],s=r,l=!1;function c(){s===r&&(s=r.slice())}function h(){return o}function u(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var i=!0;return c(),s.push(t),function(){if(i){i=!1,c();var e=s.indexOf(t);s.splice(e,1)}}}function d(e){if(!E(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,o=a(o,e)}finally{l=!1}for(var t=r=s,i=0;i<t.length;i++){(0,t[i])()}return e}return d({type:S.INIT}),(n={dispatch:d,subscribe:u,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,d({type:S.INIT})}})[C.a]=function(){var e,i=u;return(e={subscribe:function(e){if("object"!==_typeof2(e))throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(h())}return t(),{unsubscribe:i(t)}}})[C.a]=function(){return this},e},n}function I(e){for(var t=Object.keys(e),m={},i=0;i<t.length;i++){var n=t[i];0,"function"==typeof e[n]&&(m[n]=e[n])}var v=Object.keys(m);var g=void 0;try{!function(i){Object.keys(i).forEach(function(e){var t=i[e];if(void 0===t(void 0,{type:S.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+S.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(m)}catch(e){g=e}return function(e,t){var i=0<arguments.length&&void 0!==e?e:{},n=t;if(g)throw g;for(var a,o,r,s=!1,l={},c=0;c<v.length;c++){var h=v[c],u=m[h],d=i[h],p=u(d,n);if(void 0===p){var f=(a=h,r=void 0,"Given action "+((r=(o=n)&&o.type)&&'"'+r.toString()+'"'||"an action")+', reducer "'+a+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(f)}l[h]=p,s=s||p!==d}return s?l:i}}function T(e,t){return function(){return t(e.apply(void 0,arguments))}}function O(e,t){if("function"==typeof e)return T(e,t);if("object"!==_typeof2(e)||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":_typeof2(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),n={},a=0;a<i.length;a++){var o=i[a],r=e[o];"function"==typeof r&&(n[o]=T(r,t))}return n}function j(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};function D(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return function(s){return function(e,t,i){var n,a=s(e,t,i),o=a.dispatch,r={getState:a.getState,dispatch:function(e){return o(e)}};return n=l.map(function(e){return e(r)}),o=j.apply(void 0,n)(a.dispatch),k({},a,{dispatch:o})}}}i.d(t,"createStore",function(){return x}),i.d(t,"combineReducers",function(){return I}),i.d(t,"bindActionCreators",function(){return O}),i.d(t,"applyMiddleware",function(){return D}),i.d(t,"compose",function(){return j})},function(e,t,i){"use strict";function n(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}i.d(t,"a",function(){return n})},function(e,i,t){"use strict";(function(e){var t="object"==_typeof2(e)&&e&&e.Object===Object&&e;i.a=t}).call(this,t(3))},function(e,t,i){e.exports=i(10)},function(e,t,i){"use strict";var l=o(i(11)),r=o(i(12)),s=o(i(13)),c=i(20),E=i(1),n=i(5),_=i(28),C=i(29),u=i(30),a=i(31),h=i(32),S=i(0);function o(e){return e&&e.__esModule?e:{default:e}}function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"[data-choice]",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(0,S.isType)("String",e)){var i=Array.from(document.querySelectorAll(e));if(1<i.length)return this._generateInstances(i,t)}this.config=r.default.all([E.DEFAULT_CONFIG,o.userDefaults,t],{arrayMerge:function(e,t){return[].concat(t)}});var n=(0,S.diff)(this.config,E.DEFAULT_CONFIG);n.length&&console.warn("Unknown config option(s) passed",n.join(", ")),["auto","always"].includes(this.config.renderSelectedChoices)||(this.config.renderSelectedChoices="auto");var a=(0,S.isType)("String",e)?document.querySelector(e):e;return a?(this._isTextElement="text"===a.type,this._isSelectOneElement="select-one"===a.type,this._isSelectMultipleElement="select-multiple"===a.type,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this._isTextElement?this.passedElement=new c.WrappedInput({element:a,classNames:this.config.classNames,delimiter:this.config.delimiter}):this._isSelectElement&&(this.passedElement=new c.WrappedSelect({element:a,classNames:this.config.classNames})),this.passedElement?(!0===this.config.shouldSortItems&&this._isSelectOneElement&&!this.config.silent&&console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false."),this.initialised=!1,this._store=new s.default(this.render),this._initialState={},this._currentState={},this._prevState={},this._currentValue="",this._canSearch=this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,S.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.element.getAttribute("dir")||"ltr",this._idNames={itemChoice:"item-choice"},this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&(this._presetItems=this._presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onAKey=this._onAKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),"active"===this.passedElement.element.getAttribute("data-choice")&&console.warn("Trying to initialise Choices on element already initialised"),void this.init()):console.error("Passed element was of an invalid type")):console.error("Could not find passed element or passed element was of an invalid type")}return function(e,t,i){t&&d(e.prototype,t),i&&d(e,i)}(o,[{key:"init",value:function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._initialState=(0,S.cloneObject)(this._store.state),this._store.subscribe(this._render),this._render(),this._addEventListeners(),this.config.addItems&&!this.passedElement.element.hasAttribute("disabled")||this.disable(),this.initialised=!0;var e=this.config.callbackOnInit;e&&(0,S.isType)("Function",e)&&e.call(this)}}},{key:"destroy",value:function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this._isSelectElement&&(this.passedElement.options=this._presetChoices),this.clearStore(),this.config.templates=null,this.initialised=!1)}},{key:"enable",value:function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this}},{key:"disable",value:function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this}},{key:"highlightItem",value:function(e,t){var i=!(1<arguments.length&&void 0!==t)||t;if(!e)return this;var n=e.id,a=e.groupId,o=void 0===a?-1:a,r=e.value,s=void 0===r?"":r,l=e.label,c=void 0===l?"":l,h=0<=o?this._store.getGroupById(o):null;return this._store.dispatch((0,C.highlightItem)(n,!0)),i&&this.passedElement.triggerEvent(E.EVENTS.highlightItem,{id:n,value:s,label:c,groupValue:h&&h.value?h.value:null}),this}},{key:"unhighlightItem",value:function(e){if(!e)return this;var t=e.id,i=e.groupId,n=void 0===i?-1:i,a=e.value,o=void 0===a?"":a,r=e.label,s=void 0===r?"":r,l=0<=n?this._store.getGroupById(n):null;return this._store.dispatch((0,C.highlightItem)(t,!1)),this.passedElement.triggerEvent(E.EVENTS.highlightItem,{id:t,value:o,label:s,groupValue:l&&l.value?l.value:null}),this}},{key:"highlightAll",value:function(){var t=this;return this._store.items.forEach(function(e){return t.highlightItem(e)}),this}},{key:"unhighlightAll",value:function(){var t=this;return this._store.items.forEach(function(e){return t.unhighlightItem(e)}),this}},{key:"removeActiveItemsByValue",value:function(t){var i=this;return this._store.activeItems.filter(function(e){return e.value===t}).forEach(function(e){return i._removeItem(e)}),this}},{key:"removeActiveItems",value:function(t){var i=this;return this._store.activeItems.filter(function(e){return e.id!==t}).forEach(function(e){return i._removeItem(e)}),this}},{key:"removeHighlightedItems",value:function(e){var t=this,i=0<arguments.length&&void 0!==e&&e;return this._store.highlightedActiveItems.forEach(function(e){t._removeItem(e),i&&t._triggerChange(e.value)}),this}},{key:"showDropdown",value:function(e){var t=this;return this.dropdown.isActive||requestAnimationFrame(function(){t.dropdown.show(),t.containerOuter.open(t.dropdown.distanceFromTopWindow()),!e&&t._canSearch&&t.input.focus(),t.passedElement.triggerEvent(E.EVENTS.showDropdown,{})}),this}},{key:"hideDropdown",value:function(e){var t=this;return this.dropdown.isActive&&requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),!e&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(E.EVENTS.hideDropdown,{})}),this}},{key:"getValue",value:function(e){var n=0<arguments.length&&void 0!==e&&e,t=this._store.activeItems.reduce(function(e,t){var i=n?t.value:t;return e.push(i),e},[]);return this._isSelectOneElement?t[0]:t}},{key:"setValue",value:function(e){var t=this;return this.initialised&&[].concat(e).forEach(function(e){return t._setChoiceOrItem(e)}),this}},{key:"setChoiceByValue",value:function(e){var t=this;return!this.initialised||this._isTextElement||((0,S.isType)("Array",e)?e:[e]).forEach(function(e){return t._findAndSelectChoiceByValue(e)}),this}},{key:"setChoices",value:function(e,t,i,n){var a=this,o=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:"",s=2<arguments.length&&void 0!==i?i:"",l=3<arguments.length&&void 0!==n&&n;if(!this._isSelectElement||!r)return this;l&&this.clearChoices(),this.containerOuter.removeLoadingState();return this._setLoading(!0),o.forEach(function(e){e.choices?a._addGroup({group:e,id:e.id||null,valueKey:r,labelKey:s}):a._addChoice({value:e[r],label:e[s],isSelected:e.selected,isDisabled:e.disabled,customProperties:e.customProperties,placeholder:e.placeholder})}),this._setLoading(!1),this}},{key:"clearChoices",value:function(){this._store.dispatch((0,_.clearChoices)())}},{key:"clearStore",value:function(){return this._store.dispatch((0,a.clearAll)()),this}},{key:"clearInput",value:function(){var e=!this._isSelectOneElement;return this.input.clear(e),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,_.activateChoices)(!0))),this}},{key:"ajax",value:function(e){var t=this;return this.initialised&&this._isSelectElement&&e&&(requestAnimationFrame(function(){return t._handleLoadingState(!0)}),e(this._ajaxCallback())),this}},{key:"_render",value:function(){if(!this._store.isLoading()){this._currentState=this._store.state;var e=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,t=this._isSelectElement,i=this._currentState.items!==this._prevState.items;e&&(t&&this._renderChoices(),i&&this._renderItems(),this._prevState=this._currentState)}}},{key:"_renderChoices",value:function(){var e=this,t=this._store,i=t.activeGroups,n=t.activeChoices,a=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame(function(){return e.choiceList.scrollToTop()}),1<=i.length&&!this._isSearching){var o=n.filter(function(e){return!0===e.placeholder&&-1===e.groupId});1<=o.length&&(a=this._createChoicesFragment(o,a)),a=this._createGroupsFragment(i,n,a)}else 1<=n.length&&(a=this._createChoicesFragment(n,a));if(a.childNodes&&0<a.childNodes.length){var r=this._store.activeItems,s=this._canAddItem(r,this.input.value);s.response?(this.choiceList.append(a),this._highlightChoice()):this.choiceList.append(this._getTemplate("notice",s.notice))}else{var l,c;l=this._isSearching?(c=(0,S.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,this._getTemplate("notice",c,"no-results")):(c=(0,S.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,this._getTemplate("notice",c,"no-choices")),this.choiceList.append(l)}}},{key:"_renderItems",value:function(){var e=this._store.activeItems||[];this.itemList.clear();var t=this._createItemsFragment(e);t.childNodes&&this.itemList.append(t)}},{key:"_createGroupsFragment",value:function(e,n,t){var a=this,o=t||document.createDocumentFragment();return this.config.shouldSort&&e.sort(this.config.sortFn),e.forEach(function(e){var t=function(t){return n.filter(function(e){return a._isSelectOneElement?e.groupId===t.id:e.groupId===t.id&&("always"===a.config.renderSelectedChoices||!e.selected)})}(e);if(1<=t.length){var i=a._getTemplate("choiceGroup",e);o.appendChild(i),a._createChoicesFragment(t,o,!0)}}),o}},{key:"_createChoicesFragment",value:function(e,t,i){function n(e){if("auto"!==l||(a._isSelectOneElement||!e.selected)){var t=a._getTemplate("choice",e,a.config.itemSelectText);r.appendChild(t)}}var a=this,o=2<arguments.length&&void 0!==i&&i,r=t||document.createDocumentFragment(),s=this.config,l=s.renderSelectedChoices,c=s.searchResultLimit,h=s.renderChoiceLimit,u=this._isSearching?S.sortByScore:this.config.sortFn,d=e;"auto"!==l||this._isSelectOneElement||(d=e.filter(function(e){return!e.selected}));var p=d.reduce(function(e,t){return t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e},{placeholderChoices:[],normalChoices:[]}),f=p.placeholderChoices,m=p.normalChoices;(this.config.shouldSort||this._isSearching)&&m.sort(u);var v=d.length,g=[].concat(f,m);this._isSearching?v=c:0<h&&!o&&(v=h);for(var y=0;y<v;y+=1)g[y]&&n(g[y]);return r}},{key:"_createItemsFragment",value:function(e,t){var i=this,n=1<arguments.length&&void 0!==t?t:null,a=this.config,o=a.shouldSortItems,r=a.sortFn,s=a.removeItemButton,l=n||document.createDocumentFragment();o&&!this._isSelectOneElement&&e.sort(r),this._isTextElement?this.passedElement.value=e:this.passedElement.options=e;return e.forEach(function(e){return function(e){var t=i._getTemplate("item",e,s);l.appendChild(t)}(e)}),l}},{key:"_triggerChange",value:function(e){null!=e&&this.passedElement.triggerEvent(E.EVENTS.change,{value:e})}},{key:"_selectPlaceholderChoice",value:function(){var e=this._store.placeholderChoice;e&&(this._addItem({value:e.value,label:e.label,choiceId:e.id,groupId:e.groupId,placeholder:e.placeholder}),this._triggerChange(e.value))}},{key:"_handleButtonAction",value:function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var i=t.parentNode.getAttribute("data-id"),n=e.find(function(e){return e.id===parseInt(i,10)});this._removeItem(n),this._triggerChange(n.value),this._isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:"_handleItemAction",value:function(e,t,i){var n=this,a=2<arguments.length&&void 0!==i&&i;if(e&&t&&this.config.removeItems&&!this._isSelectOneElement){var o=t.getAttribute("data-id");e.forEach(function(e){e.id!==parseInt(o,10)||e.highlighted?!a&&e.highlighted&&n.unhighlightItem(e):n.highlightItem(e)}),this.input.focus()}}},{key:"_handleChoiceAction",value:function(e,t){if(e&&t){var i=t.getAttribute("data-id"),n=this._store.getChoiceById(i),a=e[0]&&e[0].keyCode?e[0].keyCode:null,o=this.dropdown.isActive;if(n.keyCode=a,this.passedElement.triggerEvent(E.EVENTS.choice,{choice:n}),n&&!n.selected&&!n.disabled)this._canAddItem(e,n.value).response&&(this._addItem({value:n.value,label:n.label,choiceId:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode}),this._triggerChange(n.value));this.clearInput(),o&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}}},{key:"_handleBackspace",value:function(e){if(this.config.removeItems&&e){var t=e[e.length-1],i=e.some(function(e){return e.highlighted});this.config.editItems&&!i&&t?(this.input.value=t.value,this.input.setWidth(),this._removeItem(t),this._triggerChange(t.value)):(i||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}}},{key:"_setLoading",value:function(e){this._store.dispatch((0,h.setIsLoading)(e))}},{key:"_handleLoadingState",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e,i=this.itemList.getChild(".".concat(this.config.classNames.placeholder));t?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?i?i.innerHTML=this.config.loadingText:(i=this._getTemplate("placeholder",this.config.loadingText),this.itemList.append(i)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?i.innerHTML=this._placeholderValue||"":this.input.placeholder=this._placeholderValue||"")}},{key:"_handleSearch",value:function(e){if(e&&this.input.isFocussed){var t=this._store.choices,i=this.config,n=i.searchFloor,a=i.searchChoices,o=t.some(function(e){return!e.active});if(e&&e.length>=n){var r=a?this._searchChoices(e):0;this.passedElement.triggerEvent(E.EVENTS.search,{value:e,resultCount:r})}else o&&(this._isSearching=!1,this._store.dispatch((0,_.activateChoices)(!0)))}}},{key:"_canAddItem",value:function(e,t){var i=!0,n=(0,S.isType)("Function",this.config.addItemText)?this.config.addItemText(t):this.config.addItemText;if(!this._isSelectOneElement){var a=(0,S.existsInArray)(e,t);0<this.config.maxItemCount&&this.config.maxItemCount<=e.length&&(i=!1,n=(0,S.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&a&&i&&(i=!1,n=(0,S.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(t):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&i&&(0,S.isType)("Function",this.config.addItemFilterFn)&&!this.config.addItemFilterFn(t)&&(i=!1,n=(0,S.isType)("Function",this.config.customAddItemText)?this.config.customAddItemText(t):this.config.customAddItemText)}return{response:i,notice:n}}},{key:"_ajaxCallback",value:function(){var a=this;return function(e,t,i){if(e&&t){var n=(0,S.isType)("Object",e)?[e]:e;n&&(0,S.isType)("Array",n)&&n.length?(a._handleLoadingState(!1),a._setLoading(!0),n.forEach(function(e){e.choices?a._addGroup({group:e,id:e.id||null,valueKey:t,labelKey:i}):a._addChoice({value:(0,S.fetchFromObject)(e,t),label:(0,S.fetchFromObject)(e,i),isSelected:e.selected,isDisabled:e.disabled,customProperties:e.customProperties,placeholder:e.placeholder})}),a._setLoading(!1),a._isSelectOneElement&&a._selectPlaceholderChoice()):a._handleLoadingState(!1)}}}},{key:"_searchChoices",value:function(e){var t=(0,S.isType)("String",e)?e.trim():e,i=(0,S.isType)("String",this._currentValue)?this._currentValue.trim():this._currentValue;if(t.length<1&&t==="".concat(i," "))return 0;var n=this._store.searchableChoices,a=t,o=[].concat(this.config.searchFields),r=Object.assign(this.config.fuseOptions,{keys:o}),s=new l.default(n,r).search(a);return this._currentValue=t,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,_.filterChoices)(s)),s.length}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus),this.containerOuter.element.addEventListener("blur",this._onBlur)),this.input.element.addEventListener("focus",this._onFocus),this.input.element.addEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset),this.input.addEventListeners()}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()}},{key:"_onKeyDown",value:function(e){var t,i=e.target,n=e.keyCode,a=e.ctrlKey,o=e.metaKey;if(i===this.input.element||this.containerOuter.element.contains(i)){var r=this._store.activeItems,s=this.input.isFocussed,l=this.dropdown.isActive,c=this.itemList.hasChildren,h=String.fromCharCode(n),u=E.KEY_CODES.BACK_KEY,d=E.KEY_CODES.DELETE_KEY,p=E.KEY_CODES.ENTER_KEY,f=E.KEY_CODES.A_KEY,m=E.KEY_CODES.ESC_KEY,v=E.KEY_CODES.UP_KEY,g=E.KEY_CODES.DOWN_KEY,y=E.KEY_CODES.PAGE_UP_KEY,b=E.KEY_CODES.PAGE_DOWN_KEY,_=a||o;!this._isTextElement&&/[a-zA-Z0-9-_ ]/.test(h)&&this.showDropdown();var w=(x(t={},f,this._onAKey),x(t,p,this._onEnterKey),x(t,m,this._onEscapeKey),x(t,v,this._onDirectionKey),x(t,y,this._onDirectionKey),x(t,g,this._onDirectionKey),x(t,b,this._onDirectionKey),x(t,d,this._onDeleteKey),x(t,u,this._onDeleteKey),t);w[n]&&w[n]({event:e,target:i,keyCode:n,metaKey:o,activeItems:r,hasFocusedInput:s,hasActiveDropdown:l,hasItems:c,hasCtrlDownKeyPressed:_})}}},{key:"_onKeyUp",value:function(e){var t=e.target,i=e.keyCode;if(t===this.input.element){var n=this.input.value,a=this._store.activeItems,o=this._canAddItem(a,n),r=E.KEY_CODES.BACK_KEY,s=E.KEY_CODES.DELETE_KEY;if(this._isTextElement){if(o.notice&&n){var l=this._getTemplate("notice",o.notice);this.dropdown.element.innerHTML=l.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0)}else{var c=(i===r||i===s)&&!t.value,h=!this._isTextElement&&this._isSearching,u=this._canSearch&&o.response;c&&h?(this._isSearching=!1,this._store.dispatch((0,_.activateChoices)(!0))):u&&this._handleSearch(this.input.value)}this._canSearch=this.config.searchEnabled}}},{key:"_onAKey",value:function(e){var t=e.hasItems;e.hasCtrlDownKeyPressed&&t&&(this._canSearch=!1,this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll())}},{key:"_onEnterKey",value:function(e){var t=e.event,i=e.target,n=e.activeItems,a=e.hasActiveDropdown,o=E.KEY_CODES.ENTER_KEY,r=i.hasAttribute("data-button");if(this._isTextElement&&i.value){var s=this.input.value;this._canAddItem(n,s).response&&(this.hideDropdown(!0),this._addItem({value:s}),this._triggerChange(s),this.clearInput())}if(r&&(this._handleButtonAction(n,i),t.preventDefault()),a){var l=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));l&&(n[0]&&(n[0].keyCode=o),this._handleChoiceAction(n,l)),t.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),t.preventDefault())}},{key:"_onEscapeKey",value:function(e){e.hasActiveDropdown&&(this.hideDropdown(!0),this.containerOuter.focus())}},{key:"_onDirectionKey",value:function(e){var t=e.event,i=e.hasActiveDropdown,n=e.keyCode,a=e.metaKey,o=E.KEY_CODES.DOWN_KEY,r=E.KEY_CODES.PAGE_UP_KEY,s=E.KEY_CODES.PAGE_DOWN_KEY;if(i||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var l,c=n===o||n===s?1:-1,h="[data-choice-selectable]";if(a||n===s||n===r)l=0<c?Array.from(this.dropdown.element.querySelectorAll(h)).pop():this.dropdown.element.querySelector(h);else{var u=this.dropdown.element.querySelector(".".concat(this.config.classNames.highlightedState));l=u?(0,S.getAdjacentEl)(u,h,c):this.dropdown.element.querySelector(h)}l&&((0,S.isScrolledIntoView)(l,this.choiceList.element,c)||this.choiceList.scrollToChoice(l,c),this._highlightChoice(l)),t.preventDefault()}}},{key:"_onDeleteKey",value:function(e){var t=e.event,i=e.target,n=e.hasFocusedInput,a=e.activeItems;!n||i.value||this._isSelectOneElement||(this._handleBackspace(a),t.preventDefault())}},{key:"_onTouchMove",value:function(){this._wasTap&&(this._wasTap=!1)}},{key:"_onTouchEnd",value:function(e){var t=(e||e.touches[0]).target;this._wasTap&&this.containerOuter.element.contains(t)&&(t!==this.containerOuter.element&&t!==this.containerInner.element||(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),e.stopPropagation());this._wasTap=!0}},{key:"_onMouseDown",value:function(e){var t=e.target,i=e.shiftKey;if(this.choiceList.element.contains(t)&&(0,S.isIE11)()&&(this._isScrollingOnIe=!0),this.containerOuter.element.contains(t)&&t!==this.input.element){var n=this._store.activeItems,a=i,o=(0,S.findAncestorByAttrName)(t,"data-button"),r=(0,S.findAncestorByAttrName)(t,"data-item"),s=(0,S.findAncestorByAttrName)(t,"data-choice");o?this._handleButtonAction(n,o):r?this._handleItemAction(n,r,a):s&&this._handleChoiceAction(n,s),e.preventDefault()}}},{key:"_onMouseOver",value:function(e){var t=e.target;(t===this.dropdown||this.dropdown.element.contains(t))&&t.hasAttribute("data-choice")&&this._highlightChoice(t)}},{key:"_onClick",value:function(e){var t=e.target;this.containerOuter.element.contains(t)?this.dropdown.isActive||this.containerOuter.isDisabled?this._isSelectOneElement&&t!==this.input.element&&!this.dropdown.element.contains(t)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus()):(this._store.highlightedActiveItems&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0))}},{key:"_onFocus",value:function(e){var t=this,i=e.target;this.containerOuter.element.contains(i)&&{text:function(){i===t.input.element&&t.containerOuter.addFocusState()},"select-one":function(){t.containerOuter.addFocusState(),i===t.input.element&&t.showDropdown(!0)},"select-multiple":function(){i===t.input.element&&(t.showDropdown(!0),t.containerOuter.addFocusState())}}[this.passedElement.element.type]()}},{key:"_onBlur",value:function(e){var t=this,i=e.target;if(this.containerOuter.element.contains(i)&&!this._isScrollingOnIe){var n=this._store.activeItems.some(function(e){return e.highlighted});({text:function(){i===t.input.element&&(t.containerOuter.removeFocusState(),n&&t.unhighlightAll(),t.hideDropdown(!0))},"select-one":function(){t.containerOuter.removeFocusState(),i!==t.input.element&&(i!==t.containerOuter.element||t._canSearch)||t.hideDropdown(!0)},"select-multiple":function(){i===t.input.element&&(t.containerOuter.removeFocusState(),t.hideDropdown(!0),n&&t.unhighlightAll())}})[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()}},{key:"_onFormReset",value:function(){this._store.dispatch((0,a.resetTo)(this._initialState))}},{key:"_highlightChoice",value:function(e){var t=this,i=0<arguments.length&&void 0!==e?e:null,n=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(n.length){var a=i;Array.from(this.dropdown.element.querySelectorAll(".".concat(this.config.classNames.highlightedState))).forEach(function(e){e.classList.remove(t.config.classNames.highlightedState),e.setAttribute("aria-selected","false")}),a?this._highlightPosition=n.indexOf(a):a=(a=n.length>this._highlightPosition?n[this._highlightPosition]:n[n.length-1])||n[0],a.classList.add(this.config.classNames.highlightedState),a.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(E.EVENTS.highlightChoice,{el:a}),this.dropdown.isActive&&(this.input.setActiveDescendant(a.id),this.containerOuter.setActiveDescendant(a.id))}}},{key:"_addItem",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,a=e.choiceId,o=void 0===a?-1:a,r=e.groupId,s=void 0===r?-1:r,l=e.customProperties,c=void 0===l?null:l,h=e.placeholder,u=void 0!==h&&h,d=e.keyCode,p=void 0===d?null:d,f=(0,S.isType)("String",t)?t.trim():t,m=p,v=c,g=this._store.items,y=n||f,b=parseInt(o,10)||-1,_=0<=s?this._store.getGroupById(s):null,w=g?g.length+1:1;return this.config.prependValue&&(f=this.config.prependValue+f.toString()),this.config.appendValue&&(f+=this.config.appendValue.toString()),this._store.dispatch((0,C.addItem)({value:f,label:y,id:w,choiceId:b,groupId:s,customProperties:c,placeholder:u,keyCode:m})),this._isSelectOneElement&&this.removeActiveItems(w),this.passedElement.triggerEvent(E.EVENTS.addItem,{id:w,value:f,label:y,customProperties:v,groupValue:_&&_.value?_.value:void 0,keyCode:m}),this}},{key:"_removeItem",value:function(e){if(!e||!(0,S.isType)("Object",e))return this;var t=e.id,i=e.value,n=e.label,a=e.choiceId,o=e.groupId,r=0<=o?this._store.getGroupById(o):null;return this._store.dispatch((0,C.removeItem)(t,a)),r&&r.value?this.passedElement.triggerEvent(E.EVENTS.removeItem,{id:t,value:i,label:n,groupValue:r.value}):this.passedElement.triggerEvent(E.EVENTS.removeItem,{id:t,value:i,label:n}),this}},{key:"_addChoice",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,a=e.isSelected,o=void 0!==a&&a,r=e.isDisabled,s=void 0!==r&&r,l=e.groupId,c=void 0===l?-1:l,h=e.customProperties,u=void 0===h?null:h,d=e.placeholder,p=void 0!==d&&d,f=e.keyCode,m=void 0===f?null:f;if(null!=t){var v=this._store.choices,g=n||t,y=v?v.length+1:1,b="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(y);this._store.dispatch((0,_.addChoice)({value:t,label:g,id:y,groupId:c,disabled:s,elementId:b,customProperties:u,placeholder:p,keyCode:m})),o&&this._addItem({value:t,label:g,choiceId:y,customProperties:u,placeholder:p,keyCode:m})}}},{key:"_addGroup",value:function(e){var i=this,t=e.group,n=e.id,a=e.valueKey,o=void 0===a?"value":a,r=e.labelKey,s=void 0===r?"label":r,l=(0,S.isType)("Object",t)?t.choices:Array.from(t.getElementsByTagName("OPTION")),c=n||Math.floor((new Date).valueOf()*Math.random()),h=!!t.disabled&&t.disabled;if(l){this._store.dispatch((0,u.addGroup)(t.label,c,!0,h));l.forEach(function(e){var t=e.disabled||e.parentNode&&e.parentNode.disabled;i._addChoice({value:e[o],label:(0,S.isType)("Object",e)?e[s]:e.innerHTML,isSelected:e.selected,isDisabled:t,groupId:c,customProperties:e.customProperties,placeholder:e.placeholder})})}else this._store.dispatch((0,u.addGroup)(t.label,t.id,!1,t.disabled))}},{key:"_getTemplate",value:function(e){var t;if(!e)return null;for(var i=this.config,n=i.templates,a=i.classNames,o=arguments.length,r=new Array(1<o?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];return(t=n[e]).call.apply(t,[this,a].concat(r))}},{key:"_createTemplates",value:function(){var e=this.config.callbackOnCreateTemplates,t={};e&&(0,S.isType)("Function",e)&&(t=e.call(this,S.strToEl)),this.config.templates=(0,r.default)(n.TEMPLATES,t)}},{key:"_createElements",value:function(){this.containerOuter=new c.Container({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new c.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new c.Input({element:this._getTemplate("input"),classNames:this.config.classNames,type:this.passedElement.element.type}),this.choiceList=new c.List({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new c.List({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new c.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})}},{key:"_createStructure",value:function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth(!0)),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement?this._addPredefinedChoices():this._isTextElement&&this._addPredefinedItems()}},{key:"_addPredefinedChoices",value:function(){var c=this,e=this.passedElement.optionGroups;if(this._highlightPosition=0,this._isSearching=!1,this._setLoading(!0),e&&e.length){var t=this.passedElement.placeholderOption;t&&"SELECT"===t.parentNode.tagName&&this._addChoice({value:t.value,label:t.innerHTML,isSelected:t.selected,isDisabled:t.disabled,placeholder:!0}),e.forEach(function(e){return c._addGroup({group:e,id:e.id||null})})}else{var i=this.passedElement.options,n=this.config.sortFn,a=this._presetChoices;i.forEach(function(e){a.push({value:e.value,label:e.innerHTML,selected:e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:e.hasAttribute("placeholder"),customProperties:e.getAttribute("data-custom-properties")})}),this.config.shouldSort&&a.sort(n);var h=a.some(function(e){return e.selected});a.forEach(function(e,t){return function(e,t){var i=e.value,n=e.label,a=e.customProperties,o=e.placeholder;if(c._isSelectElement)if(e.choices)c._addGroup({group:e,id:e.id||null});else{var r=c._isSelectOneElement&&!h&&0===t,s=!!r||e.selected,l=!r&&e.disabled;c._addChoice({value:i,label:n,isSelected:s,isDisabled:l,customProperties:a,placeholder:o})}else c._addChoice({value:i,label:n,isSelected:e.selected,isDisabled:e.disabled,customProperties:a,placeholder:o})}(e,t)})}this._setLoading(!1)}},{key:"_addPredefinedItems",value:function(){var i=this;this._presetItems.forEach(function(e){return function(e){var t=(0,S.getType)(e);"Object"===t&&e.value?i._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder}):"String"===t&&i._addItem({value:e})}(e)})}},{key:"_setChoiceOrItem",value:function(e){var t=this;({object:function(){e.value&&(t._isTextElement?t._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder}):t._addChoice({value:e.value,label:e.label,isSelected:!0,isDisabled:!1,customProperties:e.customProperties,placeholder:e.placeholder}))},string:function(){t._isTextElement?t._addItem({value:e}):t._addChoice({value:e,label:e,isSelected:!0,isDisabled:!1})}})[(0,S.getType)(e).toLowerCase()]()}},{key:"_findAndSelectChoiceByValue",value:function(t){var i=this,e=this._store.choices.find(function(e){return i.config.itemComparer(e.value,t)});e&&!e.selected&&this._addItem({value:e.value,label:e.label,choiceId:e.id,groupId:e.groupId,customProperties:e.customProperties,placeholder:e.placeholder,keyCode:e.keyCode})}},{key:"_generateInstances",value:function(e,i){return e.reduce(function(e,t){return e.push(new o(t,i)),e},[this])}},{key:"_generatePlaceholderValue",value:function(){return!this._isSelectOneElement&&(!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.element.getAttribute("placeholder")))}}]),o}();p.userDefaults={},e.exports=p},function(e,t,i){var n;n=function(){return n={},a.m=i={"./src/bitap/bitap_matched_indices.js":function(e,t){e.exports=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=[],n=-1,a=-1,o=0,r=e.length;o<r;o+=1){var s=e[o];s&&-1===n?n=o:s||-1===n||(t<=(a=o-1)-n+1&&i.push([n,a]),n=-1)}return e[o-1]&&t<=o-n&&i.push([n,o-1]),i}},"./src/bitap/bitap_pattern_alphabet.js":function(e,t){e.exports=function(e){for(var t={},i=e.length,n=0;n<i;n+=1)t[e.charAt(n)]=0;for(var a=0;a<i;a+=1)t[e.charAt(a)]|=1<<i-a-1;return t}},"./src/bitap/bitap_regex_search.js":function(e,t){var h=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,n=new RegExp(t.replace(h,"\\$&").replace(i,"|")),a=e.match(n),o=!!a,r=[];if(o)for(var s=0,l=a.length;s<l;s+=1){var c=a[s];r.push([e.indexOf(c),c.length-1])}return{score:o?.5:1,isMatch:o,matchedIndices:r}}},"./src/bitap/bitap_score.js":function(e,t){e.exports=function(e,t){var i=t.errors,n=void 0===i?0:i,a=t.currentLocation,o=void 0===a?0:a,r=t.expectedLocation,s=void 0===r?0:r,l=t.distance,c=void 0===l?100:l,h=n/e.length,u=Math.abs(s-o);return c?h+u/c:u?1:h}},"./src/bitap/bitap_search.js":function(e,t,i){var N=i("./src/bitap/bitap_score.js"),F=i("./src/bitap/bitap_matched_indices.js");e.exports=function(e,t,i,n){for(var a=n.location,o=void 0===a?0:a,r=n.distance,s=void 0===r?100:r,l=n.threshold,c=void 0===l?.6:l,h=n.findAllMatches,u=void 0!==h&&h,d=n.minMatchCharLength,p=void 0===d?1:d,f=o,m=e.length,v=c,g=e.indexOf(t,f),y=t.length,b=[],_=0;_<m;_+=1)b[_]=0;if(-1!==g){var w=N(t,{errors:0,currentLocation:g,expectedLocation:f,distance:s});if(v=Math.min(w,v),-1!==(g=e.lastIndexOf(t,f+y))){var E=N(t,{errors:0,currentLocation:g,expectedLocation:f,distance:s});v=Math.min(E,v)}}g=-1;for(var C=[],S=1,x=y+m,I=1<<y-1,T=0;T<y;T+=1){for(var O=0,j=x;O<j;){N(t,{errors:T,currentLocation:f+j,expectedLocation:f,distance:s})<=v?O=j:x=j,j=Math.floor((x-O)/2+O)}x=j;var k=Math.max(1,f-j+1),D=u?m:Math.min(f+j,m)+y,A=Array(D+2);A[D+1]=(1<<T)-1;for(var M=D;k<=M;M-=1){var L=M-1,P=i[e.charAt(L)];if(P&&(b[L]=1),A[M]=(A[M+1]<<1|1)&P,0!==T&&(A[M]|=(C[M+1]|C[M])<<1|1|C[M+1]),A[M]&I&&(S=N(t,{errors:T,currentLocation:L,expectedLocation:f,distance:s}))<=v){if(v=S,(g=L)<=f)break;k=Math.max(1,2*f-g)}}if(v<N(t,{errors:T+1,currentLocation:f,expectedLocation:f,distance:s}))break;C=A}return{isMatch:0<=g,score:0===S?.001:S,matchedIndices:F(b,p)}}},"./src/bitap/index.js":function(e,t,i){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=i("./src/bitap/bitap_regex_search.js"),u=i("./src/bitap/bitap_search.js"),b=i("./src/bitap/bitap_pattern_alphabet.js"),a=function(){function y(e,t){var i=t.location,n=void 0===i?0:i,a=t.distance,o=void 0===a?100:a,r=t.threshold,s=void 0===r?.6:r,l=t.maxPatternLength,c=void 0===l?32:l,h=t.isCaseSensitive,u=void 0!==h&&h,d=t.tokenSeparator,p=void 0===d?/ +/g:d,f=t.findAllMatches,m=void 0!==f&&f,v=t.minMatchCharLength,g=void 0===v?1:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),this.options={location:n,distance:o,threshold:s,maxPatternLength:c,isCaseSensitive:u,tokenSeparator:p,findAllMatches:m,minMatchCharLength:g},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=c&&(this.patternAlphabet=b(this.pattern))}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(y,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,i=t.maxPatternLength,n=t.tokenSeparator;if(this.pattern.length>i)return h(e,this.pattern,n);var a=this.options,o=a.location,r=a.distance,s=a.threshold,l=a.findAllMatches,c=a.minMatchCharLength;return u(e,this.pattern,this.patternAlphabet,{location:o,distance:r,threshold:s,findAllMatches:l,minMatchCharLength:c})}}]),y}();e.exports=a},"./src/helpers/deep_value.js":function(e,t,i){var h=i("./src/helpers/is_array.js");e.exports=function(e,t){return function e(t,i,n){if(i){var a=i.indexOf("."),o=i,r=null;-1!==a&&(o=i.slice(0,a),r=i.slice(a+1));var s=t[o];if(null!=s)if(r||"string"!=typeof s&&"number"!=typeof s)if(h(s))for(var l=0,c=s.length;l<c;l+=1)e(s[l],r,n);else r&&e(s,r,n);else n.push(s.toString())}else n.push(t);return n}(e,t,[])}},"./src/helpers/is_array.js":function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},"./src/index.js":function(e,t,i){function h(e){return(h="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i("./src/bitap/index.js"),Q=i("./src/helpers/deep_value.js"),N=i("./src/helpers/is_array.js"),a=function(){function B(e,t){var i=t.location,n=void 0===i?0:i,a=t.distance,o=void 0===a?100:a,r=t.threshold,s=void 0===r?.6:r,l=t.maxPatternLength,c=void 0===l?32:l,h=t.caseSensitive,u=void 0!==h&&h,d=t.tokenSeparator,p=void 0===d?/ +/g:d,f=t.findAllMatches,m=void 0!==f&&f,v=t.minMatchCharLength,g=void 0===v?1:v,y=t.id,b=void 0===y?null:y,_=t.keys,w=void 0===_?[]:_,E=t.shouldSort,C=void 0===E||E,S=t.getFn,x=void 0===S?Q:S,I=t.sortFn,T=void 0===I?function(e,t){return e.score-t.score}:I,O=t.tokenize,j=void 0!==O&&O,k=t.matchAllTokens,D=void 0!==k&&k,A=t.includeMatches,M=void 0!==A&&A,L=t.includeScore,P=void 0!==L&&L,N=t.verbose,F=void 0!==N&&N;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,B),this.options={location:n,distance:o,threshold:s,maxPatternLength:c,isCaseSensitive:u,tokenSeparator:p,findAllMatches:m,minMatchCharLength:g,id:b,keys:w,includeMatches:M,includeScore:P,shouldSort:C,getFn:x,sortFn:T,verbose:F,tokenize:j,matchAllTokens:D},this.setCollection(e)}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(B,[{key:"setCollection",value:function(e){return this.list=e}},{key:"search",value:function(e,t){var i=1<arguments.length&&void 0!==t?t:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),a=n.tokenSearchers,o=n.fullSearcher,r=this._search(a,o),s=r.weights,l=r.results;return this._computeScore(s,l),this.options.shouldSort&&this._sort(l),i.limit&&"number"==typeof i.limit&&(l=l.slice(0,i.limit)),this._format(l)}},{key:"_prepareSearchers",value:function(e){var t=0<arguments.length&&void 0!==e?e:"",i=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),a=0,o=n.length;a<o;a+=1)i.push(new r(n[a],this.options));return{tokenSearchers:i,fullSearcher:new r(t,this.options)}}},{key:"_search",value:function(e,t){var i=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length?t:void 0,a=this.list,o={},r=[];if("string"==typeof a[0]){for(var s=0,l=a.length;s<l;s+=1)this._analyze({key:"",value:a[s],record:s,index:s},{resultMap:o,results:r,tokenSearchers:i,fullSearcher:n});return{weights:null,results:r}}for(var c={},h=0,u=a.length;h<u;h+=1)for(var d=a[h],p=0,f=this.options.keys.length;p<f;p+=1){var m=this.options.keys[p];if("string"!=typeof m){if(c[m.name]={weight:1-m.weight||1},m.weight<=0||1<m.weight)throw new Error("Key weight has to be > 0 and <= 1");m=m.name}else c[m]={weight:1};this._analyze({key:m,value:this.options.getFn(d,m),record:d,index:h},{resultMap:o,results:r,tokenSearchers:i,fullSearcher:n})}return{weights:c,results:r}}},{key:"_analyze",value:function(e,t){var i=e.key,n=e.arrayIndex,a=void 0===n?-1:n,o=e.value,r=e.record,s=e.index,l=t.tokenSearchers,c=void 0===l?[]:l,h=t.fullSearcher,u=void 0===h?[]:h,d=t.resultMap,p=void 0===d?{}:d,f=t.results,m=void 0===f?[]:f;if(null!=o){var v=!1,g=-1,y=0;if("string"==typeof o){this._log("\nKey: ".concat(""===i?"-":i));var b=u.search(o);if(this._log('Full text: "'.concat(o,'", score: ').concat(b.score)),this.options.tokenize){for(var _=o.split(this.options.tokenSeparator),w=[],E=0;E<c.length;E+=1){var C=c[E];this._log('\nPattern: "'.concat(C.pattern,'"'));for(var S=!1,x=0;x<_.length;x+=1){var I=_[x],T=C.search(I),O={};T.isMatch?(O[I]=T.score,S=v=!0,w.push(T.score)):(O[I]=1,this.options.matchAllTokens||w.push(1)),this._log('Token: "'.concat(I,'", score: ').concat(O[I]))}S&&(y+=1)}g=w[0];for(var j=w.length,k=1;k<j;k+=1)g+=w[k];g/=j,this._log("Token score average:",g)}var D=b.score;-1<g&&(D=(D+g)/2),this._log("Score average:",D);var A=!this.options.tokenize||!this.options.matchAllTokens||y>=c.length;if(this._log("\nCheck Matches: ".concat(A)),(v||b.isMatch)&&A){var M=p[s];M?M.output.push({key:i,arrayIndex:a,value:o,score:D,matchedIndices:b.matchedIndices}):(p[s]={item:r,output:[{key:i,arrayIndex:a,value:o,score:D,matchedIndices:b.matchedIndices}]},m.push(p[s]))}}else if(N(o))for(var L=0,P=o.length;L<P;L+=1)this._analyze({key:i,arrayIndex:L,value:o[L],record:r,index:s},{resultMap:p,results:m,tokenSearchers:c,fullSearcher:u})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var i=0,n=t.length;i<n;i+=1){for(var a=t[i].output,o=a.length,r=1,s=1,l=0;l<o;l+=1){var c=e?e[a[l].key].weight:1,h=(1===c?a[l].score:a[l].score||.001)*c;1!==c?s=Math.min(s,h):r*=a[l].nScore=h}t[i].score=1===s?r:s,this._log(t[i])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var i=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===h(t)&&null!==t){if(-1!==i.indexOf(t))return;i.push(t)}return t})),i=null}var n=[];this.options.includeMatches&&n.push(function(e,t){var i=e.output;t.matches=[];for(var n=0,a=i.length;n<a;n+=1){var o=i[n];if(0!==o.matchedIndices.length){var r={indices:o.matchedIndices,value:o.value};o.key&&(r.key=o.key),o.hasOwnProperty("arrayIndex")&&-1<o.arrayIndex&&(r.arrayIndex=o.arrayIndex),t.matches.push(r)}}}),this.options.includeScore&&n.push(function(e,t){t.score=e.score});for(var a=0,o=e.length;a<o;a+=1){var r=e[a];if(this.options.id&&(r.item=this.options.getFn(r.item,this.options.id)[0]),n.length){for(var s={item:r.item},l=0,c=n.length;l<c;l+=1)n[l](r,s);t.push(s)}else t.push(r.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),B}();e.exports=a}},a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===_typeof2(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/index.js");function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var i,n},e.exports=n()},function(e,t,i){"use strict";i.r(t);var a=function(e){return function(e){return!!e&&"object"===_typeof2(e)}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function r(e,t,i){return e.concat(t).map(function(e){return o(e,i)})}function s(e,t,i){(i=i||{}).arrayMerge=i.arrayMerge||r,i.isMergeableObject=i.isMergeableObject||a;var n=Array.isArray(t);return n===Array.isArray(e)?n?i.arrayMerge(e,t,i):function(t,i,n){var a={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(e){a[e]=o(t[e],n)}),Object.keys(i).forEach(function(e){n.isMergeableObject(i[e])&&t[e]?a[e]=s(t[e],i[e],n):a[e]=o(i[e],n)}),a}(e,t,i):o(t,i)}s.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,t){return s(e,t,i)},{})};var l=s;t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=i(6),o=(n=i(15))&&n.__esModule?n:{default:n};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._store=(0,a.createStore)(o.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(e,[{key:"subscribe",value:function(e){this._store.subscribe(e)}},{key:"dispatch",value:function(e){this._store.dispatch(e)}},{key:"isLoading",value:function(){return this.state.general.loading}},{key:"getChoiceById",value:function(t){return!!t&&this.activeChoices.find(function(e){return e.id===parseInt(t,10)})}},{key:"getGroupById",value:function(t){return this.groups.find(function(e){return e.id===parseInt(t,10)})}},{key:"state",get:function(){return this._store.getState()}},{key:"items",get:function(){return this.state.items}},{key:"activeItems",get:function(){return this.items.filter(function(e){return!0===e.active})}},{key:"highlightedActiveItems",get:function(){return this.items.filter(function(e){return e.active&&e.highlighted})}},{key:"choices",get:function(){return this.state.choices}},{key:"activeChoices",get:function(){return this.choices.filter(function(e){return!0===e.active})}},{key:"selectableChoices",get:function(){return this.choices.filter(function(e){return!0!==e.disabled})}},{key:"searchableChoices",get:function(){return this.selectableChoices.filter(function(e){return!0!==e.placeholder})}},{key:"placeholderChoice",get:function(){return[].concat(this.choices).reverse().find(function(e){return!0===e.placeholder})}},{key:"groups",get:function(){return this.state.groups}},{key:"activeGroups",get:function(){var e=this.groups,n=this.choices;return e.filter(function(e){var t=!0===e.active&&!1===e.disabled,i=n.some(function(e){return!0===e.active&&!1===e.disabled});return t&&i},[])}}]),e}();t.default=s},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(6),a=c(i(16)),o=c(i(17)),r=c(i(18)),s=c(i(19)),l=i(0);function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var i=e;if("CLEAR_ALL"===t.type)i=void 0;else if("RESET_TO"===t.type)return(0,l.cloneObject)(t.state);return u(i,t)}var u=(0,n.combineReducers)({items:a.default,groups:o.default,choices:r.default,general:s.default});t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n,i=1<arguments.length?arguments[1]:void 0;switch(i.type){case"ADD_ITEM":return[].concat(e,[{id:i.id,choiceId:i.choiceId,groupId:i.groupId,value:i.value,label:i.label,active:!0,highlighted:!1,customProperties:i.customProperties,placeholder:i.placeholder||!1,keyCode:null}]).map(function(e){var t=e;return t.highlighted=!1,t});case"REMOVE_ITEM":return e.map(function(e){var t=e;return t.id===i.id&&(t.active=!1),t});case"HIGHLIGHT_ITEM":return e.map(function(e){var t=e;return t.id===i.id&&(t.highlighted=i.highlighted),t});default:return e}},t.defaultState=void 0;var n=[];t.defaultState=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"ADD_GROUP":return[].concat(e,[{id:t.id,value:t.value,active:t.active,disabled:t.disabled}]);case"CLEAR_CHOICES":return[];default:return e}},t.defaultState=void 0;var n=[];t.defaultState=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n,i=1<arguments.length?arguments[1]:void 0;switch(i.type){case"ADD_CHOICE":return[].concat(e,[{id:i.id,elementId:i.elementId,groupId:i.groupId,value:i.value,label:i.label||i.value,disabled:i.disabled||!1,selected:!1,active:!0,score:9999,customProperties:i.customProperties,placeholder:i.placeholder||!1,keyCode:null}]);case"ADD_ITEM":return i.activateOptions?e.map(function(e){var t=e;return t.active=i.active,t}):-1<i.choiceId?e.map(function(e){var t=e;return t.id===parseInt(i.choiceId,10)&&(t.selected=!0),t}):e;case"REMOVE_ITEM":return-1<i.choiceId?e.map(function(e){var t=e;return t.id===parseInt(i.choiceId,10)&&(t.selected=!1),t}):e;case"FILTER_CHOICES":return e.map(function(e){var n=e;return n.active=i.results.some(function(e){var t=e.item,i=e.score;return t.id===n.id&&(n.score=i,!0)}),n});case"ACTIVATE_CHOICES":return e.map(function(e){var t=e;return t.active=i.active,t});case"CLEAR_CHOICES":return n;default:return e}},t.defaultState=void 0;var n=[];t.defaultState=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.defaultState=void 0;var a={loading:!1};t.defaultState=a;function n(e,t){var i=0<arguments.length&&void 0!==e?e:a,n=1<arguments.length?t:void 0;switch(n.type){case"SET_IS_LOADING":return{loading:n.isLoading};default:return i}}t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Dropdown",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Input",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"WrappedInput",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"WrappedSelect",{enumerable:!0,get:function(){return l.default}});var n=c(i(21)),a=c(i(22)),o=c(i(23)),r=c(i(24)),s=c(i(25)),l=c(i(26));function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function a(e){var t=e.element,i=e.type,n=e.classNames;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Object.assign(this,{element:t,type:i,classNames:n}),this.isActive=!1}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(a,[{key:"distanceFromTopWindow",value:function(){return this.dimensions=this.element.getBoundingClientRect(),this.position=Math.ceil(this.dimensions.top+window.pageYOffset+this.element.offsetHeight),this.position}},{key:"getChild",value:function(e){return this.element.querySelector(e)}},{key:"show",value:function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this}},{key:"hide",value:function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this}}]),a}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(0);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function o(e){var t=e.element,i=e.type,n=e.classNames,a=e.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Object.assign(this,{element:t,classNames:n,type:i,position:a}),this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return function(e,t,i){t&&a(e.prototype,t),i&&a(e,i)}(o,[{key:"addEventListeners",value:function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)}},{key:"removeEventListeners",value:function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)}},{key:"shouldFlip",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(0,n.getWindowHeight)();if(void 0===e)return!1;var i=!1;return"auto"===this.position?i=t<=e:"top"===this.position&&(i=!0),i}},{key:"setActiveDescendant",value:function(e){this.element.setAttribute("aria-activedescendant",e)}},{key:"removeActiveDescendant",value:function(){this.element.removeAttribute("aria-activedescendant")}},{key:"open",value:function(e){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(e)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)}},{key:"close",value:function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)}},{key:"focus",value:function(){this.isFocussed||this.element.focus()}},{key:"addFocusState",value:function(){this.element.classList.add(this.classNames.focusState)}},{key:"removeFocusState",value:function(){this.element.classList.remove(this.classNames.focusState)}},{key:"enable",value:function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),"select-one"===this.type&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1}},{key:"disable",value:function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),"select-one"===this.type&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0}},{key:"wrap",value:function(e){(0,n.wrap)(e,this.element)}},{key:"unwrap",value:function(e){this.element.parentNode.insertBefore(e,this.element),this.element.parentNode.removeChild(this.element)}},{key:"addLoadingState",value:function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0}},{key:"removeLoadingState",value:function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1}},{key:"_onFocus",value:function(){this.isFocussed=!0}},{key:"_onBlur",value:function(){this.isFocussed=!1}}]),o}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(0);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function o(e){var t=e.element,i=e.type,n=e.classNames,a=e.placeholderValue;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Object.assign(this,{element:t,type:i,classNames:n,placeholderValue:a}),this.element=t,this.classNames=n,this.isFocussed=this.element===document.activeElement,this.isDisabled=!1,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return function(e,t,i){t&&a(e.prototype,t),i&&a(e,i)}(o,[{key:"addEventListeners",value:function(){this.element.addEventListener("input",this._onInput),this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur),this.element.form&&this.element.form.addEventListener("reset",this._onFormReset)}},{key:"removeEventListeners",value:function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur),this.element.form&&this.element.form.removeEventListener("reset",this._onFormReset)}},{key:"enable",value:function(){this.element.removeAttribute("disabled"),this.isDisabled=!1}},{key:"disable",value:function(){this.element.setAttribute("disabled",""),this.isDisabled=!0}},{key:"focus",value:function(){this.isFocussed||this.element.focus()}},{key:"blur",value:function(){this.isFocussed&&this.element.blur()}},{key:"clear",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e;return this.element.value&&(this.element.value=""),t&&this.setWidth(),this}},{key:"setWidth",value:function(e){function t(e){i.element.style.width=e}var i=this;if(this._placeholderValue){var n=this.element.value.length>=this._placeholderValue.length/1.25;(this.element.value&&n||e)&&this.calcWidth(t)}else this.calcWidth(t)}},{key:"calcWidth",value:function(e){return(0,n.calcWidthOfInput)(this.element,e)}},{key:"setActiveDescendant",value:function(e){this.element.setAttribute("aria-activedescendant",e)}},{key:"removeActiveDescendant",value:function(){this.element.removeAttribute("aria-activedescendant")}},{key:"_onInput",value:function(){"select-one"!==this.type&&this.setWidth()}},{key:"_onPaste",value:function(e){e.target===this.element&&this.preventPaste&&e.preventDefault()}},{key:"_onFocus",value:function(){this.isFocussed=!0}},{key:"_onBlur",value:function(){this.isFocussed=!1}},{key:"placeholder",set:function(e){this.element.placeholder=e}},{key:"value",set:function(e){this.element.value=e},get:function(){return(0,n.sanitise)(this.element.value)}}]),o}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(1);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function i(e){var t=e.element;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Object.assign(this,{element:t}),this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight,this.hasChildren=!!this.element.children}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(i,[{key:"clear",value:function(){this.element.innerHTML=""}},{key:"append",value:function(e){this.element.appendChild(e)}},{key:"getChild",value:function(e){return this.element.querySelector(e)}},{key:"scrollToTop",value:function(){this.element.scrollTop=0}},{key:"scrollToChoice",value:function(e,t){var i=this;if(e){var n=this.element.offsetHeight,a=e.offsetHeight,o=e.offsetTop+a,r=this.element.scrollTop+n,s=0<t?this.element.scrollTop+o-r:e.offsetTop;requestAnimationFrame(function(e){i._animateScroll(e,s,t)})}}},{key:"_scrollDown",value:function(e,t,i){var n=(i-e)/t,a=1<n?n:1;this.element.scrollTop=e+a}},{key:"_scrollUp",value:function(e,t,i){var n=(e-i)/t,a=1<n?n:1;this.element.scrollTop=e-a}},{key:"_animateScroll",value:function(e,t,i){var n=this,a=s.SCROLLING_SPEED,o=this.element.scrollTop,r=!1;0<i?(this._scrollDown(o,a,t),o<t&&(r=!0)):(this._scrollUp(o,a,t),t<o&&(r=!0)),r&&requestAnimationFrame(function(){n._animateScroll(e,t,i)})}}]),i}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=i(4))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(){function o(e){var t,i=e.element,n=e.classNames,a=e.delimiter;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=s(this,c(o).call(this,{element:i,classNames:n}))).delimiter=a,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,a["default"]),function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(o,[{key:"value",set:function(e){var t=e.map(function(e){return e.value}).join(this.delimiter);this.element.setAttribute("value",t),this.element.value=t},get:function(){return l(c(o.prototype),"value",this)}}]),o}();t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(4)),o=n(i(5));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(){function n(e){var t=e.element,i=e.classNames;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),l(this,c(n).call(this,{element:t,classNames:i}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,a["default"]),function(e,t,i){t&&s(e.prototype,t),i&&s(e,i)}(n,[{key:"appendDocFragment",value:function(e){this.element.innerHTML="",this.element.appendChild(e)}},{key:"placeholderOption",get:function(){return this.element.querySelector("option[placeholder]")}},{key:"optionGroups",get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))}},{key:"options",get:function(){return Array.from(this.element.options)},set:function(e){var i=document.createDocumentFragment();e.forEach(function(e){return function(e){var t=o.default.option(e);i.appendChild(t)}(e)}),this.appendDocFragment(i)}}]),n}();t.default=u},function(e,t,i){var n;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var n=_typeof2(i);if("string"===n||"number"===n)e.push(i);else if(Array.isArray(i)&&i.length){var a=s.apply(null,i);a&&e.push(a)}else if("object"===n)for(var o in i)r.call(i,o)&&i[o]&&e.push(o)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearChoices=t.activateChoices=t.filterChoices=t.addChoice=void 0;var h=i(1);t.addChoice=function(e){var t=e.value,i=e.label,n=e.id,a=e.groupId,o=e.disabled,r=e.elementId,s=e.customProperties,l=e.placeholder,c=e.keyCode;return{type:h.ACTION_TYPES.ADD_CHOICE,value:t,label:i,id:n,groupId:a,disabled:o,elementId:r,customProperties:s,placeholder:l,keyCode:c}};t.filterChoices=function(e){return{type:h.ACTION_TYPES.FILTER_CHOICES,results:e}};t.activateChoices=function(e){var t=!(0<arguments.length&&void 0!==e)||e;return{type:h.ACTION_TYPES.ACTIVATE_CHOICES,active:t}};t.clearChoices=function(){return{type:h.ACTION_TYPES.CLEAR_CHOICES}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightItem=t.removeItem=t.addItem=void 0;var c=i(1);t.addItem=function(e){var t=e.value,i=e.label,n=e.id,a=e.choiceId,o=e.groupId,r=e.customProperties,s=e.placeholder,l=e.keyCode;return{type:c.ACTION_TYPES.ADD_ITEM,value:t,label:i,id:n,choiceId:a,groupId:o,customProperties:r,placeholder:s,keyCode:l}};t.removeItem=function(e,t){return{type:c.ACTION_TYPES.REMOVE_ITEM,id:e,choiceId:t}};t.highlightItem=function(e,t){return{type:c.ACTION_TYPES.HIGHLIGHT_ITEM,id:e,highlighted:t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGroup=void 0;var a=i(1);t.addGroup=function(e,t,i,n){return{type:a.ACTION_TYPES.ADD_GROUP,value:e,id:t,active:i,disabled:n}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetTo=t.clearAll=void 0;t.clearAll=function(){return{type:"CLEAR_ALL"}};t.resetTo=function(e){return{type:"RESET_TO",state:e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setIsLoading=void 0;t.setIsLoading=function(e){return{type:"SET_IS_LOADING",isLoading:e}}}],a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===_typeof2(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/public/assets/scripts/",a(a.s=9);function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var i,n});