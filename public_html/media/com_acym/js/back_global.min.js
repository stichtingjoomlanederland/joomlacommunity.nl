/**
 * @package    AcyMailing for Joomla
 * @version    6.5.0
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(t){function e(){t(".acym__header__notification__center").removeClass("acym__header__notification__center__visible"),t(window).off("click"),t.setNotificationCenter()}var _,a,i,o,s,n,c,l,r,d,m;function y(){var e=t("#acym__joomla__left-menu");e&&(t("#acym_content, .acym_no_foundation").css({width:"calc(100% - "+e.width()+"px)","margin-left":e.width()+"px"}),t("#system-message-container").css({"margin-left":e.width()+15+"px"}))}function h(t,e,_){var a=new Date;a.setDate(a.getDate()+_),document.cookie=t+"="+escape(e)+(null==_?"":";expires="+a.toGMTString())}function u(e){t(".acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"40px"},"fast",function(){e.find("i").css("width","40px")})}function f(){t("#acym_pagination").val(1),t("#acym_form").submit()}function p(e){let _=t("#acym__wysid__template"),a=e?"desktop":"smartphone";_.find(".acym__wysid__row__selector").remove(),t("#acym__template__preview").val(_.html()),t(".acym__wysid__fullscreen__modal__content__container").hide(),t("#acym__wysid__fullscreen__modal__content__"+a).closest(".acym__wysid__fullscreen__modal__content__container").show(),g("acym__wysid__fullscreen__modal__content__"+a,a,!0),t("#acym__wysid__fullscreen__modal").css("display","inherit")}function g(e,_,a){a=null!=a;var i,o=!0,s=t("#acym__wysid__email__preview"),n="acym__wysid__preview__iframe__"+e;let c='<div class="cell auto"></div>';c+='<iframe id="'+n+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"/>',c+='<div class="cell auto"></div>',c+='<div class="acym__fadeout"></div>',c+='<i class="acymicon-keyboard_arrow_down acym__preview__extend acym__preview__toggle acym__preview-toggle"></i>',c+='<i class="fa fa-unsorted acym__preview-toggle acym__preview__toggle__top"></i>',t("#"+e).html(c);var l=t("#"+n);"smartphone"==_?l.css("maxWidth","425px"):l.css("maxWidth","inherit"),l.css("height","100%"),i=l.css("height");t("#acym__campaign__summary").length?(l.css({height:"200px"}),s.css("padding-bottom","200px"),l.contents().find("body").css("overflow","hidden"),t(".acym__preview-toggle").off("click").on("click",function(){t(".acym__fadeout").toggle(),o?(t(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_down").removeClass("acym__preview__extend").addClass("acymicon-keyboard_arrow_up").addClass("acym__preview__collapse"),l.css({height:i}).contents().find("body").css("overflow","auto"),s.css("padding-bottom",i),o=!o):(t(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_up").removeClass("acym__preview__collapse").addClass("acymicon-keyboard_arrow_down").addClass("acym__preview__extend"),l.css({height:"200px"}).contents().find("body").css("overflow","hidden"),s.css("padding-bottom","200px"),o=!o)})):(t(".acym__fadeout").hide(),t(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?w(n,a):l.on("load",function(){w(n,a)})}function w(e,_){let a='<div id="acym__wysid__template" class="cell acym__foundation__for__email">';a+='<table class="body"><tbody><tr>',a+='<td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(120, 120, 120);"><center>',a+='<table align="center"><tbody>',a+='<tr><td class="acym__wysid__row ui-droppable ui-sortable">',a+='<table class="row acym__wysid__row__element"><tbody style="background-color: rgb(255, 255, 255);">',a+='<tr><th class="small-12 medium-12 large-12 columns">',a+='<table class="acym__wysid__column" style="min-height: 75px; display: block;"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table>',a+="</th></tr>",a+="</tbody></table>",a+="</td></tr>",a+="</tbody></table>",a+="</center></td>",a+="</tr></tbody></table>",a+="</div>";let i=t("#"+e).contents(),o=i.find("head"),s=i.find("body"),n=t(".acym__wysid__hidden__save__stylesheet").attr("value"),c=t(".acym__wysid__hidden__save__content"),l=t(".acym__hidden__mail__content").html(),r=t("#acym__wysid__template"),d=r.find("#acym__wysid__default").detach();r.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove();let m=r.html();r.find(".acym__wysid__column__first").before(d),o.append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />'),o.append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),o.append('<link rel="stylesheet" href="'+ACYM_FIXES_FOR_EMAIL+'">'),null!=n&&""!=n&&setTimeout(function(){o.append("<style>"+n+"</style>")},100);let y="";if(_?(c.attr("value",'<div id="acym__wysid__template" class="cell">'+m+"</div>"),y='<div id="acym__wysid__template" class="cell">'+t("#acym__template__preview").val()+"</div>"):""==c.attr("value")&&(""==m?c.attr("value",a):c.attr("value",'<div id="acym__wysid__template" class="cell">'+m+"</div>")),"empty"==c.attr("value")&&c.attr("value",a),""!=l){var h=t(".acym__hidden__mail__stylesheet").html();null!=h&&""!=h&&o.append("<style>"+h+"</style>"),s.append(l)}null!=y&&""!=y?s.css("margin","0").append(y):s.css("margin","0").append(c.attr("value")),i.find("a").attr("target","_blank"),i.find('a[href^="#"]').attr("target","_top")}t.introContent=[],t.acym_emailValid=function(t){return null!==t.match(ACYM_REGEX_EMAIL)},t.acym_config_get=function(e){let _=AJAX_URL_ACYM+"&ctrl=configuration&task=getAjax&field="+e;return t.get(_)},t.acym_parseJson=function(t,e){try{let e=t.indexOf("{"),_=t.indexOf("[");if(!isNaN(e)&&e>0&&!isNaN(_)&&_>0&&(t=t.substring(e)),void 0!==t||""!==t)return JSON.parse(t)}catch(t){console.log(t.stack)}return e},t.setNotificationCenter=function(){let _=t(".acym__header__notification");_.find("i").hasClass("fa-check-circle")&&setTimeout(function(){_.find("> i").attr("class","fa fa-bell-o"),_.find(".acym__tooltip__text").remove(),_.removeAttr("data-tooltip").removeAttr("data-tooltip-position").removeClass("acym__header__notification__button__success acym__header__notification__pulse")},8e3),_.off("click").on("click",function(){let a=t(this),i=t(".acym__header__notification__center"),o=a.offset(),s=o.left-i.width()+a.width()+"px",n=o.top+a.height()+10+"px";i.css({top:n,left:s}).addClass("acym__header__notification__center__visible");let c=AJAX_URL_ACYM+"&ctrl=configuration&task=markNotificationRead";t.get(c,function(e){void 0===(e=t.acym_parseJson(e)).error?t(".acym__header__notification").removeClass("acym__header__notification__pulse acym__header__notification__button__success acym__header__notification__button__info acym__header__notification__button__warning acym__header__notification__button__error").find("> i").attr("class","fa fa-bell-o"):console.log(e.error)}),_.off("click").on("click",function(_){if(t(_.target).hasClass("acym__header__notification__center__visible")||t(_.target).closest(".acym__header__notification__center__visible").length>0)return!0;e()}),setTimeout(function(){t(window).off("click").on("click",function(_){if(t(_.target).hasClass("acym__header__notification__center__visible")||t(_.target).closest(".acym__header__notification__center__visible").length>0)return!0;e()})},100)}),t(".acym__message__close").off("click").on("click",function(){let e=t(this),_=e.attr("data-id");if(void 0!==_&&0!=_){let a=AJAX_URL_ACYM+"&ctrl=configuration&task=markNotificationRead&id="+_;t.get(a,function(_){void 0===(_=t.acym_parseJson(_)).error?e.closest(".acym__message").remove():console.log(_.error)})}else e.closest(".acym__message").remove()})},t.acym_isEmpty=function(t){var e=[void 0,null,!1,0,"","0"];if("object"==typeof t){for(var _ in t)if(t.hasOwnProperty(_))return!1;return!0}for(var a=0;a<e.length;a++)if(t===e[a])return!0;return!1},t.acym_sprintf=function(){var e=(arguments=Object.values(arguments)).splice(0,1)[0];return 1===arguments.length?e=e.replace("%s",arguments[0]):t.each(arguments,function(t,_){e=e.replace("%"+(t+1)+"$s",_)}),e},t.setTooltip=function(){t(".acym__tooltip, [data-tooltip]").on("mouseenter",function(){if(void 0!==t(this).attr("data-tooltip")){t(this).addClass("acym__tooltip");let e=void 0!==t(this).attr("data-tooltip-position")?"acym__tooltip__text__"+t(this).attr("data-tooltip-position"):"";0==t(this).find(".acym__tooltip__text").length&&t(this).append('<span class="acym__tooltip__text '+e+'">'+t(this).attr("data-tooltip")+"</span>")}!function(e,_){if(e.hasClass("wysid_tooltip"))return void e.css({position:"absolute",top:_.outerHeight()+14+"px",left:"-"+(250-_.outerWidth())/2+"px",width:"250px"});var a,i,o=_.offset(),s=t(window).scrollTop(),n=o.top-s;e.hasClass("acym__tooltip__text__right")?(a=n-e.height()<0?0:n-e.height(),i=o.left+_.width()+10<0?0:o.left+_.width()+10):e.hasClass("acym__tooltip__text__left")?(a=n-e.height()<0?0:n-e.height(),i=o.left-e.width()-_.width()-10<0?0:o.left-e.width()-_.width()-10):(a=n-e.height()-15<0?0:n-e.height()-15,i=o.left-e.height()/2<0?0:o.left-e.height()/2);e.css({top:a+"px",left:i+"px"})}(t(this).find(".acym__tooltip__text"),t(this))})},t.setDatePickerGlobal=function(){t(".acy_date_picker").off("click").on("click",function(){let e=t(this),_=e.val()?moment(e.val(),"DD MMM YYYY HH:mm"):moment();new MaterialDatetimePicker({default:_}).on("submit",function(t){e.val(moment(t,"MM-DD-YYYY").format("DD MMM YYYY HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},t.setAjaxSelect2=function(){t(".acym_select2_ajax").each(function(){let e=t(this).attr("data-placeholder");e||(e="- - -");let _=t(this).attr("data-ctrl");_||(_="dynamics");let a=t(this).attr("data-task");a||(a="trigger");let i={ctrl:_,task:a},o=t(this).attr("data-params");if(o){let t=JSON.parse(o);Object.assign(i,t)}let s=t(this).attr("data-min");s||(s=3),t(this).select2({theme:"foundation",ajax:{url:AJAX_URL_ACYM,dataType:"json",delay:250,data:function(t){return i.search=t.term,i},processResults:function(e){var _=[];return e&&t.each(e,function(t,e){_.push({id:e[0],text:e[1]})}),{results:_}},cache:!0},minimumInputLength:s,width:"100%",allowClear:!0,placeholder:e});let n=t(this).attr("data-selected");if(n&&n>0){let e=AJAX_URL_ACYM+"&ctrl="+_+"&task="+a+"&id="+encodeURIComponent(n),i=t(this);t.get(e,function(e){e=t.acym_parseJson(e);let _=new Option(e.text,e.value,!1,!1);i.append(_)})}})},t.setAjaxSaveThumbnail=function(){var e=t("#editor_thumbnail"),_=t('[name="thumbnail"]'),a=AJAX_URL_ACYM+"&ctrl=mails&task=setNewThumbnail";return-1!==e.val().indexOf(".png")||(""===e.val()&&""!==_.val()?(e.val(_.val()),!0):""===_.val()&&""===e.val()?(e.val(""),!0):t.ajax({type:"POST",url:a,data:{content:e.val(),thumbnail:_.val()},success:function(t){e.val(t)}}))},t.setRSDateChoice=function(){t(".acym__button__clear__time").on("click",function(){var e=t(this).closest(".reveal").attr("id");t('[data-rs="'+e+'"]').val(""),t('[data-open="'+e+'"]').val("").trigger("change")}),t(".acym__button__set__time").on("click",function(){var e,_,a;"relative"===t(this).closest(".reveal").find(".date_rs_selection.is-active").attr("data-type")?(e=t(this),_=e.closest(".reveal"),a=parseInt(_.find(".relativenumber").val())*parseInt(_.find(".relativetype").val()),t('[data-rs="'+_.attr("id")+'"]').val("[time]"+(a>0?_.find(".relativewhen").val()+a:"")),t('[data-open="'+_.attr("id")+'"]').val("[time]"+(a>0?_.find(".relativewhen").val()+a:"")).trigger("change")):function(e){var _=e.closest(".reveal"),a=_.find('[name^="specific_"]');t('[data-rs="'+_.attr("id")+'"]').val(moment(a.val(),"DD MMM YYYY HH:mm").unix()),t('[data-open="'+_.attr("id")+'"]').val(a.val()).trigger("change")}(t(this))}),t(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var _=t(this).closest(".date_rs_selection_popup");_.find(".date_rs_selection").removeClass("is-active"),t(this).addClass("is-active"),_.find(".date_rs_selection_choice").hide(),_.find(".date_rs_selection_"+t(this).attr("data-type")).show()})},t.setSubmitButtonGlobal=function(){t(".acy_button_submit").off("click").on("click",function(e){if(void 0!==t(this).attr("data-force-submit")&&t("[required]").removeAttr("required"),t(this).hasClass("disabled-button"))return!1;e.preventDefault();var _=t(this).attr("data-condition");if(_&&"function"==typeof t[_]&&!t[_]())return!1;var a=t(this).attr("data-confirmation-message");if(void 0!==a&&!t.acym_confirm(ACYM_JS_TXT[a]))return!1;var i=t("#acym_form"),o=t(this).attr("data-task");i.find('[name="task"]').val(o);var s=t(this).attr("data-step");null!=s&&i.find('[name="nextstep"]').val(s);var n=t(this).attr("data-and");null!=n&&i.append('<input type="hidden" value="'+n+'" name="and_action">');var c=i.find("#formSubmit");if(null==c[0]){var l=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(l)}else c.click()})},t(document).foundation(),t(".acym__select").select2({theme:"foundation",width:"100%"}),t(".acym__format__view").off("click").on("click",function(){t(".acym__format__view--current").removeClass("acym__format__view--current"),t(this).addClass("acym__format__view--current");var e=t(this).attr("format");t("#acym_listingformat").val(e),t(".acym__listing").addClass("acym__listing--hidden"),t(".acym__listing__view__"+e).removeClass("acym__listing--hidden")}),t.setSubmitButtonGlobal(),t(".acym__pagination__page").off("click").on("click",function(){t("#acym_pagination").val(t(this).attr("page")),t("#acym_form").submit()}),t(".acym__lists__filter__tags").off("change").on("change",function(){f()}),t(".acym__templates__filter__tags").off("change").on("change",function(){f()}),t(".acym__campaigns__filter__tags").off("change").on("change",function(){f()}),t(".acym__queue__filter__tags").off("change").on("change",function(){f()}),t(".acym__search__button").off("click").on("click",function(){f()}),t(".acym__type__choosen").off("click").on("click",function(){t("#acym__type-template").val(t(this).attr("data-type")),t(".acym_ordering_option").removeClass("is-active"),t(this).addClass("is-active"),f()}),t(".acym__filter__status").off("click").on("click",function(){t("#acym_filter_status").val(t(this).attr("status")),f()}),t(".acym_toggleable").off("click").on("click",function(){var e=t(this);e.attr("class","fa fa-circle-o-notch fa-spin");var _=e.attr("table"),a=e.attr("field"),i=e.attr("elementid"),o=e.attr("newvalue"),s=TOGGLE_URL_ACYM+"&table="+_+"&field="+a+"&id="+i+"&value="+o;t.ajax({url:s,type:"GET"}).done(function(e){var o=t.parseJSON(e);t("[table="+_+"][field="+a+"][elementid="+i+"]").attr("newvalue",o.value).attr("class",o.classes)})}),t(".acym_toggle_delete").off("click").on("click",function(){var e=t(this),_=e.attr("confirmation");if(!_||t.acym_confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var a=e.attr("table"),i=e.attr("elementid"),o=TOGGLE_URL_ACYM+"&task=delete&table="+a+"&id="+i,s=e.attr("method");null!=s&&(o+="&method="+s),t.ajax({url:o,type:"GET"}).done(function(e){"mail"===a?t("#acym_form").submit():t(".grid-x[elementid="+i+"]").remove()})}}),t(".switch-label").off("click").on("click",function(){var e=t(this).attr("for");t('[data-switch="'+e+'"]').trigger("change")}),t(".acym_toggle_switch").off("change").on("change",function(){var e=t(this),_=e.attr("table"),a=e.attr("field"),i=e.attr("elementid"),o=e.attr("newvalue"),s=TOGGLE_URL_ACYM+"&table="+_+"&field="+a+"&id="+i+"&value="+o;t.ajax({url:s,type:"GET"}).done(function(_){var a=t.parseJSON(_);e.attr("newvalue",a.value)})}),t(".acym__listing__block__delete__trash").off("click").on("click",function(e){e.preventDefault();var _=t(this).closest(" .acym__listing__block__delete");_.css("width","auto"),_.find("i").css("width","0"),_.animate({maxWidth:_.parent().innerWidth()},"fast",function(){t(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){u(t(this).closest(".acym__listing__block__delete"))})}),t(".acym__listing__block").off("mouseleave").on("mouseleave",function(){u(t(this).find(".acym__listing__block__delete"))})}),(_=t('input.acym_toggle[type="checkbox"]')).off("change").on("change",function(){var e=t("."+t(this).attr("data-toggle")),_=t(this).is(":checked"),a=t("#"+t(this).attr("data-value"));e.each(function(){var e=t(this);_?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),a&&a.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),a&&a.val(0))})}),_.trigger("change"),t(".switch-label").on("click",function(){var e=t('input[data-switch="'+t(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))}),a=t("#acym__tags__field"),i=a.attr("placeholder"),a.select2({width:"100%",placeholder:i,tags:!0,tokenSeparators:[" "],createTag:function(e){var _=t.trim(e.term);return""===_?null:{id:"acy_new_tag_"+_,text:_,newTag:!0}}}),t.setDatePickerGlobal(),t(".acym__search-clear").off("click").on("click",function(){t(".acym__search-field").attr("value",""),f()}),function e(){t(".acym__wysid__hidden__save__content").off("change").on("change",function(){e()}),g("acym__wysid__email__preview","desktop"),t("#acym__wysid__view__desktop").off("click").on("click",function(){p(!0)}),t("#acym__wysid__view__smartphone").off("click").on("click",function(){p(!1)})}(),t("#acym__listing__ordering").select2({theme:"sortBy",minimumResultsForSearch:1/0}),o={},t(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){return null==o.id?(o.id=t(this).attr("id"),void(o.style=t(this).attr("style"))):o.id!=t(this).attr("id")?(o.id=t(this).attr("id"),void(o.style=t(this).attr("style"))):void t(this).attr("style",o.style)}),t(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){var _=t(this).position();t(this).css("margin-top",""),_.top+t(this).outerHeight()+100>t(window).height()?(t(this).css({"margin-top":"-80px"}),t(this).removeClass("dropdown-bottom dropdown-top"),t(this).addClass("dropdown-top")):(t(this).attr("data-position","bottom"),t(this).removeClass("dropdown-bottom dropdown-top"),t(this).addClass("dropdown-bottom"))}),t(".dropdown-pane").off("hide.zf.dropdown").on("hide.zf.dropdown",function(e){t(this).css("margin-top","")}),t("i.acym_radio_unchecked").on("click",function(){var e=t("#"+t(this).attr("data-radio"));e.click()}),t('input[type="radio"]').on("change",function(){var e=t('input[name="'+t(this).attr("name")+'"]:checked').val();t('input[name="'+t(this).attr("name")+'"]').each(function(){t(this).val()==e?(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').hide(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').show()):(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').show(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),t(".acym_message i.fa-close").off("click").on("click",function(){t(this).parent().remove()}),(s=t('[data-toggle-switch]:not([data-toggle-switch=""])')).off("change").on("change",function(){var e=t(this).attr("data-toggle-switch-open");1!=t(this).val()&&"show"==e||1==t(this).val()&&"hide"==e?t("#"+t(this).attr("data-toggle-switch")).show():t("#"+t(this).attr("data-toggle-switch")).hide()}),s.each(function(e){var _=t(this).attr("data-toggle-switch-open");1==t(this).val()&&"show"==_||1!=t(this).val()&&"hide"==_?t("#"+t(this).attr("data-toggle-switch")).show():t("#"+t(this).attr("data-toggle-switch")).hide()}),t(".acym__button__file").off("click").on("click",function(){var e=t(this),_=e.prev();_.click(),_.off("change").on("change",function(){e.next().html(t(this).val().split("\\").pop())})}),t.setTooltip(),t(".acym__sortable__listing").sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(e,_){var a=t(".acym__sortable__listing .acym__listing__row"),i=t(".acym__sortable__listing").attr("data-sort-ctrl"),o=[];a.each(function(e){o.push(t(this).attr("data-id-element"))}),o=JSON.stringify(o);var s=AJAX_URL_ACYM+"&ctrl="+i+"&task=setOrdering&order="+o;t.post(s,function(t){"error"==t&&console.log("Error can't order these elements")})}}),t.setAjaxSelect2(),t("#acym__reviews__footer__link").on("click",function(){var e=AJAX_URL_ACYM+"&ctrl=toggle&task=setDoNotRemindMe&value="+encodeURIComponent(t(this).attr("title"));t.get(e,function(e){""===(e=t.acym_parseJson(e)).error?t("#acym__reviews__footer").html(e.message):console.log(e.error)})}),t(".acym__do__not__remindme").on("click",function(){var e=t(this).attr("title");t('[data-news="'+e+'"]').remove();var _=AJAX_URL_ACYM+"&ctrl=toggle&task=setDoNotRemindMe&value="+encodeURIComponent(e);t.get(_,function(e){""!==(e=t.acym_parseJson(e)).error?console.log(e.error):location.reload()})}),t(".acym__toggle__arrow .acym__toggle__arrow__trigger").off("click").on("click",function(){var e=t(this).closest(".acym__toggle__arrow").children(".acym__toggle__arrow__contain");e.is(":visible")?(e.hide(),t(this).find("i").removeClass("acymicon-keyboard_arrow_up").addClass("acymicon-keyboard_arrow_down")):(e.show(),t(this).find("i").removeClass("acymicon-keyboard_arrow_down").addClass("acymicon-keyboard_arrow_up"))}),t('[data-toggle-select]:not([data-toggle-select=""])').on("change",function(){var e=t.acym_parseJson(t(this).attr("data-toggle-select")),_=t(this).val();t.each(e,function(e,a){e!=_?t(a).hide():t(a).show()})}).trigger("change"),t.setNotificationCenter(),n=t("#acym__test__field"),c={ctrl:"campaigns",task:"searchTestReceivers"},n.select2({width:"100%",placeholder:n.attr("placeholder"),tags:!0,tokenSeparators:[" ",",",";"],createTag:function(e){var _=t.trim(e.term);return t.acym_emailValid(_)?{id:_,text:_}:null},ajax:{url:AJAX_URL_ACYM,dataType:"json",delay:250,data:function(t){return c.search=t.term,c},processResults:function(e){var _=[];return e&&t.each(e,function(t,e){_.push({id:e[0],text:e[1]})}),{results:_}}},minimumInputLength:3}),"joomla"!=CMS_ACYM||(l=t("#acym__joomla__left-menu"),r=t("#acym__joomla__left-menu--toggle"),d=t("#acym__joomla__left-menu a span"),m=t("#acym__joomla__left-menu--toggle i"),l.css("top",t(".navbar").height()),t(".btn-subhead").hide(),"none"!=r.css("display")&&(l.hasClass("collapsed")?(d.hide(),l.css({width:"55px"}),m.removeClass("acymicon-keyboard_arrow_left").addClass("acymicon-keyboard_arrow_right")):(d.show(),l.css({width:"200px"}),m.removeClass("acymicon-keyboard_arrow_right").addClass("acymicon-keyboard_arrow_left")),y(),r.off("click").on("click",function(){l.hasClass("collapsed")?(l.removeClass("collapsed"),d.show(),l.css({width:"200px"}),m.removeClass("acymicon-keyboard_arrow_right").addClass("acymicon-keyboard_arrow_left"),h("menuJoomla","",365)):(l.addClass("collapsed"),d.hide(),l.css({width:"55px"}),m.removeClass("acymicon-keyboard_arrow_left").addClass("acymicon-keyboard_arrow_right"),h("menuJoomla","collapsed",365)),y()})),t(".btn-navbar").off("click").on("click",function(){l.hide()}),t("#acym__joomla__left-menu--show").off("click").on("click",function(){t(".btn-navbar").hasClass("collapsed")||(".nav-collapse".css("height","0px").removeClass("in"),t(".btn-navbar").removeClass("collapsed")),l.toggle()})),t(".acym_select_foundation").select2({theme:"foundation",width:"100%"}),!t("#acym_form").length||t("#acym__editor__content").length||t(".campaigns_edit_email").length?t(".reveal-overlay").appendTo("#acym_wrapper"):t(".reveal-overlay").appendTo("#acym_form"),t("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(t){if(13==t.keyCode)return t.preventDefault(),!1}),t.setIntrojs=function(e,_){_=void 0!==_&&_;var a=TOGGLE_URL_ACYM+"&task=getIntroJSConfig";t.post(a,function(a){if((void 0===(a=JSON.parse(a))[e]||0==a[e]||_)&&!t(".introjs-tooltip").is(":visible")){for(var i=t.introContent,o=[],s=0;s<i.length;s++)t(""+i[s].element).attr("data-intro",i.text),o.push({element:document.querySelector(""+i[s].element),intro:i[s].text,position:void 0===i[s].position?"bottom":i[s].position});var n=introJs();n.setOptions({steps:o}),n.start(),t(".introjs-nextbutton").html(ACYM_JS_TXT.ACYM_NEXT),t(".introjs-prevbutton").html(ACYM_JS_TXT.ACYM_BACK),t(".introjs-skipbutton").html(ACYM_JS_TXT.ACYM_SKIP);var c=TOGGLE_URL_ACYM+"&task=toggleIntroJS&where="+e;t.post(c,function(t){})}})},t.acym_confirm=function(t){return confirm(t)},t.acym_add_notification=function(e,_){null!=_&&-1!=t.inArray(_,["success","warning","error"])||(_="info");let a=function(t,e){return'<div class="acym__message grid-x acym__message__'+e+'"><div class="cell auto"><p>'+t+'</p></div><i data-id="0" class="cell shrink acym__message__close fa fa-close"></i></div>'}(e,_);t("#acym_header").after(a);let i=AJAX_URL_ACYM+"&ctrl=configuration&task=addNotification&message="+e+"&level="+_;t.get(i,function(e){void 0===(e=t.acym_parseJson(e)).error?(t(".acym__header__notification").replaceWith(e.data),t.setNotificationCenter()):console.log(e.error)})},setTimeout(function(){t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body").css("padding",0).css("margin",0).css("height","100%"),t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body #acym_wrapper").css("min-height","100%")},1e3)}),jQuery(document).ready(function(t){t(".acym__wysid__modal__dynamic-text--close").off("click").on("click",function(){t("#acym__wysid__modal__dynamic-text").hide()}),t("#dtext_subject_button").off("click").on("click",function(e){e.preventDefault(),t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),t("#acym__wysid__modal__dynamic-text").show()})}),jQuery(document).ready(function(t){t("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}),jQuery(document).ready(function(t){const e=function(e,_){let a=t("#acym__wysid__right-toolbar"),i=a.offset(),o=Math.round(i.left);if(i.left<=e&&e<=o+a.width())return!0};t.saveAjaxMail=function(e,_){let a=t('[name="mail[name]"]'),i=t('[name="mail[subject]"]');return""===i.val()&&i.val(ACYM_JS_TXT.ACYM_EMAIL_SUBJECT),""===a.val()&&a.val("campaigns"===e?ACYM_JS_TXT.ACYM_CAMPAIGN_NAME:ACYM_JS_TXT.ACYM_TEMPLATE_NAME),"mails"===e?t.when(t.setAjaxSaveThumbnail()).done(function(){return u(e,_)}):u(e,_)};let _="",a=t(".acym__wysid__hidden__save__settings").val(),i={},o=!0,s="",n=t(".acym__wysid__hidden__save__stylesheet").val(),c=!1,l="",r=0,d={"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"16px","font-weight":"normal","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","font-style":"normal",color:"#000000"}};var m,y={facebook:{src:MEDIA_URL_ACYM+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:MEDIA_URL_ACYM+"/images/logo/twitter.png",link:"#",text:"Tweet"},pinterest:{src:MEDIA_URL_ACYM+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:MEDIA_URL_ACYM+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:MEDIA_URL_ACYM+"/images/logo/instagram.png"},vimeo:{src:MEDIA_URL_ACYM+"/images/logo/vimeo.png"},wordpress:{src:MEDIA_URL_ACYM+"/images/logo/wordpress.png"},youtube:{src:MEDIA_URL_ACYM+"/images/logo/youtube.png"}};function h(e){let _=t("#acym__wysid__template");return _.css({overflow:"hidden","overflow-y":"auto"}),t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),t("img").each(function(){t(this).attr("width",t(this).width()).attr("height",t(this).height())}),t('[id^="template_version_"]').remove(),t("#acym__wysid__template *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&t(this).remove()}),_.find(".acym__wysid__column__element__td").css("outline-width","0px"),_.find("[contenteditable]").attr("contenteditable","false"),t("#acym__wysid__template a.acym__wysid__column__element__button").each(function(){let e=(_=t(this),a=parseInt(_.css("border-radius")),i=_.css("border-color"),o=_.css("background-color"),s=_.attr("href"),n='style = "width: '+_.outerWidth()+"; height:"+_.css("height").replace(/[^-\d\.]/g,"")+'"',c="color :"+_.css("color")+"; word-break:"+_.css("word-break")+"; font-family:"+_.css("font-family")+"; font-size:"+_.css("font-size")+";",l=_.html(),"\x3c!--[if mso]><v:roundrect "+n+' xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="'+s+'" style="v-text-anchor:middle;" arcsize="'+a+'%" strokecolor="'+i+'" fillcolor="'+o+'"><w:anchorlock/><center style="'+c+'">'+l+"</center></v:roundrect><![endif]--\x3e\x3c!--[if !mso]> --\x3e");var _,a,i,o,s,n,c,l;t(this).before(e),t(this).after("\x3c!-- <![endif]--\x3e")}),t("#acym__wysid__template .acym__wysid__row__element").each(function(){""!==t(this).css("background-image")&&"none"!==t(this).css("background-image")&&function(t){let e='\x3c!--[if gte mso 9]><v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width: '+t.width()+"px;height: "+t.height()+'px"><v:fill type="frame" src="'+t.css("background-image")+'" /><v:textbox inset="0,0,0,0"><![endif]--\x3e';e=e.replace('url("',"").replace('")',""),t.prepend(e).append("\x3c!--[if gte mso 9]></v:textbox></v:rect><![endif]--\x3e")}(t(this))}),t(".acym__wysid__hidden__save__stylesheet").val(t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()),e||(o=!0,t("#acym_header").css("display",""),t(".acym__content").css("display",""),t("#acym__wysid").css("display","none"),t("#acym__wysid__edit").css("display",""),t(".mce-edit-focus").removeClass("mce-edit-focus"),_.find('[name^="mce_"]').remove(),_.find("#acym__wysid__default").remove()),t(".acym__wysid__hidden__save__content").val('<div id="acym__wysid__template" class="cell">'+_.html()+"</div>").trigger("change"),t(".acym__wysid__hidden__save__settings").val(JSON.stringify(i)),t.saveAjaxMail(t('[name="ctrl"]').val(),e)}function u(e,_){t('input[name="task"]').val("saveAjax");let a=AJAX_URL_ACYM+"&ctrl="+e;return t.ajax({type:"POST",url:a,data:t("#acym_form").serialize()}).done(function(a){""!==(a=t.acym_parseJson(a)).error?t.acym_add_notification(a.error,"error"):(t("mail"===e?'[name="id"]':'[name="id"], [name="mail[id]"]').val(a.data),_&&function(e){let _=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=sendTest&id="+e+"&controller="+t('[name="ctrl"]').val()+"&test_emails="+encodeURIComponent(t("#acym__test__field").val().join(","));t.post(_,function(e){(e=t.acym_parseJson(e)).message=e.message.replace(/<.*?>/gm," "),Z(e),t(".acym__wysid__send__test__icon").show(),t(".acym__wysid__send__test__icon__loader").hide(),t("#acym__wysid__send__test__button").removeAttr("disabled")})}(a.data)),t("#acym__wysid__save__button").removeAttr("disabled")}).fail(function(t,e){alert("Request failed: "+e)})}function f(){t("#acym__wysid__template").css({overflow:"unset","overflow-y":"unset"});let e=document.getElementById("acym__wysid__template");return domtoimage.toPng(e)}function p(t,e){t.hasClass("acym__wysid__show")?(t.removeClass("acym__wysid__show"),e.removeClass("acym__wysid__hidden")):(t.addClass("acym__wysid__show"),e.addClass("acym__wysid__hidden"))}function g(){t(".acym__wysid__right__toolbar__tabs").off("click").on("click",function(){!function(e){let _=t("#"+t(".acym__wysid__right__toolbar__selected").attr("data-attr-show")),a=t("#"+e.attr("data-attr-show"));if(_.attr("id")===a.attr("id"))return;let i=t(".acym__wysid__right__toolbar__tabs");i.removeClass("acym__wysid__right__toolbar__selected");let o={hide:"",show:""};i.each(function(){return t(this).attr("data-attr-show")===_.attr("id")?(o.hide="left",o.show="right",!1):t(this).attr("data-attr-show")===a.attr("id")?(o.hide="right",o.show="left",!1):void 0}),e.addClass("acym__wysid__right__toolbar__selected"),_.hide("slide",{direction:o.hide},200,function(){a.show("slide",{direction:o.show},200,function(){g()})})}(t(this))}),t(".acym__wysid__right__toolbar--menu .acym__wysid__right__toolbar__p").off("click").on("click",function(){t(this).next().slideToggle(200),t(this).hasClass("acym__wysid__right__toolbar__p__open")?(t(this).removeClass("acym__wysid__right__toolbar__p__open"),t(this).find("i").removeClass("acymicon-keyboard_arrow_up").addClass("acymicon-keyboard_arrow_down")):(t(this).addClass("acym__wysid__right__toolbar__p__open"),t(this).find("i").removeClass("acymicon-keyboard_arrow_down").addClass("acymicon-keyboard_arrow_up")),t(this).toggleClass("acym__wysid__right__toolbar__last--text")})}function w(){t(".acym__wysid__row").sortable({axis:"y",cursorAt:{top:20},scroll:!1,placeholder:"acym__wysid__row__element--placeholder",handle:".acym__wysid__row__element__toolbox__move",forcePlaceholderSize:!0,tolerance:"intersect",start:function(e,_){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),_.helper.first().addClass("acym__wysid__row__element--sortable"),t(_.placeholder).css({height:"75px"}),t(".acym__wysid__column__element").unbind("hover"),t(".acym__wysid__row__element").unbind("hover")},stop:function(e,_){t(".acym__wysid__row__element--sortable").removeClass("acym__wysid__row__element--sortable");var a=_.item;a.hasClass("acym__wysid__row__element--new--1")?v(a):a.hasClass("acym__wysid__row__element--new--2")?function(e){"<tbody>","<tr>",'<th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),V(),C()}(a):a.hasClass("acym__wysid__row__element--new--3")?function(e){"<tbody>","<tr>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),V(),C()}(a):a.hasClass("acym__wysid__row__element--new--4")?function(e){"<tbody>","<tr>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),V(),C()}(a):a.hasClass("acym__wysid__row__element--new--5")?function(e){"<tbody>","<tr>",'<th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),V(),C()}(a):!a.hasClass("acym__wysid__row__element--new--6")||function(e){"<tbody>","<tr>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),V(),C()}(a),k(),U(),Q()}})}function v(e){t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-12 large-12 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),V(),C()}function b(e,a,i,o){let s;if(void 0===e.attr("id")){s="dynamicContent";let e=0;for(;t("#"+s+e).length;)e++;s+=e}else s=e.attr("id");a=a.replace(/"/g,'\\"');let n='<span class="acym__tooltip acym__dynamics__preview">'+ACYM_JS_TXT.ACYM_PREVIEW;n+='<span class="acym__tooltip__text wysid_tooltip">'+ACYM_JS_TXT.ACYM_PREVIEW_DESC+"</span>",n+="</span>",0===i.length&&(i='<div class="acym_default_dcontent"><span class="acym_default_dcontent_text">'+ACYM_JS_TXT.ACYM_NO_DCONTENT_TEXT+"</span></div>");let c='<tr id="'+s+'" class="acym__wysid__column__element ui-draggable" data-dynamic="'+a+'" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;" data-plugin="'+o+'">';c+='<td class="large-12 acym__wysid__column__element__td">'+n,c+=i,c+='<div class="plugin_loader" style="display: none;"><i class="fa fa-spin fa-spinner">&zwj;</i></div>',c+='<i style="display: none;">&zwj;</i></td></tr>',e.replaceWith(c),C(),V(!0),t.setTooltip(),(_=t("#"+s)).find(".plugin_loader").css("display","none")}function k(){t(".acym__wysid__column tbody").sortable({scroll:!1,handle:".acym__wysid__column__element__toolbox__move",placeholder:"acym__wysid__column__element--placeholder",forcePlaceholderSize:!0,cursorAt:{top:20,left:50},stop:function(e,a){let i=t("#acym__wysid__default");i.closest(".columns").height("auto").find("table").height("auto").find("tbody").height("auto"),i.remove(),t(".acym__wysid__column__first").removeClass("acym__wysid__column__first");var o=a.item;let s=o.attr("data-plugin");s?(_=t(o),P(s)):o.hasClass("acym__wysid__column__element--new--title")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div class="acym__wysid__tinymce--text">',"<h1>Title</h1>","</div>","</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><h1>Title</h1></div></td></tr>'),C(),V()}(o):o.hasClass("acym__wysid__column__element--new--text")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div class="acym__wysid__tinymce--text">',"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p>","</div>","</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p></div></td></tr>'),C(),V()}(o):o.hasClass("acym__wysid__column__element--new--picture")?"wordpress"==CMS_ACYM?M(o):T(o):o.hasClass("acym__wysid__column__element--new--button")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div style="text-align: center;box-sizing: inherit;">','<a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 1; border-radius: 0" href="#">Button</a>',"</div>","</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div style="text-align: center;box-sizing: inherit;"><a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 1; border-radius: 0" href="#">Button</a></div></td></tr>'),C(),V()}(o):o.hasClass("acym__wysid__column__element--new--follow")?function(e){var _='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';_+='<td class="large-12 acym__wysid__column__element__td">',_+='<div style="text-align: center;">',_+='<p class="acym__wysid__column__element__follow" style="text-align: center; cursor: pointer; padding: 0;margin: 0;">',_+='<a class="acym__wysid__column__element__follow__facebook" href="">',_+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+y.facebook.src+'" width="40" alt="facebook">',_+="</a>",_+='<a class="acym__wysid__column__element__follow__twitter" href="">',_+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+y.twitter.src+'"  width="40" alt="twitter">',_+="</a>",_+="</p>",_+="</div>",_+="</td>",_+="</tr>",t(e).replaceWith(_),C(),V()}(o):o.hasClass("acym__wysid__column__element--new--share")?function(e){var _='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';_+='<td class="large-12 acym__wysid__column__element__td">',_+='<div class="acym__wysid__column__element__share acym__wysid__column__element__share--add acy" style="text-align: center; margin-top: 10px; margin-bottom: 10px;">',_+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__facebook" href="'+y.facebook.link+'">',_+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+y.facebook.src+'" alt="'+y.facebook.src+'">',_+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+y.facebook.text+"</span>",_+="</a>",_+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__twitter" href="'+y.twitter.link+'">',_+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+y.twitter.src+'" alt="'+y.twitter.src+'">',_+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+y.twitter.text+"</span>",_+="</a>",_+="</div>",_+="</td>",_+="</tr>",t(e).replaceWith(_),C(),V()}(o):o.hasClass("acym__wysid__column__element--new--space")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span>',"</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span></td></tr>'),C(),V()}(o):o.hasClass("acym__wysid__column__element--new--cms")?function(e){_=t(e),setModalCMSWYSID(),t("#acym__wysid__modal").css("display","inherit")}(o):o.hasClass("acym__wysid__column__element--new--video")?function(e){_=t(e),function(){var e='<div class="grid-container">';e+='<div class="grid-x grid-padding-x grid-padding-y">',e+='<div class="auto cell"></div>',e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/vimeo.png">',e+="</div>",e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/youtube.png">',e+="</div>",e+='<div class="small-4 medium-3 cell" style="display: inline-flex; padding: 15px 0 0 30px;">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/dailymotion.png">',e+="</div>",e+='<div class="auto cell"></div>',e+='<div class="small-8 medium-10 cell">',e+='<input id="acym__wysid__modal__video__search" type="text" placeholder="Url">',e+="</div>",e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__load" class="button primary expanded smaller-button" href="#">Load</button>',e+="</div>",e+="</div>",e+="</div>",t("#acym__wysid__modal__ui__fields").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div id="acym__wysid__modal__video__result" class="medium-12 cell"></div>',e+="</div>",e+="</div>",t("#acym__wysid__modal__ui__display").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div class="small-8 medium-10 cell"></div>',e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__insert" class="button primary expanded disabled" href="#">Insert</button>',e+="</div>",e+="</div>",e+="</div>",t("#acym__wysid__modal__ui__search").html(e);var a=t("#acym__wysid__modal__video__load"),i=t("#acym__wysid__modal__video__insert"),o=t("#acym__wysid__modal__video__search"),s=t("#acym__wysid__modal__video__result");a.off("click").on("click",function(){var e=o.val();i.unbind("click").click(function(){_.replaceWith('<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><p>'+s.html()+"</p></div></td></tr>"),N(),t("#acym__wysid__modal").css("display","none"),V(),C()});var a=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),n=e.match(/^(?:(?:http|https):\/\/)?(?:www.)?(dailymotion\.com|dai\.ly)\/((video\/([^_]+))|(hub\/([^_]+)|([^\/_]+)))$/),c=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);null!=a?(s.html('<a href="https://www.youtube.com/watch?v='+a[1]+'"><img alt="" src="https://img.youtube.com/vi/'+a[1]+'/0.jpg" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block;margin-left: auto; margin-right: auto;"/></a>'),i.removeClass("disabled")):null!=n?(null!==n&&(void 0!==n[4]&&s.html('<a href="https://www.dailymotion.com/video/'+n[4]+'"><img alt="" src="https://www.dailymotion.com/thumbnail/video/'+n[4]+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>'),s.html('<a href="https://www.dailymotion.com/video/'+n[2]+'"><img alt="" src="https://www.dailymotion.com/thumbnail/video/'+n[2]+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>')),i.removeClass("disabled")):null!=c?t.ajax({url:"https://www.vimeo.com/api/v2/video/"+c[5]+".json",dataType:"jsonp",success:function(t){s.html('<a href="https://vimeo.com/'+c[5]+'"><img alt="" src="'+t[0].thumbnail_large+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>'),i.removeClass("disabled")}}):(s.html('<div class="acym__wysid__error_msg" style="text-align: center; margin-top: 100px;">'+ACYM_JS_TXT.ACYM_NON_VALID_URL+"</div>"),i.addClass("disabled").off("click")),s.unbind("click").click(function(t){t.preventDefault()})}),o.keyup(function(t){var e=t.which;13==e&&t.preventDefault(),13!=e&&188!=e&&186!=e||a.click()})}(),t("#acym__wysid__modal").css("display","inherit"),C()}(o):o.hasClass("acym__wysid__column__element--new--separator")&&function(e){'<td class="large-12 acym__wysid__column__element__td">','<hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator">',"</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element acym__wysid__column__element__separator cursor-pointer" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator"></td></tr>'),C(),V()}(o)},change:function(){U()},out:function(){setTimeout(function(){U()},1)},receive:function(t,e){e.item.hasClass("acym__wysid__column__element--new")||(e.item.remove(),C(),V())},start:function(){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove()}})}function x(){t(".acym__wysid__column__element").draggable({cursor:"move",helper:"clone",revert:"invalid",handle:".acym__wysid__column__element__toolbox__move",cursorAt:{top:20,left:50},connectToSortable:".acym__wysid__column tbody",revertDuration:300,start:function(e,_){_.helper.first().addClass("acym__wysid__column__element--helper"),t(this).addClass("acym__wysid__column__element__original--helper"),t(".acym__wysid__column").addClass("acym__wysid__column--drag-start")},stop:function(){t(".acym__wysid__column__element--helper").removeClass("acym__wysid__column__element--helper"),t(".acym__wysid__column__element__original--helper").removeClass("acym__wysid__column__element__original--helper"),t(".acym__wysid__column").removeClass("acym__wysid__column--drag-start"),t(".acym__wysid__column__element").css({position:"relative",top:"inherit",left:"inherit",right:"inherit",bottom:"inherit",height:"auto"}),Q()}})}function C(){var a,i,o,s,n;Q(),t(".acym__wysid__media__inserted").length>0&&setTimeout(function(){var e=t(".acym__wysid__media__inserted");e.attr("height",e.height()).attr("width",e.width())},200),w(),N(),x(),k(),a=t(".acym__wysid__template__content"),t("#acym__wysid__background-colorpicker").spectrum({color:a.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){O("#acym__wysid__background-colorpicker","background-color",t.toHexString())},change:function(t){O("#acym__wysid__background-colorpicker","background-color",t.toHexString())}}),t(".acym__wysid__column__element__button").off("click").on("click",function(_){_.stopPropagation(),_.preventDefault(),t(".acym__context__color__picker").remove(),t(".acym__wysid__column__element__button--focus").removeClass("acym__wysid__column__element__button--focus"),t(this).addClass("acym__wysid__column__element__button--focus");var a=t(this);$(t("#acym__wysid__context__button__background-color"),"background-color",a,a,"background-color"),$(t("#acym__wysid__context__button__border-color"),"border-left-color",a,a,"border-color"),$(t("#acym__wysid__context__button__color"),"color",a,a,"color");var i=t("#acym__wysid__context__button");t("#acym__wysid__context__button__border-radius").val(a.css("border-radius").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){a.css("border-radius",t(this).val()+"px")}),t("#acym__wysid__context__button__border-width").val(a.css("border-left-width").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){a.css("border-width",t(this).val()+"px")}),t("#acym__wysid__context__button__font-family").val(a.css("font-family").replace(/['"]/g,"")).off("change").on("change",function(){a.css("font-family",t(this).val())}),t("#acym__wysid__context__button__font-size").val(a.css("font-size").replace(/[^-\d\.]/g,"")).off("change").on("change",function(){a.css("font-size",t(this).val()+"px")}),t("#acym__wysid__context__button__text").val(a.text()).off("change paste keyup").on("change paste keyup",function(){a.text(t(this).val())}),t("#acym__wysid__context__button__link").val(a.attr("href")).off("change paste keyup").on("change paste keyup",function(){a.attr("href",t(this).val())}),t("#acym__wysid__context__button__bold").css("background-color",700==a.css("font-weight")?"":"inherit").off("click").on("click",function(){700==a.css("font-weight")?t("#acym__wysid__context__button__bold").css("background-color","inherit")&&a.css("font-weight","inherit"):t("#acym__wysid__context__button__bold").css("background-color","")&&a.css("font-weight",700)}),t("#acym__wysid__context__button__italic").css("background-color","italic"==a.css("font-style")?"":"inherit").off("click").on("click",function(){"italic"==a.css("font-style")?t("#acym__wysid__context__button__italic").css("background-color","inherit")&&a.css("font-style","inherit"):t("#acym__wysid__context__button__italic").css("background-color","")&&a.css("font-style","italic")}),t(".acym__wysid__context__button__align").each(function(){t(this).css("background-color","acym__wysid__context__button__align__"+a.closest("div").css("text-align")===t(this).attr("id")?"":"inherit"),t(this).off("click").on("click",function(){a.closest("div").css("text-align",t(this).attr("data-align")),t(".acym__wysid__context__button__align").css("background-color","inherit"),t(this).css("background-color","")})}),t(".acym__button__padding__input").each(function(){t(this).val(a.css(t(this).attr("name")).replace(/[^-\d\.]/g,"")),t(this).off("change").on("change",function(){a.css(t(this).attr("name"),t(this).val()+"px")})}),t("#acym__wysid__context__button__font-family").select2({theme:"foundation",width:"40%"}),t("#acym__wysid__context__button__font-size").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),t("#acym__wysid__context__button__border-width").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),t("#acym__wysid__context__button__border-radius").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),i.find(".switch-input").off("change"),("100%"===document.getElementsByClassName("acym__wysid__column__element__button--focus")[0].style.width&&!i.find(".switch-input").is(":checked")||"100%"!==document.getElementsByClassName("acym__wysid__column__element__button--focus")[0].style.width&&i.find(".switch-input").is(":checked"))&&i.find(".switch-paddle").click();var o=i.find(".slider-handle");o.each(function(){var e,_,i;"slider__output__button__width"===t(this).attr("aria-controls")?(e="left",_=a.css("padding-right").replace(/[^-\d\.]/g,""),i=90*_/100,t(this).next().css("width",_+"%")):(e="top",_=a.css("padding-top").replace(/[^-\d\.]/g,""),i=77*_/100,t(this).next().css("height",_+"%")),t(this).css(e,i+"%"),t("#"+t(this).attr("aria-controls")).val(_)}),i.find(".switch-input").on("change",function(){var e,_;t(this).is(":checked")?(e="100%",_="0"):(e="auto",_=t("#slider__output__button__width").val()+"px"),a.css({width:e,"padding-right":_,"padding-left":_})}),t(".acym__wysid__context__button__slider").on("moved.zf.slider",function(){var e=t("#"+t(this).attr("data-output")).val(),_="slider__output__button__width"!==t(this).attr("data-output")?{"padding-top":e+"px","padding-bottom":e+"px"}:{"padding-right":e+"px","padding-left":e+"px"};a.css(_)}),q(i),t.setTooltip(),i.off("mousedown").on("mousedown",function(e){t(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),t(window).on("mousedown",function(_){t(".sp-container").is(":visible")||e(_.clientX,i)||(t(this).off("mousedown"),K(i,t(_.target)),t(window).unbind("click"),C(),V())})}),t(".acy-editor__space").off("click").on("click",function(_){_.stopPropagation(),t(".acym__context__color__picker").remove();var a=t(this),i=t("#acym__wysid__context__space"),o=i.find(".slider-handle");q(i);var s=a.height();o.css("left",s+"%"),i.find(".slider-fill").css("width",s+"%"),t("#sliderOutput1").val(s),t(".acy-editor__space--focus").removeClass("acy-editor__space--focus"),a.addClass("acy-editor__space--focus");var n=t("#acym__wysid__context__space__slider");n.on("moved.zf.slider",function(){t(".acy-editor__space--focus").css("height",t("#sliderOutput1").val()+"px")}),n.on("changed.zf.slider",function(){C()}),i.off("mousedown").on("mousedown",function(e){t(".acy-editor__space--focus").css("height",t("#sliderOutput1").val()+"px"),e.stopPropagation()}),t(window).on("mousedown",function(_){if(e(_.clientX,i))return!0;t(".acy-editor__space--focus").css("height",t("#sliderOutput1").val()+"px"),t(this).off("mousedown"),K(i,t(_.target)),t(window).unbind("click"),C(),V()})}),function _(){t(".acym__wysid__column__element__follow").off("click").on("click",function(a){a.stopPropagation(),t(".acym__wysid__column__element__follow--focus").removeClass("acym__wysid__column__element__follow--focus"),t(this).addClass("acym__wysid__column__element__follow--focus"),t("#acym__wysid__context__follow__list").empty(),t("#acym__wysid__context__follow__select").html("<option></option>");let i=t(".acym__wysid__column__element__follow--focus img").eq(0);n=i.length?i.css("width").replace(/[^-\d\.]/g,"")<=80?i.css("width").replace(/[^-\d\.]/g,"")>=30?i.eq(0).css("width").replace(/[^-\d\.]/g,""):30:80:40,t("#acym__wysid__context__social__width").val(n);let o=["facebook","twitter","instagram","linkedin","pinterest","vimeo","wordpress","youtube"];for(let e=0,a=o.length;e<a;e++){let a=0;t(".acym__wysid__column__element__follow--focus a").each(function(){if(-1!==t(this).attr("class").indexOf(o[e])){var i=o[e];a=1;var s='<div class="grid-x small-12 cell acym__wysid__context__follow__list__item">';s+='<div class="small-3 cell">',s+='<img style="height: auto;  box-sizing: border-box; width: 42px; padding: 5px; margin-left: 5px" src="'+y[i].src+'" alt="">',s+="</div>",s+='<div class="small-7 cell">',s+='<div class="input-group small-12 cell">',s+='<input id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+i+'" type="text" placeholder="https://" value="'+t(this).attr("href")+'">',s+="</div>",s+="</div>",s+='<div class="auto cell">',s+='<p class="acym__wysid__context__follow__list__remove acym__wysid__context__follow__list__remove--'+i+'" aria-hidden="true">×</p>',s+="</div>",s+="</div>",t("#acym__wysid__context__follow__list").append(s),t(".acym__wysid__context__follow__list__remove--"+i).off("click").on("click",function(){var e=t(".acym__wysid__column__element__follow--focus");e.find(".acym__wysid__column__element__follow__"+i).remove(),t(this).closest(".acym__wysid__context__follow__list__item").remove(),_(),e.click()}),t(".acym__wysid__context__button__link--"+i).off("change paste keyup").on("change paste keyupe",function(){t(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+i).attr("href",t(this).val())})}}),0==a&&t("#acym__wysid__context__follow__select").append(new Option("",o[e],!1,!1)).trigger("change")}let s=t(this),n=s.innerWidth(),c=t("#acym__wysid__context__follow");t(".acym__wysid__context__follow__align").each(function(){t(this).css("background-color","acym__wysid__context__follow__align__"+s.css("text-align")===t(this).attr("id")?"":"inherit"),t(this).off("click").on("click",function(){s.css("text-align",t(this).attr("data-align")),t(".acym__wysid__context__follow__align").css("background-color","inherit"),t(this).css("background-color","")})}),q(c),t("#acym__wysid__context__follow__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:S,templateSelection:S}),c.off("mousedown").on("mousedown",function(t){t.stopPropagation()}),t(window).on("mousedown",function(_){if(e(_.clientX,c))return!0;t(this).off("mousedown"),K(c,t(_.target)),t(window).unbind("click"),C(),V()}),t("#acym__wysid__context__follow__select").off("select2:select").on("select2:select",function(e){let a=e.params.data.id;n=t("#acym__wysid__context__social__width").val()<=80?t("#acym__wysid__context__social__width").val()>=30?t("#acym__wysid__context__social__width").val():30:80;let i='<a class="acym__wysid__column__element__follow__'+a+'" href="">';i+='<img style="display: inline-block; max-width: 100%; height: auto; box-sizing: border-box; width: '+n+'px; padding: 3px;" src="'+y[a].src+'" width="'+n+'" alt="">',i+="</a>",t(".acym__wysid__column__element__follow--focus").append(i),_(),t(".acym__wysid__column__element__follow--focus").click()}),t("#acym__wysid__context__social__width").off("change").on("change",function(){n=t("#acym__wysid__context__social__width").val()<=80?t("#acym__wysid__context__social__width").val()>=30?t("#acym__wysid__context__social__width").val():30:80,t(".acym__wysid__column__element__follow--focus img").css("width",n).attr("width",n)})});t(".acym__wysid__column__element__follow a").unbind("click").click(function(t){t.preventDefault()})}(),function e(){t(".acym__wysid__column__element__share").off("click").on("click",function(_){_.stopPropagation(),t(".acym__context__color__picker").remove(),t(".acym__wysid__column__element__share--focus").removeClass("acym__wysid__column__element__share--focus"),t(this).addClass("acym__wysid__column__element__share--focus"),t("#acym__wysid__context__share__list").empty(),t("#acym__wysid__context__share__select").html("<option></option>");var a=t(".acym__wysid__column__element__share--focus span").eq(0),i=t("#acym__wysid__context__social__share__width");i.attr("value",a.length?a.css("font-size").replace(/[^-\d\.]/g,"")<=40?a.css("font-size").replace(/[^-\d\.]/g,"")>=15?a.eq(0).css("font-size").replace(/[^-\d\.]/g,""):15:40:20),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",i.attr("value")+"px"),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(i.attr("value"))+15+"px");for(var o=["facebook","twitter","linkedin","pinterest"],s=[],n=0,c=o.length;n<c;n++){var l=0;t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social").each(function(_){if(-1!=t(this).attr("class").indexOf(o[n])){var a=o[n];l=1;var i='<div id="acym__wysid__context__share__list__item" class="grid-x small-12 cell">';i+='<div class="small-2 cell acym__wysid__context__share__list__item__'+a+'">',i+='<img style="width: 35px;display: inline; margin-left: 10px;" src="'+y[a].src+'" alt="'+y[a].src+'"/>',i+="</div>",i+='<div class="small-8 cell">',i+='<div class="input-group small-12 cell">',i+='<input maxlength="15" id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+a+'" type="text" value="'+t(this).children("span").html()+'">',i+="</div>",i+="</div>",i+='<div class="auto cell">',i+='<p class="acym__wysid__context__share__list__remove acym__wysid__context__share__list__remove--'+a+'" aria-hidden="true">×</p>',i+="</div>",i+="</div>",t("#acym__wysid__context__share__list").append(i),t(".acym__wysid__context__share__list__remove--"+a).off("click").on("click",function(){var _=a;t(".acym__wysid__column__element__share--focus").find(".acym__wysid__column__element__share__"+_).remove(),e(),t(".acym__wysid__column__element__share--focus").click()}),t(".acym__wysid__context__button__link--"+a).off("change paste keyup").on("change paste keyup",function(){var e=a;t(this).val().length>15?t(this).val(t(this).val().substr(0,15)):t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__"+e+" span").html(t(this).val())})}}),0==l&&t("#acym__wysid__context__share__select").append(new Option("",o[n],!1,!1)).trigger("change")}t(".acym__wysid__column__element__share__social").off("click").on("click",function(t){t.preventDefault()});var r=t(this).parent(),d=r.offset(),m=r.innerHeight(),h=r.innerWidth(),u=t("#acym__wysid__context__share"),f=u.innerHeight(),p=t("#wpadminbar").innerHeight()+5,g=t("nav.navbar").innerHeight()+5,w=t(window).width(),v=d.top-f<p+g?d.top+m-p+5:d.top-p-f;u.css({display:"inherit",top:v,left:w>800?d.left-t("#adminmenuback").innerWidth()+h/2-u.innerWidth()/2:d.left+h/2-u.innerWidth()/2}),t("#acym__wysid__context__share__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:Y,templateSelection:Y}),u.unbind("click").click(function(t){t.stopPropagation()}),t(window).click(function(){u.css({display:"none"}),t(window).unbind("click")}),t("#acym__wysid__context__share__select").off("select2:select").on("select2:select",function(_){var a=_.params.data.id;s.push(a);var o='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__'+a+'" href="'+y[a].link+'">';o+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+y[a].src+'" alt="'+y[a].src+'">',o+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+y[a].text+"</span>",o+="</a>",t(".acym__wysid__column__element__share--focus").append(o);var n=i.val()<=40?i.val()>=15?i.val():15:40;t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",n+"px"),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(n)+15+"px"),e(),t(".acym__wysid__column__element__share--focus").click()}),i.off("change").on("change",function(){var e=i.val()<=40?i.val()>=15?i.val():15:40;t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",e+"px"),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(e)+15+"px")})});t(".acym__wysid__column__element__share__social").off("click").on("click",function(t){t.preventDefault()})}(),X(j(t("#acym__wysid__right__toolbar__settings__font--select").val(),"color")),L(),i=t("#acym__wysid__right__toolbar__settings__bold"),o=t("#acym__wysid__right__toolbar__settings__italic"),(s=t("#acym__wysid__right__toolbar__settings__font--select")).on("change",function(){L()}),t("#acym__wysid__right__toolbar__settings__font-family").on("change",function(){O(t("#acym__wysid__right__toolbar__settings__font--select").val(),"font-family",t(this).val())}),t("#acym__wysid__right__toolbar__settings__font-size").on("change",function(){O(t("#acym__wysid__right__toolbar__settings__font--select").val(),"font-size",t(this).val())}),i.off("click").on("click",function(){i.hasClass("acym__wysid__right__toolbar__settings__bold--selected")?i.removeClass("acym__wysid__right__toolbar__settings__bold--selected")&&O(s.val(),"font-weight","normal"):i.addClass("acym__wysid__right__toolbar__settings__bold--selected")&&O(s.val(),"font-weight","bold")}),o.off("click").on("click",function(){o.hasClass("acym__wysid__right__toolbar__settings__italic--selected")?o.removeClass("acym__wysid__right__toolbar__settings__italic--selected")&&O(s.val(),"font-style","normal"):o.addClass("acym__wysid__right__toolbar__settings__italic--selected")&&O(s.val(),"font-style","italic")}),I(),U(),function e(){t(window).off("resize").on("resize",function(){e()});var _=0;_="wordpress"==CMS_ACYM?t("#wpadminbar").innerHeight():t("nav.navbar").innerHeight()+t("#status").innerHeight();var a=t(window).width()>639?56:0;var i=t("#acym__wysid__top-toolbar").innerHeight();t("#acym__wysid").css("min-height",t(window).height()-(a+_));t("#acym__wysid__template").css({"max-height":t(window).height()-(a+_+i+64),"min-height":t(window).height()-(a+_+i+64)});t(".acym__wysid__right-toolbar__content").css("max-height",t(window).height()-(a+_+48))}(),z(),t(".acym_dynamic").off("click").on("click",function(){var e=window.getSelection(),_=document.createRange();_.selectNode(this),e.removeAllRanges(),e.addRange(_),t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),t("#acym__wysid__modal__dynamic-text").show()}),t(".acym_remove_dynamic").off("click").on("click",function(){t(this).closest("span").remove(),C(),V()}),t("tr[data-dynamic]").off("click").on("click",function(){_=t(this),P(t(this).attr("data-plugin"),t(this).attr("data-dynamic"))}),t("#acym__wysid__template").find("p").css("word-break","break-word"),(n=navigator.userAgent).toLowerCase().indexOf("chrome")>-1||n.toLowerCase().indexOf("firefox")>-1?(t("p").find("code").css("white-space","pre-wrap"),t("pre").css("white-space","pre-wrap"),t("code").css("white-space","pre-wrap")):n.indexOf("MSIE ")>-1||n.indexOf("Trident/")>-1?(t("pre").css("word-wrap","break-word"),t("code").css("word-wrap","break-word")):n.toLowerCase().indexOf("opera")>-1&&(t("pre").css("white-space","-o-pre-wrap"),t("code").css("white-space","-o-pre-wrap")),t(".acym__wysid__tinymce--text").on("click",function(){setTimeout(function(){t.introContent=[{element:".mce-widget .mce-i-codesample",text:ACYM_JS_TXT.ACYM_INTRO_ADD_DTEXT,position:"right"}],t.setIntrojs("mail_editor_dtext")},200)}),t(".acym__wysid__column__element__separator").off("click").on("click",function(_){_.stopPropagation(),t(".acym__context__color__picker").remove();let a=t(this).find("hr:first");t("#sliderOutput2").val(a.css("border-bottom-width").replace(/[^-\d\.]/g,"")),$(t("#acym__wysid__context__separator__color"),"border-bottom-color",a,a,"border-bottom-color");let i=t(".acym__wysid__context__separator__kind");i.removeClass("separator-selected"),i.each(function(){t(this).find("hr").attr("data-kind")==a.css("border-bottom-style")&&t(this).addClass("separator-selected")}),i.off("click").on("click",function(){i.removeClass("separator-selected"),t(this).addClass("separator-selected"),a.css("border-bottom-style",t(this).find("hr").attr("data-kind"))});let o=t("#acym__wysid__context__separator__slide"),s=t("#acym__wysid__context__separator__slide__width");o.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==o.css("display")&&a.css("border-bottom-width",t("#sliderOutput2").val()+"px")}),s.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==o.css("display")&&a.css("width",t("#sliderOutput3").val()-5+"%")});let n=t("#acym__wysid__context__separator");q(n),n.off("mousedown").on("mousedown",function(e){t(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),t(window).on("mousedown",function(_){t(".sp-container").is(":visible")||e(_.clientX,n)||(t(this).off("mousedown"),K(n,t(_.target)),t(window).off("click"),C(),V())})}),F(),A()}function A(){let e=t(".acym__wysid__link__image");t.each(e,function(){t(this).html(t(this).html().replace(/\uFEFF/g,""))})}function M(e,_){var a,i=t(e).html();_=void 0!==_&&_,(a=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var i=a.state().get("selection").first().toJSON(),o=!0;if(i.url.indexOf("..")>=0&&(o=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),o)if(_){var s=t(e).css("padding-top");t(e).hasClass("acym__wysid__template__content")?(t(e).attr("style","background-image: url('"+i.url+"'); background-size: cover; background-position: center top; background-repeat: no-repeat; padding: "+s+" 0 40px 0"),"none"!==t(e).css("background-image")&&t("#acym__wysid__background-image__template-delete").css("display","flex")):(t(e).css("background-color","").attr("bgcolor",""),t(e).attr("style","background-image: url('"+i.url+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+s+" 0").attr("width",t(e).width())),Z({message:ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,level:"warning"})}else{var n='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';n+='<td class="large-12 acym__wysid__column__element__td">',n+='<div class="acym__wysid__tinymce--image">',n+='<img class="acym__wysid__media__inserted acym__wysid__media__inserted--focus" src="'+i.url+'" alt="'+i.title+'" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;"/>',n+="</div>",n+="</td>",n+="</tr>",t(e).replaceWith(n),t(".acym__wysid__media__inserted--focus").on("load",function(){t(this).removeClass("acym__wysid__media__inserted--focus"),C(),V()})}else _||(t(e).replaceWith(""),C(),V())}),a.on("escape",function(){_||(-1!==i.indexOf("insert_photo")&&t(e).replaceWith(""),C(),V())}),a.open()}function T(e,a){a=void 0!==a&&a,_=t(e);var i=t("#acym__wysid__modal__joomla-image__ui__iframe");i.css("height","100%").css("width","100%"),i.contents().find(".chzn-container-single").attr("style","").css("width","150px"),E(i,a),i.on("load",function(){E(i,a)}),t("#acym__wysid__modal__joomla-image").css("display","inherit")}function S(e){return e.id?t('<span><img src="'+y[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function Y(e){return e.id?t('<span><img style="margin-left: 5px" src="'+y[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function R(){t(".acym__wysid__row__selector").off("click").on("click",function(_){_.stopPropagation(),_.preventDefault();var a="#ffffff";t(".acym__wysid__row__selector--focus").removeClass("acym__wysid__row__selector--focus"),t(".acym__wysid__row__element--focus").removeClass("acym__wysid__row__element--focus");var i,o,s,n=t(this).closest(".acym__wysid__row__element"),c=t(this);c.addClass("acym__wysid__row__selector--focus"),c.closest(".acym__wysid__row__element").addClass("acym__wysid__row__element--focus"),$(t("#acym__wysid__context__block__background-color"),"background-color",n,n,"background-color"),$(t("#acym__wysid__context__block__border__color"),"border-color",n,n,"border-color"),i=n,t("#acym__wysid__context__block__background-color").spectrum({color:i.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){i.css("background-color",t.toHexString()).attr("bgcolor",t.toHexString()),i.css("background-image","")},change:function(t){i.css("background-color",t.toHexString()).attr("bgcolor",t.toHexString()),i.css("background-image","")}}),o=n,s=t("#acym__wysid__context__block__background-image__remove"),"none"!==o.css("background-image")?s.show():s.hide(),t("#acym__wysid__context__block__background-image").off("click").on("click",function(){"wordpress"===CMS_ACYM?M(o,!0):T(o,!0)}),s.off("click").on("click",function(){o.css({"background-image":"none"}),t(this).hide()}),"transparent"===n.css("background-color")&&t(".acym__wysid__context__block__transparent__bg").click(),t('[name="transparent_background"]').next().off("change").on("change",function(){t(this).is(":checked")?(a=n.css("background-color"),n.css("background-color","transparent").attr("bgcolor","transparent")):n.css("background-color",a).attr("bgcolor",a)});let l=t("#acym__wysid__context__block__custom_id");l.val(n.attr("id")),l.off("keyup").on("keyup",function(e){32===e.which&&e.preventDefault(),n.attr("id",t(this).val())}),t("[data-block-padding]").each(function(){t(this).val(n.css("padding-"+t(this).attr("data-block-padding")).replace(/[^-\d\.]/g,"")),t(this).off("change").on("change",function(e){t(this).val()>20&&(t(this).val(20),e.stopPropagation()),n.css("padding-"+t(this).attr("data-block-padding"),t(this).val()+"px"),"top"!==t(this).attr("data-block-padding")&&"bottom"!==t(this).attr("data-block-padding")||c.css("height",n.height()+parseInt(n.css("padding-top").replace(/[^-\d\.]/g,""))+parseInt(n.css("padding-bottom").replace(/[^-\d\.]/g,""))+"px")})}),t(".acym__wysid__context__block__border__actions").each(function(){t(this).val(n.css(t(this).attr("data-css")).replace(/[^-\d\.]/g,"")),t(this).off("change").on("change",function(e){if(t(this).val()>parseInt(t(this).attr("max"))&&(t(this).val(parseInt(t(this).attr("max"))),e.stopPropagation()),n.css(t(this).attr("data-css"),t(this).val()+"px"),"border-width"===t(this).attr("data-css")){n.css("border-style",0===t(this).val()?"none":"solid");var _=t(".acym__wysid__template__content").offset(),a=c.closest(".acym__wysid__row__element").offset(),i=n.height()+parseInt(n.css("padding-top").replace(/[^-\d\.]/g,""))+parseInt(n.css("padding-bottom").replace(/[^-\d\.]/g,""))+2*parseInt(n.css("border-width").replace(/[^-\d\.]/g,""));c.css({left:"-"+(a.left-_.left+parseInt(c.closest(".acym__wysid__row__element").css("border-width").replace(/[^-\d\.]/g,"")))+"px",height:i,top:0-parseInt(n.css("border-width").replace(/[^-\d\.]/g,""))+"px"})}})});let r=t("#acym__wysid__context__block");q(r),r.off("mousedown").on("mousedown",function(e){t(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),t(window).off("mousedown").on("mousedown",function(_){if(e(_.clientX,r))return!0;t(_.target).hasClass("acym__wysid__row__selector")||t(".sp-container").is(":visible")||(t(".acym__wysid__row__selector--focus").removeClass("acym__wysid__row__selector--focus"),t(".acym__wysid__row__element--focus").removeClass("acym__wysid__row__element--focus"),a="#ffffff",t(this).off("mousedown"),K(r,t(_.target)),t(_.target).parent().hasClass("acym__wysid__tinymce--text")||C(),V())})})}function E(e,a){e.contents().find(".button-cancel").attr("onclick","").off("click").on("click",function(){t("#acym__wysid__modal__joomla-image").hide(),a||(_.length&&-1!==_.html().indexOf("insert_photo")&&_.replaceWith(""),C(),V(),U())}),e.contents().find(".pull-right .btn-success, .pull-right .btn-primary").attr("onclick","").off("click").on("click",function(){var i=e.contents().find("#f_url").val(),o=e.contents().find("#imageframe").contents().find(".img-preview"),s=!1,n=!0;if(o.each(function(){if(t(this).hasClass("selected")&&(t(this).find(".imgThumbInside img").attr("src").indexOf("..")>=0&&(n=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),n)){if(a){var e=_.css("padding-top");_.hasClass("acym__wysid__template__content")?(_.attr("style","background-image: url('"+t(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0 40px 0"),"none"!==_.css("background-image")&&t("#acym__wysid__background-image__template-delete").css("display","flex")):(_.css("background-color","").attr("bgcolor",""),_.attr("style","background-image: url('"+t(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0").attr("width",_.width())),Z({message:ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,level:"warning"})}else{var i='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';i+='<td class="large-12 acym__wysid__column__element__td">',i+='<div class="acym__wysid__tinymce--image">',i+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+t(this).find(".imgThumbInside img").attr("src")+'" alt="'+t(this).attr("title")+'"/>',i+="</div>",i+="</td>",i+="</tr>",_.replaceWith(i)}t("#acym__wysid__modal__joomla-image").css("display","none"),C(),V(),s=!0}}),!s&&""!==i){var c='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';return c+='<td class="large-12 acym__wysid__column__element__td">',c+='<div class="acym__wysid__tinymce--image">',c+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+(i=i.match("^images/")?ACYM_JOOMLA_MEDIA_IMAGE+i:i)+'" alt="'+t(this).attr("title")+'"/>',c+="</div>",c+="</td>",c+="</tr>",_.replaceWith(c),t("#acym__wysid__modal__joomla-image").css("display","none"),C(),V(),void(s=!0)}0!=s||1!=n||alert("Please select a picture"),s=!1})}function j(t,e){return void 0!==i[t]&&i[t][e]&&void 0!==i[t][e]?i[t][e]:d[t][e]}function O(t,e,_){null!=i[t]||(i[t]={}),i[t][e]=_,I()}function J(e){t.each(d[e],function(_){t(".acym__wysid__column__element "+e).css(_,j(e,_))})}function I(){J("p"),J("h1"),J("h2"),J("h3"),J("h4"),J("h5"),J("h6"),t(".acym__wysid__template__content").css("background-color",j("#acym__wysid__background-colorpicker","background-color"))}function L(){var e=t("#acym__wysid__right__toolbar__settings__bold"),_=t("#acym__wysid__right__toolbar__settings__italic"),a=t("#acym__wysid__right__toolbar__settings__font--select").val(),i=t("#acym__wysid .acym__wysid__template__content"),o=t("#acym__wysid__background-image__template-delete");t("#acym__wysid__right__toolbar__settings__font-family").val(j(a,"font-family")).trigger("change"),t("#acym__wysid__right__toolbar__settings__font-size").val(j(a,"font-size")).trigger("change"),e.val("bold"==j(a,"font-weight")?e.addClass("acym__wysid__right__toolbar__settings__bold--selected"):e.removeClass("acym__wysid__right__toolbar__settings__bold--selected")),_.val("italic"==j(a,"font-style")?_.addClass("acym__wysid__right__toolbar__settings__italic--selected"):_.removeClass("acym__wysid__right__toolbar__settings__italic--selected")),X(j(a,"color")),J(a),t("#acym__wysid__background-image__template").off("click").on("click",function(){"wordpress"==CMS_ACYM?M(i,!0):T(i,!0)}),"none"!==i.css("background-image")&&o.css("display","flex"),o.off("click").on("click",function(){i.css("background-image","none"),t(this).hide()});var s=t("#acym__wysid__padding__top__content");s.val(i.css("padding-top").replace(/[^-\d\.]/g,"")),s.off("change").on("change",function(){i.css("padding-top",t(this).val()+"px")})}function D(e){var _="";return t.parsecss(e,function(e){t("#acym__wysid__custom__style").remove();var a=e;for(var i in a){var o=a[i];for(var s in _+="#acym__wysid__template .body "+i+"{",o)_+=s+":"+o[s]+";";_+="} "}}),_}function X(e){var _=t("#acym__wysid__right__toolbar__settings__color"),a=t("#acym__wysid__right__toolbar__settings__font--select").val();_.spectrum({color:""!=e?e:"black",preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){O(a,"color",t.toHexString())},change:function(t){O(a,"color",t.toHexString())}})}function N(){t('[id^="mce_"]').removeAttr("id"),tinymce.remove(),tinymce.init({relative_urls:!1,selector:".acym__wysid__tinymce--text",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code acydtext noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px=10px 12px=12px 14px=14px 16px=16px 18px=18px 20px=20px 24px=24px 28px=28px 30px=30px 34px=34px 36px=36px",toolbar:["undo redo formatselect fontsizeselect | code acydtext","alignleft aligncenter alignright | bold italic | forecolor backcolor | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(t){t.on("click",function(){G()}),t.off("change").on("change",function(t){I()}),t.on("blur",function(t){t.target.startContent!==t.target.bodyElement.innerHTML&&V(),Q()})}}),tinymce.execCommand("mceAddEditor",!0,""),tinymce.init({selector:".acym__wysid__tinymce--image",inline:!0,menubar:!1,plugins:"image nonbreaking",toolbar:[],image_class_list:[{title:"Responsive",value:"img-responsive"}],preview_styles:!1,init_instance_callback:function(_){F();let a=t(_.getElement()).find("img");_.on("click",function(_){G(),function(_){_.addClass("acym__wysid__media__inserted--selected");let a=t("#acym__wysid__context__image"),i=t(".acym__wysid__context__image__align"),o=t("#acym__wysid__context__image__link");i.css("background-color","inherit"),t('[data-float="'+t(".acym__wysid__media__inserted--selected").css("float")+'"]').css("background-color",""),i.each(function(){t(this).off("click").on("click",function(){let e=t.acym_parseJson(t(this).attr("data-css"));t(".acym__wysid__media__inserted--selected").css(e),t(".acym__wysid__context__image__align").css("background-color","inherit"),t(this).css("background-color","")})});let s=t(".acym__wysid__media__inserted--selected").closest(".acym__wysid__link__image");o.val(s.length>0?s.attr("href"):""),t("#acym__wysid__context__image__change").off("click").on("click",function(){"wordpress"===CMS_ACYM?M(t(".acym__wysid__media__inserted--selected").closest(".acym__wysid__column__element")):T(t(".acym__wysid__media__inserted--selected").closest(".acym__wysid__column__element"))}),o.off("keyup").on("keyup",function(){let e=t(".acym__wysid__media__inserted--selected").closest(".acym__wysid__link__image");if(e.length>0&&""===t(this).val())e.replaceWith(t(".acym__wysid__media__inserted--selected")[0].outerHTML);else if(0===e.length&&""===t(this).val())return!0;0===e.length?t(".acym__wysid__media__inserted--selected").replaceWith('<a href="'+t(this).val()+'" target="_blank" class="acym__wysid__link__image">'+t(".acym__wysid__media__inserted--selected")[0].outerHTML+"</a>"):e.attr("href",t(this).val())}),q(a),a.off("mousedown").on("mousedown",function(t){t.stopPropagation()}),t(window).off("mousedown").on("mousedown",function(_){if(e(_.clientX,a))return!0;t(".acym__wysid__media__inserted--selected").removeClass("acym__wysid__media__inserted--selected"),t(this).off("mousedown"),K(a,t(_.target)),C(),V()})}(a)}),_.on("blur",function(){Q(),A()})},formats:{alignleft:{selector:"img",styles:{float:"left",marginTop:"-10px",marginBottom:"10px"}},alignright:{selector:"img",styles:{float:"right",marginTop:"-10px",marginBottom:"10px"}}},style_formats:[{title:"Align left",format:"alignleft"},{title:"Align right",format:"alignright"}],themes:"modern"}),tinymce.execCommand("mceAddEditor",!0,"")}function U(){let e=t(".acym__wysid__row");if(1===e.length){let _=e.find(".acym__wysid__column");if(1===_.length&&!_.find("tbody").children().length&&!t("#acym__wysid__default").length){_.addClass("acym__wysid__column__first");let e='<div id="acym__wysid__default">';e+='<div id="acym__wysid__default__start" class="cell grid-x acym_vcenter">',e+='<h1 class="cell">'+ACYM_JS_TXT.ACYM_TEMPLATE_EMPTY+"</h1>",e+='<p class="cell">'+ACYM_JS_TXT.ACYM_DRAG_BLOCK_AND_DROP_HERE+"</p>",e+="</div>",e+='<div id="acym__wysid__default__dragging" style="display: none" class="cell grid-x acym_vcenter">',e+='<h1 class="cell text-center">'+ACYM_JS_TXT.ACYM_WELL_DONE_DROP_HERE+"</h1>",e+="</div>",e+="</div>",_.before(e);let a=t("#acym__wysid__default__start");a.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(a.height()).find("table").height(a.height()).find("tbody").height(a.height())}}e.each(function(){0==t(this).children().length?(t(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),v(t("#acym__wysid__row__temp_div")),Q(),U()):t(this).css({"min-height":"0",display:"table-cell"})}),t(".acym__wysid__column tbody").each(function(){0==t(this).children().length?t(this).css({"min-height":"75px",display:"block"}).closest("table").css("min-height","75px").css("display","block"):t(this).css({"min-height":"0px",display:"table-row-group"}).closest("table").css("min-height","0").css("display","table")})}function z(){t(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){t(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var _=t(this).find("a").attr("href"),a=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getMailContent&from="+t(this).attr("id");t.post(a,function(t){return"error"==t?(alert(ACYM_JS_TXT.ACYM_ERROR),!1):(window.location.href=_,!1)})})})}function P(_,a){let i=t("#acym__wysid__context__plugins");i.html('<i class="fa fa-spinner fa-spin centered_spinner text-center" style="margin-top: 2rem;"/>'),q(i),t(window).on("mousedown",function(_){if(e(_.clientX,i))return;let a=t(_.target);return!a.closest(".c-scrim").length&&!a.closest(".c-datepicker--open").length&&(!a.closest("tr[data-plugin]").length&&(t(this).off("mousedown"),K(i,a),t(window).unbind("click"),C(),void V()))}),void 0!==a&&a&&a.length||(a="");let o=AJAX_URL_ACYM+"&page=acymailing_lists&action=acymailing_router&noheader=1&ctrl=dynamics&task=trigger&trigger=insertionOptions&plugin="+_+"&shortcode="+encodeURIComponent(a);t.ajax({url:o,success:function(e){e+='<input type="hidden" id="currentPlugin" name="currentPlugin" value="'+_+'"/>',i.html(e),t("i.acym_radio_unchecked").on("click",function(){t('label[for="'+t(this).attr("data-radio")+'"]').click()}),t('input[type="radio"]').on("change",function(){var e=t('input[name="'+t(this).attr("name")+'"]:checked').val();t('input[name="'+t(this).attr("name")+'"]').each(function(){t(this).val()==e?(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').hide(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').show()):(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').show(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),t("#plugin_listing_filters select").off("change").on("change",function(){H()}),t('#plugin_listing_filters input[type="text"]').off("keyup").on("keyup",function(){var e=t(this).val();clearTimeout(m),e.length>=2?m=setTimeout(function(){H()},1e3):""==e&&H()}),t("#acym__wysid__context__plugins select").select2({theme:"foundation"}),W(),t(document).foundation(),t(".reveal-overlay").not("#acym_form .reveal-overlay").appendTo("#acym__wysid__context__plugins"),t(".tabs").each(function(){let e=t(this).attr("id"),_=localStorage.getItem("acy"+e),a=t("#"+e).find('a[data-tab-identifier="'+_+'"]');if(a.length)a.click();else{let _=t("#"+e).find('a[data-selected="true"]');_.length?_.click():t("#"+e+" .acym_tab:first").click()}}),t.setDatePickerGlobal(),t.setTooltip(),t.setRSDateChoice(),g(),0===a.length&&t.insertDContent("")}})}function H(){let e=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=trigger&trigger=displayListing";if(t("#plugin_listing_filters input, #plugin_listing_filters select").each(function(){e+="&"+t(this).attr("name")+"="+t(this).val()}),e+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),e+="&plugin="+t('input[name="plugin"]').val(),void 0!==_selectedRows){let t=[];for(let e in _selectedRows)_selectedRows.hasOwnProperty(e)&&t.push(e);e+="&selected="+t.join(",")}t.post(e,function(e){t("#plugin_listing").html(e),W()})}function W(){t(".acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),t("#acym_pagination__ajax").attr("value",t(this).attr("page")),H()})}function G(){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove()}function F(){t(".acym__wysid__tinymce--image img").off("dblclick").on("dblclick",function(){"wordpress"===CMS_ACYM?M(t(this).closest(".acym__wysid__column__element")):T(t(this).closest(".acym__wysid__column__element"))})}function B(e){let _=t("#template_version_"+(r+1)),a=t("#template_version_"+(r-1));if(e){if(a.length>0&&0===a.val().length)return;r--,t("#acym__wysid__template").html(t("#template_version_"+r).val()),0===r&&V()}else{if(_.length>0&&0===_.val().length)return;r++,t("#acym__wysid__template").html(t("#template_version_"+r).val())}C()}function V(e=!1){!e&&t(".acym__autosave__notification").length&&tt(),t('[id^="template_version_"]').length>=10&&t('[id^="template_version_"]')[0].remove();for(var _=r+1;t("#template_version_"+_).length>0;)t("#template_version_"+_).remove(),_++;r++,t('[name^="mce_"]').remove(),t(".acym__wysid__column--drag-start").removeClass("acym__wysid__column--drag-start"),t(".acym__editor__area").append('<input type="hidden" value="" id="template_version_'+r+'">');var a=t("#acym__wysid__template").html();if(t("#template_version_"+(r-1)).val()===a)return!1;t("#template_version_"+r).val(a);var i=t("#acym__campaign__recipients__form__campaign");if(0==i.length||i.length>0&&0!=i.val()){var o=t(t.parseHTML('<div id="acym__wysid__template-save" class="cell">'+a+"</div>")[0]);o.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),o=o.html();var s=t("#editor_mailid").val();if(null!=s&&""!=s&&0!=s&&0==e){var n=AJAX_URL_ACYM+"&ctrl=mails&task=autoSave";t.ajax({type:"POST",url:n,data:{autoSave:o,mailId:s},success:function(t){},error:function(){console.log(ACYM_JS_TXT.ACYM_ERROR_SAVING)}})}}}function Q(){setTimeout(function(){if(t(".mce-tinymce-inline").is(":visible"))return!0;t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),t(".acym__wysid__row__element").css("z-index","100").each(function(){var e=t(this).find("> tbody");""!==e.css("background-color")&&void 0!==e.css("background-color")&&"inherit"!==e.css("background-color")&&"rgba(0, 0, 0, 0)"!==e.css("background-color")&&(t(this).css("background-color",e.css("background-color")),e.css("background-color","inherit").attr("bgcolor","")),t(this).prepend('<div class="acym__wysid__row__selector"></div>')});var e=t(".acym__wysid__template__content"),_=e.css("width").replace(/[^-\d\.]/g,""),a=e.offset();t(".acym__wysid__row__selector").each(function(){var e=t(this).closest(".acym__wysid__row__element"),i=e.offset(),o=""===e.css("border-width")?0:parseInt(e.css("border-width").replace(/[^-\d\.]/g,"")),s=""===e.css("padding-bottom")?0:parseInt(e.css("padding-bottom").replace(/[^-\d\.]/g,"")),n=e.height()+parseInt(e.css("padding-top").replace(/[^-\d\.]/g,""))+s+2*o,c="-"+(Math.round(i.left)-Math.round(a.left)+o)+"px";t(this).css({width:_+"px",height:n,left:c,top:0-o+"px"}),t(this).attr("style",t(this).attr("style")+"width: "+_+"px; height: "+n+"px; left: "+c+";top: "+(0-o)+"px");t(this).append('<div  class="acym__wysid__row__toolbox"><i class="acymicon-content_copy acym__wysid__row__toolbox__copy acym__wysid__row__toolbox__actions"></i><i class="fa fa-arrows acym__wysid__row__element__toolbox__move acym__wysid__row__toolbox__actions"></i><i class="acymicon-delete acym__wysid__row__toolbox__actions acym__wysid__row__toolbox__delete__row"></i></div><div class="acym__wysid__row__height__container"><i class="acymicon-code acym__wysid__row__toolbox__height"></i></div>')}),t(".acym__wysid__column__element").each(function(){t(this).append('<div class="acym__wysid__element__toolbox"><i class="acymicon-content_copy acym__wysid__element__toolbox__copy acym__wysid__element__toolbox__actions"></i><i class="fa fa-arrows acym__wysid__column__element__toolbox__move acym__wysid__element__toolbox__actions"></i><i class="acymicon-delete acym__wysid__element__toolbox__actions acym__wysid__element__toolbox__delete"></i></div>')}),t(".acym__wysid__row__toolbox__copy").unbind("click").click(function(){t(this).closest(".acym__wysid__row__element").clone().insertAfter(t(this).closest(".acym__wysid__row__element")),C(),V()}),t(".acym__wysid__row__toolbox__delete__row").off("click").on("click",function(){t(this).closest(".acym__wysid__row__element").remove(),C(),V()}),t(".acym__wysid__element__toolbox__copy").off("click").on("click",function(){let e=t(this).closest(".acym__wysid__column__element");e.clone().insertAfter(e),C(),V()}),t(".acym__wysid__element__toolbox__delete").off("click").on("click",function(){let e=t(this).closest(".acym__wysid__column__element");K(t(".acym__wysid__context__modal")),e.remove(),C(),V()}),t(".acym__wysid__row__toolbox__height").off("mousedown").on("mousedown",function(){c=!0,l=t(this).closest("table").css({"border-collapse":"initial","border-spacing":""}),t(document).on("mousemove",function(t){if(c){let e=l.offset().top,_=t.pageY-(e-10);l.find("th:first").height(_).attr("height",_),l.find(".acym__wysid__row__selector").css("height",l.css("height"))}}),t(document).off("mouseup").on("mouseup",function(){c=!1,t(this).off("mousdown"),Q()})}),w(),x(),R()},150)}function q(e){t(".acym__wysid__context__modal").hide(),t("#acym__wysid__right__toolbar__block__tab").click(),e.show(),t(".acym__wysid__right__toolbar__current-block__empty").hide(),t("#acym__wysid__right__toolbar__current-block").off("mousedown").on("mousedown",function(t){t.stopPropagation()}),g()}function K(e,_){e.hide(),t(".acym__wysid__right__toolbar__current-block__empty").show(),void 0!==_&&function(e){let _=!1;return t.each(["acymailing_content","acym__wysid__tinymce--image","acym__wysid__column__element__separator","acym__wysid__column__element__share","acym__wysid__column__element__follow","acy-editor__space","acym__wysid__column__element__button","acym__wysid__row__selector","acym__wysid__right__toolbar__tabs"],function(t,a){e.closest("."+a).length>0&&(_=!0)}),_}(_)||t("#acym__wysid__right__toolbar__design__tab").click()}function $(t,e,_,a,i){t.spectrum({color:a.css(e),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(t){_.css(i,t.toHexString())},change:function(t){_.css(i,t.toHexString())},containerClassName:"acym__context__color__picker"})}function Z(e,_){_=void 0!==_&&_;let a="";a="success"===e.level?"fa-check-circle":"info"===e.level?"fa-bell":"warning"===e.level?"fa-exclamation-triangle":"fa-exclamation-circle";let i=t("#acym__wysid__top-toolbar"),o=i.find("#acym__wysid__top-toolbar__notification");i.find("#acym__wysid__top-toolbar__actions").hide(),o.addClass("acym__toolbar__message__visible").find("#acym__wysid__top-toolbar__notification__icon").addClass(a),o.find("#acym__wysid__top-toolbar__notification__message").html(e.message),o.find("#acym__wysid__top-toolbar__notification__close").off("click").on("click",function(){tt()}),_&&setTimeout(function(){tt()},_)}function tt(){t("#acym__wysid__top-toolbar__notification").removeClass("acym__toolbar__message__visible"),t("#acym__wysid__top-toolbar__notification__message").html(""),t("#acym__wysid__top-toolbar__actions").show()}t.insertDContent=function(e,a){let i;if(void 0!==a&&a&&a.length?i=a.attr("data-plugin"):(a=_,i=t("#currentPlugin").val()),0===e.length)return void b(a,e,"",i);a.find(".plugin_loader").css("display","flex");let o=t('input[name="editor_autoSave"]').val(),s=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=replaceDummy";t.ajax({url:s,type:"POST",data:{mailId:o,code:e}}).then(function(_){let o;_&&(_=t.acym_parseJson(_)),o=_.content&&0!==_.content.length?_.content:"",b(a,e,o,i)})},!(t("#acym__wysid").length>0)||function(){t("#acym__wysid__right__toolbar__settings__font-family").select2({theme:"foundation",width:"100%"}),t("#acym__wysid__right__toolbar__settings__font-size").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),t("#acym__wysid__right__toolbar__settings__font--select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),i=""==a?{}:JSON.parse(a);var e=t("#editor_autoSave").val();null!=e&&""!=e&&(Z({message:'<div class="cell auto acym__autosave__notification">'+ACYM_JS_TXT.ACYM_AUTOSAVE_USE+'</div><div class="cell shrink" id="acym__wysid__top-toolbar__keep"><i class="fa fa-check-circle"></i></div>',level:"info"}),function(e){let _='<div id="acym__wysid__template" class="cell">'+e+"</div>";t("#editor_autoSave").val(""),t("#acym__wysid__top-toolbar__keep").off("click").on("click",function(){t(".acym__wysid__hidden__save__content").val(_),t("#acym__wysid #acym__wysid__template").replaceWith(_),C(),t("#acym__wysid__top-toolbar__notification__close").click()})}(e)),t("#editor_thumbnail").val(""),t("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+D(n)+"</style>"),t.ui.plugin.add("draggable","connectToSortable104",{start:function(e,_,a){var i=t(this).data("ui-draggable"),o=(i.options,t.extend({},_,{item:i.element}));i.sortables=[],t(a.options.connectToSortable104).each(function(){var _=t(this).sortable("instance");_&&!_.options.disabled&&(i.sortables.push({instance:_,shouldRevert:_.options.revert}),_.refreshPositions(),_._trigger("activate",e,o))})},stop:function(e,_,a){var i=t(this).data("ui-draggable"),o=t.extend({},_,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,_,a){var i=t(this).data("ui-draggable"),o=this;t.each(i.sortables,function(){var a=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return _.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),function(){let e=0;t(".acym__wysid__column__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__column > tbody",revert:function(t){if(!t)return Q(),!0},revertDuration:300,start:function(_,a){if(t(a.helper).css({width:t(this).width()+"px",opacity:1}),t(".acym__wysid__column").addClass("acym__wysid__column--drag-start"),t(".acym__wysid__column__element").unbind("hover"),t(".acym__wysid__row__element").unbind("hover"),t("#acym__wysid__default").length){t("#acym__wysid__default__start").hide();let _=t("#acym__wysid__default__dragging");e=_.closest(".columns").height(),_.show(),_.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(_.height()).find("table").height(_.height()).find("tbody").height(_.height())}},stop:function(){t(".acym__wysid__column").removeClass("acym__wysid__column--drag-start");let e=t("#acym__wysid__default");if(e.length>0){e.find("#acym__wysid__default__start").show(),e.find("#acym__wysid__default__dragging").hide();let _=t("#acym__wysid__default__start");_.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(_.height()).find("table").height(_.height()).find("tbody").height(_.height())}}})}(),k(),t(".acym__wysid__row__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__row",revert:function(t){if(!t)return Q(),!0},revertDuration:300,start:function(e,_){t(_.helper).css({width:t(this).width()+"px",opacity:1}),t(".acym__wysid__column__element").unbind("hover"),t(".acym__wysid__row__element").unbind("hover")}}),Q(),t("#acym__wysid__edit__button").off("click").on("click",function(){"none"!==t("#acym__wysid .acym__wysid__template__content").css("background-image")&&t("#acym__wysid__background-image__template-delete").hide(),o=!1,t(".acym__wysid__row__element__toolbox__colorpicker").spectrum("destroy"),t(".sp-container").remove(),t("#acym_header").css("display","none"),t(".acym__content").css("display","none"),t("#acym__wysid").css("display","inherit"),t("#acym__wysid__edit").css("display","none"),""!==t(".acym__wysid__hidden__save__content").val()&&t("#acym__wysid__template").replaceWith(t(".acym__wysid__hidden__save__content").val()),a=""!=t(".acym__wysid__hidden__save__settings").val()?t(".acym__wysid__hidden__save__settings").val():"",i=""==a?{}:JSON.parse(a),""!=t(".acym__wysid__hidden__save__stylesheet").val()&&(n=t(".acym__wysid__hidden__save__stylesheet").val(),t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(n)),Q(),C(),V(!0),t("tr[data-dynamic]").each(function(){let e=t(this).attr("data-dynamic");t.insertDContent(e,t(this))})}),t("#acym__wysid__cancel__button").off("click").on("click",function(){o=!0,t("#acym_header").css("display",""),t(".acym__content").css("display",""),t("#acym__wysid").css("display","none"),t("#acym__wysid__edit").css("display",""),t(".acym__wysid__hidden__save__stylesheet").val(n)}),t("#acym__wysid__save__button").off("click").on("click",function(){f().then(function(e){t("#editor_thumbnail").attr("value",e),h(!1)}).catch(function(t){h(!1),console.error("Error generating template thumbnail: "+t)})}),t(".acym__wysid__modal--close").click(function(){t(".acym__wysid__modal").hide(),_.length&&"TR"!=_.prop("tagName")&&_.replaceWith(""),U()}),t("#acym__wysid__fullscreen__modal__close").off("click").on("click",function(){C(),t("#acym__wysid__fullscreen__modal").css("display","none")}),"joomla"==CMS_ACYM&&t(".acym__wysid__modal__joomla-image--close").click(function(){t("#acym__wysid__modal__joomla-image").hide(),_.length&&"TR"!=_.prop("tagName")&&!_.hasClass("acym__wysid__template__content")&&_.replaceWith(""),U()}),g(),C(),z(),function(){let e=t("#acym__wysid__modal__dynamic-text__ui__iframe");e.on("load",function(){t(this).contents().find("#wpadminbar").remove(),e.contents().find("#insertButton").off("click").on("click",function(){var _=e.contents().find("#dtextcode").val();if(_){if(o){let e=t("#acym_subject_field");e.val(e.val()+_)}else{var a=t('input[name="editor_autoSave"]').val();let e=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=replaceDummy";t.ajax({url:e,type:"POST",data:{mailId:a,code:_}}).then(function(e){e=e?t.acym_parseJson(e):{content:_},_='<span class="acym_dynamic mceNonEditable" data-dynamic="'+_+'">'+e.content+'<i class="acym_remove_dynamic acymicon-close">&zwj;</i></span> ',window.getSelection().getRangeAt(0).extractContents(),tinymce.activeEditor.execCommand("mceInsertContent",!1,_),C(),V()})}t("#acym__wysid__modal__dynamic-text").hide()}})})}(),t("#acym__wysid__right__toolbar__settings__stylesheet__apply").off("click").on("click",function(){var e=t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val();t(".acym__wysid__hidden__save__stylesheet").val(e),t("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+D(e)+"</style>"),t("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),t("#acym__wysid__right__toolbar__settings__stylesheet__open").on("click",function(){s=t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()}),t("#acym__wysid__right__toolbar__settings__stylesheet__cancel").on("click",function(){t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(s),t("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),t(document).keydown(function(e){void 0!==tinyMCE.focusedEditor&&null!==tinyMCE.focusedEditor||t("#acym__wysid__context__button").is(":visible")||t("#acym__wysid__context__follow").is(":visible")||t("#acym__wysid__context__separator").is(":visible")||t("#acym__wysid__context__share").is(":visible")||90!==e.which||!e.ctrlKey&&!e.metaKey||r<=0||(e.shiftKey?e.shiftKey&&B(!1):B(!0))}),t("#acym__wysid__top-toolbar__undo").off("click").on("click",function(){B(!0)}),t("#acym__wysid__top-toolbar__redo").off("click").on("click",function(){B(!1)}),function(){let e=t("#acym__wysid__session--lifetime").val();setTimeout(function(){Z({message:ACYM_JS_TXT.ACYM_SESSION_IS_GOING_TO_END,level:"warning"})},1e3*(e-60))}(),c=JSON.parse(t("#acym__mail__edit__editor__social__icons").val()),void 0!==c&&(t.each(Object.keys(c),function(t,e){y[e].src=c[e]}),t(".acym__wysid__social__icons__import__text").off("click").on("click",function(){var e=t(this),_=e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input");_.click(),_.off("change").on("change",function(){var _=t(this).val().split("\\").pop();e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find(".acym__wysid__social__icons__import__delete").remove(),void 0===_||""===_?(e.html(ACYM_JS_TXT.ACYM_SELECT_NEW_ICON),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled")):(e.html(_).after('<i class="acymicon-close cell shrink acym__wysid__social__icons__import__delete cursor-pointer"></i>'),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").removeAttr("disabled")),t(".acym__wysid__social__icons__import__delete").off("click").on("click",function(){t(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled"),t(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input").val("").trigger("change"),t(this).remove()})})}),t(".acym__wysid__social__icons__import").off("click").on("click",function(){t(this).closest("div").find(".acym__wysid__social__icons__import__delete").html("").attr("class","fa fa-circle-o-notch fa-spin acym__wysid__social__icons__import__delete").css("color","#303e46");var e=t(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input"),_=e.prop("files")[0],a=new FormData;a.append("file",_);var i=e.attr("name").replace("icon_",""),o=AJAX_URL_ACYM+"&ctrl=mails&task=setNewIconShare&social="+i;t.ajax({url:o,dataType:"text",cache:!1,contentType:!1,processData:!1,data:a,type:"post",success:function(_){var a=t("img").filter('[src^="'+_+'"]');t.each(a,function(e,a){var i=new Date;t(this).removeAttr("src").attr("src",_+"?d="+i.getTime())}),y[i].src=_,e.val("").trigger("change"),Z({message:ACYM_JS_TXT.ACYM_ICON_IMPORTED,level:"success"})}})})),function(){let e=t("#acym__wysid__send__test"),_=t("#acym__wysid__right-toolbar");t("#acym__wysid__test__button").off("click").on("click",function(){p(e,_)}),t(".acym__wysid__send__test-close").off("click").on("click",function(){p(e,_)})}(),t("#acym__wysid__send__test__button").off("click").on("click",function(){return t(this).attr("disabled","true"),t(".acym__wysid__send__test__icon").hide(),t(".acym__wysid__send__test__icon__loader").show(),f().then(function(e){t("#editor_thumbnail").attr("value",e),h(!0)}),!0}),t("#acym_wrapper").keydown(function(t){if(13==t.keyCode&&"TEXTAREA"!=t.target.nodeName)return t.preventDefault(),!1}),t("#acym__walkthrough__email").length>0&&(t("#acym__wysid").parent().insertAfter("#acym__walkthrough__email"),t("#acym__wysid__modal__dynamic-text").insertAfter("#acym__walkthrough__email"));var c}()});var _selectedRows=[];function setDContent(t){jQuery("#dcontentcode").val(t)}jQuery(document).ready(function(t){var e,_;e=[],_=!1,t(document).on("invalid.zf.abide",function(_,a){if(!a.is(":radio")||void 0!==a.attr("required")){t("#formSubmit")[0].disabled=!1;var i=function(t){var e=t.attr("type"),_=t.attr("pattern"),a=t.attr("required"),i=new Array;return null!=a&&i.push(ACYM_JS_TXT.requiredMsg+"."),"email"==e?i.push(ACYM_JS_TXT.email):"text"==e&&(null!=_&&null!=ACYM_JS_TXT[_]?i.push(ACYM_JS_TXT[_]):i.push(ACYM_JS_TXT.defaultMsg)),i.join(" ")}(a);a.after('<div class="acym__input-error"><i class="fa fa-exclamation-circle"></i>'+i+"</div>");var o=t(".acym__input-error");setTimeout(function(){o.remove()},5e3),e=[]}}).on("valid.zf.abide",function(_,a){"email"==a.attr("type")&&""!=a.val()&&(e[0]=null==e[0]?0:e[0],e[0]=t.acym_emailValid(a.val())&&""!=a.val()?0:e[0]+1)}).on("submit",function(a){e[3]=null==e[3]?0:e[3],t("#acym__users__export").length>0&&"list"===t('input[name="export_users-to-export"]:checked').val()&&"[]"===t("#acym__users__export #acym__modal__lists-selected").val()?(e[3],t.acym_add_notification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error")):t("#acym__users__export").length>0&&"list"===t('input[name="export_users-to-export"]:checked').val()&&"[]"!==t("#acym__users__export #acym__modal__lists-selected").val()&&(e[3]=0),e.length>0&&t.each(e,function(t,e){e>0&&(_=!0)}),_?(t("#formSubmit")[0].disabled=!1,a.preventDefault(),_=!1):(t("#formSubmit")[0].disabled=!0,_=!1)})}),jQuery(document).ready(function(t){!function(){let e=t("#checkVersionButton");e.on("click",function(){let e=t("#checkVersionArea");e.html('<i class="fa fa-circle-o-notch fa-spin"></i>');let _=AJAX_URL_ACYM+"&ctrl=update&task=checkForNewVersion";t.get(_,function(_){_=t.acym_parseJson(_),e.html(_.content),t("#acym__check__version__last__check").html(_.lastcheck)})}),1===e.data("check")&&e.click()}(),function e(){t(".acym__header__notification__one__delete, .acym__header__notification__toolbox__remove").off("click").on("click",function(){let _=t(this).hasClass("acym__header__notification__toolbox__remove")?"all":t(this).attr("data-id"),a=AJAX_URL_ACYM+"&ctrl=configuration&task=removeNotification&id="+_;t.get(a,function(_){void 0===(_=t.acym_parseJson(_)).error?(t(".acym__header__notification__center").html(_.data),t(".acym__header__notification").find("> i").attr("class","fa fa-bell-o"),e()):console.log(_.error)})})}()}),jQuery(document).ready(function(t){var e;function _(t){0==t.val()?t.addClass("fieldAssignmentError"):t.removeClass("fieldAssignmentError")}t.setImportCMSLists=function(){t(".acym__users__import__button").off("click").on("click",function(){t("#acym__import__new-list").attr("value",t("#modal__pagination__create__list").val()),(t("#acym__users__import__from_database").is(":visible")?t("#submit_import_database"):t("#submit_import_cms")).click()})},t.setVerificationGenericImport=function(){t(".acym__users__import__generic__import__button").off("click").on("click",function(){var e=t("#modal__pagination__create__list").val();""==e||t("#acym__import__new-list").attr("value",e),"no-list"!=t(this).attr("id")||t("#acym__modal__lists-selected").attr("value","")&&t("#acym__import__new-list").attr("value","");var a=!0,i="",o="",s=!1,n="",c=[],l=t("#formSubmit"),r=t("#acym__users__import__from_file__ignore__checkbox").is(":checked"),d=t(".fieldAssignment").length;isNaN(d)&&(d=1);for(var m=0;m<d;m++){var y=t("#fieldAssignment"+m);0==(o=y.val())&&(r?(y.val(1),o=1):(_(y),a=!1,i+="\nAssign the column "+(m+1)+" to a field")),"email"==o&&(s=!0),1!=o&&-1!=c.indexOf(o)?(a=!1,i+='\nDuplicate field "'+o+'" for the column '+(m+1)):c.push(o),n+=","+o}if(s||(a=!1,i+="\nPlease assign a column for the e-mail field"),0==a)return alert("Please fill all information\n"+i),!1;","==n.substr(0,1)&&(n=n.substring(1)),t("#import_columns").val(n),l.click()})},(e=t("#acym__users__import__from_file__import__input")).val(null),e.off("change").on("change",function(){var _=t("#acym_form");this.files.length>0&&("text/csv"===this.files[0].type||"application/vnd.ms-excel"===this.files[0].type)&&"csv"===this.files[0].name.substr(this.files[0].name.length-3)&&(t(".acym__users__import__from_file__file-name").html(this.files[0].name),t(".acym__users__import__from_file__file").show(),t(".acym__users__import__from_file__choose").hide(),t(".acym__users__import__from_file__button-valid").removeAttr("disabled"),t(".acym__users__import__from_file__file__close").off("click").on("click",function(){t(".acym__users__import__from_file__file-name").html(""),t(".acym__users__import__from_file__button-valid").prop("disabled",!0),t(".acym__users__import__from_file__file").hide(),t(".acym__users__import__from_file__choose").show(),e.val(null)}),t(".acym__users__import__from_file__button-valid").off("click").on("click",function(){_.find('[name="import_from"]').val("file"),_.submit()}))}),t.setVerificationGenericImport(),t.setImportCMSLists(),t(".acym__import__submit").on("click",function(){var e=t(this).attr("data-from"),_=t("#acym_form");_.find('[name="import_from"]').val(e),_.find("#formSubmit").click()}),t("#acyencoding").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=ajaxEncoding&encoding="+t(this).val()+"&filename="+t(this).attr("data-filename"),_="",a=t(".fieldAssignment").length;isNaN(a)&&(a=1);for(var i=0;i<a;i++)_+="&fieldAssignment"+i+"="+t("#fieldAssignment"+i).val();e+=_,jQuery.post(e,function(e){t("#acym__users__import__generic__matchdata").html(e)})}),t("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=getColumnsFromTable&tablename="+t(this).val();jQuery.post(e,function(e){t(".acym__users__import__from_database__fields").html(e)})}),t("#acym__users__import__from_database__field--tablename").select2({theme:"foundation",width:"100%"}),t("#acym__users__import__from_database").keydown(function(t){if(13==t.keyCode)return t.preventDefault(),!1})}),jQuery(document).ready(function(t){var e;t("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),(e=t('[name="elements_checked[]"]')).off("change").on("change",function(){var e=t('[name="elements_checked[]"]:checked').length;if(1===e?t(".acym__campaign__duplicate").show():t(".acym__campaign__duplicate").hide(),e>0?t("#select2-listing_actions-container").parent().parent().parent().show():t("#select2-listing_actions-container").parent().parent().parent().hide(),t('[name="elements_checked[]"]:not(:checked)').length>0?t("#checkbox_all").prop("checked",!1):t("#checkbox_all").prop("checked",!0),t("#acym__users").length){var _=t("#acym__users__listing__number_to_export"),a=t("#acym__users__listing__number_to_add_to_list"),i=t("#acym__users__listing__button--add-to-list");0==e?(_.html(_.attr("data-default")),i.addClass("disabled"),a.html(e)):(_.html(e),i.removeClass("disabled"),a.html(e))}}),e.trigger("change"),t("#listing_actions").off("change").on("change",function(){var e=this.value;switch(e){case"delete":var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE;break;case"setActive":var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE;break;case"setInactive":var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE;break;default:var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE}if("duplicate"==e||t.acym_confirm(_)){var a=t(this).closest("#acym_form");a.find('[name="task"]').val(t(this).val()),a.submit()}else t(this).val("0")}),t("#checkbox_all").off("change").on("change",function(){var e=t('[name="elements_checked[]"]');t(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")}),t("#acym__listing__ordering").off("change").on("change",function(){var e=t(this).closest("#acym_form");e.find('[name="task"]').val("listing"),e.submit()}),t(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=t("#acym__listing__ordering__sort-order--input"),_=t(this).closest("#acym_form");"asc"==e.val()?e.val("desc"):e.val("asc"),_.find('[name="task"]').val("listing"),_.submit()})}),jQuery(document).ready(function(t){function e(){t("#acym_pagination__ajax").attr("value",1),_()}function _(){let _=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getTemplateAjax",i=t('[name="return"]');i=i.length>0&&-1!==i.val().indexOf("automation")||t("#acym__automation__actions__json").length>0?"true":"false",_+="&search="+t("#acym_search_template_choose__ajax").val(),_+="&tag="+t("#acym_tag_template_choose__ajax").val(),_+="&type="+t("#acym__mail__type").val(),_+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),_+="&editor="+t("#acym__mail__edit__editor").val(),_+="&automation="+i,_+="&inmail="+(t("#editor_autoSave").length>0?"1":"0"),_+="&return="+encodeURIComponent(t('input[name="return"]').val()),t.post(_,function(_){var i;t(".acym__template__choose__ajax").html(_),i=null,t('input[name="mailchoose_search__ajax"]').off("keydown").on("keydown",function(_){var a=t(this),o=a.val();if((o||8==_.which)&&""!=o&&o.length>=2&&(clearTimeout(i),i=setTimeout(function(){t("#acym_search_template_choose__ajax").attr("value",o),e()},1500)),13==_.which)return _.preventDefault(),clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",o),e(),!1;8==_.which&&""==a.val()&&(clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",""),e())}),t("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(_){_.preventDefault(),clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",t('input[name="mailchoose_search__ajax"]').attr("value")),e()}),t("#mailchoose_tag__ajax").on("change",function(_){t("#acym_tag_template_choose__ajax").attr("value",t(this).attr("value")),e()}),t("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(_){t("#acym__type-template").val(t(this).attr("data-type")),t(".acym__type__choosen").removeClass("is-active"),t(this).addClass("is-active").blur(),e()}),a(),"acyEditor"!==t("#acym__mail__edit__editor").val()&&(t(".reveal .acym__templates__oneTpl").on("click",function(){window.location.replace(t(this).find("a").attr("href"))}),t(".acym__templates__choose__ribbon").on("click",function(){window.location.replace(t(this).closest(".acym__templates__pic").find("a").attr("href"))})),t("#acym__automation__actions").length>0&&t(".acym__templates__oneTpl").off("click").on("click",function(){if(!t.acym_confirm(ACYM_JS_TXT.ACYM_ARE_SURE_DUPLICATE_TEMPLATE))return!1;var e=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=duplicateMailAutomation&id="+t(this).attr("id"),_=t("#acym__template__choose__modal"),a=t('[data-modal-name="'+_.attr("data-button")+'"]').closest(".acym__automation__inserted__action");e+="&previousId="+a.find('[name$="[mail_id]"]').val(),t.get(e,function(e){var _=t.acym_parseJson(e,{error:t.acym_sprintf(ACYM_JS_TXT.ACYM_NOT_FOUND,ACYM_JS_TXT.ACYM_EMAIL)});if(void 0!==_.error)return alert(_.error),!1;a.find(".acym__automation__action__mail__name").html(_.name+'<i class="cursor-pointer acymicon-close acym__color__red acym__automation__action__reset__mail margin-left-1"></i>'),a.find('[name$="[mail_id]"]').val(_.id),a.find(".acy_button_submit").html(ACYM_JS_TXT.ACYM_EDIT_MAIL).click()})})})}function a(){t(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),t("#acym_pagination__ajax").attr("value",t(this).attr("page")),_()})}function i(){t(".acym__pagination__page__ajax").off("click").on("click",function(){t("#acym_pagination__ajax").val(t(this).attr("page")),s(),r()})}function o(){var e=t(".modal__pagination__show-selected"),_=t(".modal__pagination__show-all");e.hasClass("selected")?(_.hide(),e.show()):(_.show(),e.hide()),t(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(_.show(),e.hide().removeClass("selected"),t("#modal__pagination__show-information").attr("value","true"),t("#acym_pagination__ajax").attr("value",1)):(_.hide(),e.show().addClass("selected"),t("#modal__pagination__show-information").attr("value","false"),t("#acym_pagination__ajax").attr("value",1)),s()})}function s(){var e=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";e+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),e+="&selectedLists="+t("#acym__modal__lists-selected").val(),e+="&alreadyLists="+t("#acym__user__lists_already_add").val(),e+="&show_selected="+t("#modal__pagination__show-information").val(),e+="&search_lists="+t("#modal__pagination__search__lists").val(),e+=t("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0";var _=t(".modal__pagination__listing__lists__in-form");_.length&&t.get(e,function(e){t("#modal__pagination__search__spinner").hide(),_.html(e),i(),t(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=t(this).next().children("label .modal__pagination__listing__lists__list-name "),_=t("#acym__modal__lists-selected"),a=_.val(),i=[];a=""==a?[]:JSON.parse(a),t(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(t(this).val()),1)),t(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){i.push(parseInt(t(this).val()))}),t.each(i,function(e){-1!=t.inArray(i[e],a)||a.push(i[e])}),_.val(JSON.stringify(a)),t("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),t("#acym__popup__subscription__change").trigger("change")}),o(),n()})}function n(){var e=null,_=t('input[name="modal_search_lists"]'),a=t(".modal__pagination__show"),i=t("#modal__pagination__search__lists");_.off("keydown").on("keydown",function(t){13==t.which&&(t.preventDefault(),c(e))}),_.off("keyup").on("keyup",function(_){var o=t(this),n=o.val();(n||8==_.which)&&""!=n&&n.length>=2?(t("#modal__pagination__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",n),t("#acym_pagination__ajax").attr("value",1),s()},1e3)):clearTimeout(e),""==o.val()&&(clearTimeout(e),a.show(),i.attr("value",""),t("#acym_pagination__ajax").attr("value",1),s())}),t(".modal__pagination__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),c(e)}),t(".modal__pagination__search .acym__search-clear").off("click").on("click",function(t){t.preventDefault(),clearTimeout(e),i.attr("value",""),_.attr("value",""),a.show(),s()})}function c(e){clearTimeout(e),t(".modal__pagination__show").hide(),t("#acym_pagination__ajax").attr("value",1),t("#modal__pagination__search__lists").attr("value",t('input[name="modal_search_lists"]').attr("value")),s()}function l(){var e=t(".acym__listing__subscribe-to").children(".acym__listing__row");e=e.length;var _=t("#acym__user__edit #tab0-label"),a=t("#acym__user__edit #tab1-label"),i=t("#acym__listing__subscribe-to__count");setTimeout(function(){e<=0?""!=t('input[name="id"]').val()?_.hide()&&i.html("0")&&a.click():_.show()&&a.hide()&&i.html(""+e)&&_.click():_.show()&&i.html(""+e)&&_.click()},5)}function r(){var e=AJAX_URL_ACYM+"&page=acymailing_users&ctrl=users&action=acymailing_router&noheader=1&task=setAjaxListing&usersPerPage=10";e+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),e+="&selectedUsers="+t("#acym__modal__users-selected").val(),e+="&hiddenUsers="+t("#acym__modal__users-hidden").val(),e+="&showSelected="+t("#modal__pagination__users__show-information").val(),e+="&searchUsers="+t("#modal__pagination__users__search__input").val();var _=t(".modal__pagination__users__listing__in-form");_.length&&t.get(e,function(e){t("#modal__pagination__users__search__spinner").hide(),_.html(e),i(),t(".modal__pagination__users__listing__user--checkbox").off("change").on("change",function(){var e=t(this).next().children("label .modal__pagination__users__listing__user-name "),_=t("#acym__modal__users-selected"),a=_.val(),i=[];a=""==a?[]:JSON.parse(a),t(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(t(this).val()),1)),t(".modal__pagination__users__listing__user--checkbox:checked").each(function(){i.push(t(this).val())}),t.each(i,function(e){-1!=t.inArray(i[e],a)||a.push(i[e])}),_.val(JSON.stringify(a))}),d(),m()})}function d(){var e=t(".modal__pagination__users__show-selected"),_=t(".modal__pagination__users__show-all");e.hasClass("selected")?(_.hide(),e.show()):(_.show(),e.hide()),t(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(_.show(),e.hide().removeClass("selected"),t("#modal__pagination__users__show-information").attr("value","true"),t("#acym_pagination__ajax").attr("value",1)):(_.hide(),e.show().addClass("selected"),t("#modal__pagination__users__show-information").attr("value","false"),t("#acym_pagination__ajax").attr("value",1)),r()})}function m(){var e=null,_=t('input[name="modal_search_users"]'),a=t(".modal__pagination__show"),i=t("#modal__pagination__users__search__input");_.off("keydown").on("keydown",function(t){13==t.which&&(t.preventDefault(),y(e))}),_.off("keyup").on("keyup",function(_){var o=t(this).val();(o||8==_.which)&&""!=o&&o.length>=2?(t("#modal__pagination__users__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",o),t("#acym_pagination__ajax").attr("value",1),r()},1e3)):clearTimeout(e),""==o&&(clearTimeout(e),a.show(),i.attr("value",""),t("#acym_pagination__ajax").attr("value",1),r())}),t(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),y(e)}),t(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(t){t.preventDefault(),clearTimeout(e),i.attr("value",""),_.attr("value",""),a.show(),r()})}function y(e){clearTimeout(e),t(".modal__pagination__show").hide(),t("#acym_pagination__ajax").attr("value",1),t("#modal__pagination__users__search__input").attr("value",t('input[name="modal_search_users"]').attr("value")),r()}t.Modal=function(){t("[data-iframe]").on("click",function(){var e=t("#"+t(this).attr("data-open")),_=t(this).attr("data-reload"),a=t(this).attr("data-ajax"),i=t(this).attr("data-iframe-class"),o="true"==a?AJAX_URL_ACYM+t(this).attr("data-iframe"):t(this).attr("data-iframe");e.prepend('<iframe src="'+o+'"></iframe>'),void 0!==i&&e.find("iframe").addClass(i),e.find("iframe").on("load",function(){t(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){t(this).siblings("iframe").remove(),_&&location.reload()}),t(".reveal-overlay").on("click",function(){e.find("iframe").remove(),_&&location.reload()})}),o(),t(".modal__pagination__button-open").off("click").on("click",function(){s()}),n(),t("#modal__pagination__confirm").off("click").on("click",function(e){var _=""!=t("#acym__user__lists_already_add").val()?JSON.parse(t("#acym__user__lists_already_add").val()):{},a=""!=t("#acym__modal__lists-selected").val()?JSON.parse(t("#acym__modal__lists-selected").val()):{};if(t.isEmptyObject(a))return alert(t(this).attr("text-empty")),!1;_=_.concat(a),t("#acym__user__lists_already_add").attr("value",JSON.stringify(_));var i=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&task=ajaxGetLists&ids="+a.join(",");jQuery.post(i,function(e){e=JSON.parse(e),t(".acym__users__display__subscriptions--list .acym__listing__subscribe-to").html(e.html),t("#acym__user__edit__add-subscription__modal").foundation("close"),t(".acym__user__action--remove").off("click").on("click",function(){var e=t("#acym__modal__lists-selected"),_=JSON.parse(e.val());_.splice(_.indexOf(t(this).attr("id")),1),e.attr("value",JSON.stringify(_)),t("#acym__user__lists_already_add").val(JSON.stringify(_)),t(this).parent().remove(),l()}),l(),t.acym_add_notification(e.notif,"success")})}),l(),s(),t(".modal__pagination__users__button-open").off("click").on("click",function(){t("#acym__modal__users-selected").val(""),r()}),r(),d(),m(),t("#modal__pagination__users__confirm").off("click").on("click",function(){$task=t("#acym__modal__users__form-task").val(),t('input[name="task"]').val($task),t("#acym_form").submit()}),t("#acym__modal__lists_import__clear").off("click").on("click",function(){t("#modal__pagination__create__list").val("")})},t.Modal(),t.setResetMail=function(){t(".acym__automation__action__reset__mail").off("click").on("click",function(){var e=t(this).closest(".acym__automation__inserted__action").find('[name$="[mail_id]"]'),a=t(this).parent(),i=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=deleteMailAutomation&id="+e.val();t.get(i,function(t){e.val("").prev().html(ACYM_JS_TXT.ACYM_CREATE_MAIL),a.html(""),_()})})},t.setTemplateModal=function(_){e(),a(),t(".acym__search-clear").off("click").on("click",function(){t('input[name="mailchoose_search__ajax"]').val(""),t("#acym_search_template_choose__ajax").val(""),e()}),t(".acym__templates__filter__tags__ajax").select2({theme:"foundation",width:"100%"}),_&&t('[data-open="acym__template__choose__modal"]').on("click",function(){t("#acym__template__choose__modal").attr("data-button",t(this).attr("data-modal-name"))})}}),jQuery(document).ready(function(t){!function(){t(".acym_tab").off("click").on("click",function(e){if("true"==t(this).attr("data-empty"))return!1;if(t(this).attr("data-dynamics")){var _=AJAX_URL_ACYM+"&ctrl=dynamics&task=trigger&trigger=textPopup&plugin="+t(this).attr("data-dynamics");t.post(_,function(e){t(".tabs-panel.is-active").html(e),t("i.acym_radio_unchecked").on("click",function(){var e=t("#"+t(this).attr("data-radio"));e.click()}),t('input[type="radio"]').on("change",function(){var e=t('input[name="'+t(this).attr("name")+'"]:checked').val();t('input[name="'+t(this).attr("name")+'"]').each(function(){t(this).val()==e?(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').hide(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').show()):(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').show(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').hide())})}).change()})}var a=t(this).closest(".tabs").attr("id");localStorage.setItem("acy"+a,t(this).attr("data-tab-identifier"))});var e=t(".tabs").attr("id"),_=localStorage.getItem("acy"+e),a=t("#"+e).find('a[data-tab-identifier="'+_+'"]');a.length?a.click():t("#"+e+" .acym_tab:first").click()}()});