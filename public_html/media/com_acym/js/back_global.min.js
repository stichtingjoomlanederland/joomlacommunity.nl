/**
 * @package    AcyMailing for Joomla
 * @version    6.1.5
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(_){var e,t,a,i,o,n,s,c,l;function r(){var e=_("#acym__joomla__left-menu");e&&(_("#acym_content, .acym_no_foundation").css({width:"calc(100% - "+e.width()+"px)","margin-left":e.width()+"px"}),_("#system-message-container").css({"margin-left":e.width()+15+"px"}))}function d(_,e,t){var a=new Date;a.setDate(a.getDate()+t),document.cookie=_+"="+escape(e)+(null==t?"":";expires="+a.toGMTString())}function m(e){_(".acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"40px"},"fast",function(){e.find("i").css("width","40px")})}function y(){_("#acym_pagination").val(1),_("#acym_form").submit()}function h(e,t,a){a=null!=a;var i,o=!0,n=_("#acym__wysid__email__preview"),s="acym__wysid__preview__iframe__"+e;_("#"+e).html('<div class="cell auto"></div><iframe id="'+s+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"/><div class="cell auto"></div><div class="acym__fadeout"></div><i class="material-icons acym__preview__extend acym__preview__toggle acym__preview-toggle">keyboard_arrow_down</i><i class="fa fa-unsorted acym__preview-toggle acym__preview__toggle__top"></i>');var c=_("#"+s);"smartphone"==t?c.css("maxWidth","425px"):c.css("maxWidth","inherit"),i=c.css("height");_("#acym__campaign__summary").length?(c.css({height:"200px"}),n.css("padding-bottom","200px"),c.contents().find("body").css("overflow","hidden"),_(".acym__preview-toggle").off("click").on("click",function(){_(".acym__fadeout").toggle(),o?(_(".acym__preview__toggle").html("keyboard_arrow_up").removeClass("acym__preview__extend").addClass("acym__preview__collapse"),c.css({height:i}).contents().find("body").css("overflow","auto"),n.css("padding-bottom",i),o=!o):(_(".acym__preview__toggle").html("keyboard_arrow_down").removeClass("acym__preview__collapse").addClass("acym__preview__extend"),c.css({height:"200px"}).contents().find("body").css("overflow","hidden"),n.css("padding-bottom","200px"),o=!o)})):(_(".acym__fadeout").hide(),_(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?u(s,a):c.on("load",function(){u(s,a)})}function u(e,t){var a='<div id="acym__wysid__template" class="cell acym__foundation__for__email"> <table class="body"> <tbody> <tr> <td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(120, 120, 120);"><center><table align="center"><tbody><tr><td class="acym__wysid__row ui-droppable ui-sortable"><table class="row acym__wysid__row__element"><tbody style="background-color: rgb(255, 255, 255);"><tr><th class="small-12 medium-12 large-12 columns"><table class="acym__wysid__column" style="min-height: 75px; display: block;"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table></th></tr></tbody></table></td></tr></tbody></table></center></td></tr></tbody></table></div>';_("#"+e).contents().find("body").css("margin","0").append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),_("#"+e).contents().find("body").css("margin","0").append('<link rel="stylesheet" href="'+ACYM_FIXES_FOR_EMAIL+'">'),null!=_(".acym__wysid__hidden__save__stylesheet").attr("value")&&""!=_(".acym__wysid__hidden__save__stylesheet").attr("value")&&($userStylesheet=_(".acym__wysid__hidden__save__stylesheet").attr("value"),setTimeout(function(){_("#"+e).contents().find("body").append("<style>"+$userStylesheet+"</style>")},100)),t?_(".acym__wysid__hidden__save__content").attr("value",'<div id="acym__wysid__template" class="cell">'+_("#acym__wysid__template").html()+"</div>"):""==_(".acym__wysid__hidden__save__content").attr("value")&&(""==_("#acym__wysid__template").html()?_(".acym__wysid__hidden__save__content").attr("value",a):_(".acym__wysid__hidden__save__content").attr("value",'<div id="acym__wysid__template" class="cell">'+_("#acym__wysid__template").html()+"</div>")),"empty"==_(".acym__wysid__hidden__save__content").attr("value")&&_(".acym__wysid__hidden__save__content").attr("value",a),""!=_(".acym__hidden__mail__content").html()&&(null!=_(".acym__hidden__mail__stylesheet").html()&&""!=_(".acym__hidden__mail__stylesheet").html()&&_("#"+e).contents().find("body").append("<style>"+_(".acym__hidden__mail__stylesheet").html()+"</style>"),_("#"+e).contents().find("body").append(_(".acym__hidden__mail__content").html())),_("#"+e).contents().find("body").append(_(".acym__wysid__hidden__save__content").attr("value")),_("#"+e).contents().find("a").attr("target","_blank")}function f(){_(".callout").appendTo("#acym__callout__container").css("display","flex"),_(".callout","#acym__callout__container").each(function(e){var t=_(".callout").eq(e);t.find(".fa-close").off("click").on("click",function(){p(t)}),setTimeout(function(){t.find(".progress-meter").css("transitionDuration",parseInt(t.attr("callout-timer"))+"ms"),t.find(".progress-meter").css("width",t.css("width")),t.attr("callout-timer")>0&&setTimeout(function(){p(t)},t.attr("callout-timer")),t.css({"margin-left":"0","margin-right":"0"})},500*e)})}function p(_){_.css({"margin-left":"640px","margin-right":"-640px"}),setTimeout(function(){_.remove()},1e3)}_.introContent=[],_.acym_parseJson=function(_,e){try{if(void 0!==_||""!==_)return JSON.parse(_)}catch(_){console.log(_.stack)}return e},_.acym_sprintf=function(){var e=(arguments=Object.values(arguments)).splice(0,1)[0];return 1===arguments.length?e=e.replace("%s",arguments[0]):_.each(arguments,function(_,t){e=e.replace("%"+(_+1)+"$s",t)}),e},_.setTooltip=function(){_(".acym__tooltip").each(function(){_(this).on("mouseenter",function(){var e=_(this).find(".acym__tooltip__text"),t=_(this).offset(),a=_(window).scrollTop(),i=t.top-a,o=i-e.height()-15<0?0:i-e.height()-15,n=t.left-e.height()/2<0?0:t.left-e.height()/2;e.css("top",o+"px"),e.css("left",n+"px")})})},_.setDatePickerGlobal=function(){_(".acy_date_picker").off("click").on("click",function(){var e=_(this),t=e.val()?moment(e.val(),"DD MMM YYYY HH:mm"):moment();new MaterialDatetimePicker({default:t}).on("submit",function(_){e.val(moment(_,"MM-DD-YYYY").format("DD MMM YYYY HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},_.setAjaxSelect2=function(){_(".acym_select2_ajax").each(function(){$placeholder=_(this).attr("data-placeholder"),$placeholder||($placeholder="- - -");var e=_(this).attr("data-ctrl");e||(e="dynamics");var t=_(this).attr("data-task");t||(t="trigger");var a={ctrl:e,task:t},i=_(this).attr("data-params");if(i){var o=JSON.parse(i);Object.assign(a,o)}_(this).select2({theme:"foundation",ajax:{url:AJAX_URL_ACYM,dataType:"json",delay:250,data:function(_){return a.search=_.term,a},processResults:function(e){var t=[];return e&&_.each(e,function(_,e){t.push({id:e[0],text:e[1]})}),{results:t}},cache:!0},minimumInputLength:3,width:"100%",allowClear:!0,placeholder:$placeholder})})},_.setRSDateChoice=function(){_(".acym__button__set__time").on("click",function(){var e,t,a;"relative"===_(this).closest(".reveal").find(".date_rs_selection.is-active").attr("data-type")?(e=_(this),t=e.closest(".reveal"),a=parseInt(t.find(".relativenumber").val())*parseInt(t.find(".relativetype").val()),_('[data-rs="'+t.attr("id")+'"]').val("{time}"+(a>0?t.find(".relativewhen").val()+a:"")),_('[data-open="'+t.attr("id")+'"]').val("{time}"+(a>0?t.find(".relativewhen").val()+a:""))):function(e){var t=e.closest(".reveal"),a=t.find('[name^="specific_acym_action"], [name^="specific_acym_condition"]');_('[data-rs="'+t.attr("id")+'"]').val(moment(a.val(),"DD MMM YYYY HH:mm").unix()),_('[data-open="'+t.attr("id")+'"]').val(a.val())}(_(this))}),_(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var t=_(this).closest(".date_rs_selection_popup");t.find(".date_rs_selection").removeClass("is-active"),_(this).addClass("is-active"),t.find(".date_rs_selection_choice").hide(),t.find(".date_rs_selection_"+_(this).attr("data-type")).show()})},_.setSubmitButtonGlobal=function(){_(".acy_button_submit").off("click").on("click",function(e){if(_(this).hasClass("disabled-button"))return!1;e.preventDefault();var t=_("#acym_form"),a=_(this).attr("data-task");_('input[name="task"]').val(a);var i=_(this).attr("data-step");null!=i&&t.find('[name="nextstep"]').val(i);var o=_(this).attr("data-and");null!=o&&t.append('<input type="hidden" value="'+o+'" name="and_action">');var n=t.find("#formSubmit");if(null==n[0]){var s=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(s)}else n.click()})},_(document).foundation(),_.acym_sprintf("%1$s mails successfully sent out of %2$s","bite","caca"),_(".acym__format__view").off("click").on("click",function(){_(".acym__format__view--current").removeClass("acym__format__view--current"),_(this).addClass("acym__format__view--current");var e=_(this).attr("format");_("#acym_listingformat").val(e),_(".acym__listing").addClass("acym__listing--hidden"),_(".acym__listing__view__"+e).removeClass("acym__listing--hidden")}),_.setSubmitButtonGlobal(),_(".acym__pagination__page").off("click").on("click",function(){_("#acym_pagination").val(_(this).attr("page")),_("#acym_form").submit()}),_(".acym__lists__filter__tags").off("change").on("change",function(){y()}),_(".acym__templates__filter__tags").off("change").on("change",function(){y()}),_(".acym__campaigns__filter__tags").off("change").on("change",function(){y()}),_(".acym__queue__filter__tags").off("change").on("change",function(){y()}),_(".acym__search__button").off("click").on("click",function(){y()}),_(".acym__type__choosen").off("click").on("click",function(){_("#acym__type-template").val(_(this).attr("data-type")),_(".acym_ordering_option").removeClass("is-active"),_(this).addClass("is-active"),y()}),_(".acym__filter__status").off("click").on("click",function(){_("#acym_filter_status").val(_(this).attr("status")),y()}),_(".acym_toggleable").off("click").on("click",function(){var e=_(this);e.attr("class","fa fa-circle-o-notch fa-spin");var t=e.attr("table"),a=e.attr("field"),i=e.attr("elementid"),o=e.attr("newvalue"),n=TOGGLE_URL_ACYM+"&table="+t+"&field="+a+"&id="+i+"&value="+o;_.ajax({url:n,type:"GET"}).done(function(e){var o=_.parseJSON(e);_("[table="+t+"][field="+a+"][elementid="+i+"]").attr("newvalue",o.value).attr("class",o.classes)})}),_(".acym_toggle_delete").off("click").on("click",function(){var e=_(this),t=e.attr("confirmation");if(!t||_.acym_confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var a=e.attr("table"),i=e.attr("elementid"),o=TOGGLE_URL_ACYM+"&task=delete&table="+a+"&id="+i,n=e.attr("method");null!=n&&(o+="&method="+n),_.ajax({url:o,type:"GET"}).done(function(e){"mail"===a?location.reload():_(".grid-x[elementid="+i+"]").remove()})}}),_(".switch-label").off("click").on("click",function(){var e=_(this).attr("for");_('[data-switch="'+e+'"]').trigger("change")}),_(".acym_toggle_switch").off("change").on("change",function(){var e=_(this),t=e.attr("table"),a=e.attr("field"),i=e.attr("elementid"),o=e.attr("newvalue"),n=TOGGLE_URL_ACYM+"&table="+t+"&field="+a+"&id="+i+"&value="+o;_.ajax({url:n,type:"GET"}).done(function(t){var a=_.parseJSON(t);e.attr("newvalue",a.value)})}),_(".acym__listing__block__delete__trash").off("click").on("click",function(){var e=_(this).closest(" .acym__listing__block__delete");e.css("width","auto"),e.find("i").css("width","0"),e.animate({maxWidth:e.parent().innerWidth()},"fast",function(){_(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){m(_(this).closest(".acym__listing__block__delete"))})}),_(".acym__listing__block").off("mouseleave").on("mouseleave",function(){m(_(this).find(".acym__listing__block__delete"))})}),(e=_('input.acym_toggle[type="checkbox"]')).off("change").on("change",function(){var e=_("."+_(this).attr("data-toggle")),t=_(this).is(":checked"),a=_("#"+_(this).attr("data-value"));e.each(function(){var e=_(this);t?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),a&&a.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),a&&a.val(0))})}),e.trigger("change"),_(".switch-label").on("click",function(){var e=_('input[data-switch="'+_(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))}),_(".acym_template_option").off("click").on("click",function(){_(".acym_template_option").addClass("acym_template_option--clean"),_(".acym_template_option").prev().removeClass("selected_template").addClass("not_selected_template"),_(this).attr("template")==_("#acym_template").val()?(_("#acym_template").val(0),_(".acym_template_option").removeClass("acym_template_option--selected")):(_("#acym_template").val(_(this).attr("template")),_(".acym_template_option").removeClass("acym_template_option--selected"),_(this).prev().addClass("selected_template").removeClass("not_selected_template"),_(this).removeClass("acym_template_option--clean").addClass("acym_template_option--selected"))}),t=_("#acym__tags__field"),a=t.attr("placeholder"),t.select2({width:"100%",placeholder:a,tags:!0,tokenSeparators:[" "],createTag:function(e){var t=_.trim(e.term);return""===t?null:{id:"acy_new_tag_"+t,text:t,newTag:!0}}}),_.setDatePickerGlobal(),_(".acym__search-clear").off("click").on("click",function(){_(".acym__search-field").attr("value",""),y()}),function e(){_(".acym__wysid__hidden__save__content").off("change").on("change",function(){e(),_.setThumbnail()}),h("acym__wysid__email__preview","desktop"),_("#acym__wysid__view__desktop").off("click").on("click",function(){h("acym__wysid__fullscreen__modal__content","desktop",!0),_("#acym__wysid__fullscreen__modal").css({display:"inherit"}).find("iframe").contents().find('table[align="center"]').css({"margin-top":"30px","margin-bottom":"30px"})}),_("#acym__wysid__view__smartphone").off("click").on("click",function(){h("acym__wysid__fullscreen__modal__content","smartphone",!0),_("#acym__wysid__fullscreen__modal").css("display","inherit").find("iframe").css({"margin-top":"30px","margin-bottom":"30px"})})}(),_("#acym__listing__ordering").select2({theme:"sortBy",minimumResultsForSearch:1/0}),i={},_(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){return null==i.id?(i.id=_(this).attr("id"),void(i.style=_(this).attr("style"))):i.id!=_(this).attr("id")?(i.id=_(this).attr("id"),void(i.style=_(this).attr("style"))):void _(this).attr("style",i.style)}),_(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){var t=_(this).position();_(this).css("margin-top",""),t.top+_(this).outerHeight()+100>_(window).height()?(_(this).css({"margin-top":"-80px"}),_(this).removeClass("dropdown-bottom dropdown-top"),_(this).addClass("dropdown-top")):(_(this).attr("data-position","bottom"),_(this).removeClass("dropdown-bottom dropdown-top"),_(this).addClass("dropdown-bottom"))}),_(".dropdown-pane").off("hide.zf.dropdown").on("hide.zf.dropdown",function(e){_(this).css("margin-top","")}),_("i.acym_radio_unchecked").on("click",function(){var e=_("#"+_(this).attr("data-radio"));e.click()}),_('input[type="radio"]').on("change",function(){var e=_('input[name="'+_(this).attr("name")+'"]:checked').val();_('input[name="'+_(this).attr("name")+'"]').each(function(){_(this).val()==e?(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').hide(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').show()):(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').show(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),_(".acym_message i.fa-close").off("click").on("click",function(){_(this).parent().remove()}),(o=_('[data-toggle-switch]:not([data-toggle-switch=""])')).off("change").on("change",function(){var e=_(this).attr("data-toggle-switch-open");1!=_(this).val()&&"show"==e||1==_(this).val()&&"hide"==e?_("#"+_(this).attr("data-toggle-switch")).show():_("#"+_(this).attr("data-toggle-switch")).hide()}),o.each(function(e){var t=_(this).attr("data-toggle-switch-open");1==_(this).val()&&"show"==t||1!=_(this).val()&&"hide"==t?_("#"+_(this).attr("data-toggle-switch")).show():_("#"+_(this).attr("data-toggle-switch")).hide()}),_(".acym__button__file").off("click").on("click",function(){var e=_(this),t=e.prev();t.click(),t.off("change").on("change",function(){e.next().html(_(this).val().split("\\").pop())})}),_.setTooltip(),_(".acym__sortable__listing").sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(e,t){var a=_(".acym__sortable__listing .acym__listing__row"),i=_(".acym__sortable__listing").attr("data-sort-ctrl"),o=[];a.each(function(e){o.push(_(this).attr("data-id-element"))}),o=JSON.stringify(o);var n=AJAX_URL_ACYM+"&ctrl="+i+"&task=setOrdering&order="+o;_.post(n,function(_){"error"==_&&console.log("Error can't order these elements")})}}),_.setAjaxSelect2(),_("#rating a").on("click",function(){_("#acym__header__reviews__remind-me__later").click()}),_("#acym__header__reviews__remind-me__later").off("click").on("click",function(){var e=AJAX_URL_ACYM+"&ctrl=toggle&task=setDoNotRemindMe&value="+encodeURIComponent(_(this).attr("title"));_.get(e,function(_){"error"!==_&&location.reload()})}),_(".acym__toggle__arrow .acym__toggle__arrow__trigger").off("click").on("click",function(){var e=_(this).closest(".acym__toggle__arrow").children(".acym__toggle__arrow__contain");e.is(":visible")?(e.hide(),_(this).find("i").html("keyboard_arrow_down")):(e.show(),_(this).find("i").html("keyboard_arrow_up"))}),"joomla"!=CMS_ACYM||(n=_("#acym__joomla__left-menu"),s=_("#acym__joomla__left-menu--toggle"),c=_("#acym__joomla__left-menu a span"),l=_("#acym__joomla__left-menu--toggle i"),n.css("top",_(".navbar").height()),_(".btn-subhead").hide(),"none"!=s.css("display")&&(n.hasClass("collapsed")?c.hide()&&n.css({width:"55px"})&&l.html("keyboard_arrow_right"):c.show()&&n.css({width:"200px"})&&l.html("keyboard_arrow_left"),r(),s.off("click").on("click",function(){n.hasClass("collapsed")?n.css({width:"200px"})&&c.show()&&n.removeClass("collapsed")&&l.html("keyboard_arrow_left")&&d("menuJoomla","",365):n.css({width:"55px"})&&c.hide()&&n.addClass("collapsed")&&l.html("keyboard_arrow_right")&&d("menuJoomla","collapsed",365),r()})),_(".btn-navbar").off("click").on("click",function(){n.hide()}),_("#acym__joomla__left-menu--show").off("click").on("click",function(){_(".btn-navbar").hasClass("collapsed")||(".nav-collapse".css("height","0px").removeClass("in"),_(".btn-navbar").removeClass("collapsed")),n.toggle()})),_(".acym_select_foundation").select2({theme:"foundation",width:"100%"}),_("#acym_form").length&&!_("#acym__editor__content").length?_(".reveal-overlay").appendTo("#acym_form"):_(".reveal-overlay").appendTo("#acym_wrapper"),_("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(_){if(13==_.keyCode)return _.preventDefault(),!1}),_.setIntrojs=function(e,t){t=void 0!==t&&t;var a=TOGGLE_URL_ACYM+"&task=getIntroJSConfig";_.post(a,function(a){if((void 0===(a=JSON.parse(a))[e]||0==a[e]||t)&&!_(".introjs-tooltip").is(":visible")){for(var i=_.introContent,o=[],n=0;n<i.length;n++)_(""+i[n].element).attr("data-intro",i.text),o.push({element:document.querySelector(""+i[n].element),intro:i[n].text,position:void 0===i[n].position?"bottom":i[n].position});var s=introJs();s.setOptions({steps:o}),s.start(),_(".introjs-nextbutton").html(ACYM_JS_TXT.ACYM_NEXT),_(".introjs-prevbutton").html(ACYM_JS_TXT.ACYM_BACK),_(".introjs-skipbutton").html(ACYM_JS_TXT.ACYM_SKIP);var c=TOGGLE_URL_ACYM+"&task=toggleIntroJS&where="+e;_.post(c,function(_){})}})},_.acym_confirm=function(_){return confirm(_)},_.setThumbnail=function(){_("#acym_wrapper").after('<div id="testcontent"></div>'),_("#testcontent").html(_("#acym__wysid__preview__iframe__acym__wysid__email__preview").contents().find("body").clone()),_("#testcontent").find("#acym__wysid__template").append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),nlwidth=650,_("#testcontent center").css("width",nlwidth+"px");var e="thead, tbody, tfoot{background-color:inherit; border: inherit;} ";if(null!=_(".acym__wysid__hidden__save__settings").attr("value")&&""!=_(".acym__wysid__hidden__save__settings").attr("value")){var t=JSON.parse(_(".acym__wysid__hidden__save__settings").attr("value"));_.each(t,function(t,a){e+=t+"{",_.each(a,function(_,t){e+=_+":"+t+"; "}),e+="} "})}_("#testcontent *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&_(this).remove()}),_("#testcontent").find("#acym__wysid__template").append("<style>"+e+"</style>"),domtoimage.toPng(document.getElementById("testcontent"),{width:nlwidth}).then(function(e){_("#editor_thumbnail").attr("value",e),_("#testcontent").remove()},function(e){console.error("Error generating template thumbnail: "+e),_("#testcontent").remove()})},f(),_.acym_add_notification=function(e,t,a){null!=t&&-1!=_.inArray(t,["success","warning","error"])||(t="info"),null==a&&(a=0);var i="",o="fa-bell";"success"==t?o="fa-check-circle":"warning"==t?o="fa-exclamation-triangle":"error"==t&&(o="fa-exclamation-circle"),i+='<div class="callout acym__callout__'+t+'"',i+=a>0?' callout-timer="'+a+'" style="display: none"><div class="progress" role="progressbar"><div class="progress-meter" style="width: 0"></div></div>':' style="display: none">',i+='<i class="fa '+o+'"></i><p>'+e+'</p><i class="fa fa-close"></i></div>',_("body").append(i),f()},setTimeout(function(){_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body").css("padding",0).css("margin",0).css("height","100%"),_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body #acym_wrapper").css("min-height","100%")},1e3)}),jQuery(document).ready(function(_){_(".acym__wysid__modal__dynamic-text--close").off("click").on("click",function(){_("#acym__wysid__modal__dynamic-text").hide()}),_("#dtext_subject_button").off("click").on("click",function(e){e.preventDefault(),_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),_("#acym__wysid__modal__dynamic-text").show()})}),jQuery(document).ready(function(_){_("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}),jQuery(document).ready(function(_){var e,t="",a=_(".acym__wysid__hidden__save__settings").val(),i={},o=!0,n="",s=_(".acym__wysid__hidden__save__stylesheet").val(),c=!1,l="",r=0,d={"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"16px","font-weight":"normal","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","font-style":"normal",color:"#000000"}},m={facebook:{src:MEDIA_URL_ACYM+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:MEDIA_URL_ACYM+"/images/logo/twitter.png",link:"#",text:"Tweet"},pinterest:{src:MEDIA_URL_ACYM+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:MEDIA_URL_ACYM+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:MEDIA_URL_ACYM+"/images/logo/instagram.png"},vimeo:{src:MEDIA_URL_ACYM+"/images/logo/vimeo.png"},wordpress:{src:MEDIA_URL_ACYM+"/images/logo/wordpress.png"},youtube:{src:MEDIA_URL_ACYM+"/images/logo/youtube.png"}};function y(){_("#acym__wysid__right__toolbar__settings__tab").off("click").on("click",function(){h(_("#acym__wysid__right__toolbar__design"),_("#acym__wysid__right__toolbar__settings"),"left","right",_(this))}),_("#acym__wysid__right__toolbar__design__tab").off("click").on("click",function(){h(_("#acym__wysid__right__toolbar__settings"),_("#acym__wysid__right__toolbar__design"),"right","left",_(this))}),_("#acym__wysid__right__toolbar__design > p").off("click").on("click",function(){_(this).next().slideToggle(200),_(this).hasClass("acym__wysid__right__toolbar__p__open")?_(this).removeClass("acym__wysid__right__toolbar__p__open"):_(this).addClass("acym__wysid__right__toolbar__p__open"),"Setting"==_(this).html()&&_(this).toggleClass("acym__wysid__right__toolbar__last--text")}),_("#acym__wysid__right__toolbar__settings > p").off("click").on("click",function(){_(this).next().slideToggle(200),_(this).hasClass("acym__wysid__right__toolbar__p__open")?_(this).removeClass("acym__wysid__right__toolbar__p__open"):_(this).addClass("acym__wysid__right__toolbar__p__open"),"Contents"==_(this).html()&&_(this).toggleClass("acym__wysid__right__toolbar__last--text")})}function h(e,t,a,i,o){_("#acym__wysid__right__toolbar__settings__tab").off("click"),_("#acym__wysid__right__toolbar__design__tab").off("click"),e.hide("slide",{direction:a},200,function(){t.show("slide",{direction:i},200,function(){y()})}),_(".acym__wysid__right__toolbar__selected").removeClass("acym__wysid__right__toolbar__selected"),o.addClass("acym__wysid__right__toolbar__selected")}function u(){_(".acym__wysid__row__element").off("mouseenter mouseleave").hover(function(){var e=_(this);if(0==e.find(".acym__wysid__row__element__toolbox__group").eq(0).length&&!c&&!_(".mce-container").is(":visible")){var t="";"none"!==e.find("tbody:first").find("tr:first").css("background-image")?(t+='<i class="material-icons acym__wysid__set__background-image__rows">image</i>',t+='<div class="acym__wysid__delete__background-image__rows">',t+='<i class="material-icons">image</i>',t+='<i class="material-icons acym__color__red acym__wysid__delete__background-image__rows__close">close</i>',t+="</div>"):(t+='<input class="acym__wysid__row__element__toolbox__colorpicker"/>',t+='<i class="material-icons cursor-pointer acym__wysid__set__background-image__rows">image</i>');var a='<div class="acym__wysid__row__element__toolbox__group">';a+='<div class="acym__wysid__row__element__toolbox acym__wysid__row__element__toolbox__option">',a+='<div class="acym__wysid__row__element__toolbox__inner">',a+='<i title="Duplicate" class="material-icons acym__wysid__row__element__toolbox__copy">content_copy</i>',a+=t,a+='<i title="transparent background" class="material-icons acym__wysid__background-transparent__rows cursor-pointer">opacity</i>',a+='<i class="fa fa-arrows acym__wysid__row__element__toolbox__move grid-x text-center"></i>',a+='<div class="acym__wysid__row__element__toolbox__delete">',a+='<i title="Delete" class="material-icons">delete</i>',a+="</div>",a+="</div></div>",a+="</div>",a+='<div class="acym__wysid__row__element__toolbox__height text-center"><i class="material-icons">code</i></div>',_(this).prepend(a),function(e){var t=_(".acym__wysid__row__element__toolbox__colorpicker"),a=e.children("tbody");t.spectrum({color:a.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(_){a.css("background-color",_.toHexString()).parent().attr("bgcolor",_.toHexString())},change:function(_){a.css("background-color",_.toHexString()).parent().attr("bgcolor",_.toHexString())}})}(e),C(),_(".acym__wysid__row__element__toolbox__height").off("mousedown").on("mousedown",function(){c=!0,l=_(this).parent().css({"border-collapse":"initial","border-spacing":""}),_(document).on("mousemove",function(_){if(c){var e=l.offset().top,t=_.pageY-(e-10);l.find("th:first").height(t).attr("height",t)}}),_(document).off("mouseup").on("mouseup",function(){c=!1})}),e.css("z-index","101"),_(".acym__wysid__row__element__toolbox__delete").unbind("click").click(function(){var t=_(this),a=t.find("i"),i=_(".acym__wysid__row__element__toolbox__delete--confirm");0==i.length?(t.addClass("acym__wysid__row__element__toolbox__delete__open").prepend('<i class="material-icons acym__wysid__row__element__toolbox__delete--confirm">check</i>'),a.hide(),(i=_(".acym__wysid__row__element__toolbox__delete--confirm")).unbind("click").click(function(){e.remove(),b(),W()})):(a.show(),_(".acym__wysid__row__element__toolbox__delete__open").removeClass("acym__wysid__row__element__toolbox__delete__open"),i.remove()),t.off("mouseleave").on("mouseleave",function(){a.show(),_(".acym__wysid__row__element__toolbox__delete__open").removeClass("acym__wysid__row__element__toolbox__delete__open"),i.remove()})}),_(".acym__wysid__row__element__toolbox__copy").unbind("click").click(function(){_(this).closest(".acym__wysid__row__element").clone().insertAfter(_(this).closest(".acym__wysid__row__element")),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),_(".acym__wysid__column__element__toolbox_group").remove(),b(),W()})}}).on("mouseleave",function(){var e=_(this);e.css("z-index","100"),e.find(".acym__wysid__row__element__toolbox__height").remove(),e.find(".acym__wysid__row__element__toolbox__group").remove()})}function f(){_(".acym__wysid__row").sortable({axis:"y",cursorAt:{top:20},scroll:!1,placeholder:"acym__wysid__row__element--placeholder",handle:".acym__wysid__row__element__toolbox__move",forcePlaceholderSize:!0,tolerance:"intersect",start:function(e,t){t.helper.first().addClass("acym__wysid__row__element--sortable"),_(t.placeholder).css({height:"75px"}),_(".acym__wysid__column__element").unbind("hover"),_(".acym__wysid__row__element").unbind("hover")},stop:function(e,t){_(".acym__wysid__row__element--sortable").removeClass("acym__wysid__row__element--sortable");var a=t.item;a.hasClass("acym__wysid__row__element--new--1")?p(a):a.hasClass("acym__wysid__row__element--new--2")?function(e){'<tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff">',"<tr>",'<th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),W()}(a):a.hasClass("acym__wysid__row__element--new--3")?function(e){'<tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff">',"<tr>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),W()}(a):a.hasClass("acym__wysid__row__element--new--4")?function(e){'<tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff">',"<tr>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),W()}(a):a.hasClass("acym__wysid__row__element--new--5")?function(e){'<tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff">',"<tr>",'<th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),W()}(a):!a.hasClass("acym__wysid__row__element--new--6")||function(e){'<tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff">',"<tr>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),W()}(a),u(),w(),g(),J()}})}function p(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-12 large-12 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),W()}function g(){_(".acym__wysid__column__element").off("mouseleave mouseenter").on("mouseenter",function(){var e=_(this);if(0==e.find(".acym__wysid__column__element__toolbox_group").eq(0).length&&!_(".mce-container").is(":visible")){_(".acym__wysid__column__element__toolbox__group").remove();'<i title="Extend" class="material-icons acym__wysid__column__element__toolbox__extend__in">fullscreen</i>',"</div>";'<div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__option">','<i title="Duplicate" class="material-icons acym__wysid__column__element__toolbox__copy">content_copy</i>',"</div>",'<div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__extend"><i title="Extend" class="material-icons acym__wysid__column__element__toolbox__extend__in">fullscreen</i></div>','<div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__move grid-x text-center">','<i title="drag to sort" class="fa fa-arrows"></i>',"</div>",'<div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__delete">','<i title="Delete" class="material-icons">delete</i>',"</div>","</div>",_(this).find(".acym__wysid__column__element__td").prepend('<div class="acym__wysid__column__element__toolbox__group"><div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__option"><i title="Duplicate" class="material-icons acym__wysid__column__element__toolbox__copy">content_copy</i></div><div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__extend"><i title="Extend" class="material-icons acym__wysid__column__element__toolbox__extend__in">fullscreen</i></div><div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__move grid-x text-center"><i title="drag to sort" class="fa fa-arrows"></i></div><div class="acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__delete"><i title="Delete" class="material-icons">delete</i></div></div>'),_(this).find(".acym__wysid__column__element__td").css({"outline-width":"1px","outline-color":"#00a3fe","outline-style":"dashed","outline-offset":"2px"}),_(".acym__wysid__column__element__toolbox__delete").unbind("click").click(function(){var t=_(this),a=t.find("i"),i=_(".acym__wysid__column__element__toolbox__delete--confirm");0==i.length?(a.addClass("acym__wysid__column__element__toolbox__delete--confirm").html("check"),(i=_(".acym__wysid__column__element__toolbox__delete--confirm")).off("click").on("click",function(){e.parent().parent().parent().removeClass("margin_padding_none").find("margin_padding_none").removeClass("margin_padding_none"),e.remove(),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),J(),W()})):(a.removeClass("acym__wysid__column__element__toolbox__delete--confirm").html("delete"),_(".acym__wysid__column__element__toolbox__delete__open").removeClass("acym__wysid__column__element__toolbox__delete__open")),t.off("mouseleave").on("mouseleave",function(){a.removeClass("acym__wysid__column__element__toolbox__delete--confirm").html("delete"),_(".acym__wysid__column__element__toolbox__delete__open").removeClass("acym__wysid__column__element__toolbox__delete__open")})}),_(".acym__wysid__column__element__toolbox__copy").unbind("click").click(function(){_(".acym__wysid__column__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),e.clone().insertAfter(e),_(".acym__wysid__column__element .acym__wysid__column__element__td").css("outline-width","0"),b(),W()}),_(".acym__wysid__column__element__toolbox__extend").off("click").on("click",function(){var e=_(this).parent(),t=e.parent().find("img");t.length>0?t.hasClass("margin_padding_none")?(t.removeClass("margin_padding_none"),t.parent().removeClass("margin_padding_none"),t.parent().parent().parent().removeClass("margin_padding_none"),t.parent().parent().parent().parent().parent().parent().parent().removeClass("margin_padding_none")):(t.addClass("margin_padding_none"),t.parent().addClass("margin_padding_none"),t.parent().parent().parent().addClass("margin_padding_none"),t.parent().parent().parent().parent().parent().parent().parent().addClass("margin_padding_none")):e.parent().hasClass("margin_padding_none")?(e.parent().removeClass("margin_padding_none"),e.parent().parent().removeClass("margin_padding_none"),e.parent().parent().parent().parent().parent().removeClass("margin_padding_none")):(e.parent().addClass("margin_padding_none"),e.parent().parent().addClass("margin_padding_none"),e.parent().parent().parent().parent().parent().addClass("margin_padding_none"))})}}).on("mouseleave",function(){var e=_(this);e.find(".acym__wysid__column__element__td").css("outline-width","0px"),e.find(".acym__wysid__column__element__toolbox__group").remove()})}function w(){_("#insertDContent").off("click").on("click",function(e){e.preventDefault();var a=_("#dcontentcode").val();if(a){var i='<tr class="acym__wysid__column__element ui-draggable" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';i+='<td class="large-12 acym__wysid__column__element__td">';t.replaceWith(i+a.split("~").join("</td></tr>"+i)+"</td></tr>")}else t.replaceWith("");_("#acym__wysid__modal_plugins").css("display","none"),_("#dcontentcode").val(""),b(),W()}),_("#dcontentcode").off("click").on("click",function(){this.select()}),_(".acym__wysid__column tbody").sortable({scroll:!1,handle:".acym__wysid__column__element__toolbox__move",placeholder:"acym__wysid__column__element--placeholder",forcePlaceholderSize:!0,cursorAt:{top:20,left:50},stop:function(a,i){var o=i.item,n=o.attr("data-plugin");if(n){t=_(o),_("#acym__plugins__modal__options").html('<i class="fa fa-gear fa-spin centered_spinner text-center"/>'),_("#acym__wysid__modal_plugins").css("display","inherit");var s=AJAX_URL_ACYM+"&page=acymailing_lists&action=acymailing_router&noheader=1&ctrl=dynamics&task=trigger&trigger=contentPopup&plugin="+n;_.ajax({url:s,success:function(t){_("#acym__plugins__modal__options").html(t),_("i.acym_radio_unchecked").on("click",function(){_('label[for="'+_(this).attr("data-radio")+'"]').click()}),_('input[type="radio"]').on("change",function(){var e=_('input[name="'+_(this).attr("name")+'"]:checked').val();_('input[name="'+_(this).attr("name")+'"]').each(function(){_(this).val()==e?(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').hide(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').show()):(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').show(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),_("#plugin_listing_filters select").off("change").on("change",function(){H()}),_('#plugin_listing_filters input[type="text"]').off("keyup").on("keyup",function(){var t=_(this).val();clearTimeout(e),t.length>=2?e=setTimeout(function(){H()},1e3):""==t&&H()}),_("#acym__plugins__modal__options select").select2({theme:"foundation"}),z(),_(document).foundation(),_(".tabs").each(function(){var e=_(this).attr("id"),t=localStorage.getItem("acy"+e),a=_("#"+e+" #"+t);a.length?a.click():_("#"+e+" .acym_tab:first").click()}),_(".acy_date_picker").off("click").on("click",function(){var e=_(this),t=e.val()?moment(e.val(),"YYYY-MM-DD"):moment();new MaterialDatetimePicker({default:t}).on("submit",function(_){e.val(moment(_,"MM-DD-YYYY").format("YYYY-MM-DD")),e.trigger("change")}).open()}),_.setTooltip()}})}else o.hasClass("acym__wysid__column__element--new--title")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div class="acym__wysid__tinymce--text">',"<h1>Title</h1>","</div>","</td>","</tr>",_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><h1>Title</h1></div></td></tr>'),b(),W()}(o):o.hasClass("acym__wysid__column__element--new--text")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div class="acym__wysid__tinymce--text">',"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p>","</div>","</td>","</tr>",_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p></div></td></tr>'),b(),W()}(o):o.hasClass("acym__wysid__column__element--new--picture")?"wordpress"==CMS_ACYM?k(o):x(o):o.hasClass("acym__wysid__column__element--new--button")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div style="text-align: center;">','<a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 0; border-radius: 0" href="#">Button</a>',"</div>","</td>","</tr>",_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div style="text-align: center;"><a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 0; border-radius: 0" href="#">Button</a></div></td></tr>'),b(),W()}(o):o.hasClass("acym__wysid__column__element--new--follow")?function(e){var t='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';t+='<td class="large-12 acym__wysid__column__element__td">',t+='<div style="text-align: center;">',t+='<p class="acym__wysid__column__element__follow" style="text-align: center; cursor: pointer; padding: 0;margin: 0;">',t+='<a class="acym__wysid__column__element__follow__facebook" href="">',t+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.facebook.src+'" width="40" alt="facebook">',t+="</a>",t+='<a class="acym__wysid__column__element__follow__twitter" href="">',t+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.twitter.src+'"  width="40" alt="twitter">',t+="</a>",t+="</p>",t+="</div>",t+="</td>",t+="</tr>",_(e).replaceWith(t),b(),W()}(o):o.hasClass("acym__wysid__column__element--new--share")?function(e){var t='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';t+='<td class="large-12 acym__wysid__column__element__td">',t+='<div class="acym__wysid__column__element__share acym__wysid__column__element__share--add acy" style="text-align: center; margin-top: 10px; margin-bottom: 10px;">',t+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__facebook" href="'+m.facebook.link+'">',t+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.facebook.src+'" alt="'+m.facebook.src+'">',t+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.facebook.text+"</span>",t+="</a>",t+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__twitter" href="'+m.twitter.link+'">',t+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.twitter.src+'" alt="'+m.twitter.src+'">',t+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.twitter.text+"</span>",t+="</a>",t+="</div>",t+="</td>",t+="</tr>",_(e).replaceWith(t),b(),W()}(o):o.hasClass("acym__wysid__column__element--new--space")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span>',"</td>","</tr>",_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span></td></tr>'),b(),W()}(o):o.hasClass("acym__wysid__column__element--new--cms")?function(e){t=_(e),setModalCMSWYSID(),_("#acym__wysid__modal").css("display","inherit")}(o):o.hasClass("acym__wysid__column__element--new--video")?function(e){t=_(e),function(){var e='<div class="grid-container">';e+='<div class="grid-x grid-padding-x grid-padding-y">',e+='<div class="auto cell"></div>',e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/vimeo.png">',e+="</div>",e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/youtube.png">',e+="</div>",e+='<div class="small-4 medium-3 cell" style="display: inline-flex; padding: 15px 0 0 30px;">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/dailymotion.png">',e+="</div>",e+='<div class="auto cell"></div>',e+='<div class="small-8 medium-10 cell">',e+='<input id="acym__wysid__modal__video__search" type="text" placeholder="Url">',e+="</div>",e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__load" class="button primary expanded smaller-button" href="#">Load</button>',e+="</div>",e+="</div>",e+="</div>",_("#acym__wysid__modal__ui__fields").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div id="acym__wysid__modal__video__result" class="medium-12 cell"></div>',e+="</div>",e+="</div>",_("#acym__wysid__modal__ui__display").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div class="small-8 medium-10 cell"></div>',e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__insert" class="button primary expanded disabled" href="#">Insert</button>',e+="</div>",e+="</div>",e+="</div>",_("#acym__wysid__modal__ui__search").html(e);var a=_("#acym__wysid__modal__video__load"),i=_("#acym__wysid__modal__video__insert"),o=_("#acym__wysid__modal__video__search"),n=_("#acym__wysid__modal__video__result");a.off("click").on("click",function(){var e=o.val();i.unbind("click").click(function(){t.replaceWith('<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><p>'+n.html()+"</p></div></td></tr>"),I(),g(),v(),_("#acym__wysid__modal").css("display","none"),W()});var a=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),s=e.match(/^(?:(?:http|https):\/\/)?(?:www.)?(dailymotion\.com|dai\.ly)\/((video\/([^_]+))|(hub\/([^_]+)|([^\/_]+)))$/),c=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);null!=a?(n.html("<a href='https://www.youtube.com/watch?v="+a[1]+"'><img alt='' src='https://img.youtube.com/vi/"+a[1]+"/0.jpg' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block;margin-left: auto; margin-right: auto;'/></a>"),i.removeClass("disabled")):null!=s?(null!==s&&(void 0!==s[4]&&n.html("<a href='https://www.dailymotion.com/video/"+s[4]+"'><img alt='' src='https://www.dailymotion.com/thumbnail/video/"+s[4]+"' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;'/></a>"),n.html("<a href='https://www.dailymotion.com/video/"+s[2]+"'><img alt='' src='https://www.dailymotion.com/thumbnail/video/"+s[2]+"' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;'/></a>")),i.removeClass("disabled")):null!=c?_.ajax({url:"https://www.vimeo.com/api/v2/video/"+c[5]+".json",dataType:"jsonp",success:function(_){n.html("<a href='https://vimeo.com/"+c[5]+"'><img alt='' src='"+_[0].thumbnail_large+"' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;'/></a>"),i.removeClass("disabled")}}):(n.html("<div class='acym__wysid__error_msg' style='text-align: center; margin-top: 100px;'>"+ACYM_JS_TXT.ACYM_NON_VALID_URL+"</div>"),i.addClass("disabled").off("click")),n.unbind("click").click(function(_){_.preventDefault()})}),o.keyup(function(_){var e=_.which;13==e&&_.preventDefault(),13!=e&&188!=e&&186!=e||a.click()})}(),_("#acym__wysid__modal").css("display","inherit")}(o):o.hasClass("acym__wysid__column__element--new--separator")&&function(e){'<td class="large-12 acym__wysid__column__element__td">','<hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator">',"</td>","</tr>",_(e).replaceWith('<tr class="acym__wysid__column__element acym__wysid__column__element__separator cursor-pointer" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator"></td></tr>'),b(),W()}(o)},change:function(){J()},out:function(){setTimeout(function(){J()},1)},receive:function(_,e){e.item.hasClass("acym__wysid__column__element--new")||(e.item.remove(),b(),W())}})}function v(){_(".acym__wysid__column__element").draggable({cursor:"move",helper:"clone",revert:"invalid",handle:".acym__wysid__column__element__toolbox__move",cursorAt:{top:20,left:50},connectToSortable:".acym__wysid__column tbody",revertDuration:300,start:function(e,t){t.helper.first().addClass("acym__wysid__column__element--helper"),_(this).addClass("acym__wysid__column__element__original--helper"),_(".acym__wysid__column").addClass("acym__wysid__column--drag-start")},stop:function(){_(".acym__wysid__column__element--helper").removeClass("acym__wysid__column__element--helper"),_(".acym__wysid__column__element__original--helper").removeClass("acym__wysid__column__element__original--helper"),_(".acym__wysid__column").removeClass("acym__wysid__column--drag-start"),_(".acym__wysid__column__element").css({position:"relative",top:"inherit",left:"inherit",right:"inherit",bottom:"inherit",height:"auto"}),u()}})}function b(){var e,t,a,i,o,n,s,c;_(".acym__wysid__media__inserted").length>0&&setTimeout(function(){var e=_(".acym__wysid__media__inserted");e.attr("height",e.height()).attr("width",e.width()),e.removeClass("acym__wysid__media__inserted")},200),C(),_(".sp-container").remove(),u(),f(),I(),g(),v(),w(),e=_(".acym__wysid__template__content"),t=_("#acym__wysid__background-colorpicker"),a=_(".acym__wysid__row__element__toolbox__colorpicker"),i=a.parent().parent().children("tbody"),t.spectrum({color:e.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(_){Y("#acym__wysid__background-colorpicker","background-color",_.toHexString())},change:function(_){Y("#acym__wysid__background-colorpicker","background-color",_.toHexString())}}),a.spectrum({color:i.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,move:function(_){i.css("background-color",_.toHexString())},change:function(_){i.css("background-color",_.toHexString())}}),_(".acym__wysid__column__element__button").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=_(".acym__wysid__column__element__button--focus");t.removeClass("acym__wysid__column__element__button--focus"),_(this).addClass("acym__wysid__column__element__button--focus"),_("#acym__wysid__context__button__background-color").spectrum({color:t.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){_(".acym__wysid__column__element__button--focus").css("background-color",e.toHexString())},change:function(e){_(".acym__wysid__column__element__button--focus").css("background-color",e.toHexString())}}),_("#acym__wysid__context__button__border-color").spectrum({color:t.css("border-left-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){_(".acym__wysid__column__element__button--focus").css("border-color",e.toHexString())},change:function(e){_(".acym__wysid__column__element__button--focus").css("border-color",e.toHexString())}}),_("#acym__wysid__context__button__color").spectrum({color:t.css("color"),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){_(".acym__wysid__column__element__button--focus").css("color",e.toHexString())},change:function(e){_(".acym__wysid__column__element__button--focus").css("color",e.toHexString())}});var a=_(this),i=a.offset(),o=a.innerHeight(),n=a.innerWidth(),s=_("#acym__wysid__context__button"),c=s.innerHeight(),l=_("#wpadminbar").innerHeight()+5,r=_("nav.navbar").innerHeight()+5,d=_(window).width(),m=i.top-c<l+r?i.top+o-l+5:i.top-l-c-5;_("#acym__wysid__context__button__border-radius").val(a.css("border-radius").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){a.css("border-radius",_(this).val()+"px")}),_("#acym__wysid__context__button__border-width").val(a.css("border-left-width").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){a.css("border-width",_(this).val()+"px")}),_("#acym__wysid__context__button__font-family").val(a.css("font-family").replace(/['"]/g,"")).off("change").on("change",function(){a.css("font-family",_(this).val())}),_("#acym__wysid__context__button__font-size").val(a.css("font-size").replace(/[^-\d\.]/g,"")).off("change").on("change",function(){a.css("font-size",_(this).val()+"px")}),_("#acym__wysid__context__button__text").val(a.text()).off("change paste keyup").on("change paste keyup",function(){a.text(_(this).val())}),_("#acym__wysid__context__button__link").val(a.attr("href")).off("change paste keyup").on("change paste keyup",function(){a.attr("href",_(this).val())}),_("#acym__wysid__context__button__bold").css("background-color",700==a.css("font-weight")?"":"inherit").off("click").on("click",function(){700==a.css("font-weight")?_("#acym__wysid__context__button__bold").css("background-color","inherit")&&a.css("font-weight","inherit"):_("#acym__wysid__context__button__bold").css("background-color","")&&a.css("font-weight",700)}),_("#acym__wysid__context__button__italic").css("background-color","italic"==a.css("font-style")?"":"inherit").off("click").on("click",function(){"italic"==a.css("font-style")?_("#acym__wysid__context__button__italic").css("background-color","inherit")&&a.css("font-style","inherit"):_("#acym__wysid__context__button__italic").css("background-color","")&&a.css("font-style","italic")}),_("#acym__wysid__context__button__font-family").select2({theme:"foundation",width:"40%"}),_("#acym__wysid__context__button__font-size").select2({theme:"foundation",width:"25%",minimumResultsForSearch:1/0}),_("#acym__wysid__context__button__border-width").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),_("#acym__wysid__context__button__border-radius").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),s.css({display:"inherit",top:m,left:d>800?i.left-_("#adminmenuback").innerWidth()+n/2-s.innerWidth()/2:i.left+n/2-s.innerWidth()/2}),s.unbind("click").click(function(e){_(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),_(window).click(function(){s.css({display:"none"}),_(window).unbind("click"),b(),W()})}),_("#acym__wysid__context__space__slider").on("moved.zf.slider",function(){"none"!=_("#acym__wysid__context__space").css("display")&&_(".acy-editor__space--focus").css("height",_("#sliderOutput1").val()+"px")}),_(".acy-editor__space").unbind("click").click(function(e){e.stopPropagation();var t=_(this),a=t.offset(),i=t.innerHeight(),o=t.innerWidth(),n=_("#acym__wysid__context__space"),s=n.innerHeight(),c=_("#wpadminbar").innerHeight()+5,l=_("nav.navbar").innerHeight()+5,r=_(window).width(),d=a.top-s<c+l?a.top+i-c+5:a.top-c-s-5;n.css({display:"inherit",top:d,left:r>800?a.left-_("#adminmenuback").innerWidth()+o/2-n.innerWidth()/2:a.left+o/2-n.innerWidth()/2});var m=t.css("height").replace(/[^-\d\.]/g,""),y=_(".slider-handle").css("left").replace(/[^-\d\.]/g,""),h=_("#sliderOutput1").val();_(".slider-handle").css("left",m*y/h),_(".slider-fill").css("width",m+"%"),_("#sliderOutput1").val(t.css("height").replace(/[^-\d\.]/g,"")),_(".acy-editor__space--focus").removeClass("acy-editor__space--focus"),t.addClass("acy-editor__space--focus"),n.unbind("click").click(function(e){_(".acy-editor__space--focus").css("height",_("#sliderOutput1").val()+"px"),e.stopPropagation()}),_(window).click(function(){_(".acy-editor__space--focus").css("height",_("#sliderOutput1").val()+"px"),n.css("display","none"),_(window).unbind("click"),b(),W()})}),function e(){_(".acym__wysid__column__element__follow").off("click").on("click",function(t){t.stopPropagation(),_(".acym__wysid__column__element__follow--focus").removeClass("acym__wysid__column__element__follow--focus"),_(this).addClass("acym__wysid__column__element__follow--focus"),_("#acym__wysid__context__follow__list").empty(),_("#acym__wysid__context__follow__select").html("<option></option>");var a=_(".acym__wysid__column__element__follow--focus img").eq(0);d=a.length?a.css("width").replace(/[^-\d\.]/g,"")<=80?a.css("width").replace(/[^-\d\.]/g,"")>=30?a.eq(0).css("width").replace(/[^-\d\.]/g,""):30:80:40,_("#acym__wysid__context__social__width").val(d);for(var i=["facebook","twitter","instagram","linkedin","pinterest","vimeo","wordpress","youtube"],o=0,n=i.length;o<n;o++){var s=0;_(".acym__wysid__column__element__follow--focus a").each(function(){if(-1!=_(this).attr("class").indexOf(i[o])){var t=i[o];s=1;var a='<div id="acym__wysid__context__follow__list__item" class="grid-x small-12 cell">';a+='<div class="small-2 cell">',a+='<img style="height: auto;  box-sizing: border-box; width: 42px; padding: 5px; margin-left: 5px" src="'+m[t].src+'" alt="">',a+="</div>",a+='<div class="small-8 cell">',a+='<div class="input-group small-12 cell">',a+='<span class="input-group-label">',a+='<img draggable="false" class="emoji" alt=""  src="'+MEDIA_URL_ACYM+'images/link.svg">',a+="</span>",a+='<input id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+t+'" type="text" placeholder="https://" value="'+_(this).attr("href")+'">',a+="</div>",a+="</div>",a+='<div class="auto cell">',a+='<p class="acym__wysid__context__follow__list__remove acym__wysid__context__follow__list__remove--'+t+'" aria-hidden="true"></p>',a+="</div>",a+="</div>",_("#acym__wysid__context__follow__list").append(a),_(".acym__wysid__context__follow__list__remove--"+t).off("click").on("click",function(){_(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+t).remove(),_(this).parent().parent().remove(),e(),_(".acym__wysid__column__element__follow--focus").click()}),_(".acym__wysid__context__button__link--"+t).off("change paste keyup").on("change paste keyupe",function(){_(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+t).attr("href",_(this).val())})}}),0==s&&_("#acym__wysid__context__follow__select").append(new Option("",i[o],!1,!1)).trigger("change")}var c=_(this),l=c.offset(),r=c.innerHeight(),d=c.innerWidth(),y=_("#acym__wysid__context__follow"),h=y.innerHeight(),u=_("#wpadminbar").innerHeight()+5,f=_("nav.navbar").innerHeight()+5,p=_(window).width(),g=l.top-h<u+f?l.top+r-u+5:l.top-u-h;y.css({display:"inherit",top:g,left:p>800?l.left-_("#adminmenuback").innerWidth()+d/2-y.innerWidth()/2:l.left+d/2-y.innerWidth()/2}),_("#acym__wysid__context__follow__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:A,templateSelection:A}),y.unbind("click").click(function(_){_.stopPropagation()}),_(window).click(function(){y.css({display:"none"}),_(window).unbind("click"),b(),W()}),_("#acym__wysid__context__follow__select").off("select2:select").on("select2:select",function(t){var a=t.params.data.id;d=_("#acym__wysid__context__social__width").val()<=80?_("#acym__wysid__context__social__width").val()>=30?_("#acym__wysid__context__social__width").val():30:80;var i='<a class="acym__wysid__column__element__follow__'+a+'" href="">';i+='<img style="display: inline-block; max-width: 100%; height: auto; box-sizing: border-box; width: '+d+'px; padding: 3px;" src="'+m[a].src+'" width="'+d+'" alt="">',i+="</a>",_(".acym__wysid__column__element__follow--focus").append(i),e(),_(".acym__wysid__column__element__follow--focus").click()}),_("#acym__wysid__context__social__width").off("change").on("change",function(){d=_("#acym__wysid__context__social__width").val()<=80?_("#acym__wysid__context__social__width").val()>=30?_("#acym__wysid__context__social__width").val():30:80,_(".acym__wysid__column__element__follow--focus img").css("width",d).attr("width",d)})});_(".acym__wysid__column__element__follow a").unbind("click").click(function(_){_.preventDefault()})}(),function e(){_(".acym__wysid__column__element__share").off("click").on("click",function(t){t.stopPropagation(),_(".acym__wysid__column__element__share--focus").removeClass("acym__wysid__column__element__share--focus"),_(this).addClass("acym__wysid__column__element__share--focus"),_("#acym__wysid__context__share__list").empty(),_("#acym__wysid__context__share__select").html("<option></option>");var a=_(".acym__wysid__column__element__share--focus span").eq(0),i=_("#acym__wysid__context__social__share__width");i.attr("value",a.length?a.css("font-size").replace(/[^-\d\.]/g,"")<=40?a.css("font-size").replace(/[^-\d\.]/g,"")>=15?a.eq(0).css("font-size").replace(/[^-\d\.]/g,""):15:40:20),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",i.attr("value")+"px"),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(i.attr("value"))+15+"px");for(var o=["facebook","twitter","linkedin","pinterest"],n=[],s=0,c=o.length;s<c;s++){var l=0;_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social").each(function(t){if(-1!=_(this).attr("class").indexOf(o[s])){var a=o[s];l=1;var i='<div id="acym__wysid__context__share__list__item" class="grid-x small-12 cell">';i+='<div class="small-2 cell acym__wysid__context__share__list__item__'+a+'">',i+='<img style="width: 35px;display: inline; margin-left: 10px;" src="'+m[a].src+'" alt="'+m[a].src+'"/>',i+="</div>",i+='<div class="small-8 cell">',i+='<div class="input-group small-12 cell">',i+='<input maxlength="15" id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+a+'" type="text" value="'+_(this).children("span").html()+'">',i+="</div>",i+="</div>",i+='<div class="auto cell">',i+='<p class="acym__wysid__context__share__list__remove acym__wysid__context__share__list__remove--'+a+'" aria-hidden="true"></p>',i+="</div>",i+="</div>",_("#acym__wysid__context__share__list").append(i),_(".acym__wysid__context__share__list__remove--"+a).off("click").on("click",function(){var t=a;_(".acym__wysid__column__element__share--focus").find(".acym__wysid__column__element__share__"+t).remove(),e(),_(".acym__wysid__column__element__share--focus").click()}),_(".acym__wysid__context__button__link--"+a).off("change paste keyup").on("change paste keyup",function(){var e=a;_(this).val().length>15?_(this).val(_(this).val().substr(0,15)):_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__"+e+" span").html(_(this).val())})}}),0==l&&_("#acym__wysid__context__share__select").append(new Option("",o[s],!1,!1)).trigger("change")}_(".acym__wysid__column__element__share__social").off("click").on("click",function(_){_.preventDefault()});var r=_(this).parent(),d=r.offset(),y=r.innerHeight(),h=r.innerWidth(),u=_("#acym__wysid__context__share"),f=u.innerHeight(),p=_("#wpadminbar").innerHeight()+5,g=_("nav.navbar").innerHeight()+5,w=_(window).width(),v=d.top-f<p+g?d.top+y-p+5:d.top-p-f;u.css({display:"inherit",top:v,left:w>800?d.left-_("#adminmenuback").innerWidth()+h/2-u.innerWidth()/2:d.left+h/2-u.innerWidth()/2}),_("#acym__wysid__context__share__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:M,templateSelection:M}),u.unbind("click").click(function(_){_.stopPropagation()}),_(window).click(function(){u.css({display:"none"}),_(window).unbind("click")}),_("#acym__wysid__context__share__select").off("select2:select").on("select2:select",function(t){var a=t.params.data.id;n.push(a);var o='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__'+a+'" href="'+m[a].link+'">';o+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m[a].src+'" alt="'+m[a].src+'">',o+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m[a].text+"</span>",o+="</a>",_(".acym__wysid__column__element__share--focus").append(o);var s=i.val()<=40?i.val()>=15?i.val():15:40;_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",s+"px"),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(s)+15+"px"),e(),_(".acym__wysid__column__element__share--focus").click()}),i.off("change").on("change",function(){var e=i.val()<=40?i.val()>=15?i.val():15:40;_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",e+"px"),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(e)+15+"px")})});_(".acym__wysid__column__element__share__social").off("click").on("click",function(_){_.preventDefault()})}(),R(T(_("#acym__wysid__right__toolbar__settings__font--select").val(),"color")),E(),o=_("#acym__wysid__right__toolbar__settings__bold"),n=_("#acym__wysid__right__toolbar__settings__italic"),(s=_("#acym__wysid__right__toolbar__settings__font--select")).on("change",function(){E()}),_("#acym__wysid__right__toolbar__settings__font-family").on("change",function(){Y(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-family",_(this).val())}),_("#acym__wysid__right__toolbar__settings__font-size").on("change",function(){Y(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-size",_(this).val())}),o.off("click").on("click",function(){o.hasClass("acym__wysid__right__toolbar__settings__bold--selected")?o.removeClass("acym__wysid__right__toolbar__settings__bold--selected")&&Y(s.val(),"font-weight","normal"):o.addClass("acym__wysid__right__toolbar__settings__bold--selected")&&Y(s.val(),"font-weight","bold")}),n.off("click").on("click",function(){n.hasClass("acym__wysid__right__toolbar__settings__italic--selected")?n.removeClass("acym__wysid__right__toolbar__settings__italic--selected")&&Y(s.val(),"font-style","normal"):n.addClass("acym__wysid__right__toolbar__settings__italic--selected")&&Y(s.val(),"font-style","italic")}),j(),J(),function e(){_(window).off("resize").on("resize",function(){e()});var t=0;t="wordpress"==CMS_ACYM?_("#wpadminbar").innerHeight():_("nav.navbar").innerHeight()+_("#status").innerHeight();var a=_(window).width()>639?56:0;var i=_("#acym__wysid__top-toolbar").innerHeight();_("#acym__wysid").css("min-height",_(window).height()-(a+t));_("#acym__wysid__template").css({"max-height":_(window).height()-(a+t+i+64),"min-height":_(window).height()-(a+t+i+64)});_(".acym__wysid__right-toolbar__content").css("max-height",_(window).height()-(a+t+48))}(),L(),_(".acym_dynamic").off("click").on("click",function(){var e=window.getSelection(),t=document.createRange();t.selectNode(this),e.removeAllRanges(),e.addRange(t),_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),_("#acym__wysid__modal__dynamic-text").show()}),_(".acym_remove_dynamic").off("click").on("click",function(){_(this).parent().remove(),b(),W()}),_("#acym__wysid__template").find("p").css("word-break","break-word"),(c=navigator.userAgent).toLowerCase().indexOf("chrome")>-1||c.toLowerCase().indexOf("firefox")>-1?(_("p").find("code").css("white-space","pre-wrap"),_("pre").css("white-space","pre-wrap"),_("code").css("white-space","pre-wrap")):c.indexOf("MSIE ")>-1||c.indexOf("Trident/")>-1?(_("pre").css("word-wrap","break-word"),_("code").css("word-wrap","break-word")):c.toLowerCase().indexOf("opera")>-1&&(_("pre").css("white-space","-o-pre-wrap"),_("code").css("white-space","-o-pre-wrap")),_(".acym__wysid__tinymce--text").on("click",function(){setTimeout(function(){_.introContent=[{element:".mce-widget .mce-i-codesample",text:ACYM_JS_TXT.ACYM_INTRO_ADD_DTEXT,position:"right"}],_.setIntrojs("mail_editor_dtext")},200)}),_(".acym__wysid__column__element__separator").off("click").on("click",function(e){e.stopPropagation();var t=_(this).find("hr:first");_("#sliderOutput2").val(t.css("border-bottom-width").replace(/[^-\d\.]/g,"")),_("#acym__wysid__context__separator__color").spectrum({color:t.css("border-bottom-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,move:function(_){t.css("border-bottom-color",_.toHexString())},change:function(_){t.css("border-bottom-color",_.toHexString())}});var a=_(".acym__wysid__context__separator__kind");a.removeClass("separator-selected"),a.each(function(){_(this).find("hr").attr("data-kind")==t.css("border-bottom-style")&&_(this).addClass("separator-selected")}),a.off("click").on("click",function(){a.removeClass("separator-selected"),_(this).addClass("separator-selected"),t.css("border-bottom-style",_(this).find("hr").attr("data-kind"))});var i=_("#acym__wysid__context__separator__slide"),o=_("#acym__wysid__context__separator__slide__width");i.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==i.css("display")&&t.css("border-bottom-width",_("#sliderOutput2").val()+"px")}),o.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==i.css("display")&&t.css("width",_("#sliderOutput3").val()-5+"%")});var n=_("#acym__wysid__context__separator"),s=_(this),c=s.offset(),l=s.innerHeight(),r=s.innerWidth(),d=n.innerHeight(),m=_("#wpadminbar").innerHeight()+5,y=_("nav.navbar").innerHeight()+5,h=_(window).width(),u=c.top-d<m+y?c.top+l-m+5:c.top-m-d;n.css({display:"inherit",top:u,left:h>800?c.left-_("#adminmenuback").innerWidth()+r/2-n.innerWidth()/2:c.left+r/2-n.innerWidth()/2}),n.unbind("click").click(function(_){_.stopPropagation()}),_(window).off("click").on("click",function(){n.css({display:"none"}),_(window).unbind("click"),b(),W()})}),U()}function k(e,t){var a,i=_(e).html();t=void 0!==t&&t,(a=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var i=a.state().get("selection").first().toJSON(),o=!0;if(i.url.indexOf("..")>=0&&(o=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),o)if(t){var n=_(e).css("padding-top");_(e).hasClass("acym__wysid__template__content")?(_(e).attr("style","background-image: url('"+i.url+"'); background-size: cover; background-position: center top; background-repeat: no-repeat; padding: "+n+" 0 40px 0"),"none"!==_(e).css("background-image")&&_("#acym__wysid__background-image__template-delete").css("display","flex")):_(e).attr("style","background-image: url('"+i.url+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+n+" 0").attr("width",_(e).width()),_.acym_add_notification(ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,"warning",0)}else{var s='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';s+='<td class="large-12 acym__wysid__column__element__td">',s+='<div class="acym__wysid__tinymce--image">',s+='<img class="acym__wysid__media__inserted" src="'+i.url+'" alt="'+i.title+'" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;"/>',s+="</div>",s+="</td>",s+="</tr>",_(e).replaceWith(s),b(),W()}else t||(_(e).replaceWith(""),b(),W())}),a.on("escape",function(){t||(-1!==i.indexOf("insert_photo")&&_(e).replaceWith(""),b(),W())}),a.open()}function x(e,a){a=void 0!==a&&a,t=_(e);var i=_("#acym__wysid__modal__joomla-image__ui__iframe");i.css("height","100%").css("width","100%"),i.contents().find(".chzn-container-single").attr("style","").css("width","150px"),S(i,a),i.on("load",function(){S(i,a)}),_("#acym__wysid__modal__joomla-image").css("display","inherit")}function C(){_(".acym__wysid__set__background-image__rows").off("click").on("click",function(){var e=_(this).closest(".acym__wysid__row__element").find("tbody:first").find("tr:first");"wordpress"===CMS_ACYM?k(e,!0):x(e,!0)}),_(".acym__wysid__delete__background-image__rows").off("click").on("click",function(){_(this).closest(".acym__wysid__row__element").find("tbody:first").find("tr:first").css({background:"none"}),_(this).remove()}),_(".acym__wysid__background-transparent__rows").off("click").on("click",function(){_(this).closest(".acym__wysid__row__element").attr("bgcolor","transparent"),_(this).closest(".acym__wysid__row__element").children("tbody").css("background-color","transparent")})}function A(e){return e.id?_('<span><img src="'+m[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function M(e){return e.id?_('<span><img style="margin-left: 5px" src="'+m[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function S(e,a){e.contents().find(".button-cancel").attr("onclick","").off("click").on("click",function(){_("#acym__wysid__modal__joomla-image").hide(),a||(t.length&&-1!==t.html().indexOf("insert_photo")&&t.replaceWith(""),b(),W(),J())}),e.contents().find(".pull-right .btn-success, .pull-right .btn-primary").attr("onclick","").off("click").on("click",function(){var i=e.contents().find("#f_url").val(),o=e.contents().find("#imageframe").contents().find(".img-preview"),n=!1,s=!0;if(o.each(function(){if(_(this).hasClass("selected")&&(_(this).find(".imgThumbInside img").attr("src").indexOf("..")>=0&&(s=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),s)){if(a){var e=t.css("padding-top");t.hasClass("acym__wysid__template__content")?(t.attr("style","background-image: url('"+_(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0 40px 0"),"none"!==t.css("background-image")&&_("#acym__wysid__background-image__template-delete").css("display","flex")):t.attr("style","background-image: url('"+_(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0").attr("width",t.width()),_.acym_add_notification(ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,"warning",0)}else{var i='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';i+='<td class="large-12 acym__wysid__column__element__td">',i+='<div class="acym__wysid__tinymce--image">',i+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+_(this).find(".imgThumbInside img").attr("src")+'" alt="'+_(this).attr("title")+'"/>',i+="</div>",i+="</td>",i+="</tr>",t.replaceWith(i)}_("#acym__wysid__modal__joomla-image").css("display","none"),b(),W(),n=!0}}),!n&&""!==i){var c='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';return c+='<td class="large-12 acym__wysid__column__element__td">',c+='<div class="acym__wysid__tinymce--image">',c+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+(i=i.match("^images/")?ACYM_JOOMLA_MEDIA_IMAGE+i:i)+'" alt="'+_(this).attr("title")+'"/>',c+="</div>",c+="</td>",c+="</tr>",t.replaceWith(c),_("#acym__wysid__modal__joomla-image").css("display","none"),b(),W(),void(n=!0)}0!=n||1!=s||alert("Please select a picture"),n=!1})}function T(_,e){return void 0!==i[_]&&i[_][e]&&void 0!==i[_][e]?i[_][e]:d[_][e]}function Y(_,e,t){null!=i[_]||(i[_]={}),i[_][e]=t,j()}function O(e){_.each(d[e],function(t){_(".acym__wysid__column__element "+e).css(t,T(e,t))})}function j(){O("p"),O("h1"),O("h2"),O("h3"),O("h4"),O("h5"),O("h6"),_(".acym__wysid__template__content").css("background-color",T("#acym__wysid__background-colorpicker","background-color"))}function E(){var e=_("#acym__wysid__right__toolbar__settings__bold"),t=_("#acym__wysid__right__toolbar__settings__italic"),a=_("#acym__wysid__right__toolbar__settings__font--select").val(),i=_("#acym__wysid .acym__wysid__template__content"),o=_("#acym__wysid__background-image__template-delete");_("#acym__wysid__right__toolbar__settings__font-family").val(T(a,"font-family")).trigger("change"),_("#acym__wysid__right__toolbar__settings__font-size").val(T(a,"font-size")).trigger("change"),e.val("bold"==T(a,"font-weight")?e.addClass("acym__wysid__right__toolbar__settings__bold--selected"):e.removeClass("acym__wysid__right__toolbar__settings__bold--selected")),t.val("italic"==T(a,"font-style")?t.addClass("acym__wysid__right__toolbar__settings__italic--selected"):t.removeClass("acym__wysid__right__toolbar__settings__italic--selected")),R(T(a,"color")),O(a),_("#acym__wysid__background-image__template").off("click").on("click",function(){"wordpress"==CMS_ACYM?k(i,!0):x(i,!0)}),"none"!==i.css("background-image")&&o.css("display","flex"),o.off("click").on("click",function(){i.css("background-image","none"),_(this).hide()});var n=_("#acym__wysid__padding__top__content");n.val(i.css("padding-top").replace(/[^-\d\.]/g,"")),n.off("change").on("change",function(){i.css("padding-top",_(this).val()+"px")})}function D(e){var t="";return _.parsecss(e,function(e){_("#acym__wysid__custom__style").remove();var a=e;for(var i in a){var o=a[i];for(var n in t+="#acym__wysid__template .body "+i+"{",o)t+=n+":"+o[n]+";";t+="} "}}),t}function R(e){var t=_("#acym__wysid__right__toolbar__settings__color"),a=_("#acym__wysid__right__toolbar__settings__font--select").val();t.spectrum({color:""!=e?e:"black",preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(_){Y(a,"color",_.toHexString())},change:function(_){Y(a,"color",_.toHexString())}})}function I(){tinymce.remove("div"),tinymce.init({selector:".acym__wysid__tinymce--text",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code acydtext noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px 12px 14px 18px 20px 24px 28px 30px 34px 36px",toolbar:["undo redo formatselect fontsizeselect | code acydtext","alignleft aligncenter alignright | bold italic | forecolor backcolor | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(_){_.on("click",function(){N()}),_.off("change").on("change",function(_){j()}),_.on("blur",function(_){_.target.startContent!==_.target.bodyElement.innerHTML&&W()})}}),tinyMCE.execCommand("mceAddEditor",!0,""),tinymce.init({selector:".acym__wysid__tinymce--image",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px 12px 14px 18px 20px 24px 28px 30px 34px 36px",toolbar:["alignleft aligncenter alignright | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(_){U(),_.on("click",function(){N()}),_.on("Change",function(){j()})}}),tinyMCE.execCommand("mceAddEditor",!0,"")}function J(){_(".acym__wysid__row").each(function(){0==_(this).children().length?(_(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),p(_("#acym__wysid__row__temp_div")),u(),w(),g(),J()):_(this).css({"min-height":"0",display:"table-cell"})}),_(".acym__wysid__column tbody").each(function(){0==_(this).children().length?_(this).css({"min-height":"75px",display:"block"}).parent().css("min-height","75px").css("display","block"):_(this).css({"min-height":"0px",display:"table-row-group"}).parent().css("min-height","0").css("display","table")})}function L(){_(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){_(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var t=_(this).find("a").attr("href"),a=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getMailContent";a+="&from="+_(this).attr("id"),_.post(a,function(e){return"no_new_editor"==e?(!confirm("If you click on OK all your template information will be erase. Are you sur ?")||(window.location.href=t),!1):(_("#acym__wysid__custom__style").remove(),"error"==e?(alert("There is an error this template can't be add"),!1):(e=JSON.parse(e),_(".acym__wysid__hidden__save__settings").val(null==e.mailSettings||'""'==e.mailSettings?"":JSON.parse(JSON.stringify(e.mailSettings))),_(".acym__wysid__hidden__save__stylesheet").val(null==e.stylesheet||""==e.stylesheet?"":JSON.parse(JSON.stringify(e.stylesheet))),_("#acym__wysid__edit").append(null==e.stylesheet||""==e.stylesheet?"":'<style id="acym__wysid__custom__style">'+D(e.stylesheet)+"</style>"),_(".acym__wysid__hidden__save__content").attr("value",""!=e.content?e.content:"empty").trigger("change"),b(),W(),void _("#acym__template__choose__modal").foundation("close")))})})})}function H(){var e=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=trigger&trigger=displayListing";if(_("#plugin_listing_filters input, #plugin_listing_filters select").each(function(){e+="&"+_(this).attr("name")+"="+_(this).val()}),e+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),e+="&plugin="+_('input[name="plugin"]').val(),void 0!==_selectedRows){var t=[];for(var a in _selectedRows)_selectedRows.hasOwnProperty(a)&&t.push(a);e+="&selected="+t.join(",")}_.post(e,function(e){_("#plugin_listing").html(e),z()})}function z(){_(".acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),_("#acym_pagination__ajax").attr("value",_(this).attr("page")),H()})}function N(){_(".acym__wysid__column__element__td").css({outline:"none"}),_(".acym__wysid__row__element__toolbox__height").remove(),_(".acym__wysid__column__element__toolbox").remove(),_(".acym__wysid__row__element__toolbox__group").remove()}function U(){_(".acym__wysid__tinymce--image img").off("dblclick").on("dblclick",function(){"wordpress"===CMS_ACYM?k(_(this).closest(".acym__wysid__column__element")):x(_(this).closest(".acym__wysid__column__element"))})}function W(e=!1){_("[id^='template_version_']").length>=10&&_("[id^='template_version_']")[0].remove();for(var t=r+1;_("#template_version_"+t).length>0;)_("#template_version_"+t).remove(),t++;r++,_('[name^="mce_"]').remove(),_(".acym__wysid__column--drag-start").removeClass("acym__wysid__column--drag-start"),_(".acym__editor__area").append('<input type="hidden" value="" id="template_version_'+r+'">');var a=_("#acym__wysid__template").html();if(_("#template_version_"+(r-1)).val()===a)return!1;_("#template_version_"+r).val(a);var i="<div id='acym__wysid__template-save' class='cell'>"+a+"</div>",o=_(".acym__wysid__hidden__mailId").val();if(null!=o&&""!=o&&0!=o&&0==e){var n=AJAX_URL_ACYM+"&ctrl=mails&task=autoSave";_.ajax({type:"POST",url:n,data:{autoSave:i,mailId:o},success:function(_){X(_),setTimeout(function(){X("end")},1e3)},error:function(){X("error"),setTimeout(function(){X("end")},1e3)}})}}function X(e){null!=e&&"end"==e?(_(".acym__wysid__autosave__status__success").hide(),_(".acym__wysid__autosave__status__fail").hide()):null!=e&&"saved"==e?(_(".acym__wysid__autosave__status__success").show(),_(".acym__wysid__autosave__status__fail").hide()):(_(".acym__wysid__autosave__status__success").hide(),_(".acym__wysid__autosave__status__fail").show())}!(_("#acym__wysid").length>0)||function(){_("#acym__wysid__right__toolbar__settings__font-family").select2({theme:"foundation",width:"100%"}),_("#acym__wysid__right__toolbar__settings__font-size").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),_("#acym__wysid__right__toolbar__settings__font--select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),i=""==a?{}:JSON.parse(a);var e,c,l=_("#editor_autoSave").val(),d="<div id='acym__wysid__template' class='cell'>"+l+"</div>";null!=l&&""!=l&&(_.acym_confirm(ACYM_JS_TXT.ACYM_AUTOSAVE_USE)?(_(".acym__wysid__hidden__save__content").val(d),_(".acym__wysid #acym__wysid__template").replaceWith(l),_("#acym__wysid__preview__iframe__acym__wysid__email__preview").contents().find("#acym__wysid__template").replaceWith(d)):_(".acym__wysid__hidden__save__content").val("<div id='acym__wysid__template' class='cell'>"+_("#acym__wysid__template").html()+"</div>"),_("#editor_autoSave").val("")),_("#editor_thumbnail").val(""),_("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+D(s)+"</style>"),_.ui.plugin.add("draggable","connectToSortable104",{start:function(e,t,a){var i=_(this).data("ui-draggable"),o=(i.options,_.extend({},t,{item:i.element}));i.sortables=[],_(a.options.connectToSortable104).each(function(){var t=_(this).sortable("instance");t&&!t.options.disabled&&(i.sortables.push({instance:t,shouldRevert:t.options.revert}),t.refreshPositions(),t._trigger("activate",e,o))})},stop:function(e,t,a){var i=_(this).data("ui-draggable"),o=_.extend({},t,{item:i.element});_.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,t,a){var i=_(this).data("ui-draggable"),o=this;_.each(i.sortables,function(){var a=!1,n=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,_.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==n&&this.instance._intersectsWith(this.instance.containerCache)&&_.contains(n.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=_(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return t.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),_(".acym__wysid__column__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__column tbody",revert:function(_){if(!_)return u(),g(),!0},revertDuration:300,start:function(e,t){_(t.helper).css({width:_(this).width()+"px",opacity:1}),_(".acym__wysid__column").addClass("acym__wysid__column--drag-start"),_(".acym__wysid__column__element").unbind("hover"),_(".acym__wysid__row__element").unbind("hover")},stop:function(){_(".acym__wysid__column").removeClass("acym__wysid__column--drag-start")}}),w(),_(".acym__wysid__row__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__row",revert:function(_){if(!_)return u(),g(),!0},revertDuration:300,start:function(e,t){_(t.helper).css({width:_(this).width()+"px",opacity:1}),_(".acym__wysid__column__element").unbind("hover"),_(".acym__wysid__row__element").unbind("hover")}}),u(),f(),_("#acym__wysid__edit__button").off("click").on("click",function(){o=!1,_(".acym__wysid__row__element__toolbox__colorpicker").spectrum("destroy"),_(".sp-container").remove(),_("#acym_header").css("display","none"),_(".acym__content").css("display","none"),_("#acym__wysid").css("display","inherit"),_("#acym__wysid__edit").css("display","none"),_("#acym__wysid__template").replaceWith(_(".acym__wysid__hidden__save__content").val()),a=""!=_(".acym__wysid__hidden__save__settings").val()?_(".acym__wysid__hidden__save__settings").val():"",i=""==a?{}:JSON.parse(a),""!=_(".acym__wysid__hidden__save__stylesheet").val()&&(s=_(".acym__wysid__hidden__save__stylesheet").val(),_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(s)),b(),W(!0)}),_("#acym__wysid__cancel__button").off("click").on("click",function(){o=!0,_("#acym_header").css("display",""),_(".acym__content").css("display",""),_("#acym__wysid").css("display","none"),_("#acym__wysid__edit").css("display",""),_(".acym__wysid__hidden__save__stylesheet").val(s)}),_("#acym__wysid__save__button").off("click").on("click",function(){_("img").each(function(){_(this).attr("width",_(this).width()).attr("height",_(this).height())}),_("[id^='template_version_']").remove(),_("#acym__wysid__template *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&_(this).remove()}),_("#acym__wysid__template").find(".acym__wysid__column__element__td").css("outline-width","0px"),_("#acym__wysid__template").find("[contenteditable]").attr("contenteditable","false"),_("#acym__wysid__template .body").css("height",_("#acym__wysid__template .body").height()),_("#acym__wysid__template a.acym__wysid__column__element__button").each(function(){var e,t,a,i,o,n,s,c,l=(e=_(this),t=parseInt(e.css("border-radius")),a=e.css("border-color"),i=e.css("background-color"),o=e.attr("href"),n='style = "width: '+e.outerWidth()+"; height:"+e.css("height").replace(/[^-\d\.]/g,"")+'"',s="color :"+e.css("color")+"; word-break:"+e.css("word-break")+"; font-family:"+e.css("font-family")+"; font-size:"+e.css("font-size")+";",c=e.html(),"\x3c!--[if mso]><v:roundrect "+n+' xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="'+o+'" style="v-text-anchor:middle;" arcsize="'+t+'%" strokecolor="'+a+'" fillcolor="'+i+'"><w:anchorlock/><center style="'+s+'">'+c+"</center></v:roundrect><![endif]--\x3e\x3c!--[if !mso]> --\x3e");_(this).before(l),_(this).after("\x3c!-- <![endif]--\x3e")}),_(".acym__wysid__hidden__save__stylesheet").val(_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()),_.acym_add_notification(ACYM_JS_TXT.ACYM_TEMPLATE_CHANGED_CLICK_ON_SAVE,"info",1e4),o=!0,_("#acym_header").css("display",""),_(".acym__content").css("display",""),_("#acym__wysid").css("display","none"),_("#acym__wysid__edit").css("display",""),_(".mce-edit-focus").removeClass("mce-edit-focus"),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),_(".acym__wysid__column__element__toolbox__group").remove(),_("#acym__wysid__template").find('[name^="mce_"]').remove(),_(".acym__wysid__hidden__save__content").val("<div id='acym__wysid__template' class='cell'>"+_("#acym__wysid__template").html()+"</div>").trigger("change"),_(".acym__wysid__hidden__save__settings").val(JSON.stringify(i))}),_(".acym__wysid__modal--close").click(function(){_(".acym__wysid__modal").hide(),t.length&&"TR"!=t.prop("tagName")&&t.replaceWith(""),J(),_("#dcontentcode").val("")}),_("#acym__wysid__fullscreen__modal__close").off("click").on("click",function(){_("#acym__wysid__fullscreen__modal").css("display","none")}),"joomla"==CMS_ACYM&&_(".acym__wysid__modal__joomla-image--close").click(function(){_("#acym__wysid__modal__joomla-image").hide(),t.length&&"TR"!=t.prop("tagName")&&t.replaceWith(""),J()}),y(),b(),L(),(e=_("#acym__wysid__modal__dynamic-text__ui__iframe")).on("load",function(){_(this).contents().find("#wpadminbar").remove(),e.contents().find("#insertButton").off("click").on("click",function(){var t=e.contents().find("#dtextcode").val();if(t){if(o){var a=_("#acym_subject_field");a.val(a.val()+t)}else{var i=_('input[name="id"]').val(),n=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=replaceDummy&campaignId="+i+"&code="+encodeURIComponent(t);_.post(n,function(_){_&&0!=_.indexOf("<style")||(_=t),t='<span class="acym_dynamic mceNonEditable" data-dynamic="'+t+'">'+_+'<i class="acym_remove_dynamic material-icons">close</i></span> ',window.getSelection().getRangeAt(0).extractContents(),tinymce.activeEditor.execCommand("mceInsertContent",!1,t),b(),W()})}_("#acym__wysid__modal__dynamic-text").hide()}}),e.contents().find(".acym__dynamics__choose__type__users").off("click").on("click",function(){e.contents().find(".selected-type-dynamics").removeClass("selected-type-dynamics"),_(this).addClass("selected-type-dynamics")})}),_("#acym__wysid__right__toolbar__settings__stylesheet__apply").off("click").on("click",function(){var e=_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val();_(".acym__wysid__hidden__save__stylesheet").val(e),_("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+D(e)+"</style>"),_("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),_("#acym__wysid__right__toolbar__settings__stylesheet__open").on("click",function(){n=_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()}),_("#acym__wysid__right__toolbar__settings__stylesheet__cancel").on("click",function(){_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(n),_("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),_(document).keydown(function(e){if(!(null!==tinyMCE.focusedEditor||_("#acym__wysid__context__button").is(":visible")||_("#acym__wysid__context__follow").is(":visible")||_("#acym__wysid__context__separator").is(":visible")||_("#acym__wysid__context__share").is(":visible")||90!==e.which||!e.ctrlKey&&!e.metaKey||r<=0))if(!e.shiftKey&&_("#template_version_"+(r-1)).length>0){if(0===_("#template_version_"+(r-1)).val().length)return;r--,_("#acym__wysid__template").html(_("#template_version_"+r).val()),0===r&&W(),b()}else if(e.shiftKey&&_("#template_version_"+(r+1)).length>0){if(0===_("#template_version_"+(r+1)).val().length)return;r++,_("#acym__wysid__template").html(_("#template_version_"+r).val()),b()}}),c=_("#acym__wysid__session--lifetime").val(),setTimeout(function(){alert(ACYM_JS_TXT.ACYM_SESSION_IS_GOING_TO_END)},1e3*(c-60)),h=JSON.parse(_("#acym__mail__edit__editor__social__icons").val()),void 0!==h&&(_.each(Object.keys(h),function(_,e){m[e].src=h[e]}),_(".acym__wysid__social__icons__import__text").off("click").on("click",function(){var e=_(this),t=e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input");t.click(),t.off("change").on("change",function(){var t=_(this).val().split("\\").pop();e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find(".acym__wysid__social__icons__import__delete").remove(),void 0===t||""===t?(e.html(ACYM_JS_TXT.ACYM_SELECT_NEW_ICON),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled")):(e.html(t).after('<i class="material-icons cell shrink acym__wysid__social__icons__import__delete cursor-pointer">close</i>'),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").removeAttr("disabled")),_(".acym__wysid__social__icons__import__delete").off("click").on("click",function(){_(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled"),_(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input").val("").trigger("change"),_(this).remove()})})}),_(".acym__wysid__social__icons__import").off("click").on("click",function(){_(this).parent().find(".acym__wysid__social__icons__import__delete").html("").attr("class","fa fa-circle-o-notch fa-spin acym__wysid__social__icons__import__delete").css("color","#303e46");var e=_(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input"),t=e.prop("files")[0],a=new FormData;a.append("file",t);var i=e.attr("name").replace("icon_",""),o=AJAX_URL_ACYM+"&ctrl=mails&task=setNewIconShare&social="+i;_.ajax({url:o,dataType:"text",cache:!1,contentType:!1,processData:!1,data:a,type:"post",success:function(t){var a=_("img").filter('[src^="'+t+'"]');_.each(a,function(e,a){var i=new Date;_(this).removeAttr("src").attr("src",t+"?d="+i.getTime())}),m[i].src=t,e.val("").trigger("change"),_.acym_add_notification(ACYM_JS_TXT.ACYM_ICON_IMPORTED,"success",7e3)}})})),_("#acym_wrapper").keydown(function(_){if(13==_.keyCode&&"TEXTAREA"!=_.target.nodeName)return _.preventDefault(),!1});var h}()});var _selectedRows=[];function setDContent(_){jQuery("#dcontentcode").val(_)}jQuery(document).ready(function(_){var e,t;e=[],t=!1,_(document).on("invalid.zf.abide",function(t,a){_("#formSubmit")[0].disabled=!1;var i=function(_){var e=_.attr("type"),t=_.attr("pattern"),a=_.attr("required"),i=new Array;return null!=a&&i.push(ACYM_JS_TXT.requiredMsg+"."),"email"==e?i.push(ACYM_JS_TXT.email):"text"==e&&(null!=t&&null!=ACYM_JS_TXT[t]?i.push(ACYM_JS_TXT[t]):i.push(ACYM_JS_TXT.defaultMsg)),i.join(" ")}(a);a.after('<div class="acym__input-error"><i class="fa fa-exclamation-circle"></i>'+i+"</div>");var o=_(".acym__input-error");setTimeout(function(){o.remove()},5e3),e=[]}).on("valid.zf.abide",function(t,a){if("email"==a.attr("type")&&""!=a.val())e[0]=null==e[0]?0:e[0],e[0]=null===a.val().match(ACYM_REGEX_EMAIL)||""==a.val()?e[0]+1:0;else if("acym__campaign__sendsettings__send-type-scheduled__date"==a.attr("id")){var i=moment(a.prop("value"),"DD MMM YYYY HH:mm");e[1]=null==e[1]?0:e[1],e[1]=i<moment()?e[1]+1:0,!(i<moment())||_.acym_add_notification("You can't set a sending date in the past","error","5000")}}).on("submit",function(a){e[3]=null==e[3]?0:e[3],_("#acym__users__export").length>0&&"list"===_('input[name="export_users-to-export"]:checked').val()&&"[]"===_("#acym__users__export #acym__modal__lists-selected").val()?(e[3],_.acym_add_notification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error",5e3)):_("#acym__users__export").length>0&&"list"===_('input[name="export_users-to-export"]:checked').val()&&"[]"!==_("#acym__users__export #acym__modal__lists-selected").val()&&(e[3]=0),e.length>0&&_.each(e,function(_,e){e>0&&(t=!0)}),t?(_("#formSubmit")[0].disabled=!1,a.preventDefault(),t=!1):(_("#formSubmit")[0].disabled=!0,t=!1)})}),jQuery(document).ready(function(_){function e(){_("#checkVersionButton").on("click",function(){_("#checkVersionArea").html('<i class="fa fa-circle-o-notch fa-spin"></i>');var e=new XMLHttpRequest;e.open("POST",AJAX_URL_ACYM+"&ctrl=update&tmpl=component&task=checkForNewVersion"),e.onload=function(){response=JSON.parse(e.responseText),_("#checkVersionArea").html(response.content),_("#acym__check__version__last__check").html(response.lastcheck)},e.send()})}_(document).on("click",function(e){var t=_("#acym_global_search");"none"!==t.css("display")&&"acym_global_search"!=_(e.target).get(0).id&&t.toggle("slide",{direction:"right"})}),_("#acym_global_search_button").off("click").on("click",function(e){e.stopPropagation();var t=_("#acym_global_search");t.value||t.toggle("slide",{direction:"right"})}),e(),_("#checkVersionButton").data("checking")&&window.addEventListener("load",function(){e()})}),jQuery(document).ready(function(_){var e;function t(_){0==_.val()?_.addClass("fieldAssignmentError"):_.removeClass("fieldAssignmentError")}(e=_("#acym__users__import__from_file__import__input")).val(null),e.off("change").on("change",function(){var t=_("#acym_form");this.files.length>0&&("text/csv"===this.files[0].type||"application/vnd.ms-excel"===this.files[0].type)&&"csv"===this.files[0].name.substr(this.files[0].name.length-3)&&(_(".acym__users__import__from_file__file-name").html(this.files[0].name),_(".acym__users__import__from_file__file").show(),_(".acym__users__import__from_file__choose").hide(),_(".acym__users__import__from_file__button-valid").removeAttr("disabled"),_(".acym__users__import__from_file__file__close").off("click").on("click",function(){_(".acym__users__import__from_file__file-name").html(""),_(".acym__users__import__from_file__button-valid").prop("disabled",!0),_(".acym__users__import__from_file__file").hide(),_(".acym__users__import__from_file__choose").show(),e.val(null)}),_(".acym__users__import__from_file__button-valid").off("click").on("click",function(){t.find('[name="import_from"]').val("file"),t.submit()}))}),_(".acym__users__import__generic__import__button").off("click").on("click",function(){var e=_("#modal__pagination__create__list").val();""==e||_("#acym__import__new-list").attr("value",e),"no-list"!=_(this).attr("id")||_("#acym__modal__lists-selected").attr("value","")&&_("#acym__import__new-list").attr("value","");var a=!0,i="",o="",n=!1,s="",c=[],l=_("#formSubmit"),r=_("#acym__users__import__from_file__ignore__checkbox").is(":checked"),d=_(".fieldAssignment").length;isNaN(d)&&(d=1);for(var m=0;m<d;m++){var y=_("#fieldAssignment"+m);0==(o=y.val())&&(r?(y.val(1),o=1):(t(y),a=!1,i+="\nAssign the column "+(m+1)+" to a field")),"email"==o&&(n=!0),1!=o&&-1!=c.indexOf(o)?(a=!1,i+='\nDuplicate field "'+o+'" for the column '+(m+1)):c.push(o),s+=","+o}if(n||(a=!1,i+="\nPlease assign a column for the e-mail field"),0==a)return alert("Please fill all information\n"+i),!1;","==s.substr(0,1)&&(s=s.substring(1)),_("#import_columns").val(s),l.click()}),_(".acym__users__import__button").off("click").on("click",function(){_("#acym__import__new-list").attr("value",_("#modal__pagination__create__list").val());var e=_("#acym__users__import__from_database").is(":visible")?_("#submit_import_database"):_("#submit_import_cms");e.click()}),_(".acym__import__submit").on("click",function(){var e=_(this).attr("data-from"),t=_("#acym_form");t.find('[name="import_from"]').val(e),t.find("#formSubmit").click()}),_("#acyencoding").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=ajaxEncoding&encoding="+_(this).val()+"&filename="+_(this).attr("data-filename"),t="",a=_(".fieldAssignment").length;isNaN(a)&&(a=1);for(var i=0;i<a;i++)t+="&fieldAssignment"+i+"="+_("#fieldAssignment"+i).val();e+=t,jQuery.post(e,function(e){_("#acym__users__import__generic__matchdata").html(e)})}),_("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=getColumnsFromTable&tablename="+_(this).val();jQuery.post(e,function(e){_(".acym__users__import__from_database__fields").html(e)})}),_("#acym__users__import__from_database__field--tablename").select2({theme:"foundation",width:"100%"}),_("#acym__users__import__from_database").keydown(function(_){if(13==_.keyCode)return _.preventDefault(),!1})}),jQuery(document).ready(function(_){var e;_("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),(e=_('[name="elements_checked[]"]')).off("change").on("change",function(){var e=_('[name="elements_checked[]"]:checked').length;if(1===e?_(".acym__campaign__duplicate").show():_(".acym__campaign__duplicate").hide(),e>0?_("#select2-listing_actions-container").parent().parent().parent().show():_("#select2-listing_actions-container").parent().parent().parent().hide(),_('[name="elements_checked[]"]:not(:checked)').length>0?_("#checkbox_all").prop("checked",!1):_("#checkbox_all").prop("checked",!0),_("#acym__users").length){var t=_("#acym__users__listing__number_to_export"),a=_("#acym__users__listing__number_to_add_to_list"),i=_("#acym__users__listing__button--add-to-list");0==e?(t.html(t.attr("data-default")),i.addClass("disabled"),a.html(e)):(t.html(e),i.removeClass("disabled"),a.html(e))}}),e.trigger("change"),_("#listing_actions").off("change").on("change",function(){var e=this.value;switch(e){case"delete":var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE;break;case"setActive":var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE;break;case"setInactive":var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE;break;default:var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE}if("duplicate"==e||_.acym_confirm(t)){var a=_(this).closest("#acym_form");a.find('[name="task"]').val(_(this).val()),a.submit()}else _(this).val("0")}),_("#checkbox_all").off("change").on("change",function(){var e=_('[name="elements_checked[]"]');_(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")}),_("#acym__listing__ordering").off("change").on("change",function(){var e=_(this).closest("#acym_form");e.find('[name="task"]').val("listing"),e.submit()}),_(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=_("#acym__listing__ordering__sort-order--input"),t=_(this).closest("#acym_form");"asc"==e.val()?e.val("desc"):e.val("asc"),t.find('[name="task"]').val("listing"),t.submit()})}),jQuery(document).ready(function(_){function e(){_("#acym_pagination__ajax").attr("value",1),t()}function t(){var i=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getTemplateAjax",o=_('[name="return"]');o=o.length>0&&-1!==o.val().indexOf("automation")||_("#acym__automation__actions__json").length>0?"true":"false",i+="&search="+_("#acym_search_template_choose__ajax").val(),i+="&tag="+_("#acym_tag_template_choose__ajax").val(),i+="&type="+_("#acym__type-template").val(),i+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),i+="&editor="+_("#acym__mail__edit__editor").val(),i+="&automation="+o,i+="&inmail="+(_("#editor_autoSave").length>0?"1":"0"),_.post(i,function(i){var o;_(".acym__template__choose__ajax").html(i),o=null,_('input[name="mailchoose_search__ajax"]').off("keyup").on("keyup",function(t){var a=_(this),i=a.val();if((i||8==t.which)&&""!=i&&i.length>=2&&(clearTimeout(o),o=setTimeout(function(){_("#acym_search_template_choose__ajax").attr("value",i),e()},1500)),13==t.which)return clearTimeout(o),_("#acym_search_template_choose__ajax").attr("value",i),e(),!1;8==t.which&&""==a.val()&&(clearTimeout(o),_("#acym_search_template_choose__ajax").attr("value",""),e())}),_("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(t){t.preventDefault(),clearTimeout(o),_("#acym_search_template_choose__ajax").attr("value",_('input[name="mailchoose_search__ajax"]').attr("value")),e()}),_("#mailchoose_tag__ajax").on("change",function(t){_("#acym_tag_template_choose__ajax").attr("value",_(this).attr("value")),e()}),_("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(t){_("#acym__type-template").val(_(this).attr("data-type")),_(".acym__type__choosen").removeClass("is-active"),_(this).addClass("is-active").blur(),e()}),a(),_("#acym__automation__actions").length>0&&_(".acym__templates__oneTpl").off("click").on("click",function(){if(!_.acym_confirm(ACYM_JS_TXT.ACYM_ARE_SURE_DUPLICATE_TEMPLATE))return!1;var e=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=duplicateMailAutomation&id="+_(this).attr("id"),a=_("#acym__template__choose__modal"),i=_('[data-modal-name="'+a.attr("data-button")+'"]').closest(".acym__automation__inserted__action");e+="&previousId="+i.find('[name$="[mail_id]"]').val(),_.get(e,function(e){var o=_.acym_parseJson(e,{error:_.acym_sprintf(ACYM_JS_TXT.ACYM_NOT_FOUND,ACYM_JS_TXT.ACYM_EMAIL)});if(void 0!==o.error)return alert(o.error),!1;i.find(".acym__automation__action__mail__name").html(o.name+'<i class="cursor-pointer material-icons acym__color__red acym__automation__action__reset__mail margin-left-1">close</i>'),i.find('[name$="[mail_id]"]').val(o.id),i.find(".acy_button_submit").html(ACYM_JS_TXT.ACYM_EDIT_MAIL),a.foundation("close"),t(),_.setResetMail()})})})}function a(){_(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),_("#acym_pagination__ajax").attr("value",_(this).attr("page")),t()})}function i(){_(".acym__pagination__page__ajax").off("click").on("click",function(){_("#acym_pagination__ajax").val(_(this).attr("page")),n(),r()})}function o(){var e=_(".modal__pagination__show-selected"),t=_(".modal__pagination__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),_(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),_("#modal__pagination__show-information").attr("value","true"),_("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),_("#modal__pagination__show-information").attr("value","false"),_("#acym_pagination__ajax").attr("value",1)),n()})}function n(){var e=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";e+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),e+="&selectedLists="+_("#acym__modal__lists-selected").val(),e+="&alreadyLists="+_("#acym__user__lists_already_add").val(),e+="&show_selected="+_("#modal__pagination__show-information").val(),e+="&search_lists="+_("#modal__pagination__search__lists").val(),e+=_("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0";var t=_(".modal__pagination__listing__lists__in-form");t.length&&jQuery.post(e,function(e){_("#modal__pagination__search__spinner").hide(),t.html(e),i(),_(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=_(this).next().children("label .modal__pagination__listing__lists__list-name "),t=_("#acym__modal__lists-selected"),a=t.val(),i=[];a=""==a?[]:JSON.parse(a),_(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(_(this).val()),1)),_(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){i.push(_(this).val())}),_.each(i,function(e){-1!=_.inArray(i[e],a)||a.push(i[e])}),t.val(JSON.stringify(a)),_("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),_("#acym__popup__subscription__change").trigger("change")}),o(),s()})}function s(){var e=null,t=_('input[name="modal_search_lists"]'),a=_(".modal__pagination__show"),i=_("#modal__pagination__search__lists");t.off("keydown").on("keydown",function(_){13==_.which&&(_.preventDefault(),c(e))}),t.off("keyup").on("keyup",function(t){var o=_(this),s=o.val();(s||8==t.which)&&""!=s&&s.length>=2?(_("#modal__pagination__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",s),_("#acym_pagination__ajax").attr("value",1),n()},1e3)):clearTimeout(e),""==o.val()&&(clearTimeout(e),a.show(),i.attr("value",""),_("#acym_pagination__ajax").attr("value",1),n())}),_(".modal__pagination__search .acym__search__button").off("click").on("click",function(_){_.preventDefault(),c(e)}),_(".modal__pagination__search .acym__search-clear").off("click").on("click",function(_){_.preventDefault(),clearTimeout(e),i.attr("value",""),t.attr("value",""),a.show(),n()})}function c(e){clearTimeout(e),_(".modal__pagination__show").hide(),_("#acym_pagination__ajax").attr("value",1),_("#modal__pagination__search__lists").attr("value",_('input[name="modal_search_lists"]').attr("value")),n()}function l(){var e=_(".acym__listing__subscribe-to").children(".acym__listing__row");e=e.length;var t=_("#acym__user__edit #tab0-label"),a=_("#acym__user__edit #tab1-label"),i=_("#acym__listing__subscribe-to__count");setTimeout(function(){e<=0?""!=_('input[name="id"]').val()?t.hide()&&i.html("0")&&a.click():t.show()&&a.hide()&&i.html(""+e)&&t.click():t.show()&&i.html(""+e)&&t.click()},5)}function r(){var e=AJAX_URL_ACYM+"&page=acymailing_users&ctrl=users&action=acymailing_router&noheader=1&task=setAjaxListing&usersPerPage=10";e+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),e+="&selectedUsers="+_("#acym__modal__users-selected").val(),e+="&hiddenUsers="+_("#acym__modal__users-hidden").val(),e+="&showSelected="+_("#modal__pagination__users__show-information").val(),e+="&searchUsers="+_("#modal__pagination__users__search__input").val();var t=_(".modal__pagination__users__listing__in-form");t.length&&jQuery.post(e,function(e){_("#modal__pagination__users__search__spinner").hide(),t.html(e),i(),_(".modal__pagination__users__listing__user--checkbox").off("change").on("change",function(){var e=_(this).next().children("label .modal__pagination__users__listing__user-name "),t=_("#acym__modal__users-selected"),a=t.val(),i=[];a=""==a?[]:JSON.parse(a),_(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(_(this).val()),1)),_(".modal__pagination__users__listing__user--checkbox:checked").each(function(){i.push(_(this).val())}),_.each(i,function(e){-1!=_.inArray(i[e],a)||a.push(i[e])}),t.val(JSON.stringify(a))}),d(),m()})}function d(){var e=_(".modal__pagination__users__show-selected"),t=_(".modal__pagination__users__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),_(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),_("#modal__pagination__users__show-information").attr("value","true"),_("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),_("#modal__pagination__users__show-information").attr("value","false"),_("#acym_pagination__ajax").attr("value",1)),r()})}function m(){var e=null,t=_('input[name="modal_search_users"]'),a=_(".modal__pagination__show"),i=_("#modal__pagination__users__search__input");t.off("keydown").on("keydown",function(_){13==_.which&&(_.preventDefault(),y(e))}),t.off("keyup").on("keyup",function(t){var o=_(this).val();(o||8==t.which)&&""!=o&&o.length>=2?(_("#modal__pagination__users__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",o),_("#acym_pagination__ajax").attr("value",1),r()},1e3)):clearTimeout(e),""==o&&(clearTimeout(e),a.show(),i.attr("value",""),_("#acym_pagination__ajax").attr("value",1),r())}),_(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(_){_.preventDefault(),y(e)}),_(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(_){_.preventDefault(),clearTimeout(e),i.attr("value",""),t.attr("value",""),a.show(),r()})}function y(e){clearTimeout(e),_(".modal__pagination__show").hide(),_("#acym_pagination__ajax").attr("value",1),_("#modal__pagination__users__search__input").attr("value",_('input[name="modal_search_users"]').attr("value")),r()}_.Modal=function(){_("[data-iframe]").on("click",function(){var e=_("#"+_(this).attr("data-open")),t=_(this).attr("data-reload"),a=_(this).attr("data-ajax"),i=_(this).attr("data-iframe-class"),o="true"==a?AJAX_URL_ACYM+_(this).attr("data-iframe"):_(this).attr("data-iframe");e.prepend('<iframe src="'+o+'"></iframe>'),void 0!==i&&e.find("iframe").addClass(i),e.find("iframe").on("load",function(){_(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){_(this).siblings("iframe").remove(),t&&location.reload()}),_(".reveal-overlay").on("click",function(){e.find("iframe").remove(),t&&location.reload()})}),o(),_(".modal__pagination__button-open").off("click").on("click",function(){n()}),s(),_("#modal__pagination__confirm").off("click").on("click",function(e){var t=""!=_("#acym__user__lists_already_add").val()?JSON.parse(_("#acym__user__lists_already_add").val()):{},a=""!=_("#acym__modal__lists-selected").val()?JSON.parse(_("#acym__modal__lists-selected").val()):{};if(_.isEmptyObject(a))return alert(_(this).attr("text-empty")),!1;t=t.concat(a),_("#acym__user__lists_already_add").attr("value",JSON.stringify(t));var i=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&task=ajaxGetLists&ids="+a.join(",");jQuery.post(i,function(e){e=JSON.parse(e),_(".acym__users__display__subscriptions--list .acym__listing__subscribe-to").html(e.html),_("#acym__user__edit__add-subscription__modal").foundation("close"),_(".acym__user__action--remove").off("click").on("click",function(){var e=_("#acym__modal__lists-selected"),t=JSON.parse(e.val());t.splice(t.indexOf(_(this).attr("id")),1),e.attr("value",JSON.stringify(t)),_("#acym__user__lists_already_add").val(JSON.stringify(t)),_(this).parent().remove(),l()}),l(),_.acym_add_notification(e.notif,"success",1e4)})}),l(),n(),_(".modal__pagination__users__button-open").off("click").on("click",function(){_("#acym__modal__users-selected").val(""),r()}),r(),d(),m(),_("#modal__pagination__users__confirm").off("click").on("click",function(){$task=_("#acym__modal__users__form-task").val(),_('input[name="task"]').val($task),_("#acym_form").submit()}),_("#acym__modal__lists_import__clear").off("click").on("click",function(){_("#modal__pagination__create__list").val("")})},_.Modal(),_.setResetMail=function(){_(".acym__automation__action__reset__mail").off("click").on("click",function(){var e=_(this).closest(".acym__automation__inserted__action").find('[name$="[mail_id]"]'),a=_(this).parent(),i=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=deleteMailAutomation&id="+e.val();_.get(i,function(_){e.val("").prev().html(ACYM_JS_TXT.ACYM_CREATE_MAIL),a.html(""),t()})})},_.setTemplateModal=function(t){e(),a(),_(".acym__search-clear").off("click").on("click",function(){_('input[name="mailchoose_search__ajax"]').val(""),_("#acym_search_template_choose__ajax").val(""),e()}),_(".acym__templates__filter__tags__ajax").select2({theme:"foundation",width:"100%"}),_("#acym_form").on("keyup keypress",function(_){if(13===(_.keyCode||_.which))return _.preventDefault(),!1}),t&&_('[data-open="acym__template__choose__modal"]').on("click",function(){_("#acym__template__choose__modal").attr("data-button",_(this).attr("data-modal-name"))})}}),jQuery(document).ready(function(_){!function(){_(".acym_tab").off("click").on("click",function(e){if("true"==_(this).attr("data-empty"))return!1;if(_(this).attr("data-dynamics")){var t=AJAX_URL_ACYM+"&ctrl=dynamics&task=trigger&trigger=textPopup&plugin="+_(this).attr("data-dynamics");_.post(t,function(e){_(".tabs-panel.is-active").html(e),_("i.acym_radio_unchecked").on("click",function(){var e=_("#"+_(this).attr("data-radio"));e.click()}),_('input[type="radio"]').on("change",function(){var e=_('input[name="'+_(this).attr("name")+'"]:checked').val();_('input[name="'+_(this).attr("name")+'"]').each(function(){_(this).val()==e?(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').hide(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').show()):(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').show(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').hide())})}).change()})}var a=_(this).closest(".tabs").attr("id");localStorage.setItem("acy"+a,_(this).attr("id"))});var e=_(".tabs").attr("id"),t=localStorage.getItem("acy"+e),a=_("#"+e+" #"+t);a.length?a.click():_("#"+e+" .acym_tab:first").click()}()});