"use strict";var acym_editorWysidColorPicker={setColorPickerForContextModal:function(e,t,i,_,o){e.spectrum({color:_.css(t),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){i.css(o,e.toHexString())},change:function(e){i.css(o,e.toHexString())},containerClassName:"acym__context__color__picker"})},setRowColorPickerWYSID:function(e){jQuery("#acym__wysid__context__block__background-color").spectrum({color:e.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){e.css("background-color",t.toHexString()).attr("bgcolor",t.toHexString()),e.css("background-image","")},change:function(t){e.css("background-color",t.toHexString()).attr("bgcolor",t.toHexString()),e.css("background-image","")}})},setGeneralColorPickerWYSID:function(){var e=jQuery(".acym__wysid__template__content");jQuery("#acym__wysid__background-colorpicker").spectrum({color:e.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(e){acym_editorWysidFontStyle.setSettingsElementStyle("#acym__wysid__background-colorpicker","background-color",e.toHexString())},change:function(e){acym_editorWysidFontStyle.setSettingsElementStyle("#acym__wysid__background-colorpicker","background-color",e.toHexString())}})},setSettingsColorPickerWYSID:function(e){var t=jQuery("#acym__wysid__right__toolbar__settings__color"),i=jQuery("#acym__wysid__right__toolbar__settings__font--select").val();t.spectrum({color:""!=e?e:"black",preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(e){acym_editorWysidFontStyle.setSettingsElementStyle(i,"color",e.toHexString())},change:function(e){acym_editorWysidFontStyle.setSettingsElementStyle(i,"color",e.toHexString())}})}},acym_editorWysidContextModal={clickedOnScrollbar:function(e){var t=jQuery("#acym__wysid__right-toolbar"),i=t.offset(),_=Math.round(i.left);return i.left<=e&&e<=_+t.width()},hideContextModal:function(e,t){e.hide(),jQuery(".acym__wysid__right__toolbar__current-block__empty").show(),void 0!==t&&acym_editorWysidContextModal.isOpeningContextModal(t)||jQuery("#acym__wysid__right__toolbar__design__tab").click()},isOpeningContextModal:function(e){var t=!1;return jQuery.each(["acymailing_content","acym__wysid__tinymce--image","acym__wysid__column__element__separator","acym__wysid__column__element__share","acym__wysid__column__element__follow","acy-editor__space","acym__wysid__column__element__button","acym__wysid__row__selector","acym__wysid__right__toolbar__tabs"],function(i,_){e.closest("."+_).length>0&&(t=!0)}),t},showContextModal:function(e){jQuery(".acym__wysid__context__modal").hide(),jQuery("#acym__wysid__right__toolbar__block__tab").click(),e.show(),jQuery(".acym__wysid__right__toolbar__current-block__empty").hide(),jQuery("#acym__wysid__right__toolbar__current-block").off("mousedown").on("mousedown",function(e){e.stopPropagation()}),acym_editorWysidToolbar.setRightToolbarWYSID()},setBlockContextModalWYSID:function(){jQuery(".acym__wysid__row__selector").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var t="#ffffff";jQuery(".acym__wysid__row__selector--focus").removeClass("acym__wysid__row__selector--focus"),jQuery(".acym__wysid__row__element--focus").removeClass("acym__wysid__row__element--focus");var i=jQuery(this).closest(".acym__wysid__row__element"),_=jQuery(this);_.addClass("acym__wysid__row__selector--focus"),_.closest(".acym__wysid__row__element").addClass("acym__wysid__row__element--focus"),acym_editorWysidColorPicker.setColorPickerForContextModal(jQuery("#acym__wysid__context__block__background-color"),"background-color",i,i,"background-color"),acym_editorWysidColorPicker.setColorPickerForContextModal(jQuery("#acym__wysid__context__block__border__color"),"border-color",i,i,"border-color"),acym_editorWysidColorPicker.setRowColorPickerWYSID(i),acym_editorWysidImage.addBackgroundImgToRows(i),"transparent"===i.css("background-color")&&jQuery(".acym__wysid__context__block__transparent__bg").click(),jQuery('[name="transparent_background"]').next().off("change").on("change",function(){jQuery(this).is(":checked")?(t=i.css("background-color"),i.css("background-color","transparent").attr("bgcolor","transparent")):i.css("background-color",t).attr("bgcolor",t)});var o=jQuery("#acym__wysid__context__block__custom_id");o.val(i.attr("id")),o.off("keyup").on("keyup",function(e){32===e.which&&e.preventDefault(),i.attr("id",jQuery(this).val())}),jQuery("[data-block-padding]").each(function(){jQuery(this).val(i.css("padding-"+jQuery(this).attr("data-block-padding")).replace(/[^-\d\.]/g,"")),jQuery(this).off("change").on("change",function(e){jQuery(this).val()>20&&(jQuery(this).val(20),e.stopPropagation()),i.css("padding-"+jQuery(this).attr("data-block-padding"),jQuery(this).val()+"px"),"top"!==jQuery(this).attr("data-block-padding")&&"bottom"!==jQuery(this).attr("data-block-padding")||_.css("height",i.height()+parseInt(i.css("padding-top").replace(/[^-\d\.]/g,""))+parseInt(i.css("padding-bottom").replace(/[^-\d\.]/g,""))+"px")})}),jQuery(".acym__wysid__context__block__border__actions").each(function(){jQuery(this).val(i.css(jQuery(this).attr("data-css")).replace(/[^-\d\.]/g,"")),jQuery(this).off("change").on("change",function(e){if(jQuery(this).val()>parseInt(jQuery(this).attr("max"))&&(jQuery(this).val(parseInt(jQuery(this).attr("max"))),e.stopPropagation()),i.css(jQuery(this).attr("data-css"),jQuery(this).val()+"px"),"border-width"===jQuery(this).attr("data-css")){i.css("border-style",0===jQuery(this).val()?"none":"solid");var t=jQuery(".acym__wysid__template__content").offset(),o=_.closest(".acym__wysid__row__element").offset(),a=i.height()+parseInt(i.css("padding-top").replace(/[^-\d\.]/g,""))+parseInt(i.css("padding-bottom").replace(/[^-\d\.]/g,""))+2*parseInt(i.css("border-width").replace(/[^-\d\.]/g,""));_.css({left:"-"+(o.left-t.left+parseInt(_.closest(".acym__wysid__row__element").css("border-width").replace(/[^-\d\.]/g,"")))+"px",height:a,top:0-parseInt(i.css("border-width").replace(/[^-\d\.]/g,""))+"px"})}})}),jQuery("#acym__wysid__context__block__edit-html").off("click").on("click",function(){var e=new Event("editor_change"),t=document.getElementById("acym__wysid__block__html__content"),_=i.find("> tbody");_.find(".acym__wysid__element__toolbox").remove(),t.value=_.html(),t.dispatchEvent(e),jQuery("#acym__wysid__editor__source, #acym__wysid__right-toolbar__overlay").addClass("acym__wysid__visible")});var a=jQuery("#acym__wysid__context__block");acym_editorWysidContextModal.showContextModal(a),a.off("mousedown").on("mousedown",function(e){jQuery(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),jQuery(window).off("mousedown").on("mousedown",function(e){if(acym_editorWysidContextModal.clickedOnScrollbar(e.clientX,a))return!0;!jQuery(e.target).hasClass("acym__wysid__row__selector")&&!jQuery(".sp-container").is(":visible")&&!jQuery(e.target).closest("#acym__wysid__editor__source").length>0&&(jQuery("#acym__wysid__editor__source, #acym__wysid__right-toolbar__overlay").removeClass("acym__wysid__visible"),jQuery(".acym__wysid__row__selector--focus").removeClass("acym__wysid__row__selector--focus"),jQuery(".acym__wysid__row__element--focus").removeClass("acym__wysid__row__element--focus"),t="#ffffff",jQuery(this).off("mousedown"),acym_editorWysidContextModal.hideContextModal(a,jQuery(e.target)),jQuery(e.target).parent().hasClass("acym__wysid__tinymce--text")||acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave())})})},setImageContextModal:function(e){e.addClass("acym__wysid__media__inserted--selected");var t=jQuery("#acym__wysid__context__image"),i=jQuery(".acym__wysid__context__image__align"),_=jQuery("#acym__wysid__context__image__link");i.css("background-color","inherit"),jQuery('[data-float="'+jQuery(".acym__wysid__media__inserted--selected").css("float")+'"]').css("background-color",""),i.each(function(){jQuery(this).off("click").on("click",function(){var e=acym_helper.parseJson(jQuery(this).attr("data-css"));jQuery(".acym__wysid__media__inserted--selected").css(e),jQuery(".acym__wysid__context__image__align").css("background-color","inherit"),jQuery(this).css("background-color","")})});var o=jQuery(".acym__wysid__media__inserted--selected").closest(".acym__wysid__link__image");_.val(o.length>0?o.attr("href"):""),jQuery("#acym__wysid__context__image__change").off("click").on("click",function(){acym_editorWysidNewContent.addMediaWysid(jQuery(".acym__wysid__media__inserted--selected").closest(".acym__wysid__column__element"))}),_.off("keyup").on("keyup",function(){var e=jQuery(".acym__wysid__media__inserted--selected").closest(".acym__wysid__link__image");if(e.length>0&&""===jQuery(this).val())e.replaceWith(jQuery(".acym__wysid__media__inserted--selected")[0].outerHTML);else if(0===e.length&&""===jQuery(this).val())return!0;0===e.length?jQuery(".acym__wysid__media__inserted--selected").replaceWith('<a href="'+jQuery(this).val()+'" target="_blank" class="acym__wysid__link__image">'+jQuery(".acym__wysid__media__inserted--selected")[0].outerHTML+"</a>"):e.attr("href",jQuery(this).val())}),acym_editorWysidContextModal.showContextModal(t),t.off("mousedown").on("mousedown",function(e){e.stopPropagation()}),jQuery(window).off("mousedown").on("mousedown",function(i){if(acym_editorWysidContextModal.clickedOnScrollbar(i.clientX,t))return!0;jQuery(".acym__wysid__media__inserted--selected").removeClass("acym__wysid__media__inserted--selected"),jQuery(this).off("mousedown"),(new Date).getTime()<acym_helperEditorWysid.timeClickImage+100&&acym_editorWysidImage.doubleClickImage(e),acym_editorWysidContextModal.hideContextModal(t,jQuery(i.target)),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()})},setButtonContextModalWYSID:function(){jQuery(".acym__wysid__column__element__button").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),jQuery(".acym__context__color__picker").remove(),jQuery(".acym__wysid__column__element__button--focus").removeClass("acym__wysid__column__element__button--focus"),jQuery(this).addClass("acym__wysid__column__element__button--focus");var t=jQuery(this);acym_editorWysidColorPicker.setColorPickerForContextModal(jQuery("#acym__wysid__context__button__background-color"),"background-color",t,t,"background-color"),acym_editorWysidColorPicker.setColorPickerForContextModal(jQuery("#acym__wysid__context__button__border-color"),"border-left-color",t,t,"border-color"),acym_editorWysidColorPicker.setColorPickerForContextModal(jQuery("#acym__wysid__context__button__color"),"color",t,t,"color");var i=jQuery("#acym__wysid__context__button");jQuery("#acym__wysid__context__button__border-radius").val(t.css("border-radius").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){t.css("border-radius",jQuery(this).val()+"px")}),jQuery("#acym__wysid__context__button__border-width").val(t.css("border-left-width").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){t.css("border-width",jQuery(this).val()+"px")}),jQuery("#acym__wysid__context__button__font-family").val(t.css("font-family").replace(/['"]/g,"")).off("change").on("change",function(){t.css("font-family",jQuery(this).val())}),jQuery("#acym__wysid__context__button__font-size").val(t.css("font-size").replace(/[^-\d\.]/g,"")).off("change").on("change",function(){t.css("font-size",jQuery(this).val()+"px")}),jQuery("#acym__wysid__context__button__text").val(t.text()).off("change paste keyup").on("change paste keyup",function(){t.text(jQuery(this).val())}),jQuery("#acym__wysid__context__button__link").val(t.attr("href")).off("change paste keyup").on("change paste keyup",function(){t.attr("href",jQuery(this).val())}),jQuery("#acym__wysid__context__button__bold").css("background-color",700==t.css("font-weight")?"":"inherit").off("click").on("click",function(){700==t.css("font-weight")?jQuery("#acym__wysid__context__button__bold").css("background-color","inherit")&&t.css("font-weight","inherit"):jQuery("#acym__wysid__context__button__bold").css("background-color","")&&t.css("font-weight",700)}),jQuery("#acym__wysid__context__button__italic").css("background-color","italic"==t.css("font-style")?"":"inherit").off("click").on("click",function(){"italic"==t.css("font-style")?jQuery("#acym__wysid__context__button__italic").css("background-color","inherit")&&t.css("font-style","inherit"):jQuery("#acym__wysid__context__button__italic").css("background-color","")&&t.css("font-style","italic")}),jQuery(".acym__wysid__context__button__align").each(function(){jQuery(this).css("background-color","acym__wysid__context__button__align__"+t.closest("div").css("text-align")===jQuery(this).attr("id")?"":"inherit"),jQuery(this).off("click").on("click",function(){t.closest("div").css("text-align",jQuery(this).attr("data-align")),jQuery(".acym__wysid__context__button__align").css("background-color","inherit"),jQuery(this).css("background-color","")})}),jQuery(".acym__button__padding__input").each(function(){jQuery(this).val(t.css(jQuery(this).attr("name")).replace(/[^-\d\.]/g,"")),jQuery(this).off("change").on("change",function(){t.css(jQuery(this).attr("name"),jQuery(this).val()+"px")})}),ACYM_IS_ADMIN&&(jQuery("#acym__wysid__context__button__font-family").select2({theme:"foundation",width:"40%"}),jQuery("#acym__wysid__context__button__font-size").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),jQuery("#acym__wysid__context__button__border-width").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),jQuery("#acym__wysid__context__button__border-radius").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0})),i.find(".switch-input").off("change"),("100%"===document.getElementsByClassName("acym__wysid__column__element__button--focus")[0].style.width&&!i.find(".switch-input").is(":checked")||"100%"!==document.getElementsByClassName("acym__wysid__column__element__button--focus")[0].style.width&&i.find(".switch-input").is(":checked"))&&i.find(".switch-paddle").click(),i.find(".slider-handle").each(function(){var e,i,_;"slider__output__button__width"===jQuery(this).attr("aria-controls")?(e="left",_=90*(i=t.css("padding-right").replace(/[^-\d\.]/g,""))/100,jQuery(this).next().css("width",i+"%")):(e="top",_=77*(i=t.css("padding-top").replace(/[^-\d\.]/g,""))/100,jQuery(this).next().css("height",i+"%")),jQuery(this).css(e,_+"%"),jQuery("#"+jQuery(this).attr("aria-controls")).val(i)}),i.find(".switch-input").on("change",function(){var e,i;jQuery(this).is(":checked")?(e="100%",i="0"):(e="auto",i=jQuery("#slider__output__button__width").val()+"px"),t.css({width:e,"padding-right":i,"padding-left":i})}),jQuery(".acym__wysid__context__button__slider").on("moved.zf.slider",function(){var e=jQuery("#"+jQuery(this).attr("data-output")).val(),i="slider__output__button__width"!==jQuery(this).attr("data-output")?{"padding-top":e+"px","padding-bottom":e+"px"}:{"padding-right":e+"px","padding-left":e+"px"};t.css(i)}),acym_editorWysidContextModal.showContextModal(i),acym_helperTooltip.setTooltip(),i.off("mousedown").on("mousedown",function(e){jQuery(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),jQuery(window).on("mousedown",function(e){jQuery(".sp-container").is(":visible")||acym_editorWysidContextModal.clickedOnScrollbar(e.clientX,i)||(jQuery(this).off("mousedown"),acym_editorWysidContextModal.hideContextModal(i,jQuery(e.target)),jQuery(window).unbind("click"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave())})})},setSpaceContextModalWYSID:function(){jQuery(".acy-editor__space").off("click").on("click",function(e){e.stopPropagation(),jQuery(".acym__context__color__picker").remove();var t=jQuery(this),i=jQuery("#acym__wysid__context__space"),_=i.find(".slider-handle");acym_editorWysidContextModal.showContextModal(i);var o=t.height();_.css("left",o+"%"),i.find(".slider-fill").css("width",o+"%"),jQuery("#sliderOutput1").val(o),jQuery(".acy-editor__space--focus").removeClass("acy-editor__space--focus"),t.addClass("acy-editor__space--focus");var a=jQuery("#acym__wysid__context__space__slider");a.on("moved.zf.slider",function(){jQuery(".acy-editor__space--focus").css("height",jQuery("#sliderOutput1").val()+"px")}),a.on("changed.zf.slider",function(){acym_helperEditorWysid.setColumnRefreshUiWYSID()}),i.off("mousedown").on("mousedown",function(e){jQuery(".acy-editor__space--focus").css("height",jQuery("#sliderOutput1").val()+"px"),e.stopPropagation()}),jQuery(window).on("mousedown",function(e){if(acym_editorWysidContextModal.clickedOnScrollbar(e.clientX,i))return!0;jQuery(".acy-editor__space--focus").css("height",jQuery("#sliderOutput1").val()+"px"),jQuery(this).off("mousedown"),acym_editorWysidContextModal.hideContextModal(i,jQuery(e.target)),jQuery(window).unbind("click"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()})})},setFollowContextModalWYSID:function(){jQuery(".acym__wysid__column__element__follow").off("click").on("click",function(e){e.stopPropagation(),jQuery(".acym__wysid__column__element__follow--focus").removeClass("acym__wysid__column__element__follow--focus"),jQuery(this).addClass("acym__wysid__column__element__follow--focus"),jQuery("#acym__wysid__context__follow__list").empty(),jQuery("#acym__wysid__context__follow__select").html("<option></option>");var t,i=jQuery(".acym__wysid__column__element__follow--focus img").eq(0);if(i.length){var _=i.css("width").replace(/[^-\d\.]/g,"");t=_<=80?_>=30?_:30:80}else t=40;jQuery("#acym__wysid__context__social__width").val(t);for(var o=["facebook","twitter","instagram","linkedin","pinterest","vimeo","wordpress","youtube"],a=jQuery("#acym__wysid__context__follow__select"),s=function(e,t){var i=0;jQuery(".acym__wysid__column__element__follow--focus a").each(function(){if(-1!==jQuery(this).attr("class").indexOf(o[e])){var t=o[e];i=1;var _='<div class="grid-x small-12 cell acym__wysid__context__follow__list__item">';_+='<div class="small-3 cell">',_+='<img style="height: auto;  box-sizing: border-box; width: 42px; padding: 5px; margin-left: 5px" src="'+acym_helperEditorWysid.socialMedia[t].src+'" alt="">',_+="</div>",_+='<div class="small-7 cell">',_+='<div class="input-group small-12 cell">',_+='<input id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+t+'" type="text" placeholder="https://" value="'+jQuery(this).attr("href")+'">',_+="</div>",_+="</div>",_+='<div class="auto cell">',_+='<p class="acym__wysid__context__follow__list__remove acym__wysid__context__follow__list__remove--'+t+'" aria-hidden="true">×</p>',_+="</div>",_+="</div>",jQuery("#acym__wysid__context__follow__list").append(_),jQuery(".acym__wysid__context__follow__list__remove--"+t).off("click").on("click",function(){var e=jQuery(".acym__wysid__column__element__follow--focus");e.find(".acym__wysid__column__element__follow__"+t).remove(),jQuery(this).closest(".acym__wysid__context__follow__list__item").remove(),acym_editorWysidContextModal.setFollowContextModalWYSID(),e.click()}),jQuery(".acym__wysid__context__button__link--"+t).off("change paste keyup").on("change paste keyupe",function(){jQuery(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+t).attr("href",jQuery(this).val())})}}),0==i&&a.append(new Option(ACYM_IS_ADMIN?"":o[e],o[e],!1,!1)).trigger("change")},n=0,r=o.length;n<r;n++)s(n);var c=jQuery(this),l=c.innerWidth(),d=jQuery("#acym__wysid__context__follow");jQuery(".acym__wysid__context__follow__align").each(function(){jQuery(this).css("background-color","acym__wysid__context__follow__align__"+c.css("text-align")===jQuery(this).attr("id")?"":"inherit"),jQuery(this).off("click").on("click",function(){var e=jQuery(this).attr("data-align");c.css("text-align",e),"center"===e?c.find("img").removeAttr("align").removeAttr("hspace"):c.find("img").attr("align",e).attr("hspace","3"),jQuery(".acym__wysid__context__follow__align").css("background-color","inherit"),jQuery(this).css("background-color","")})}),acym_editorWysidContextModal.showContextModal(d),ACYM_IS_ADMIN?(a.select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,width:"50px",templateResult:acym_editorWysidContextModal.getFollowDataFormatWYSID,templateSelection:acym_editorWysidContextModal.getFollowDataFormatWYSID}),a.off("select2:select").on("select2:select",function(e){var t=e.params.data.id;acym_editorWysidContextModal.addContentFollowContext(jQuery(".acym__wysid__column__element__follow--focus"),t)})):a.off("change").on("change",function(){acym_editorWysidContextModal.addContentFollowContext(jQuery(".acym__wysid__column__element__follow--focus"),jQuery(this).val())}),d.off("mousedown").on("mousedown",function(e){e.stopPropagation()}),jQuery(window).on("mousedown",function(e){if(acym_editorWysidContextModal.clickedOnScrollbar(e.clientX,d))return!0;jQuery(this).off("mousedown"),acym_editorWysidContextModal.hideContextModal(d,jQuery(e.target)),jQuery(window).unbind("click"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}),jQuery("#acym__wysid__context__social__width__slider").off("moved.zf.slider").on("moved.zf.slider",function(){l=jQuery("#acym__wysid__context__social__width").val()<=80?jQuery("#acym__wysid__context__social__width").val()>=30?jQuery("#acym__wysid__context__social__width").val():30:80,jQuery(".acym__wysid__column__element__follow--focus img").css("width",l).attr("width",l)})}),jQuery(".acym__wysid__column__element__follow a").unbind("click").click(function(e){e.preventDefault()})},getFollowDataFormatWYSID:function(e){return e.id?jQuery('<span><img src="'+acym_helperEditorWysid.socialMedia[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text},addContentFollowContext:function(e,t){if(""!==t){var i=jQuery("#acym__wysid__context__social__width"),_=i.val()<=80?i.val()>=30?i.val():30:80,o='<a class="acym__wysid__column__element__follow__'+t+'" href="">';o+='<img style="display: inline-block; max-width: 100%; height: auto; box-sizing: border-box; width: '+_+'px; padding: 3px;" src="'+acym_helperEditorWysid.socialMedia[t].src+'" width="'+_+'" alt="">',o+="</a>",e.append(o),acym_editorWysidContextModal.setFollowContextModalWYSID(),e.click()}},setSeparatorContextModalWYSID:function(){jQuery(".acym__wysid__column__element__separator").off("click").on("click",function(e){e.stopPropagation(),jQuery(".acym__context__color__picker").remove();var t=jQuery(this).find("hr:first");jQuery("#sliderOutput2").val(t.css("border-bottom-width").replace(/[^-\d\.]/g,"")),acym_editorWysidColorPicker.setColorPickerForContextModal(jQuery("#acym__wysid__context__separator__color"),"border-bottom-color",t,t,"border-bottom-color");var i=jQuery(".acym__wysid__context__separator__kind");i.removeClass("separator-selected"),i.each(function(){jQuery(this).find("hr").attr("data-kind")==t.css("border-bottom-style")&&jQuery(this).addClass("separator-selected")}),i.off("click").on("click",function(){i.removeClass("separator-selected"),jQuery(this).addClass("separator-selected"),t.css("border-bottom-style",jQuery(this).find("hr").attr("data-kind"))});var _=jQuery("#acym__wysid__context__separator__slide"),o=jQuery("#acym__wysid__context__separator__slide__width"),a=jQuery("#acym__wysid__context__separator__slide__space");_.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==_.css("display")&&t.css("border-bottom-width",jQuery("#sliderOutput2").val()+"px")}),o.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==_.css("display")&&t.css("width",jQuery("#sliderOutput3").val()-5+"%")}),a.off("moved.zf.slider").on("moved.zf.slider",function(){if("none"!==_.css("display")){var e=jQuery("#sliderOutput4").val();t.css("margin-top",e+"px"),t.css("margin-bottom",e+"px")}});var s=jQuery("#acym__wysid__context__separator");acym_editorWysidContextModal.showContextModal(s),s.off("mousedown").on("mousedown",function(e){jQuery(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),jQuery(window).on("mousedown",function(e){jQuery(".sp-container").is(":visible")||clickedOnScrollbar(e.clientX,s)||(jQuery(this).off("mousedown"),hideContextModal(s,jQuery(e.target)),jQuery(window).off("click"),setColumnRefreshUiWYSID(),setUndoAndAutoSave())})})}},acym_editorWysidDragDrop={setNewRowElementDraggableWYSID:function(){jQuery(".acym__wysid__row__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__row",revert:function(e){if(!e)return acym_editorWysidRowSelector.setRowSelector(),!0},revertDuration:300,start:function(e,t){jQuery(t.helper).css({width:jQuery(this).width()+"px",opacity:1}),jQuery(".acym__wysid__column__element").unbind("hover"),jQuery(".acym__wysid__row__element").unbind("hover")}})},setRowElementSortableWYSID:function(){jQuery(".acym__wysid__row").sortable({axis:"y",cursorAt:{top:20},scroll:!1,placeholder:"acym__wysid__row__element--placeholder",handle:".acym__wysid__row__element__toolbox__move",forcePlaceholderSize:!0,tolerance:"intersect",start:function(e,t){jQuery(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),t.helper.first().addClass("acym__wysid__row__element--sortable"),jQuery(t.placeholder).css({height:"75px"}),jQuery(".acym__wysid__column__element").unbind("hover"),jQuery(".acym__wysid__row__element").unbind("hover")},stop:function(e,t){jQuery(".acym__wysid__row__element--sortable").removeClass("acym__wysid__row__element--sortable");var i=t.item;i.hasClass("acym__wysid__row__element--new--1")?acym_editorWysidNewRow.addRow1WYSID(i):i.hasClass("acym__wysid__row__element--new--2")?acym_editorWysidNewRow.addRow2WYSID(i):i.hasClass("acym__wysid__row__element--new--3")?acym_editorWysidNewRow.addRow3WYSID(i):i.hasClass("acym__wysid__row__element--new--4")?acym_editorWysidNewRow.addRow4WYSID(i):i.hasClass("acym__wysid__row__element--new--5")?acym_editorWysidNewRow.addRow5WYSID(i):!i.hasClass("acym__wysid__row__element--new--6")||acym_editorWysidNewRow.addRow6WYSID(i),acym_editorWysidDragDrop.setColumnSortableWYSID(),acym_helperEditorWysid.checkForEmptyTbodyWYSID(),acym_editorWysidRowSelector.setRowSelector()}})},setColumnElementDraggableWYSID:function(){jQuery(".acym__wysid__column__element").draggable({cursor:"move",helper:"clone",revert:"invalid",handle:".acym__wysid__column__element__toolbox__move",cursorAt:{top:20,left:50},connectToSortable:".acym__wysid__column tbody",revertDuration:300,start:function(e,t){t.helper.first().addClass("acym__wysid__column__element--helper"),jQuery(this).addClass("acym__wysid__column__element__original--helper"),jQuery(".acym__wysid__column").addClass("acym__wysid__column--drag-start")},stop:function(){jQuery(".acym__wysid__column__element--helper").removeClass("acym__wysid__column__element--helper"),jQuery(".acym__wysid__column__element__original--helper").removeClass("acym__wysid__column__element__original--helper"),jQuery(".acym__wysid__column").removeClass("acym__wysid__column--drag-start"),jQuery(".acym__wysid__column__element").css({position:"relative",top:"inherit",left:"inherit",right:"inherit",bottom:"inherit",height:"auto"}),acym_editorWysidRowSelector.setRowSelector()}})},setColumnSortableWYSID:function(){jQuery(".acym__wysid__column tbody").sortable({scroll:!1,handle:".acym__wysid__column__element__toolbox__move",placeholder:"acym__wysid__column__element--placeholder",forcePlaceholderSize:!0,cursorAt:{top:20,left:50},stop:function(e,t){var i=jQuery("#acym__wysid__default");i.closest(".columns").height("auto").find("table").height("auto").find("tbody").height("auto"),i.remove(),jQuery(".acym__wysid__column__first").removeClass("acym__wysid__column__first");var _=t.item,o=_.attr("data-plugin");o?(acym_helperEditorWysid.$focusElement=jQuery(_),acym_editorWysidDynammic.openDContentModal(o,acym_helperEditorWysid.$focusElement.attr("data-dynamic"))):_.hasClass("acym__wysid__column__element--new--title")?acym_editorWysidNewContent.addTitleWYSID(_):_.hasClass("acym__wysid__column__element--new--text")?acym_editorWysidNewContent.addTextWYSID(_):_.hasClass("acym__wysid__column__element--new--picture")?acym_editorWysidNewContent.addMediaWysid(_):_.hasClass("acym__wysid__column__element--new--button")?acym_editorWysidNewContent.addButtonWYSID(_):_.hasClass("acym__wysid__column__element--new--follow")?acym_editorWysidNewContent.addFollowWYSID(_):_.hasClass("acym__wysid__column__element--new--share")?acym_editorWysidNewContent.addShareWYSID(_):_.hasClass("acym__wysid__column__element--new--space")?acym_editorWysidNewContent.addSpaceWYSID(_):_.hasClass("acym__wysid__column__element--new--video")?acym_editorWysidNewContent.addVideoWYSID(_):_.hasClass("acym__wysid__column__element--new--separator")&&acym_editorWysidNewContent.addSeparatorWysid(_)},change:function(){acym_helperEditorWysid.checkForEmptyTbodyWYSID()},out:function(){setTimeout(function(){acym_helperEditorWysid.checkForEmptyTbodyWYSID()},1)},receive:function(e,t){t.item.hasClass("acym__wysid__column__element--new")||(t.item.remove(),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave())},start:function(){jQuery(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove()}})},setNewColumnElementDraggableWYSID:function(){jQuery(".acym__wysid__column__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__column > tbody",revert:function(e){if(!e)return acym_editorWysidRowSelector.setRowSelector(),!0},revertDuration:300,start:function(e,t){if(jQuery(t.helper).css({width:jQuery(this).width()+"px",opacity:1}),jQuery(".acym__wysid__column").addClass("acym__wysid__column--drag-start"),jQuery(".acym__wysid__column__element").unbind("hover"),jQuery(".acym__wysid__row__element").unbind("hover"),jQuery("#acym__wysid__default").length){jQuery("#acym__wysid__default__start").hide();var i=jQuery("#acym__wysid__default__dragging");i.closest(".columns").height(),i.show(),i.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(i.height()).find("table").height(i.height()).find("tbody").height(i.height())}},stop:function(){jQuery(".acym__wysid__column").removeClass("acym__wysid__column--drag-start");var e=jQuery("#acym__wysid__default");if(e.length>0){e.find("#acym__wysid__default__start").show(),e.find("#acym__wysid__default__dragging").hide();var t=jQuery("#acym__wysid__default__start");t.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(t.height()).find("table").height(t.height()).find("tbody").height(t.height())}}})},setFixJquerySortableWYSID:function(){jQuery.ui.plugin.add("draggable","connectToSortable104",{start:function(e,t,i){var _=jQuery(this).data("ui-draggable"),o=(_.options,jQuery.extend({},t,{item:_.element}));_.sortables=[],jQuery(i.options.connectToSortable104).each(function(){var t=jQuery(this).sortable("instance");t&&!t.options.disabled&&(_.sortables.push({instance:t,shouldRevert:t.options.revert}),t.refreshPositions(),t._trigger("activate",e,o))})},stop:function(e,t,i){var _=jQuery(this).data("ui-draggable"),o=jQuery.extend({},t,{item:_.element});jQuery.each(_.sortables,function(){this.instance.isOver?(this.instance.isOver=0,_.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===_.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,t,i){var _=jQuery(this).data("ui-draggable"),o=this;jQuery.each(_.sortables,function(){var i=!1,a=this;this.instance.positionAbs=_.positionAbs,this.instance.helperProportions=_.helperProportions,this.instance.offset.click=_.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(i=!0,jQuery.each(_.sortables,function(){return this.instance.positionAbs=_.positionAbs,this.instance.helperProportions=_.helperProportions,this.instance.offset.click=_.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&jQuery.contains(a.instance.element[0],this.instance.element[0])&&(i=!1),i})),i?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=jQuery(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return t.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=_.offset.click.top,this.instance.offset.click.left=_.offset.click.left,this.instance.offset.parent.left-=_.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=_.offset.parent.top-this.instance.offset.parent.top,_._trigger("toSortable",e),_.dropped=this.instance.element,_.currentItem=_.element,this.instance.fromOutside=_),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),_._trigger("fromSortable",e),_.dropped=!1)})}})}},acym_editorWysidDynammic={endDContentInsertion:function(e,t,i,_){var o;if(void 0===e.attr("id")){o="dynamicContent";for(var a=0;jQuery("#"+o+a).length;)a++;o+=a}else o=e.attr("id");t=t.replace(/"/g,'\\"');var s='<span class="acym__tooltip acym__dynamics__preview">'+ACYM_JS_TXT.ACYM_PREVIEW;s+='<span class="acym__tooltip__text wysid_tooltip">'+ACYM_JS_TXT.ACYM_PREVIEW_DESC+"</span>",s+="</span>",0===i.length&&(i='<div class="acym_default_dcontent"><span class="acym_default_dcontent_text">'+ACYM_JS_TXT.ACYM_NO_DCONTENT_TEXT+"</span></div>");var n='<tr id="'+o+'" class="acym__wysid__column__element ui-draggable" data-dynamic="'+t+'" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;" data-plugin="'+_+'">';n+='<td class="large-12 acym__wysid__column__element__td">'+s,n+=i,n+='<div class="plugin_loader" style="display: none;"><i class="fa acymicon-spin acymicon-circle-o-notch">&zwj;</i></div>',n+='<i style="display: none;">&zwj;</i></td></tr>',e.replaceWith(n),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave(!0),acym_helperTooltip.setTooltip(),acym_helperEditorWysid.$focusElement=jQuery("#"+o),acym_helperEditorWysid.$focusElement.find(".plugin_loader").css("display","none")},insertDContent:function(e,t){var i,_;if(void 0!==t?(i=jQuery(t.get(0)),t.splice(0,1),_=i.attr("data-plugin"),e=i.attr("data-dynamic")):(i=acym_helperEditorWysid.$focusElement,_=jQuery("#currentPlugin").val()),0!==e.length){acym_helperEditorWysid.dynamicPreviewIdentifier++;var o=acym_helperEditorWysid.dynamicPreviewIdentifier;i.find(".plugin_loader").css("display","flex");var a=jQuery('input[name="editor_autoSave"]').val(),s=ACYM_AJAX_URL+"&page=acymailing_dynamics&ctrl="+acym_helper.ctrlDynamics+"&task=replaceDummy";jQuery.ajax({url:s,type:"POST",data:{mailId:a,code:e}}).then(function(a){var s;o===acym_helperEditorWysid.dynamicPreviewIdentifier&&(a&&(a=acym_helper.parseJson(a)),s=a.content&&0!==a.content.length?a.content:"",acym_editorWysidDynammic.endDContentInsertion(i,e,s,_),void 0!==t&&t.length>0&&acym_editorWysidDynammic.insertDContent("",t))})}else acym_editorWysidDynammic.endDContentInsertion(i,e,"",_)},openDContentModal:function(e,t){var i=jQuery("#acym__wysid__context__plugins");i.html('<i class="acymicon-circle-o-notch acymicon-spin centered_spinner text-center" style="margin-top: 2rem;"/>'),acym_editorWysidContextModal.showContextModal(i),jQuery(window).on("mousedown",function(e){if(!acym_editorWysidContextModal.clickedOnScrollbar(e.clientX,i)){var t=jQuery(e.target);if(t.closest(".c-scrim").length||t.closest(".c-datepicker--open").length)return!1;if(t.closest("tr[data-plugin]").length)return!1;jQuery(this).off("mousedown"),acym_editorWysidContextModal.hideContextModal(i,t),jQuery(window).unbind("click"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}}),void 0!==t&&t&&t.length||(t="");var _=ACYM_AJAX_URL+"&page=acymailing_lists&action=acymailing_router&noheader=1&ctrl="+acym_helper.ctrlDynamics+"&task=trigger&trigger=insertionOptions&plugin="+e+"&shortcode="+encodeURIComponent(t);jQuery.ajax({url:_,success:function(_){_+='<input type="hidden" id="currentPlugin" name="currentPlugin" value="'+e+'"/>',i.html(_),ACYM_IS_ADMIN&&acym_helperRadio.setRadioIconsGlobal(),acym_editorWysidDynammic.setPluginFilters(),acym_editorWysidDynammic.setPluginPagination(),jQuery(document).foundation(),jQuery(".reveal-overlay").not("#acym_form .reveal-overlay").appendTo("#acym__wysid__context__plugins"),acym_editorWysidDynammic.selectFirstTab(),acym_helperDatePicker.setDatePickerGlobal(),acym_helperTooltip.setTooltip(),acym_helperDatePicker.setRSDateChoice(),acym_editorWysidToolbar.setRightToolbarWYSID(),0===t.length&&acym_editorWysidDynammic.insertDContent("")}})},setPluginFilters:function(){jQuery("#plugin_listing_filters select").off("change").on("change",function(){acym_editorWysidDynammic.setAjaxDynamic()}),jQuery('#plugin_listing_filters input[type="text"]').off("keyup").on("keyup",function(){var e=jQuery(this).val();clearTimeout(acym_helperEditorWysid.typingTimer),e.length>=2?acym_helperEditorWysid.typingTimer=setTimeout(function(){acym_editorWysidDynammic.setAjaxDynamic()},1e3):""==e&&acym_editorWysidDynammic.setAjaxDynamic()}),ACYM_IS_ADMIN&&jQuery("#acym__wysid__context__plugins select").select2({theme:"foundation",width:"120px"})},setAjaxDynamic:function(){var e=ACYM_AJAX_URL+"&page=acymailing_dynamics&ctrl="+acym_helper.ctrlDynamics+"&task=trigger&trigger=displayListing";if(jQuery("#plugin_listing_filters input, #plugin_listing_filters select").each(function(){e+="&"+jQuery(this).attr("name")+"="+jQuery(this).val()}),e+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),e+="&plugin="+jQuery('input[name="plugin"]').val(),void 0!==acym_helperEditorWysid._selectedRows){var t=[];for(var i in acym_helperEditorWysid._selectedRows)acym_helperEditorWysid._selectedRows.hasOwnProperty(i)&&t.push(i);e+="&selected="+t.join(",")}jQuery.post(e,function(e){jQuery("#plugin_listing").html(e),acym_editorWysidDynammic.setPluginPagination()})},setPluginPagination:function(){jQuery(".acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),jQuery("#acym_pagination__ajax").attr("value",jQuery(this).attr("page")),acym_editorWysidDynammic.setAjaxDynamic()}),jQuery("#acym_pagination__ajax").off("change").on("change",function(){acym_editorWysidDynammic.setAjaxDynamic()})},selectFirstTab:function(){jQuery(".tabs").each(function(){var e=jQuery(this).attr("id"),t=localStorage.getItem("acy"+e),i=jQuery("#"+e).find('a[data-tab-identifier="'+t+'"]');if(i.length)i.click();else{var _=jQuery("#"+e).find('a[data-selected="true"]');_.length?_.click():jQuery("#"+e+" .acym_tab:first").click()}})},setDynamicsActions:function(){jQuery(".acym_dynamic").off("click").on("click",function(){var e=window.getSelection(),t=document.createRange();t.selectNode(this),e.removeAllRanges(),e.addRange(t),jQuery("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),jQuery("#acym__wysid__modal__dynamic-text").show()}),jQuery(".acym_remove_dynamic").off("click").on("click",function(){jQuery(this).closest("span").remove(),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}),jQuery("tr[data-dynamic]").off("click").on("click",function(){acym_helperEditorWysid.$focusElement=jQuery(this),acym_editorWysidDynammic.openDContentModal(jQuery(this).attr("data-plugin"),jQuery(this).attr("data-dynamic"))})},setTagPWordBreak:function(){jQuery("#acym__wysid__template").find("p").css("word-break","break-word")},setTagPreInserted:function(){var e=navigator.userAgent;e.toLowerCase().indexOf("chrome")>-1||e.toLowerCase().indexOf("firefox")>-1?(jQuery("p").find("code").css("white-space","pre-wrap"),jQuery("pre").css("white-space","pre-wrap"),jQuery("code").css("white-space","pre-wrap")):e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1?(jQuery("pre").css("word-wrap","break-word"),jQuery("code").css("word-wrap","break-word")):e.toLowerCase().indexOf("opera")>-1&&(jQuery("pre").css("white-space","-o-pre-wrap"),jQuery("code").css("white-space","-o-pre-wrap"))}},acym_editorWysidFontStyle={setAllHtmlElementStyleWYSID:function(){acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("p"),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("h1"),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("h2"),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("h3"),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("h4"),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("h5"),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID("h6"),jQuery(".acym__wysid__template__content").css("background-color",acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID("#acym__wysid__background-colorpicker","background-color"))},setAllSettingsOfHtmlElementWYSID:function(e){jQuery.each(acym_helperEditorWysid.defaultMailsSettings[e],function(t){jQuery(".acym__wysid__column__element "+e).css(t,acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(e,t))})},getSettingsOfHtmlElementWYSID:function(e,t){return void 0!==acym_helperEditorWysid.mailsSettings[e]&&acym_helperEditorWysid.mailsSettings[e][t]&&void 0!==acym_helperEditorWysid.mailsSettings[e][t]?acym_helperEditorWysid.mailsSettings[e][t]:acym_helperEditorWysid.defaultMailsSettings[e][t]},setSettingsElementStyle:function(e,t,i){void 0!==acym_helperEditorWysid.mailsSettings[e]||(acym_helperEditorWysid.mailsSettings[e]={}),acym_helperEditorWysid.mailsSettings[e][t]=i,acym_editorWysidFontStyle.setAllHtmlElementStyleWYSID()},setSettingsWYSID:function(){var e=jQuery("#acym__wysid__right__toolbar__settings__bold"),t=jQuery("#acym__wysid__right__toolbar__settings__italic"),i=jQuery("#acym__wysid__right__toolbar__settings__font--select").val(),_=jQuery("#acym__wysid .acym__wysid__template__content"),o=jQuery("#acym__wysid__background-image__template-delete");jQuery("#acym__wysid__right__toolbar__settings__font-family").val(acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(i,"font-family")).trigger("change"),jQuery("#acym__wysid__right__toolbar__settings__font-size").val(acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(i,"font-size")).trigger("change"),e.val("bold"==acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(i,"font-weight")?e.addClass("acym__wysid__right__toolbar__settings__bold--selected"):e.removeClass("acym__wysid__right__toolbar__settings__bold--selected")),t.val("italic"==acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(i,"font-style")?t.addClass("acym__wysid__right__toolbar__settings__italic--selected"):t.removeClass("acym__wysid__right__toolbar__settings__italic--selected")),acym_editorWysidColorPicker.setSettingsColorPickerWYSID(acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(i,"color")),acym_editorWysidFontStyle.setAllSettingsOfHtmlElementWYSID(i),jQuery("#acym__wysid__background-image__template").off("click").on("click",function(){acym_editorWysidNewContent.addMediaWysid(_,!0)}),"none"!==_.css("background-image")&&o.css("display","flex"),o.off("click").on("click",function(){_.css("background-image","none"),jQuery(this).hide()});var a=jQuery("#acym__wysid__padding__top__content");a.val(_.css("padding-top").replace(/[^-\d\.]/g,"")),a.off("change").on("change",function(){_.css("padding-top",jQuery(this).val()+"px")})},setSettingsControlsWYSID:function(){var e=jQuery("#acym__wysid__right__toolbar__settings__bold"),t=jQuery("#acym__wysid__right__toolbar__settings__italic"),i=jQuery("#acym__wysid__right__toolbar__settings__font--select");i.on("change",function(){acym_editorWysidFontStyle.setSettingsWYSID()}),jQuery("#acym__wysid__right__toolbar__settings__font-family").on("change",function(){acym_editorWysidFontStyle.setSettingsElementStyle(jQuery("#acym__wysid__right__toolbar__settings__font--select").val(),"font-family",jQuery(this).val())}),jQuery("#acym__wysid__right__toolbar__settings__font-size").on("change",function(){acym_editorWysidFontStyle.setSettingsElementStyle(jQuery("#acym__wysid__right__toolbar__settings__font--select").val(),"font-size",jQuery(this).val())}),e.off("click").on("click",function(){e.hasClass("acym__wysid__right__toolbar__settings__bold--selected")?e.removeClass("acym__wysid__right__toolbar__settings__bold--selected")&&acym_editorWysidFontStyle.setSettingsElementStyle(i.val(),"font-weight","normal"):e.addClass("acym__wysid__right__toolbar__settings__bold--selected")&&acym_editorWysidFontStyle.setSettingsElementStyle(i.val(),"font-weight","bold")}),t.off("click").on("click",function(){t.hasClass("acym__wysid__right__toolbar__settings__italic--selected")?t.removeClass("acym__wysid__right__toolbar__settings__italic--selected")&&acym_editorWysidFontStyle.setSettingsElementStyle(i.val(),"font-style","normal"):t.addClass("acym__wysid__right__toolbar__settings__italic--selected")&&acym_editorWysidFontStyle.setSettingsElementStyle(i.val(),"font-style","italic")})},setApplyStylesheetSettings:function(){jQuery("#acym__wysid__right__toolbar__settings__stylesheet__apply").off("click").on("click",function(){var e=jQuery("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val();jQuery(".acym__wysid__hidden__save__stylesheet").val(e),jQuery("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+acym_helperEditorWysid.parseTextToCss(e)+"</style>"),jQuery("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")})},setOpenStylesheet:function(){jQuery("#acym__wysid__right__toolbar__settings__stylesheet__open").on("click",function(){acym_helperEditorWysid.stylesheetTemp=jQuery("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()})},setCancelStylesheet:function(){jQuery("#acym__wysid__right__toolbar__settings__stylesheet__cancel").on("click",function(){jQuery("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(acym_helperEditorWysid.stylesheetTemp),jQuery("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")})},setSocialIconImport:function(){var e=JSON.parse(jQuery("#acym__mail__edit__editor__social__icons").val());void 0!==e&&(jQuery.each(Object.keys(e),function(t,i){acym_helperEditorWysid.socialMedia[i].src=e[i]}),jQuery(".acym__wysid__social__icons__import__text").off("click").on("click",function(){var e=jQuery(this),t=e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input");t.click(),t.off("change").on("change",function(){var t=jQuery(this).val().split("\\").pop();e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find(".acym__wysid__social__icons__import__delete").remove(),void 0===t||""===t?(e.html(ACYM_JS_TXT.ACYM_SELECT_NEW_ICON),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled")):(e.html(t).after('<i class="acymicon-close cell shrink acym__wysid__social__icons__import__delete cursor-pointer"></i>'),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").removeAttr("disabled")),jQuery(".acym__wysid__social__icons__import__delete").off("click").on("click",function(){jQuery(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled"),jQuery(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input").val("").trigger("change"),jQuery(this).remove()})})}),jQuery(".acym__wysid__social__icons__import").off("click").on("click",function(){jQuery(this).closest("div").find(".acym__wysid__social__icons__import__delete").html("").attr("class","acymicon-circle-o-notch acymicon-spin acym__wysid__social__icons__import__delete").css("color","#303e46");var e=jQuery(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input"),t=e.prop("files")[0],i=new FormData;i.append("file",t);var _=e.attr("name").replace("icon_",""),o=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlMails+"&task=setNewIconShare&social="+_;jQuery.ajax({url:o,dataType:"text",cache:!1,contentType:!1,processData:!1,data:i,type:"post",success:function(t){if(void 0!==(t=acym_helper.parseJson(t)).url){var i=jQuery("img").filter('[src^="'+t.url+'"]'),o=t.url+"."+t.extension;jQuery.each(i,function(){var e=new Date;jQuery(this).removeAttr("src").attr("src",o+"?d="+e.getTime())}),acym_helperEditorWysid.socialMedia[_].src=o,e.val("").trigger("change"),acym_editorWysidNotifications.addEditorNotification({message:ACYM_JS_TXT.ACYM_ICON_IMPORTED,level:"success"})}}})}))}},acym_editorWysidFormAction={saveAjaxMail:function(e,t){var i=jQuery('[name="mail[name]"]'),_=jQuery('[name="mail[subject]"]');return""===_.val()&&_.val(ACYM_JS_TXT.ACYM_EMAIL_SUBJECT),""===i.val()&&i.val(-1!==e.indexOf("campaigns")?ACYM_JS_TXT.ACYM_CAMPAIGN_NAME:ACYM_JS_TXT.ACYM_TEMPLATE_NAME),-1!==e.indexOf("mails")?jQuery.when(acym_helperThumbnail.setAjaxSaveThumbnail()).done(function(){return acym_editorWysidFormAction._ajaxCall(e,t)}):acym_editorWysidFormAction._ajaxCall(e,t)},saveTemplate:function(e){var t=jQuery("#acym__wysid__template");return t.css({overflow:"hidden","overflow-y":"auto"}),jQuery(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),jQuery("img").each(function(){var e=jQuery(this).width(),t=jQuery(this).outerWidth();jQuery(this).attr("width",e).attr("height",jQuery(this).height()).css("width",t)}),jQuery('[id^="template_version_"]').remove(),jQuery("#acym__wysid__template *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&jQuery(this).remove()}),t.find(".acym__wysid__column__element__td").css("outline-width","0px"),t.find("[contenteditable]").attr("contenteditable","false"),jQuery("#acym__wysid__template a.acym__wysid__column__element__button").each(function(){var e=acym_editorWysidOutlook.setButtonOutlook(jQuery(this));jQuery(this).before(e),jQuery(this).after("\x3c!-- <![endif]--\x3e")}),jQuery("#acym__wysid__template .acym__wysid__row__element").each(function(){""!==jQuery(this).css("background-image")&&"none"!==jQuery(this).css("background-image")&&acym_editorWysidOutlook.setBackgroundOutlook(jQuery(this))}),jQuery(".acym__wysid__hidden__save__stylesheet").val(jQuery("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()),e||(acym_helperEditorWysid.insertDTextInSubject=!0,jQuery("#acym_header").css("display",""),jQuery(".acym__content").css("display",""),jQuery("#acym__wysid").css("display","none"),jQuery("#acym__wysid__edit").css("display",""),jQuery(".mce-edit-focus").removeClass("mce-edit-focus"),t.find('[name^="mce_"]').remove(),t.find("#acym__wysid__default").remove()),jQuery(".acym__wysid__hidden__save__content").val('<div id="acym__wysid__template" class="cell">'+t.html()+"</div>").trigger("change"),jQuery(".acym__wysid__hidden__save__settings").val(JSON.stringify(acym_helperEditorWysid.mailsSettings)),acym_editorWysidFormAction.saveAjaxMail(jQuery('[name="ctrl"]').val(),e)},_ajaxCall:function(e,t){jQuery('input[name="task"]').val("saveAjax");var i=ACYM_AJAX_URL+"&ctrl="+e;return jQuery.ajax({type:"POST",url:i,data:jQuery("#acym_form").serialize()}).done(function(i){""!==(i=acym_helper.parseJson(i)).error?acym_helperNotification.addNotification(i.error,"error"):(jQuery("mail"===e?'[name="id"]':'[name="id"], [name="mail[id]"]').val(i.data),t&&acym_editorWysidTest.sendTest(i.data)),jQuery("#acym__wysid__save__button").removeAttr("disabled")}).fail(function(e,t){alert("Request failed: "+t)})},setSaveButtonWYSID:function(){jQuery("#acym__wysid__save__button").off("click").on("click",function(){acym_editorWysidFormAction.setThumbnailPreSave().then(function(e){jQuery("#editor_thumbnail").attr("value",e),acym_editorWysidFormAction.saveTemplate(!1)}).catch(function(e){acym_editorWysidFormAction.saveTemplate(!1),console.error("Error generating template thumbnail: "+e)})})},setThumbnailPreSave:function(){jQuery("#acym__wysid__template").css({overflow:"unset","overflow-y":"unset"});var e=document.getElementById("acym__wysid__template");return domtoimage.toPng(e)},setEditButtonWYSID:function(){jQuery("#acym__wysid__edit__button").off("click").on("click",function(){"none"!==jQuery("#acym__wysid .acym__wysid__template__content").css("background-image")&&jQuery("#acym__wysid__background-image__template-delete").hide(),acym_helperEditorWysid.insertDTextInSubject=!1,jQuery(".acym__wysid__row__element__toolbox__colorpicker").spectrum("destroy"),jQuery(".sp-container").remove(),jQuery("#acym_header").css("display","none"),jQuery(".acym__content").css("display","none"),jQuery("#acym__wysid").css("display","inherit"),jQuery("#acym__wysid__edit").css("display","none"),""!==jQuery(".acym__wysid__hidden__save__content").val()&&jQuery("#acym__wysid__template").replaceWith(jQuery(".acym__wysid__hidden__save__content").val()),acym_helperEditorWysid.saveSettings=""!=jQuery(".acym__wysid__hidden__save__settings").val()?jQuery(".acym__wysid__hidden__save__settings").val():"",acym_helperEditorWysid.mailsSettings=""==acym_helperEditorWysid.saveSettings?{}:JSON.parse(acym_helperEditorWysid.saveSettings),""!=jQuery(".acym__wysid__hidden__save__stylesheet").val()&&(acym_helperEditorWysid.savedStylesheet=jQuery(".acym__wysid__hidden__save__stylesheet").val(),jQuery("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(acym_helperEditorWysid.savedStylesheet));var e=jQuery("#acym__wysid #acym__wysid__template img"),t=e.length;if(t>0){var i=0;e.load(function(){t===++i&&acym_editorWysidRowSelector.setRowSelector()})}else acym_editorWysidRowSelector.setRowSelector();acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave(!0);var _=jQuery("tr[data-dynamic]");_.length>0&&acym_editorWysidDynammic.insertDContent("",_)})},setCancelButtonWYSID:function(){jQuery("#acym__wysid__cancel__button").off("click").on("click",function(){acym_helperEditorWysid.insertDTextInSubject=!0,jQuery("#acym_header").css("display",""),jQuery(".acym__content").css("display",""),jQuery("#acym__wysid").css("display","none"),jQuery("#acym__wysid__edit").css("display",""),jQuery(".acym__wysid__hidden__save__stylesheet").val(acym_helperEditorWysid.savedStylesheet)})}},acym_editorWysidImage={setDoubleClickImage:function(){jQuery(".acym__wysid__tinymce--image img").off("dblclick").on("dblclick",function(){acym_editorWysidImage.doubleClickImage(jQuery(this))})},doubleClickImage:function(e){acym_editorWysidNewContent.addMediaWysid(e.closest(".acym__wysid__column__element"))},addBackgroundImgToRows:function(e){var t=jQuery("#acym__wysid__context__block__background-image__remove");"none"!==e.css("background-image")?t.show():t.hide(),jQuery("#acym__wysid__context__block__background-image").off("click").on("click",function(){acym_editorWysidNewContent.addMediaWysid(e,!0)}),t.off("click").on("click",function(){e.css({"background-image":"none"}),jQuery(this).hide()})},setImageWidthHeightOnInsert:function(){jQuery(".acym__wysid__media__inserted").length>0&&setTimeout(function(){var e=jQuery(".acym__wysid__media__inserted");e.attr("height",e.height()).attr("width",e.width())},200)}},acym_editorWysidJoomla={addMediaJoomlaWYSID:function(e,t){t=void 0!==t&&t,acym_helperEditorWysid.$focusElement=jQuery(e);var i=jQuery("#acym__wysid__modal__joomla-image__ui__iframe");i.css("height","100%").css("width","100%"),i.contents().find(".chzn-container-single").attr("style","").css("width","150px"),acym_editorWysidJoomla.setInsertMediaJoomlaWYSID(i,t),i.on("load",function(){acym_editorWysidJoomla.setInsertMediaJoomlaWYSID(i,t)}),jQuery("#acym__wysid__modal__joomla-image").css("display","inherit")},setInsertMediaJoomlaWYSID:function(e,t){e.contents().find(".button-cancel").attr("onclick","").off("click").on("click",function(){jQuery("#acym__wysid__modal__joomla-image").hide(),t||(acym_helperEditorWysid.$focusElement.length&&-1!==acym_helperEditorWysid.$focusElement.html().indexOf("insert_photo")&&acym_helperEditorWysid.$focusElement.replaceWith(""),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.checkForEmptyTbodyWYSID())}),e.contents().find(".pull-right .btn-success, .pull-right .btn-primary").attr("onclick","").off("click").on("click",function(){var i=e.contents().find("#f_url").val(),_=e.contents().find("#f_alt"),o=e.contents().find("#f_title"),a=e.contents().find("#imageframe").contents().find(".img-preview"),s=!1,n=!0;if(a.each(function(){if(jQuery(this).hasClass("selected")&&(jQuery(this).find(".imgThumbInside img").attr("src").indexOf("..")>=0&&(n=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),n)){if(t){var e=acym_helperEditorWysid.$focusElement.css("padding-top");acym_helperEditorWysid.$focusElement.hasClass("acym__wysid__template__content")?(acym_helperEditorWysid.$focusElement.attr("style","background-image: url('"+jQuery(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0 40px 0"),"none"!==acym_helperEditorWysid.$focusElement.css("background-image")&&jQuery("#acym__wysid__background-image__template-delete").css("display","flex")):(acym_helperEditorWysid.$focusElement.css("background-color","").attr("bgcolor",""),acym_helperEditorWysid.$focusElement.attr("style","background-image: url('"+jQuery(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0").attr("width",acym_helperEditorWysid.$focusElement.width())),acym_editorWysidNotifications.addEditorNotification({message:ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,level:"warning"})}else{var i="",a="";void 0!==_.val()&&(i=_.val()),void 0!==o.val()&&(a=o.val());var r='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';r+='<td class="large-12 acym__wysid__column__element__td">',r+='<div class="acym__wysid__tinymce--image">',r+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+jQuery(this).find(".imgThumbInside img").attr("src")+'" alt="'+acym_helper.escape(i)+'" title="'+acym_helper.escape(a)+'"/>',r+="</div>",r+="</td>",r+="</tr>",acym_helperEditorWysid.$focusElement.replaceWith(r)}jQuery("#acym__wysid__modal__joomla-image").css("display","none"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave(),s=!0}}),!s&&""!==i){var r='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';return r+='<td class="large-12 acym__wysid__column__element__td">',r+='<div class="acym__wysid__tinymce--image">',r+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+(i=i.match("^images/")?ACYM_JOOMLA_MEDIA_IMAGE+i:i)+'" alt="'+jQuery(this).attr("title")+'"/>',r+="</div>",r+="</td>",r+="</tr>",acym_helperEditorWysid.$focusElement.replaceWith(r),jQuery("#acym__wysid__modal__joomla-image").css("display","none"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave(),void(s=!0)}0!=s||1!=n||alert("Please select a picture"),s=!1})}},acym_editorWysidModal={setModalWindowWYSID:function(){jQuery(".acym__wysid__modal--close").click(function(){jQuery(".acym__wysid__modal").hide(),acym_helperEditorWysid.$focusElement.length&&"TR"!=acym_helperEditorWysid.$focusElement.prop("tagName")&&acym_helperEditorWysid.$focusElement.replaceWith(""),acym_helperEditorWysid.checkForEmptyTbodyWYSID()}),jQuery("#acym__wysid__fullscreen__modal__close").off("click").on("click",function(){acym_helperEditorWysid.setColumnRefreshUiWYSID(),jQuery("#acym__wysid__fullscreen__modal").css("display","none")}),"joomla"==CMS_ACYM&&jQuery(".acym__wysid__modal__joomla-image--close").click(function(){jQuery("#acym__wysid__modal__joomla-image").hide(),acym_helperEditorWysid.$focusElement.length&&"TR"!=acym_helperEditorWysid.$focusElement.prop("tagName")&&!acym_helperEditorWysid.$focusElement.hasClass("acym__wysid__template__content")&&acym_helperEditorWysid.$focusElement.replaceWith(""),acym_helperEditorWysid.checkForEmptyTbodyWYSID()})},setSelectOneTemplate:function(){jQuery(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){jQuery(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).find("a").attr("href"),i=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=getMailContent&from="+jQuery(this).attr("id");jQuery.post(i,function(e){return"error"==e?(alert(ACYM_JS_TXT.ACYM_ERROR),!1):(window.location.href=t,!1)})})})},setDynamicsModal:function(){var e=jQuery("#acym__wysid__modal__dynamic-text__ui__iframe");e.on("load",function(){jQuery(this).contents().find("#wpadminbar").remove(),e.contents().find("#insertButton").off("click").on("click",function(){var t=e.contents().find("#dtextcode").val();if(t){if(acym_helperEditorWysid.insertDTextInSubject){var i=jQuery("#acym_subject_field");i.val(i.val()+t)}else{var _=jQuery('input[name="editor_autoSave"]').val(),o=ACYM_AJAX_URL+"&page=acymailing_dynamics&ctrl="+acym_helper.ctrlDynamics+"&task=replaceDummy";jQuery.ajax({url:o,type:"POST",data:{mailId:_,code:t}}).then(function(e){e=e?acym_helper.parseJson(e):{content:t},t='<span class="acym_dynamic mceNonEditable" data-dynamic="'+t+'">'+e.content+'<i class="acym_remove_dynamic acymicon-close">&zwj;</i></span> ',window.getSelection().getRangeAt(0).extractContents(),tinymce.activeEditor.execCommand("mceInsertContent",!1,t),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()})}jQuery("#acym__wysid__modal__dynamic-text").hide()}})})}},acym_editorWysidNewContent={addTitleWYSID:function(e){jQuery(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><h1>Title</h1></div></td></tr>'),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},addTextWYSID:function(e){jQuery(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p></div></td></tr>'),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},addMediaWysid:function(e,t){"wordpress"===CMS_ACYM?acym_editorWysidWordpress.addMediaWPWYSID(e,t):acym_editorWysidJoomla.addMediaJoomlaWYSID(e,t)},addButtonWYSID:function(e){jQuery(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div style="text-align: center;box-sizing: inherit;"><a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 1; border-radius: 0" href="#">Button</a></div></td></tr>'),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},addFollowWYSID:function(e){var t='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';t+='<td class="large-12 acym__wysid__column__element__td">',t+='<div style="text-align: center;">',t+='<p class="acym__wysid__column__element__follow" style="text-align: center; cursor: pointer; padding: 0;margin: 0;">',t+='<a class="acym__wysid__column__element__follow__facebook" href="">',t+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+acym_helperEditorWysid.socialMedia.facebook.src+'" width="40" alt="facebook">',t+="</a>",t+='<a class="acym__wysid__column__element__follow__twitter" href="">',t+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+acym_helperEditorWysid.socialMedia.twitter.src+'"  width="40" alt="twitter">',t+="</a>",t+="</p>",t+="</div>",t+="</td>",t+="</tr>",jQuery(e).replaceWith(t),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},addSpaceWYSID:function(e){jQuery(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span></td></tr>'),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},addVideoWYSID:function(e){acym_helperEditorWysid.$focusElement=jQuery(e),acym_editorWysidNewContent.setModalVideoWYSID(),jQuery("#acym__wysid__modal").css("display","inherit"),acym_helperEditorWysid.setColumnRefreshUiWYSID()},addSeparatorWysid:function(e){jQuery(e).replaceWith('<tr class="acym__wysid__column__element acym__wysid__column__element__separator cursor-pointer" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator"></td></tr>'),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},addShareWYSID:function(e){var t='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';t+='<td class="large-12 acym__wysid__column__element__td">',t+='<div class="acym__wysid__column__element__share acym__wysid__column__element__share--add acy" style="text-align: center; margin-top: 10px; margin-bottom: 10px;">',t+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__facebook" href="'+acym_helperEditorWysid.socialMedia.facebook.link+'">',t+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+acym_helperEditorWysid.socialMedia.facebook.src+'" alt="'+acym_helperEditorWysid.socialMedia.facebook.src+'">',t+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+acym_helperEditorWysid.socialMedia.facebook.text+"</span>",t+="</a>",t+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__twitter" href="'+acym_helperEditorWysid.socialMedia.twitter.link+'">',t+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+acym_helperEditorWysid.socialMedia.twitter.src+'" alt="'+acym_helperEditorWysid.socialMedia.twitter.src+'">',t+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+acym_helperEditorWysid.socialMedia.twitter.text+"</span>",t+="</a>",t+="</div>",t+="</td>",t+="</tr>",jQuery(e).replaceWith(t),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()},setModalVideoWYSID:function(){var e='<div class="grid-container">';e+='<div class="grid-x grid-padding-x grid-padding-y">',e+='<div class="auto cell"></div>',e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/vimeo.png">',e+="</div>",e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/youtube.png">',e+="</div>",e+='<div class="small-4 medium-3 cell" style="display: inline-flex; padding: 15px 0 0 30px;">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/dailymotion.png">',e+="</div>",e+='<div class="auto cell"></div>',e+='<div class="small-8 medium-10 cell">',e+='<input id="acym__wysid__modal__video__search" type="text" placeholder="Url">',e+="</div>",e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__load" class="button primary expanded " href="#">Load</button>',e+="</div>",e+="</div>",e+="</div>",jQuery("#acym__wysid__modal__ui__fields").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div id="acym__wysid__modal__video__result" class="medium-12 cell"></div>',e+="</div>",e+="</div>",jQuery("#acym__wysid__modal__ui__display").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div class="small-8 medium-10 cell"></div>',e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__insert" class="button primary expanded disabled" href="#">Insert</button>',e+="</div>",e+="</div>",e+="</div>",jQuery("#acym__wysid__modal__ui__search").html(e);var t=jQuery("#acym__wysid__modal__video__load"),i=jQuery("#acym__wysid__modal__video__insert"),_=jQuery("#acym__wysid__modal__video__search"),o=jQuery("#acym__wysid__modal__video__result");t.off("click").on("click",function(){var e=_.val();i.unbind("click").click(function(){acym_helperEditorWysid.$focusElement.replaceWith('<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><p>'+o.html()+"</p></div></td></tr>"),acym_editorWysidTinymce.addTinyMceWYSID(),jQuery("#acym__wysid__modal").css("display","none"),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()});var t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),a=e.match(/^(?:(?:http|https):\/\/)?(?:www.)?(dailymotion\.com|dai\.ly)\/((video\/([^_]+))|(hub\/([^_]+)|([^\/_]+)))$/),s=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);null!=t?(o.html('<a href="https://www.youtube.com/watch?v='+t[1]+'"><img alt="" src="https://img.youtube.com/vi/'+t[1]+'/0.jpg" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block;margin-left: auto; margin-right: auto;"/></a>'),i.removeClass("disabled")):null!=a?(null!==a&&(void 0!==a[4]&&o.html('<a href="https://www.dailymotion.com/video/'+a[4]+'"><img alt="" src="https://www.dailymotion.com/thumbnail/video/'+a[4]+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>'),o.html('<a href="https://www.dailymotion.com/video/'+a[2]+'"><img alt="" src="https://www.dailymotion.com/thumbnail/video/'+a[2]+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>')),i.removeClass("disabled")):null!=s?jQuery.ajax({url:"https://www.vimeo.com/api/v2/video/"+s[5]+".json",dataType:"jsonp",success:function(e){o.html('<a href="https://vimeo.com/'+s[5]+'"><img alt="" src="'+e[0].thumbnail_large+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>'),i.removeClass("disabled")}}):(o.html('<div class="acym__wysid__error_msg" style="text-align: center; margin-top: 100px;">'+ACYM_JS_TXT.ACYM_NON_VALID_URL+"</div>"),i.addClass("disabled").off("click")),o.unbind("click").click(function(e){e.preventDefault()})}),_.keyup(function(e){var i=e.which;13==i&&e.preventDefault(),13!=i&&188!=i&&186!=i||t.click()})}},acym_editorWysidNewRow={addRow1WYSID:function(e){jQuery(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-12 large-12 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th></tr></tbody></table>'),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()},addRow2WYSID:function(e){jQuery(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th></tr></tbody></table>'),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()},addRow3WYSID:function(e){jQuery(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th></tr></tbody></table>'),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()},addRow4WYSID:function(e){jQuery(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th></tr></tbody></table>'),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()},addRow5WYSID:function(e){jQuery(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th></tr></tbody></table>'),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()},addRow6WYSID:function(e){jQuery(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);" cellpadding="0"><tbody><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column" border="0" cellpadding="0" cellspacing="0"><tbody></tbody></table></th></tr></tbody></table>'),acym_editorWysidVersioning.setUndoAndAutoSave(),acym_helperEditorWysid.setColumnRefreshUiWYSID()}},acym_editorWysidNotifications={hideNotification:function(){jQuery("#acym__wysid__top-toolbar__notification").removeClass("acym__toolbar__message__visible"),jQuery("#acym__wysid__top-toolbar__notification__message").html(""),jQuery("#acym__wysid__top-toolbar__actions").show(),jQuery("#acym__wysid__top-toolbar__notification__close").show()},addEditorNotification:function(e,t,i){t=void 0!==t&&t,i=void 0!==i&&i;var _="";_="success"===e.level?"acymicon-check-circle":"info"===e.level?"acymicon-bell":"warning"===e.level?"acymicon-exclamation-triangle":"acymicon-exclamation-circle";var o=jQuery("#acym__wysid__top-toolbar"),a=o.find("#acym__wysid__top-toolbar__notification");o.find("#acym__wysid__top-toolbar__actions").hide(),a.addClass("acym__toolbar__message__visible").find("#acym__wysid__top-toolbar__notification__icon").addClass(_),a.find("#acym__wysid__top-toolbar__notification__message").html(e.message),a.find("#acym__wysid__top-toolbar__notification__close").off("click").on("click",function(){acym_editorWysidNotifications.hideNotification()}),i&&a.find("#acym__wysid__top-toolbar__notification__close").hide(),t&&setTimeout(function(){acym_editorWysidNotifications.hideNotification()},t)}},acym_editorWysidOutlook={setButtonOutlook:function(e){var t=parseInt(e.css("border-radius")),i=e.css("border-color"),_=e.css("background-color"),o=e.attr("href");return"\x3c!--[if mso]><v:roundrect "+('style = "width: '+e.outerWidth()+"; height:"+e.css("height").replace(/[^-\d\.]/g,"")+'"')+' xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="'+o+'" style="v-text-anchor:middle;" arcsize="'+t+'%" strokecolor="'+i+'" fillcolor="'+_+'"><w:anchorlock/><center style="'+("color :"+e.css("color")+"; word-break:"+e.css("word-break")+"; font-family:"+e.css("font-family")+"; font-size:"+e.css("font-size")+";")+'">'+e.html()+"</center></v:roundrect><![endif]--\x3e\x3c!--[if !mso]> --\x3e"},setBackgroundOutlook:function(e){var t='\x3c!--[if gte mso 9]><v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width: '+e.width()+"px;height: "+e.height()+'px"><v:fill type="frame" src="'+e.css("background-image")+'" /><v:textbox inset="0,0,0,0"><![endif]--\x3e';t=t.replace('url("',"").replace('")',""),e.prepend(t).append("\x3c!--[if gte mso 9]></v:textbox></v:rect><![endif]--\x3e")}},acym_editorWysidRowSelector={setRowSelector:function(){setTimeout(function(){if(jQuery(".mce-tinymce-inline").is(":visible"))return!0;jQuery(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),jQuery(".acym__wysid__row__element").css("z-index","100").each(function(){var e=jQuery(this).find("> tbody");""!==e.css("background-color")&&void 0!==e.css("background-color")&&"inherit"!==e.css("background-color")&&"rgba(0, 0, 0, 0)"!==e.css("background-color")&&(jQuery(this).css("background-color",e.css("background-color")),e.css("background-color","inherit").attr("bgcolor","")),jQuery(this).prepend('<div class="acym__wysid__row__selector"></div>')});var e=jQuery(".acym__wysid__template__content"),t=e.css("width").replace(/[^-\d\.]/g,""),i=e.offset();jQuery(".acym__wysid__row__selector").each(function(){var e=jQuery(this).closest(".acym__wysid__row__element"),_=e.offset(),o=""===e.css("border-width")?0:parseInt(e.css("border-width").replace(/[^-\d\.]/g,"")),a=""===e.css("padding-bottom")?0:parseInt(e.css("padding-bottom").replace(/[^-\d\.]/g,"")),s=e.height()+parseInt(e.css("padding-top").replace(/[^-\d\.]/g,""))+a+2*o,n="-"+(Math.round(_.left)-Math.round(i.left)+o)+"px";jQuery(this).css({width:t+"px",height:s,left:n,top:0-o+"px"}),jQuery(this).attr("style",jQuery(this).attr("style")+"width: "+t+"px; height: "+s+"px; left: "+n+";top: "+(0-o)+"px");jQuery(this).append('<div  class="acym__wysid__row__toolbox"><i class="acymicon-content_copy acym__wysid__row__toolbox__copy acym__wysid__row__toolbox__actions"></i><i class="acymicon-arrows acym__wysid__row__element__toolbox__move acym__wysid__row__toolbox__actions"></i><i class="acymicon-delete acym__wysid__row__toolbox__actions acym__wysid__row__toolbox__delete__row"></i></div><div class="acym__wysid__row__height__container"><i class="acymicon-code acym__wysid__row__toolbox__height"></i></div>')}),jQuery(".acym__wysid__column__element").each(function(){jQuery(this).append('<div class="acym__wysid__element__toolbox"><i class="acymicon-content_copy acym__wysid__element__toolbox__copy acym__wysid__element__toolbox__actions"></i><i class="acymicon-arrows acym__wysid__column__element__toolbox__move acym__wysid__element__toolbox__actions"></i><i class="acymicon-delete acym__wysid__element__toolbox__actions acym__wysid__element__toolbox__delete"></i></div>')}),acym_editorWysidToolbox.setRefreshAfterToolbox(),acym_editorWysidContextModal.setBlockContextModalWYSID()},150)}},acym_editorWysidSelect={setSelect:function(){jQuery("#acym__wysid__right__toolbar__settings__font-family").select2({theme:"foundation",width:"100%"}),jQuery("#acym__wysid__right__toolbar__settings__font-size").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),jQuery("#acym__wysid__right__toolbar__settings__font--select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0})}},acym_editorWysidTest={toggleSendTest:function(){var e=jQuery("#acym__wysid__send__test"),t=jQuery("#acym__wysid__right-toolbar");jQuery("#acym__wysid__test__button").off("click").on("click",function(){acym_editorWysidTest.toggleSendTestAndRightToolbar(e,t),jQuery(window).on("mousedown",function(i){if(jQuery(i.target).closest("#acym__wysid__send__test").length>0)return!0;acym_editorWysidTest.toggleSendTestAndRightToolbar(e,t)})}),jQuery(".acym__wysid__send__test-close").off("click").on("click",function(){acym_editorWysidTest.toggleSendTestAndRightToolbar(e,t)})},toggleSendTestAndRightToolbar:function(e,t){jQuery(window).off("mousedown"),e.hasClass("acym__wysid__show")?(e.removeClass("acym__wysid__show"),t.removeClass("acym__wysid__hidden")):(e.addClass("acym__wysid__show"),t.addClass("acym__wysid__hidden"))},sendTestAjax:function(){jQuery("#acym__wysid__send__test__button").off("click").on("click",function(){return jQuery(this).attr("disabled","true"),jQuery(".acym__wysid__send__test__icon").hide(),jQuery(".acym__wysid__send__test__icon__loader").show(),acym_editorWysidFormAction.setThumbnailPreSave().then(function(e){jQuery("#editor_thumbnail").attr("value",e),acym_editorWysidFormAction.saveTemplate(!0)}).catch(function(e){acym_editorWysidFormAction.saveTemplate(!0),console.error("Error generating template thumbnail: "+e)}),!0})},sendTest:function(e){var t=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=sendTest&id="+e+"&controller="+jQuery('[name="ctrl"]').val()+"&test_emails="+encodeURIComponent(jQuery("#acym__test__field").val().join(","));jQuery.post(t,function(e){(e=acym_helper.parseJson(e)).message=e.message.replace(/<.*?>/gm," ");var t="error"===e.level;acym_editorWysidNotifications.addEditorNotification(e,!t&&3e3,!t),jQuery(".acym__wysid__send__test__icon").show(),jQuery(".acym__wysid__send__test__icon__loader").hide(),jQuery("#acym__wysid__send__test__button").removeAttr("disabled"),"info"===e.level&&jQuery(".acym__wysid__send__test-close").click()})}},acym_editorWysidTinymce={addTinyMceWYSID:function(){jQuery('[id^="mce_"]').removeAttr("id"),tinymce.remove(),tinymce.init({relative_urls:!1,selector:".acym__wysid__tinymce--text",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code acydtext noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px=10px 12px=12px 14px=14px 16px=16px 18px=18px 20px=20px 24px=24px 28px=28px 30px=30px 34px=34px 36px=36px",toolbar:["undo redo formatselect fontsizeselect | code acydtext","alignleft aligncenter alignright | bold italic | forecolor backcolor | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(e){e.on("click",function(){acym_editorWysidToolbox.setDeleteAlltoolbox()}),e.off("change").on("change",function(e){acym_editorWysidFontStyle.setAllHtmlElementStyleWYSID()}),e.on("blur",function(e){e.target.startContent!==e.target.bodyElement.innerHTML&&acym_editorWysidVersioning.setUndoAndAutoSave(),acym_editorWysidRowSelector.setRowSelector()})}}),tinymce.execCommand("mceAddEditor",!0,""),tinymce.init({selector:".acym__wysid__tinymce--image",inline:!0,menubar:!1,plugins:"image nonbreaking",toolbar:[],image_class_list:[{title:"Responsive",value:"img-responsive"}],preview_styles:!1,init_instance_callback:function(e){acym_editorWysidImage.setDoubleClickImage();var t=jQuery(e.getElement()).find("img");e.on("click",function(e){acym_helperEditorWysid.timeClickImage=(new Date).getTime(),acym_editorWysidToolbox.setDeleteAlltoolbox(),acym_editorWysidContextModal.setImageContextModal(t)}),e.on("blur",function(){acym_editorWysidRowSelector.setRowSelector(),acym_helperEditorWysid.removeBlankCharacters()})},formats:{alignleft:{selector:"img",styles:{float:"left",marginTop:"-10px",marginBottom:"10px"}},alignright:{selector:"img",styles:{float:"right",marginTop:"-10px",marginBottom:"10px"}}},style_formats:[{title:"Align left",format:"alignleft"},{title:"Align right",format:"alignright"}],themes:"modern"}),tinymce.execCommand("mceAddEditor",!0,"")}},acym_editorWysidToolbar={setRightToolbarWYSID:function(){jQuery(".acym__wysid__right__toolbar__tabs").off("click").on("click",function(){acym_editorWysidToolbar.setSlideRightToolbarWYSID(jQuery(this))}),jQuery(".acym__wysid__right__toolbar--menu .acym__wysid__right__toolbar__p").off("click").on("click",function(){jQuery(this).next().slideToggle(200),jQuery(this).hasClass("acym__wysid__right__toolbar__p__open")?(jQuery(this).removeClass("acym__wysid__right__toolbar__p__open"),jQuery(this).find("i").removeClass("acymicon-keyboard_arrow_up").addClass("acymicon-keyboard_arrow_down")):(jQuery(this).addClass("acym__wysid__right__toolbar__p__open"),jQuery(this).find("i").removeClass("acymicon-keyboard_arrow_down").addClass("acymicon-keyboard_arrow_up")),jQuery(this).toggleClass("acym__wysid__right__toolbar__last--text")})},setSlideRightToolbarWYSID:function(e){var t=jQuery("#"+jQuery(".acym__wysid__right__toolbar__selected").attr("data-attr-show")),i=jQuery("#"+e.attr("data-attr-show"));if(t.attr("id")!==i.attr("id")){var _=jQuery(".acym__wysid__right__toolbar__tabs");_.removeClass("acym__wysid__right__toolbar__selected");var o={hide:"",show:""};_.each(function(){return jQuery(this).attr("data-attr-show")===t.attr("id")?(o.hide="left",o.show="right",!1):jQuery(this).attr("data-attr-show")===i.attr("id")?(o.hide="right",o.show="left",!1):void 0}),e.addClass("acym__wysid__right__toolbar__selected"),t.hide("slide",{direction:o.hide},200,function(){i.show("slide",{direction:o.show},200,function(){acym_editorWysidToolbar.setRightToolbarWYSID()})})}}},acym_editorWysidToolbox={setRefreshAfterToolbox:function(){jQuery(".acym__wysid__row__toolbox__copy").unbind("click").click(function(){jQuery(this).closest(".acym__wysid__row__element").clone().insertAfter(jQuery(this).closest(".acym__wysid__row__element")),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}),jQuery(".acym__wysid__row__toolbox__delete__row").off("click").on("click",function(){jQuery(this).closest(".acym__wysid__row__element").remove(),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}),jQuery(".acym__wysid__element__toolbox__copy").off("click").on("click",function(){var e=jQuery(this).closest(".acym__wysid__column__element");e.clone().insertAfter(e),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}),jQuery(".acym__wysid__element__toolbox__delete").off("click").on("click",function(){var e=jQuery(this).closest(".acym__wysid__column__element");acym_editorWysidContextModal.hideContextModal(jQuery(".acym__wysid__context__modal")),e.remove(),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()}),acym_editorWysidToolbox.resizeRows(),acym_editorWysidDragDrop.setRowElementSortableWYSID(),acym_editorWysidDragDrop.setColumnElementDraggableWYSID()},resizeRows:function(){jQuery(".acym__wysid__row__toolbox__height").off("mousedown").on("mousedown",function(){acym_helperEditorWysid.clicking=!0,acym_helperEditorWysid.$resizingElement=jQuery(this).closest("table").css({"border-collapse":"initial","border-spacing":""}),jQuery(document).on("mousemove",function(e){if(acym_helperEditorWysid.clicking){var t=acym_helperEditorWysid.$resizingElement.offset().top,i=e.pageY-(t-10);acym_helperEditorWysid.$resizingElement.find("th:first").height(i).attr("height",i),acym_helperEditorWysid.$resizingElement.find(".acym__wysid__row__selector").css("height",acym_helperEditorWysid.$resizingElement.css("height"))}}),jQuery(document).off("mouseup").on("mouseup",function(){acym_helperEditorWysid.clicking=!1,jQuery(this).off("mousdown"),acym_editorWysidRowSelector.setRowSelector()})})},setDeleteAlltoolbox:function(){jQuery(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove()}},acym_editorWysidVersioning={keepOldVersion:function(e){var t='<div id="acym__wysid__template" class="cell">'+e+"</div>";jQuery("#editor_autoSave").val(""),jQuery("#acym__wysid__top-toolbar__keep").off("click").on("click",function(){jQuery(".acym__wysid__hidden__save__content").val(t),jQuery("#acym__wysid #acym__wysid__template").replaceWith(t),acym_helperEditorWysid.setColumnRefreshUiWYSID(),jQuery("#acym__wysid__top-toolbar__notification__close").click()})},setUndoAndAutoSave:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!e&&jQuery(".acym__autosave__notification").length&&acym_editorWysidNotifications.hideNotification();var t=jQuery('[id^="template_version_"]');t.length>=10&&t[0].remove();for(var i=acym_helperEditorWysid.versionControl+1;jQuery("#template_version_"+i).length>0;)jQuery("#template_version_"+i).remove(),i++;acym_helperEditorWysid.versionControl++,jQuery('[name^="mce_"]').remove(),jQuery(".acym__wysid__column--drag-start").removeClass("acym__wysid__column--drag-start"),jQuery(".acym__editor__area").append('<input type="hidden" value="" id="template_version_'+acym_helperEditorWysid.versionControl+'">');var _=jQuery("#acym__wysid__template"),o=_.html();if(jQuery("#template_version_"+(acym_helperEditorWysid.versionControl-1)).val()===o)return!1;jQuery("#template_version_"+acym_helperEditorWysid.versionControl).val(o);var a=jQuery("#acym__campaign__recipients__form__campaign");if(0==a.length||a.length>0&&0!=a.val()){var s=_.contents().clone();s.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),s=s[0].outerHTML;var n=jQuery("#editor_mailid").val();if(null!=n&&""!=n&&0!=n&&0==e){var r=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlMails+"&task=autoSave";jQuery.ajax({type:"POST",url:r,data:{autoSave:s,mailId:n},success:function(e){},error:function(){console.log(ACYM_JS_TXT.ACYM_ERROR_SAVING)}})}}},checkForUnsavedVersion:function(){var e=jQuery("#editor_autoSave").val();null!=e&&""!=e&&(acym_editorWysidNotifications.addEditorNotification({message:'<div class="cell auto acym__autosave__notification">'+ACYM_JS_TXT.ACYM_AUTOSAVE_USE+'</div><div class="cell shrink" id="acym__wysid__top-toolbar__keep"><i class="acymicon-check-circle"></i></div>',level:"info"}),acym_editorWysidVersioning.keepOldVersion(e))},setVersionControlCtrlZ:function(){jQuery(document).keydown(function(e){jQuery("#acym__wysid__editor__source").height()>0||void 0!==tinyMCE.focusedEditor&&null!==tinyMCE.focusedEditor||jQuery("#acym__wysid__context__button").is(":visible")||jQuery("#acym__wysid__context__follow").is(":visible")||jQuery("#acym__wysid__context__separator").is(":visible")||jQuery("#acym__wysid__context__share").is(":visible")||90!==e.which||!e.ctrlKey&&!e.metaKey||acym_helperEditorWysid.versionControl<=0||(e.shiftKey?e.shiftKey&&acym_editorWysidVersioning.makeVersionControlChangement(!1):acym_editorWysidVersioning.makeVersionControlChangement(!0))}),jQuery("#acym__wysid__top-toolbar__undo").off("click").on("click",function(){acym_editorWysidVersioning.makeVersionControlChangement(!0)}),jQuery("#acym__wysid__top-toolbar__redo").off("click").on("click",function(){acym_editorWysidVersioning.makeVersionControlChangement(!1)})},makeVersionControlChangement:function(e){var t=jQuery("#template_version_"+(acym_helperEditorWysid.versionControl+1)),i=jQuery("#template_version_"+(acym_helperEditorWysid.versionControl-1));if(e){if(i.length>0&&0===i.val().length)return;acym_helperEditorWysid.versionControl--,jQuery("#acym__wysid__template").html(jQuery("#template_version_"+acym_helperEditorWysid.versionControl).val()),0===acym_helperEditorWysid.versionControl&&acym_editorWysidVersioning.setUndoAndAutoSave()}else{if(t.length>0&&0===t.val().length)return;acym_helperEditorWysid.versionControl++,jQuery("#acym__wysid__template").html(jQuery("#template_version_"+acym_helperEditorWysid.versionControl).val())}acym_helperEditorWysid.setColumnRefreshUiWYSID()}},acym_editorWysidWordpress={addMediaWPWYSID:function(e,t){var i,_=jQuery(e).html();t=void 0!==t&&t,(i=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var _=i.state().get("selection").first().toJSON(),o=!0;if(_.url.indexOf("..")>=0&&(o=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),o)if(t){var a=jQuery(e).css("padding-top");jQuery(e).hasClass("acym__wysid__template__content")?(jQuery(e).attr("style","background-image: url('"+_.url+"'); background-size: cover; background-position: center top; background-repeat: no-repeat; padding: "+a+" 0 40px 0"),"none"!==jQuery(e).css("background-image")&&jQuery("#acym__wysid__background-image__template-delete").css("display","flex")):(jQuery(e).css("background-color","").attr("bgcolor",""),jQuery(e).attr("style","background-image: url('"+_.url+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+a+" 0").attr("width",jQuery(e).width())),acym_editorWysidNotifications.addEditorNotification({message:ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,level:"warning"})}else{var s='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';s+='<td class="large-12 acym__wysid__column__element__td">',s+='<div class="acym__wysid__tinymce--image">',s+='<img class="acym__wysid__media__inserted acym__wysid__media__inserted--focus" src="'+_.url+'" title="'+acym_helper.escape(_.title)+'" alt="'+acym_helper.escape(_.alt)+'" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;"/>',s+="</div>",s+="</td>",s+="</tr>",jQuery(e).replaceWith(s),jQuery(".acym__wysid__media__inserted--focus").on("load",function(){jQuery(this).removeClass("acym__wysid__media__inserted--focus"),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave()})}else t||(jQuery(e).replaceWith(""),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave())}),i.on("escape",function(){t||(-1!==_.indexOf("insert_photo")&&jQuery(e).replaceWith(""),acym_helperEditorWysid.setColumnRefreshUiWYSID(),acym_editorWysidVersioning.setUndoAndAutoSave())}),i.open()}};