/**
 * @package    AcyMailing for Joomla
 * @version    6.1.5
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(t){t(".acym__templates__filter__tags").select2({theme:"foundation",width:"100%"}),t("#acym__template__type").select2({theme:"foundation",width:"100%"}),t(".acym__templates__choose__type-templates .button").click(function(){t(this).siblings().removeClass("is-active"),t(this).addClass("is-active")}),t.setTemplateModal(),function(){if(t("#acym__wysid__edit__button").length>0){var _=!1;t(".acym__template__prevent__unload").on("click",function(e){_=!0,function(_){var e=t("#editor_thumbnail"),a=t('[name="thumbnail"]'),i=AJAX_URL_ACYM+"&ctrl=mails&task=setNewThumbnail";if(""===e.val()&&""!==a.val())return e.val(a.val()),void _.click();""!==e.val()&&void 0!==e.val()||t.setThumbnail(),""===a.val()&&""===e.val()?(e.val(""),_.click()):t.ajax({type:"POST",url:i,data:{content:e.val(),thumbnail:a.val()},success:function(t){e.val(t),_.click()}})}(t("#data_"+t(this).attr("id")))}),t(window).on("beforeunload",function(){if(!_)return""})}}(),t("#acym__template__type").on("change",function(){"standard"!=t(this).val()?t('input[name="mail[subject]"]').attr("required","required"):t('input[name="mail[subject]"]').removeAttr("required")}),t(".acym__create__template").off("click").on("click",function(){t("#acym_create_template_type_editor").val(t(this).attr("data-editor")),t('input[name="task"]').val(t(this).attr("data-task")),t("#formSubmit").click()}),t(".mails_listing").length>0?(t.introContent=[{element:'[data-editor="acyEditor"]',text:ACYM_JS_TXT.ACYM_INTRO_CREATE_DD},{element:'[data-editor="html"]',text:ACYM_JS_TXT.ACYM_INTRO_CREATE_HTML}],t.setIntrojs("mail_listing")):t(".mails_edit").length>0&&(t("#acym__wysid__edit__button").on("click",function(){t.introContent=[{element:"table.body",text:ACYM_JS_TXT.ACYM_INTRO_TEMPLATE},{element:".acym__wysid__right__toolbar__blocks",text:ACYM_JS_TXT.ACYM_INTRO_DRAG_BLOCKS},{element:".acym__wysid__right__toolbar__contents",text:ACYM_JS_TXT.ACYM_INTRO_DRAG_CONTENT},{element:"#acym__wysid__right__toolbar__settings__tab",text:ACYM_JS_TXT.ACYM_INTRO_SETTINGS}],t.setIntrojs("mail_editor_content")}),t("#acym__wysid__right__toolbar__settings__tab").on("click",function(){setTimeout(function(){t.introContent=[{element:".acym__wysid__right__toolbar__design",text:ACYM_JS_TXT.ACYM_INTRO_CUSTOMIZE_FONT},{element:"#acym__wysid__right__toolbar__settings__stylesheet__open",text:ACYM_JS_TXT.ACYM_INTRO_IMPORT_CSS}],t.setIntrojs("mail_editor_settings")},500)})),t("#acym__wysid__edit__button").length<1&&t("#acym__mail__edit__html__stylesheet__container").show()});