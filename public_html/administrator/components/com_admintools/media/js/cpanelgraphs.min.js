/*
 Copyright (c)2010-2018 Nicholas K. Dionysopoulos / Akeeba Ltd
  @license GNU General Public License version 3, or later
*/
"undefined"==typeof admintools.ControlPanel&&(admintools.ControlPanel={graph:{from:"",to:"",exceptPoints:[],subsPoints:[],typePoints:[]},plots:[null,null]});
(function(b){admintools.ControlPanel.loadGraphs=function(){admintools.ControlPanel.graph.from=document.getElementById("admintools_graph_datepicker").value;var a=new Date(admintools.ControlPanel.graph.from),a=new Date(a.getTime()+2592E6),a=new Date(a.getUTCFullYear()+"-"+(a.getUTCMonth()+1)+"-"+a.getUTCDate());admintools.ControlPanel.graph.to=a.toISOString().slice(0,10);admintools.ControlPanel.graph.lineLabels=[];admintools.ControlPanel.graph.pieLabels=[];admintools.ControlPanel.graph.exceptPoints=
[];admintools.ControlPanel.graph.typePoints=[];b("#admintoolsExceptionsPieChart").hide();b("#akthrobber2").show();b("#admintoolsExceptionsLineChart").hide();b("#akthrobber").show();admintools.ControlPanel.loadExceptionsLineGraph()};admintools.ControlPanel.loadExceptionsLineGraph=function(){b.getJSON("index.php?option=com_admintools&view=SecurityExceptions&datefrom="+admintools.ControlPanel.graph.from+"&dateto="+admintools.ControlPanel.graph.to+"&groupbydate=1&savestate=0&format=json&limit=0&limitstart=0",
function(a){b.each(a,function(a,b){admintools.ControlPanel.graph.lineLabels.push(b.date);admintools.ControlPanel.graph.exceptPoints.push(parseInt(100*b.exceptions)/100)});b("#akthrobber").hide();a=b("#admintoolsExceptionsLineChart");a.show();0===admintools.ControlPanel.graph.exceptPoints.length?(a.hide(),b("#admintoolsExceptionsLineChartNoData").show()):admintools.ControlPanel.renderExceptionsLineGraph();admintools.ControlPanel.loadExceptionsPieGraph()})};admintools.ControlPanel.loadExceptionsPieGraph=
function(){b.getJSON("index.php?option=com_admintools&view=SecurityExceptions&datefrom="+admintools.ControlPanel.graph.from+"&dateto="+admintools.ControlPanel.graph.to+"&groupbydate=0&groupbytype=1&savestate=0&format=json&limit=0&limitstart=0",function(a){b.each(a,function(a,b){admintools.ControlPanel.graph.pieLabels.push(b.reason);admintools.ControlPanel.graph.typePoints.push(parseInt(100*b.exceptions)/100)});console.log();b("#akthrobber2").hide();a=b("#admintoolsExceptionsPieChart");a.show();0===
admintools.ControlPanel.graph.typePoints.length?(a.hide(),b("#admintoolsExceptionsPieChartNoData").show()):admintools.ControlPanel.renderExceptionsPieGraph()})};admintools.ControlPanel.renderExceptionsLineGraph=function(){new Chart(document.getElementById("admintoolsExceptionsLineChart"),{type:"line",data:{labels:admintools.ControlPanel.graph.lineLabels,datasets:[{data:admintools.ControlPanel.graph.exceptPoints,fill:!1,borderColor:"rgb(75, 192, 192)",lineTension:0.1}]},options:{legend:{display:!1},
scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})};admintools.ControlPanel.renderExceptionsPieGraph=function(){new Chart(document.getElementById("admintoolsExceptionsPieChart"),{type:"pie",data:{labels:admintools.ControlPanel.graph.pieLabels,datasets:[{backgroundColor:"#40B5B8 #E2363C #514F50 #92CF3B #F0AD4E #EFEFEF yellow green purple".split(" "),data:admintools.ControlPanel.graph.typePoints,fill:!1,borderColor:"rgb(75, 192, 192)",lineTension:0.1}]},options:{legend:{position:"right"}}})};admintools.ControlPanel.warnBeforePurgingSessions=
function(a){if(!confirm(Joomla.JText._("COM_ADMINTOOLS_LBL_DATABASETOOLS_PURGESESSIONS_WARN")))return a.preventDefault(),!1};admintools.ControlPanel.showChangelog=function(){b("#akeeba-changelog").modal("show")};admintools.ControlPanel.showUnblockMyself=function(){b.ajax("index.php?option=com_admintools&view=ControlPanel&task=selfblocked&tmpl=component",{data:{ip:admintools.ControlPanel.myIP},success:function(a){if(1==a.match(/###([\s\S]*?)###/)[1]){a=b("#selfBlocked");var c=a.find("a");c.attr("href",
c.attr("href")+"&ip="+admintools.ControlPanel.myIP);a.show()}}})};admintools.ControlPanel.showUpdateInformation=function(){b.ajax("index.php?option=com_admintools&view=ControlPanel&task=updateinfo&tmpl=component",{success:function(a,c,d){data=a.match(/###([\s\S]*?)###/)[1];data.length&&b("#updateNotice").html(data)}})};b(document).ready(function(a){admintools.ControlPanel.loadGraphs();admintools.ControlPanel.showUnblockMyself();admintools.ControlPanel.showUpdateInformation();a("#admintools_graph_reload").click(admintools.ControlPanel.loadGraphs);
a("#optimize").click(admintools.ControlPanel.warnBeforePurgingSessions)})})(akeeba.jQuery); //# sourceMappingURL=cpanelgraphs.min.map
